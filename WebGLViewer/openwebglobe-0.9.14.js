function aa(a){throw a;}var h=void 0,j=!0,k=null,n=!1;function p(){return function(){}}function da(a){return function(b){this[a]=b}}function ea(a){return function(){return this[a]}}function fa(a){return function(){return a}}var r,t=this;function ia(a){for(var a=a.split("."),b=t,c;c=a.shift();)if(b[c]!=k)b=b[c];else return k;return b}
function ja(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function w(a){return a!==h}function ka(a){return"array"==ja(a)}function la(a){var b=ja(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ma(a){return"string"==typeof a}function na(a){return"function"==ja(a)}function oa(a){var b=typeof a;return"object"==b&&a!=k||"function"==b}function qa(a){return a[ra]||(a[ra]=++sa)}var ra="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),sa=0;
function ua(a,b,c){return a.call.apply(a.bind,arguments)}function ya(a,b,c){a||aa(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function za(a,b,c){za=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ua:ya;return za.apply(k,arguments)}var Aa=Date.now||function(){return+new Date};
function x(a,b){var c=a.split("."),d=t;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&w(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function Ba(a,b){function c(){}c.prototype=b.prototype;a.Sf=b.prototype;a.prototype=new c;a.prototype.constructor=a};var y=0,A=1,Ca=2,Da=3,Ea=4,Fa=5,Ga=6,Ha=7,Ia=8,Ja=9,Ka=10,La=11,Ma=12,Na=13,Oa=14,Pa=15,Qa=16,Ra=17,Sa=18,Ta=19,Ua=20,Va=21,Wa=22,Xa=23,Ya=24,Za=65533,$a=65534,ab=25,bb=26,cb=65535;x("OG_OBJECT_CONTEXT",y);x("OG_OBJECT_SCENE",A);x("OG_OBJECT_WORLD",Ca);x("OG_OBJECT_IMAGELAYER",Da);x("OG_OBJECT_ELEVATIONLAYER",Ea);x("OG_OBJECT_WAYPOINTLAYER",Fa);x("OG_OBJECT_GEOMETRYLAYER",Ha);x("OG_OBJECT_POILAYER",Ga);x("OG_OBJECT_VOXELLAYER",Ia);x("OG_OBJECT_VECTORLAYER",Ja);x("OG_OBJECT_IMAGE",Ka);
x("OG_OBJECT_TEXTURE",La);x("OG_OBJECT_PIXELBUFFER",Ma);x("OG_OBJECT_GEOMETRY",Na);x("OG_OBJECT_MESH",Oa);x("OG_OBJECT_SURFACE",Pa);x("OG_OBJECT_VECTOR",Qa);x("OG_OBJECT_CAMERA",Ra);x("OG_OBJECT_TEXT",Sa);x("OG_OBJECT_BINARYDATA",Ta);x("OG_OBJECT_LIGHT",Ua);x("OG_OBJECT_NAVIGATIONCONTROLLER",Va);x("OG_OBJECT_POI",Wa);x("OG_OBJECT_BILLBOARD",Xa);x("OG_OBJECT_BILLBOARDLAYER",Ya);x("OG_OBJECT_AOEIMAGELAYER",Za);x("OG_OBJECT_AOEIMAGE",$a);x("OG_OBJECT_POINTSPRITE",ab);x("OG_OBJECT_EARTHPOLYLINE",bb);
x("OG_OBJECT_INVALID",cb);x("OG_RENDEREFFECT_RGB",0);x("OG_RENDEREFFECT_CHROMADEPTH",1);var db=1,eb=2,fb=3,gb=4;x("OG_SCENE_3D_ELLIPSOID_WGS84",db);x("OG_SCENE_3D_FLAT_CARTESIAN",eb);x("OG_SCENE_2D_SCREEN",fb);x("OG_SCENE_CUSTOM",gb);x("OG_NAVIGATIONMODE_GLOBE",0);x("OG_NAVIGATIONMODE_FLIGHT",1);x("OG_NAVIGATIONMODE_CONSTRAINED",2);x("OG_NAVIGATIONMODE_DYNAMIC",3);var hb=1,ib=2;x("OG_OBJECT_READY",hb);x("OG_OBJECT_BUSY",ib);x("OG_OBJECT_FAILED",3);var jb=[];function B(a){if(-1==a)return k;for(var b=0;b<jb.length;b++)if(jb[b].id==a)return jb[b];return k}function D(){this.parent=k;this.name="ogObject";this.type=cb;this.id=-1;this.status=hb;this.N=this.O=k}D.prototype.mb=p();function E(a){for(var a=a.id,b=0;b<jb.length;b++)if(jb[b].id==a){jb[b].mb();jb.splice(b,1);break}}D.prototype.Na=p();function kb(a,b){for(var c=1;c<arguments.length;c++)var d=(""+arguments[c]).replace(/\$/g,"$$$$"),a=a.replace(/\%s/,d);return a}function lb(a,b){return a.replace(/(\r\n|\r|\n)/g,b?"<br />":"<br>")}function mb(a){if(!nb.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(ob,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(pb,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(qb,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(rb,"&quot;"));return a}var ob=/&/g,pb=/</g,qb=/>/g,rb=/\"/g,nb=/[&<>\"]/;
function sb(a){return lb(a.replace(/  /g," &#160;"),h)};var tb,ub,vb,wb,xb;function yb(){return t.navigator?t.navigator.userAgent:k}wb=vb=ub=tb=n;var zb;if(zb=yb()){var Ab=t.navigator;tb=0==zb.indexOf("Opera");ub=!tb&&-1!=zb.indexOf("MSIE");vb=!tb&&-1!=zb.indexOf("WebKit");wb=!tb&&!vb&&"Gecko"==Ab.product}var Bb=tb,Cb=ub,Db=wb,Eb=vb,Fb,Gb=t.navigator;Fb=Gb&&Gb.platform||"";xb=-1!=Fb.indexOf("Mac");var Hb=-1!=Fb.indexOf("Win"),Ib;
a:{var Jb="",Kb;if(Bb&&t.opera)var Lb=t.opera.version,Jb="function"==typeof Lb?Lb():Lb;else if(Db?Kb=/rv\:([^\);]+)(\)|;)/:Cb?Kb=/MSIE\s+([^\);]+)(\)|;)/:Eb&&(Kb=/WebKit\/(\S+)/),Kb)var Mb=Kb.exec(yb()),Jb=Mb?Mb[1]:"";if(Cb){var Nb,Ob=t.document;Nb=Ob?Ob.documentMode:h;if(Nb>parseFloat(Jb)){Ib=""+Nb;break a}}Ib=Jb}var Pb={};
function Qb(a){var b;if(!(b=Pb[a])){b=0;for(var c=(""+Ib).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=(""+a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",i=d[f]||"",l=RegExp("(\\d*)(\\D*)","g"),m=RegExp("(\\d*)(\\D*)","g");do{var o=l.exec(g)||["","",""],s=m.exec(i)||["","",""];if(0==o[0].length&&0==s[0].length)break;b=((0==o[1].length?0:parseInt(o[1],10))<(0==s[1].length?0:parseInt(s[1],10))?-1:(0==o[1].length?0:parseInt(o[1],
10))>(0==s[1].length?0:parseInt(s[1],10))?1:0)||((0==o[2].length)<(0==s[2].length)?-1:(0==o[2].length)>(0==s[2].length)?1:0)||(o[2]<s[2]?-1:o[2]>s[2]?1:0)}while(0==b)}b=Pb[a]=0<=b}return b}var Rb={};function Sb(){return Rb[9]||(Rb[9]=Cb&&!!document.documentMode&&9<=document.documentMode)};function Tb(a,b){for(var c in a)b.call(h,a[c],c,a)}function Ub(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}var Vb="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");function Wb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Vb.length;f++)c=Vb[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function Xb(a){this.stack=Error().stack||"";a&&(this.message=""+a)}Ba(Xb,Error);Xb.prototype.name="CustomError";function Yb(a,b){b.unshift(a);Xb.call(this,kb.apply(k,b));b.shift()}Ba(Yb,Xb);Yb.prototype.name="AssertionError";function Zb(a,b){aa(new Yb("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1)))};var $b=Array.prototype,ac=$b.indexOf?function(a,b,c){return $b.indexOf.call(a,b,c)}:function(a,b,c){c=c==k?0:0>c?Math.max(0,a.length+c):c;if(ma(a))return!ma(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},bc=$b.forEach?function(a,b,c){$b.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ma(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)};function cc(a){return $b.concat.apply($b,arguments)}
function dc(a){if(ka(a))return cc(a);for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}function ec(a,b,c){return 2>=arguments.length?$b.slice.call(a,b):$b.slice.call(a,b,c)};var fc="StopIteration"in t?t.StopIteration:Error("StopIteration");function gc(){}gc.prototype.next=function(){aa(fc)};gc.prototype.Nj=function(){return this};function hc(a){if(a instanceof gc)return a;if("function"==typeof a.Nj)return a.Nj(n);if(la(a)){var b=0,c=new gc;c.next=function(){for(;;){b>=a.length&&aa(fc);if(b in a)return a[b++];b++}};return c}aa(Error("Not implemented"))}
function ic(a,b){if(la(a))try{bc(a,b,h)}catch(c){c!==fc&&aa(c)}else{a=hc(a);try{for(;;)b.call(h,a.next(),h,a)}catch(d){d!==fc&&aa(d)}}};function jc(a,b){this.Qc={};this.xb=[];var c=arguments.length;if(1<c){c%2&&aa(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){if(a instanceof jc)c=a.Mi(),d=a.pk();else{var c=Ub(a),e=[],f=0;for(d in a)e[f++]=a[d];d=e}for(e=0;e<c.length;e++)this.set(c[e],d[e])}}r=jc.prototype;r.La=0;r.mj=0;r.Bf=ea("La");r.pk=function(){kc(this);for(var a=[],b=0;b<this.xb.length;b++)a.push(this.Qc[this.xb[b]]);return a};r.Mi=function(){kc(this);return this.xb.concat()};
r.i=function(a,b){if(this===a)return j;if(this.La!=a.Bf())return n;var c=b||lc;kc(this);for(var d,e=0;d=this.xb[e];e++)if(!c(this.get(d),a.get(d)))return n;return j};function lc(a,b){return a===b}r.clear=function(){this.Qc={};this.mj=this.La=this.xb.length=0};
function kc(a){if(a.La!=a.xb.length){for(var b=0,c=0;b<a.xb.length;){var d=a.xb[b];Object.prototype.hasOwnProperty.call(a.Qc,d)&&(a.xb[c++]=d);b++}a.xb.length=c}if(a.La!=a.xb.length){for(var e={},c=b=0;b<a.xb.length;)d=a.xb[b],Object.prototype.hasOwnProperty.call(e,d)||(a.xb[c++]=d,e[d]=1),b++;a.xb.length=c}}r.get=function(a,b){return Object.prototype.hasOwnProperty.call(this.Qc,a)?this.Qc[a]:b};
r.set=function(a,b){Object.prototype.hasOwnProperty.call(this.Qc,a)||(this.La++,this.xb.push(a),this.mj++);this.Qc[a]=b};r.Nj=function(a){kc(this);var b=0,c=this.xb,d=this.Qc,e=this.mj,f=this,g=new gc;g.next=function(){for(;;){e!=f.mj&&aa(Error("The map has changed since the iterator was created"));b>=c.length&&aa(fc);var g=c[b++];return a?g:d[g]}};return g};function mc(a){return nc(a||arguments.callee.caller,[])}
function nc(a,b){var c=[];if(0<=ac(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(oc(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){0<e&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=""+f;break;case "boolean":f=f?"true":"false";break;case "function":f=(f=oc(f))?f:"[fn]";break;default:f=typeof f}40<f.length&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(nc(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function oc(a){if(pc[a])return pc[a];a=""+a;if(!pc[a]){var b=/function ([^\(]+)/.exec(a);pc[a]=b?b[1]:"[Anonymous]"}return pc[a]}var pc={};function qc(a,b,c,d,e){this.reset(a,b,c,d,e)}qc.prototype.ek=k;qc.prototype.dk=k;var rc=0;qc.prototype.reset=function(a,b,c,d,e){"number"==typeof e||rc++;this.kn=d||Aa();this.td=a;this.Cm=b;this.wm=c;delete this.ek;delete this.dk};qc.prototype.Wh=da("td");function sc(a){this.so=a}sc.prototype.Vi=k;sc.prototype.td=k;sc.prototype.$j=k;sc.prototype.Fh=k;function tc(a,b){this.name=a;this.value=b}tc.prototype.toString=ea("name");var uc=new tc("SHOUT",1200),vc=new tc("SEVERE",1E3),wc=new tc("WARNING",900),xc=new tc("INFO",800),yc=new tc("CONFIG",700),zc=[new tc("OFF",Infinity),uc,vc,wc,xc,yc,new tc("FINE",500),new tc("FINER",400),new tc("FINEST",300),new tc("ALL",0)],Ac=k;
function Bc(a){if(!Ac){Ac={};for(var b=0,c;c=zc[b];b++)Ac[c.value]=c,Ac[c.name]=c}return Ac[a]||k}r=sc.prototype;r.getParent=ea("Vi");r.Wh=da("td");function Cc(a){if(a.td)return a.td;if(a.Vi)return Cc(a.Vi);Zb("Root logger has no level set.");return k}
r.log=function(a,b,c){if(a.value>=Cc(this).value){a=this.oo(a,b,c);b="log:"+a.Cm;t.console&&(t.console.timeStamp?t.console.timeStamp(b):t.console.markTimeline&&t.console.markTimeline(b));t.msWriteProfilerMark&&t.msWriteProfilerMark(b);for(b=this;b;){var c=b,d=a;if(c.Fh)for(var e=0,f=h;f=c.Fh[e];e++)f(d);b=b.getParent()}}};
r.oo=function(a,b,c){var d=new qc(a,""+b,this.so);if(c){d.ek=c;var e;var f=arguments.callee.caller;try{var g;var i=ia("window.location.href");if(ma(c))g={message:c,name:"Unknown error",lineNumber:"Not available",fileName:i,stack:"Not available"};else{var l,m,o=n;try{l=c.lineNumber||c.$o||"Not available"}catch(s){l="Not available",o=j}try{m=c.fileName||c.filename||c.sourceURL||i}catch(q){m="Not available",o=j}g=o||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,lineNumber:l,fileName:m,
stack:c.stack||"Not available"}:c}e="Message: "+mb(g.message)+'\nUrl: <a href="view-source:'+g.fileName+'" target="_new">'+g.fileName+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+mb(g.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+mb(mc(f)+"-> ")}catch(u){e="Exception trying to expose exception! You win, we lose. "+u}d.dk=e}return d};function Dc(a,b){a.log(wc,b,h)}r.info=function(a,b){this.log(xc,a,b)};var Ec={},Fc=k;function Gc(){Fc||(Fc=new sc(""),Ec[""]=Fc,Fc.Wh(yc))}
function F(a){Gc();var b;if(!(b=Ec[a])){b=new sc(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=F(a.substr(0,c));c.$j||(c.$j={});c.$j[d]=b;b.Vi=c;Ec[a]=b}return b};function Hc(){this.name="ogTexture";this.type=La;this.j=k;this.jn="";this.status=ib}Hc.prototype=new D;
Hc.prototype.Na=function(a){if(a==k)Dc(F("owg.ogTexture"),"** ERROR: no options for texture creation!");else if(this.parent==k)Dc(F("owg.ogTexture"),"** ERROR: no parent!");else if(this.parent.type!=A)Dc(F("owg.ogTexture"),"** ERROR: parent is not scene!");else if(a.url){var b=this;this.j=this.parent.parent.c.jj.pl(a.url,function(){b.status=hb;b.O&&b.O(b.id)},function(){b.status=3;b.N&&b.N(b.id)},n);this.jn=a.url}};
Hc.prototype.mb=function(){this.j&&(this.parent.parent.c.jj.rl(this.jn),this.j=k,this.status=3)};Hc.prototype.U=function(a,b,c){this.status==hb&&this.j&&(c!=k?this.j.U(a,b,c.z,c.angle,c.scalex,c.scaley,c.blend,c.invtexcoord,c.alpha):this.j.U(a,b))};var Ic=6378137,Jc=0.006694379990197,Kc=0.006739496742;function G(a){return 0.017453292519943295*a}function Lc(a){return 57.29577951308232*a}function Mc(a){for(var b=1;a>b;)b*=2;return b};function Nc(){this.name="ogCamera";this.type=Ra;this.fc=this.pitch=this.Ta=this.$b=this.bc=this.cc=0}Nc.prototype=new D;r=Nc.prototype;r.mb=function(){this.fc=this.pitch=this.Ta=this.$b=this.bc=this.cc=0};r.ya=function(a,b,c){this.cc=a;this.bc=b;this.$b=c;this.parent.tf==this&&Oc(this).ya(a,b,c)};r.bf=function(){var a={};a.longitude=this.cc;a.latitude=this.bc;a.elevation=this.$b;return a};r.Cb=function(a,b,c){this.Ta=a;this.pitch=b;this.fc=c;this==this.parent.tf&&Oc(this).Cb(G(a),G(b),G(c))};
r.Sg=function(){var a={};a.yaw=this.Ta;a.pitch=this.pitch;a.roll=this.fc;return a};r.eh=function(a,b,c,d){this==this.parent.tf&&Oc(this).eh(a,b,c,d)};function Oc(a){var b=k,a=a.parent.parent.c;a.e&&a.e.S&&(b=a.e.S);return b}function Pc(a){var b=Oc(a),c=b.bf(),b=b.Sg();a.cc=c.longitude;a.bc=c.latitude;a.$b=c.elevation;a.Ta=Lc(b.Ta);a.pitch=Lc(b.pitch);a.fc=Lc(b.fc)};function I(a,b,c){a=a||0;b=b||0;c=c||0;this.a=[a,b,c];this.oc=new Float32Array([a,b,c])}r=I.prototype;r.q=function(a,b,c){this.a[0]=a;this.a[1]=b;this.a[2]=c};r.Oa=function(){this.oc[0]=this.a[0];this.oc[1]=this.a[1];this.oc[2]=this.a[2];return this.oc};r.Qg=ea("a");r.$e=function(){var a=new I;a.q(this.a[0],this.a[1],this.a[2]);return a};r.Bn=function(a){this.a[0]+=a.a[0];this.a[1]+=a.a[1];this.a[2]+=a.a[2];return this};r.Mj=function(a){this.a[0]-=a.a[0];this.a[1]-=a.a[1];this.a[2]-=a.a[2];return this};
r.Tn=function(a,b){this.a[0]=a.a[0]-b.a[0];this.a[1]=a.a[1]-b.a[1];this.a[2]=a.a[2]-b.a[2]};r.En=function(a){var b=this.a[0],c=this.a[1],d=this.a[2],e=a.a[0],f=a.a[1],a=a.a[2];this.a[0]=c*a-f*d;this.a[1]=d*e-a*b;this.a[2]=b*f-e*c;return this};function Qc(a,b,c){var d=b.a[0],e=b.a[1],b=b.a[2],f=c.a[0],g=c.a[1],c=c.a[2];a.a[0]=e*c-g*b;a.a[1]=b*f-c*d;a.a[2]=d*g-f*e}r.Fn=function(a){return this.a[0]*a.a[0]+this.a[1]*a.a[1]+this.a[2]*a.a[2]};
r.Aj=function(){var a=this.a[0],b=this.a[1],c=this.a[2];return Math.sqrt(a*a+b*b+c*c)};r.Sn=function(){var a=this.a[0],b=this.a[1],c=this.a[2];return a*a+b*b+c*c};r.Hc=function(){var a=this.Aj();0!=a&&(this.a[0]/=a,this.a[1]/=a,this.a[2]/=a);return this};r.Pn=function(){this.a[0]=-this.a[0];this.a[1]=-this.a[1];this.a[2]=-this.a[2];return this};r.ag=function(){return"["+this.a[0]+","+this.a[1]+","+this.a[2]+"]"};x("Cross",Qc);x("vec3",I);I.prototype.Add=I.prototype.Bn;I.prototype.Cross=I.prototype.En;
I.prototype.Dot=I.prototype.Fn;I.prototype.Get=I.prototype.Qg;I.prototype.Length=I.prototype.Aj;I.prototype.Neg=I.prototype.Pn;I.prototype.Normalize=I.prototype.Hc;I.prototype.Set=I.prototype.q;I.prototype.SquaredLength=I.prototype.Sn;I.prototype.Subtract=I.prototype.Tn;I.prototype.Sub=I.prototype.Mj;I.prototype.ToString=I.prototype.ag;function J(){this.a=Array(16);this.gi();this.oc=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}r=J.prototype;r.De=function(a){if(16==a.length)for(var b=0;16>b;b++)this.a[b]=a[b]};r.Oa=function(){for(var a=0;16>a;a++)this.oc[a]=this.a[a];return this.oc};r.Qg=ea("a");r.$e=function(){for(var a=new J,b=0;16>b;b++)a.a[b]=this.a[b];return a};r.ca=function(a){for(var b=0;16>b;b++)this.a[b]=a.a[b]};
r.gi=function(){this.a[0]=1;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=1;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=1;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};r.Un=function(){this.a[0]=0;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=0;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
r.fd=function(a,b,c){this.a[0]=1;this.a[4]=0;this.a[8]=0;this.a[12]=a;this.a[1]=0;this.a[5]=1;this.a[9]=0;this.a[13]=b;this.a[2]=0;this.a[6]=0;this.a[10]=1;this.a[14]=c;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};r.Bl=function(a,b,c,d){a.a[12]=b;a.a[13]=c;a.a[14]=d};r.Xd=function(a,b,c){this.a[0]=a;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=b;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=c;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1;return j};
r.Jj=function(a){var b=Math.sin(a),a=Math.cos(a);this.a[0]=1;this.a[1]=0;this.a[2]=0;this.a[3]=0;this.a[4]=0;this.a[5]=a;this.a[6]=b;this.a[7]=0;this.a[8]=0;this.a[9]=-b;this.a[10]=a;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};r.Fl=function(a){var b=Math.sin(a),a=Math.cos(a);this.a[0]=a;this.a[1]=0;this.a[2]=-b;this.a[3]=0;this.a[4]=0;this.a[5]=1;this.a[6]=0;this.a[7]=0;this.a[8]=b;this.a[9]=0;this.a[10]=a;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};
r.Gl=function(a){var b=Math.sin(a),a=Math.cos(a);this.a[0]=a;this.a[1]=b;this.a[2]=0;this.a[3]=0;this.a[4]=-b;this.a[5]=a;this.a[6]=0;this.a[7]=0;this.a[8]=0;this.a[9]=0;this.a[10]=1;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};
r.On=function(a,b,c,d,e,f,g,i,l){var m,o,s,q,d=a-d,e=b-e,f=c-f;q=1/Math.sqrt(d*d+e*e+f*f);d*=q;e*=q;f*=q;m=i*f-l*e;l=l*d-g*f;g=g*e-i*d;(q=Math.sqrt(m*m+l*l+g*g))?(q=1/q,m*=q,l*=q,g*=q):g=l=m=0;i=e*g-f*l;o=f*m-d*g;s=d*l-e*m;(q=Math.sqrt(i*i+o*o+s*s))?(q=1/q,i*=q,o*=q,s*=q):s=o=i=0;this.a[0]=m;this.a[4]=l;this.a[8]=g;this.a[12]=-(m*a+l*b+g*c);this.a[1]=i;this.a[5]=o;this.a[9]=s;this.a[13]=-(i*a+o*b+s*c);this.a[2]=d;this.a[6]=e;this.a[10]=f;this.a[14]=-(d*a+e*b+f*c);this.a[3]=0;this.a[7]=0;this.a[11]=
0;this.a[15]=1};
r.P=function(a,b){var c=a.a[0],d=a.a[1],e=a.a[2],f=a.a[3],g=a.a[4],i=a.a[5],l=a.a[6],m=a.a[7],o=a.a[8],s=a.a[9],q=a.a[10],u=a.a[11],v=a.a[12],z=a.a[13],C=a.a[14],R=a.a[15],X=b.a[0],O=b.a[1],ha=b.a[2],S=b.a[3],T=b.a[4],K=b.a[5],Y=b.a[6],Z=b.a[7],$=b.a[8],va=b.a[9],wa=b.a[10],xa=b.a[11],H=b.a[12],ba=b.a[13],ta=b.a[14],ca=b.a[15];this.a[0]=X*c+O*g+ha*o+S*v;this.a[1]=X*d+O*i+ha*s+S*z;this.a[2]=X*e+O*l+ha*q+S*C;this.a[3]=X*f+O*m+ha*u+S*R;this.a[4]=T*c+K*g+Y*o+Z*v;this.a[5]=T*d+K*i+Y*s+Z*z;this.a[6]=T*
e+K*l+Y*q+Z*C;this.a[7]=T*f+K*m+Y*u+Z*R;this.a[8]=$*c+va*g+wa*o+xa*v;this.a[9]=$*d+va*i+wa*s+xa*z;this.a[10]=$*e+va*l+wa*q+xa*C;this.a[11]=$*f+va*m+wa*u+xa*R;this.a[12]=H*c+ba*g+ta*o+ca*v;this.a[13]=H*d+ba*i+ta*s+ca*z;this.a[14]=H*e+ba*l+ta*q+ca*C;this.a[15]=H*f+ba*m+ta*u+ca*R};r.bg=function(){for(var a=this.$e(),b=0;4>b;b++)for(var c=0;4>c;c++)this.a[4*b+c]=a.a[4*c+b]};
r.Za=function(a){var b=new I;b.a[0]=this.a[0]*a.a[0]+this.a[4]*a.a[1]+this.a[8]*a.a[2]+this.a[12];b.a[1]=this.a[1]*a.a[0]+this.a[5]*a.a[1]+this.a[9]*a.a[2]+this.a[13];b.a[2]=this.a[2]*a.a[0]+this.a[6]*a.a[1]+this.a[10]*a.a[2]+this.a[14];a=this.a[3]*a.a[0]+this.a[7]*a.a[1]+this.a[11]*a.a[2]+this.a[15];b.a[0]/=a;b.a[1]/=a;b.a[2]/=a;return b};
r.In=function(a,b,c,d,e,f){var g=b-a,i=d-c,l=f-e;this.a[0]=2*e/g;this.a[4]=0;this.a[8]=(b+a)/g;this.a[12]=0;this.a[1]=0;this.a[5]=2*e/i;this.a[9]=(d+c)/i;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=-(f+e)/l;this.a[14]=-(2*f*e)/l;this.a[3]=0;this.a[7]=0;this.a[11]=-1;this.a[15]=0};
r.Cl=function(a,b,c,d){a=1/Math.tan(a*Math.PI/360);this.a[0]=a/b;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=a;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=(d+c)/(c-d);this.a[14]=2*d*c/(c-d);this.a[3]=0;this.a[7]=0;this.a[11]=-1;this.a[15]=0};
r.zl=function(a,b,c,d,e,f){var g=b-a,i=d-c,l=f-e;this.a[0]=2/g;this.a[1]=0;this.a[2]=0;this.a[3]=0;this.a[4]=0;this.a[5]=2/i;this.a[6]=0;this.a[7]=0;this.a[8]=0;this.a[9]=0;this.a[10]=-2/l;this.a[11]=0;this.a[12]=-(a+b)/g;this.a[13]=-(d+c)/i;this.a[14]=-(f+e)/l;this.a[15]=1};r.Al=function(a,b,c,d){this.zl(a,b,c,d,-1,1)};
r.Qd=function(a,b){var c=0.017453292519943295*a,d=0.017453292519943295*b,e=Math.sin(d),f=Math.sin(c),d=Math.cos(d),c=Math.cos(c);this.a[0]=-e*c;this.a[4]=-f;this.a[8]=-d*c;this.a[12]=0;this.a[1]=-e*f;this.a[5]=c;this.a[9]=-d*f;this.a[13]=0;this.a[2]=d;this.a[6]=0;this.a[10]=-e;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
r.Dn=function(a,b){var c=0.017453292519943295*a,d=0.017453292519943295*b,e=Math.sin(d),f=Math.sin(c),d=Math.cos(d),c=Math.cos(c);this.a[0]=-f;this.a[4]=c;this.a[8]=0;this.a[12]=0;this.a[1]=-e*c;this.a[5]=-e*f;this.a[9]=-d;this.a[13]=0;this.a[2]=d*c;this.a[6]=d*f;this.a[10]=e;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
r.ll=function(a,b){var c=0.017453292519943295*a,d=0.017453292519943295*b,e=Math.sin(d),f=Math.sin(c),d=Math.cos(d),c=Math.cos(c);this.a[0]=-f;this.a[4]=-e*c;this.a[8]=d*c;this.a[12]=0;this.a[1]=c;this.a[5]=-e*f;this.a[9]=d*f;this.a[13]=0;this.a[2]=0;this.a[6]=d;this.a[10]=e;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
r.Lg=function(a,b,c){var d=Math.cos(b),e=Math.cos(c),f=Math.cos(a),b=Math.sin(b),c=Math.sin(c),a=Math.sin(a);this.a[0]=d*f;this.a[4]=-e*a+c*b*f;this.a[8]=c*a+e*b*f;this.a[12]=0;this.a[1]=d*a;this.a[5]=e*f+c*b*a;this.a[9]=-c*f+e*b*a;this.a[13]=0;this.a[2]=-b;this.a[6]=c*d;this.a[10]=e*d;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
r.Gn=function(a){var b=this.a[0],c=this.a[4],d=this.a[1],e=this.a[5],f=this.a[2],g=this.a[6],i=this.a[10];1.0E-6>Math.abs(b)&&1.0E-6>Math.abs(d)?(a.pitch=-Math.PI/2,a.roll=0,a.yaw=Math.atan2(c,e)):(a.pitch=Math.atan2(-f,Math.sqrt(b*b+d*d)),a.roll=Math.atan2(d,b),a.yaw=Math.atan2(g,i))};
r.Ze=function(){this.a[0]=0;this.a[4]=0;this.a[8]=-1;this.a[12]=0;this.a[1]=1;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=-1;this.a[10]=0;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};r.rj=function(){this.a[0]=0;this.a[4]=1;this.a[8]=0;this.a[12]=0;this.a[1]=1;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=-1;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
r.Hn=function(a){var b=a[0],c=a[1],d=a[2],a=a[3],e=a*a,f=b*b,g=c*c,i=d*d;this.a[0]=e+f-g-i;this.a[4]=2*(b*c-a*d);this.a[8]=2*(b*d+a*c);this.a[12]=0;this.a[1]=2*(b*c+a*d);this.a[5]=e-f+g-i;this.a[9]=2*(c*d-a*b);this.a[13]=0;this.a[2]=2*(b*d-a*c);this.a[6]=2*(c*d+a*b);this.a[10]=e-f-g+i;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
r.Wf=function(a,b,c,d){var e=a*a,f=b*b,g=c*c,i=a*b,l=a*c,m=b*c,a=d*a,b=d*b,c=d*c;this.a[0]=1-2*f-2*g;this.a[4]=2*i+2*c;this.a[8]=2*l-2*b;this.a[12]=0;this.a[1]=2*i-2*c;this.a[5]=1-2*e-2*g;this.a[9]=2*m+2*a;this.a[13]=0;this.a[2]=2*l+2*b;this.a[6]=2*m-2*a;this.a[10]=1-2*e-2*f;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
r.Qn=function(){var a=this.a[0],b=this.a[4],c=this.a[8],d=this.a[1],e=this.a[5],f=this.a[9],g=this.a[2],i=this.a[6],l=this.a[10],m=a+e+l;0<m?(m=2*Math.sqrt(m+1),a=0.25*m,e=(i-f)/m,l=(c-g)/m,b=(d-b)/m):a>e&a>l?(m=2*Math.sqrt(1+a-e-l),a=(i-f)/m,e=0.25*m,l=(b+d)/m,b=(c+g)/m):e>l?(m=2*Math.sqrt(1+e-a-l),a=(c-g)/m,e=(b+d)/m,l=0.25*m,b=(f+i)/m):(m=2*Math.sqrt(1+l-a-e),a=(d-b)/m,e=(c+g)/m,l=(f+i)/m,b=0.25*m);return[e,l,b,a]};
r.ye=function(a){var b=a.a[0],c=a.a[1],d=a.a[2],e=a.a[3],f=a.a[4],g=a.a[5],i=a.a[6],l=a.a[7],m=a.a[8],o=a.a[9],s=a.a[10],q=a.a[11],u=a.a[12],v=a.a[13],z=a.a[14],a=a.a[15],C=1/(b*g*s*a+b*i*q*v+b*l*o*z+c*f*q*z+c*i*m*a+c*l*s*u+d*f*o*a+d*g*q*u+d*l*m*v+e*f*s*v+e*g*m*z+e*i*o*u-b*g*q*z-b*i*o*a-b*l*s*v-c*f*s*a-c*i*q*u-c*l*m*z-d*f*q*v-d*g*m*a-d*l*o*u-e*f*o*z-e*g*s*u-e*i*m*v);this.a[0]=(g*s*a+i*q*v+l*o*z-g*q*z-i*o*a-l*s*v)*C;this.a[4]=(f*q*z+i*m*a+l*s*u-f*s*a-i*q*u-l*m*z)*C;this.a[8]=(f*o*a+g*q*u+l*m*v-f*q*
v-g*m*a-l*o*u)*C;this.a[12]=(f*s*v+g*m*z+i*o*u-f*o*z-g*s*u-i*m*v)*C;this.a[1]=(c*q*z+d*o*a+e*s*v-c*s*a-d*q*v-e*o*z)*C;this.a[5]=(b*s*a+d*q*u+e*m*z-b*q*z-d*m*a-e*s*u)*C;this.a[9]=(b*q*v+c*m*a+e*o*u-b*o*a-c*q*u-e*m*v)*C;this.a[13]=(b*o*z+c*s*u+d*m*v-b*s*v-c*m*z-d*o*u)*C;this.a[2]=(c*i*a+d*l*v+e*g*z-c*l*z-d*g*a-e*i*v)*C;this.a[6]=(b*l*z+d*f*a+e*i*u-b*i*a-d*l*u-e*f*z)*C;this.a[10]=(b*g*a+c*l*u+e*f*v-b*l*v-c*f*a-e*g*u)*C;this.a[14]=(b*i*v+c*f*z+d*g*u-b*g*z-c*i*u-d*f*v)*C;this.a[3]=(c*l*s+d*g*q+e*i*o-c*
i*q-d*l*o-e*g*s)*C;this.a[7]=(b*i*q+d*l*m+e*f*s-b*l*s-d*f*q-e*i*m)*C;this.a[11]=(b*l*o+c*f*q+e*g*m-b*g*q-c*l*m-e*f*o)*C;this.a[15]=(b*g*s+c*i*m+d*f*o-b*i*o-c*f*s-d*g*m)*C};r.ag=function(){return"[ "+this.a[0]+" "+this.a[4]+" "+this.a[8]+" "+this.a[12]+"\n  "+this.a[1]+" "+this.a[5]+" "+this.a[9]+" "+this.a[13]+"\n  "+this.a[2]+" "+this.a[6]+" "+this.a[10]+" "+this.a[14]+"\n  "+this.a[3]+" "+this.a[7]+" "+this.a[11]+" "+this.a[15]+" ]"};x("mat4",J);J.prototype.CalcBodyFrame=J.prototype.Lg;
J.prototype.CalcNavigationFrame=J.prototype.Qd;J.prototype.Cami3d=J.prototype.Ze;J.prototype.CopyFrom=J.prototype.ca;J.prototype.Copy=J.prototype.$e;J.prototype.Frustum=J.prototype.In;J.prototype.Get=J.prototype.Qg;J.prototype.Identity=J.prototype.gi;J.prototype.Inverse=J.prototype.ye;J.prototype.LookAt=J.prototype.On;J.prototype.Multiply=J.prototype.P;J.prototype.MultiplyVec3=J.prototype.Za;J.prototype.Ortho2D=J.prototype.Al;J.prototype.Ortho=J.prototype.zl;J.prototype.OverwriteTranslation=J.prototype.Bl;
J.prototype.Perspective=J.prototype.Cl;J.prototype.RotationX=J.prototype.Jj;J.prototype.RotationY=J.prototype.Fl;J.prototype.RotationZ=J.prototype.Gl;J.prototype.Scale=J.prototype.Xd;J.prototype.SetFromArray=J.prototype.De;J.prototype.ToString=J.prototype.ag;J.prototype.Translation=J.prototype.fd;J.prototype.Transpose=J.prototype.bg;J.prototype.Zero=J.prototype.Un;J.prototype.CalcNavigationFrame2=J.prototype.Dn;J.prototype.CalcNavigationFrameZUp=J.prototype.ll;J.prototype.ExtractEulerAngles=J.prototype.Gn;
J.prototype.CamViewFrustum=J.prototype.rj;J.prototype.FromQuaternion=J.prototype.Hn;J.prototype.FromQuaternionComponents=J.prototype.Wf;J.prototype.Rot2Quat=J.prototype.Qn;function Rc(){this.ii=[];this.hi=[];this.Yf=[];this.Kb={};this.Kb.x=0;this.Kb.y=0;this.Kb.n=0;this.Md={};this.Md.longitude=0;this.Md.latitude=0;this.Md.elevation=0;this.nd=n;this.Wa=[0,0];this.Rc=-1;this.Bk=0;this.xa=Sc;this.pa=0}var Sc=0,Tc=1,Uc=2,Vc=3,Wc=4,Xc=5;Rc.prototype.ya=function(a,b,c){this.Kb.x=a;this.Kb.y=b;this.Kb.n=c};Rc.prototype.bf=ea("Kb");function Yc(a,b,c,d){a.Md.longitude=b;a.Md.latitude=c;a.Md.elevation=d};function Zc(){this.result={};this.result.J=0;this.result.Gc=0;this.result.Ed=0;this.Lb={};this.Lb.x=0;this.Lb.y=0;this.Lb.n=0;this.Mb={};this.Mb.x=0;this.Mb.y=0;this.Mb.n=0;this.pb={};this.pb.x=0;this.pb.y=0;this.pb.n=0;this.Vb={};this.Vb.x=0;this.Vb.y=0;this.Vb.n=0;this.Wb={};this.Wb.x=0;this.Wb.y=0;this.Pi=this.Ie=this.Wb.n=0;this.sl=2.220446049250313E-16}
Zc.prototype.yj=function(a,b,c,d,e,f,g,i,l,m,o,s,q,u,v){this.Lb.x=m-g;this.Lb.y=o-i;this.Lb.n=s-l;this.Mb.x=q-g;this.Mb.y=u-i;this.Mb.n=v-l;this.Vb.x=e*this.Mb.n-f*this.Mb.y;this.Vb.y=f*this.Mb.x-d*this.Mb.n;this.Vb.n=d*this.Mb.y-e*this.Mb.x;this.Ie=this.Lb.x*this.Vb.x+this.Lb.y*this.Vb.y+this.Lb.n*this.Vb.n;this.pb.x=a-g;this.pb.y=b-i;this.pb.n=c-l;this.Pi=1/this.Ie;this.Wb.x=this.pb.y*this.Lb.n-this.pb.n*this.Lb.y;this.Wb.y=this.pb.n*this.Lb.x-this.pb.x*this.Lb.n;this.Wb.n=this.pb.x*this.Lb.y-this.pb.y*
this.Lb.x;if(this.Ie>this.sl){this.result.Gc=this.pb.x*this.Vb.x+this.pb.y*this.Vb.y+this.pb.n*this.Vb.n;if(0>this.result.Gc||this.result.Gc>this.Ie)return k;this.result.Ed=d*this.Wb.x+e*this.Wb.y+f*this.Wb.n;if(0>this.result.Ed||this.result.Gc+this.result.Ed>this.Ie)return k}else if(this.Ie<-this.sl){this.result.Gc=this.pb.x*this.Vb.x+this.pb.y*this.Vb.y+this.pb.n*this.Vb.n;if(0<this.result.Gc||this.result.Gc<this.Ie)return k;this.result.Ed=d*this.Wb.x+e*this.Wb.y+f*this.Wb.n;if(0<this.result.Ed||
this.result.Gc+this.result.Ed<this.Ie)return k}else return k;this.result.J=this.Mb.x*this.Wb.x+this.Mb.y*this.Wb.y+this.Mb.n*this.Wb.n;this.result.Gc*=this.Pi;this.result.Ed*=this.Pi;this.result.J*=this.Pi;return this.result};x("TriangleIntersector",Zc);Zc.prototype.IntersectTriangle=Zc.prototype.yj;function $c(){this.$h=this.ai=this.Yh=this.Zh=0;this.Ki=1;this.result={Ue:0,Te:0}}
$c.prototype.Tg=function(a,b,c,d,e,f,g,i,l,m,o,s){this.Ki=1;0<=d?(this.result.Ue=(g-a)/d,this.result.Te=(m-a)/d):(this.result.Ue=(m-a)/d,this.result.Te=(g-a)/d);0<=e?(this.Zh=(i-b)/e,this.Yh=(o-b)/e):(this.Zh=(o-b)/e,this.Yh=(i-b)/e);if(this.result.Ue>this.Yh||this.Zh>this.result.Te)this.Ki=-1;this.Zh>this.result.Ue&&(this.result.Ue=this.Zh);this.Yh<this.result.Te&&(this.result.Te=this.Yh);0<=f?(this.ai=(l-c)/f,this.$h=(s-c)/f):(this.ai=(s-c)/f,this.$h=(l-c)/f);if(this.result.Ue>this.$h||this.ai>
this.result.Te)this.Ki=-1;this.ai>this.result.Ue&&(this.result.Ue=this.ai);this.$h<this.result.Te&&(this.result.Te=this.$h);return 0<this.Ki?this.result:k};x("AABB",$c);$c.prototype.HitBox=$c.prototype.Tg;function ad(a,b,c,d){a=a||0;b=b||0;c=c||0;d=d||0;this.a=[a,b,c,d];this.oc=new Float32Array([a,b,c,d])}ad.prototype.q=function(a,b,c,d){this.a[0]=a;this.a[1]=b;this.a[2]=c;this.a[3]=d};ad.prototype.Oa=function(){this.oc[0]=this.a[0];this.oc[1]=this.a[1];this.oc[2]=this.a[2];this.oc[3]=this.a[3];return this.oc};ad.prototype.Qg=ea("a");ad.prototype.ag=function(){return"["+this.a[0]+","+this.a[1]+","+this.a[2]+","+this.a[3]+"]"};x("vec4",ad);ad.prototype.Get=ad.prototype.Qg;ad.prototype.Set=ad.prototype.q;function bd(a){a=""+a;if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}aa(Error("Invalid JSON string: "+a))};function L(a){this.c=a;this.b=a.b;this.D=this.j=this.Nb=this.aa=k;this.mode="";this.dc=0;this.oe=this.R=k;this.Ha=n;this.$l=this.pe=this.V=k;this.gm=new ad;this.gm.q(1,1,1,1);this.hm=new ad;this.hm.q(1,1,1,1);this.Pc=new ad;this.Pc.q(1,1,1,1);this.Fc=new ad;this.Fc.q(1,0,0,1);this.pm=new Zc;this.Ga=this.ua=this.Z=k;this.vi=new $c;this.ja=k;this.Mh=this.T=0;this.t={};this.fe=Array(3);this.ee=Array(3);this.se=new J;this.Si=n;this.Db=-1}r=L.prototype;r.hf=function(a,b,c,d){this.Pc.q(a,b,c,d)};
function cd(a,b){0==b.length%3&&(a.D=new Float32Array(b),a.mode="p",a.T=3)}function dd(a,b){0==b.length%8&&(a.D=new Float32Array(b),a.mode="pnt",a.T=8)}function ed(a,b){0==b.length%7&&(a.D=new Float32Array(b),a.mode="pc",a.T=7)}function fd(a,b){0==b.length%5&&(a.D=new Float32Array(b),a.mode="pt",a.T=5)}function gd(a,b){0==b.length%12&&(a.D=new Float32Array(b),a.mode="pnct",a.T=12)}function hd(a,b){0==b.length%5&&(a.D=new Float32Array(b),a.mode="poi",a.T=5)}
function id(a,b,c){a.R=new Uint16Array(b);a.oe=c;a.dc=b.length;a.Ha=j;switch(c){case "TRIANGLES":a.Mh=b.length/3;break;case "TRIANGLESTRIP":a.Mh=b.length-2}}r.Mc=da("j");r.Ge=function(){this.aa=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,this.aa);this.b.bufferData(this.b.ARRAY_BUFFER,this.D,this.b.STATIC_DRAW);this.Nb=this.b.createBuffer();this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.Nb);this.b.bufferData(this.b.ELEMENT_ARRAY_BUFFER,this.R,this.b.STATIC_DRAW)};
r.r=function(){this.aa&&(this.b.deleteBuffer(this.aa),this.aa=k);this.Nb&&(this.b.deleteBuffer(this.Nb),this.Nb=k);this.Si?this.j.r():this.j=k;this.D=k;this.mode="";this.dc=0;this.oe=this.R=k};
r.ra=function(a,b,c,d,e){if(this.Ha){b=b||0;c=c||0;this.aa==k&&this.Ge();this.b.bindBuffer(this.b.ARRAY_BUFFER,this.aa);this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.Nb);this.ja&&(this.c.Jc(),this.se.P(this.ja,this.c.Pb),this.c.Lc(this.se));switch(this.mode){case "p":this.b.enableVertexAttribArray(0);this.b.vertexAttribPointer(0,3,this.b.FLOAT,n,12,0);jd(this.c.hb,this.c.va,this.Fc);break;case "pnt":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.enableVertexAttribArray(2);
this.b.vertexAttribPointer(0,3,this.b.FLOAT,n,32,0);this.b.vertexAttribPointer(1,3,this.b.FLOAT,n,32,12);this.b.vertexAttribPointer(2,2,this.b.FLOAT,n,32,24);var d=this.c.hb,e=this.c.vk,f=this.c.Jh,g=this.c.vd;d.Ub&&(d.b.useProgram(d.Ub),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Ub,"matModelView"),n,f.Oa()),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Ub,"matProjection"),n,g.Oa()),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Ub,"matNormal"),n,e.Oa()),d.b.uniform1i(d.b.getUniformLocation(d.Ub,
"uTexture"),0));break;case "pc":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,n,28,0);this.b.vertexAttribPointer(1,4,this.b.FLOAT,n,28,12);kd(this.c.hb,this.c.va,this.Pc);break;case "pt":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,n,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,n,20,12);d=this.c.hb;e=this.c.va;f=this.Pc;d.zc&&(d.b.useProgram(d.zc),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.zc,
"matMVP"),n,e.Oa()),d.b.uniform1i(d.b.getUniformLocation(d.zc,"uTexture"),0),d.b.uniform4fv(d.b.getUniformLocation(d.zc,"uColor"),f.Oa()));break;case "pnct":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.enableVertexAttribArray(2);this.b.enableVertexAttribArray(3);this.b.vertexAttribPointer(0,3,this.b.FLOAT,n,48,0);this.b.vertexAttribPointer(1,3,this.b.FLOAT,n,48,12);this.b.vertexAttribPointer(2,4,this.b.FLOAT,n,48,24);this.b.vertexAttribPointer(3,2,this.b.FLOAT,n,48,40);
d=this.c.hb;e=this.c.va;d.yc&&(d.b.useProgram(d.yc),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.yc,"matMVP"),n,e.Oa()));break;case "font":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,n,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,n,20,12);d==k&&(d=this.gm);e=this.c.hb;f=this.c.va;e.Sc&&(e.b.useProgram(e.Sc),e.b.uniformMatrix4fv(e.b.getUniformLocation(e.Sc,"matMVP"),n,f.Oa()),e.b.uniform4fv(e.b.getUniformLocation(e.Sc,"uColor"),
d.Oa()));break;case "poi":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,n,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,n,20,12);e==k&&(e=this.hm);d=this.c.hb;f=this.c.va;d.Uc&&(d.b.useProgram(d.Uc),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Uc,"matMVP"),n,f.Oa()),d.b.uniform4fv(d.b.getUniformLocation(d.Uc,"uColor"),e.Oa()));break;case "blur":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,
3,this.b.FLOAT,n,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,n,20,12);var d=this.c.hb,e=this.c.va,g=this.j.width,i=this.j.height;d.Tb&&(f=new Float32Array([-1,-1,0,-1,1,-1,-1,0,0,0,1,0,-1,1,0,1,1,1]),g=new Float32Array([1/g,1/i]),i=new Float32Array([1,2,1,2,4,2,1,2,1]),d.b.useProgram(d.Tb),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Tb,"matMVP"),n,e.Oa()),d.b.uniform2fv(d.b.getUniformLocation(d.Tb,"uInvTexSize"),g),d.b.uniform1fv(d.b.getUniformLocation(d.Tb,"uKernel"),i),d.b.uniform1i(d.b.getUniformLocation(d.Tb,
"uTexture"),0),d.b.uniform2fv(d.b.getUniformLocation(d.Tb,"uOffset"),f));break;case "pt_chroma":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,n,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,n,20,12);d=this.c.hb;e=this.c.va;f=this.c.Pb;d.Ac&&(d.b.useProgram(d.Ac),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Ac,"matM"),n,f.Oa()),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Ac,"matMVP"),n,e.Oa()),d.b.uniform1i(d.b.getUniformLocation(d.Ac,
"uTexture"),0));break;default:alert("unknown surface mode!!")}this.j&&(d=this.j,d.Xb&&(d.b.activeTexture(d.b.TEXTURE0),d.b.bindTexture(d.b.TEXTURE_2D,d.j)));switch(this.oe){case "TRIANGLES":a?this.b.drawElements(this.b.TRIANGLES,b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLES,this.dc,this.b.UNSIGNED_SHORT,0);break;case "TRIANGLESTRIP":a?this.b.drawElements(this.b.TRIANGLE_STRIP,b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLE_STRIP,this.dc,this.b.UNSIGNED_SHORT,0);break;
case "LINES":this.b.drawElements(this.b.LINES,this.dc,this.b.UNSIGNED_SHORT,0);break;case "POINTS":this.b.drawElements(this.b.POINTS,this.dc,this.b.UNSIGNED_SHORT,0);break;case "TRIANGLEFAN":a?this.b.drawElements(this.b.TRIANGLE_FAN,b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLE_FAN,this.dc,this.b.UNSIGNED_SHORT,0);break;default:alert("unknown indexsemantic")}this.ja&&this.c.Id();this.j&&(a=this.j,a.Xb&&a.b.bindTexture(a.b.TEXTURE_2D,k));this.b.disableVertexAttribArray(0);this.b.disableVertexAttribArray(1);
this.b.disableVertexAttribArray(2);this.b.disableVertexAttribArray(3)}};
r.hc=function(a,b,c,d){d||(d=this);c&&(this.ld=c);b&&(this.je=b);a.BoundingBox&&(d.Z=a.BoundingBox[0],d.ua=a.BoundingBox[1]);a.Offset&&(d.Ga=a.Offset);a.CurtainIndex&&(d.Wo=a.CurtainIndex);switch(a.VertexSemantic){case "p":d.Ti=a.Vertices.length/3;cd(d,a.Vertices);d.mode="p";break;case "pnt":d.Ti=a.Vertices.length/8;dd(d,a.Vertices);d.mode="pnt";break;case "pc":d.Ti=a.Vertices.length/7;d.mode="pc";ed(d,a.Vertices);break;case "pt":d.Ti=a.Vertices.length/5;d.mode="pt";fd(d,a.Vertices);break;case "pnct":d.Ti=
a.Vertices.length/12;d.mode="p";gd(d,a.Vertices);break;default:alert("unknown surface mode!!")}id(d,a.Indices,a.IndexSemantic);a.DiffuseMap&&(d.j=new M(d.c),d.j.repeat=j,N(d.j,a.DiffuseMap,function(){var a=d;a.Xb=j;a.je&&a.je(a)},function(){var a=d;Dc(F("owg.Mesh"),"Downloading Error: Texture not found...");a.ld&&a.ld(a)},j),d.Si=j);a.Center&&d.bh(a.Center[0],a.Center[1],a.Center[2]);d.dc=a.Indices.length;d.Si||(d.Xb=j);d.$l&&d.$l();d.je&&!d.Si&&d.je(d)};
function ld(a,b,c,d){b==k?alert("invalid json-url"):(a.pe=b,a.V=new window.XMLHttpRequest,a.V.open("GET",a.pe,j),a.je=c,a.ld=d,a.V.onreadystatechange=function(){if(4==a.V.readyState)if(404==a.V.status)a.ld&&a.ld(a);else{var b=bd(a.V.responseText);a.hc(b,k,k,a)}},a.V.send())}
r.Fe=function(a,b,c,d,e,f){var g=n,i,l,m,o;l=i=0;m=1.0E20;for(var s=0;s<this.Mh;s++){var q=s;switch(this.oe){case "TRIANGLES":this.t.Cg=this.D[this.R[3*q]*this.T];this.t.Dg=this.D[this.R[3*q]*this.T+1];this.t.Eg=this.D[this.R[3*q]*this.T+2];this.t.Fg=this.D[this.R[3*q+1]*this.T];this.t.Gg=this.D[this.R[3*q+1]*this.T+1];this.t.Hg=this.D[this.R[3*q+1]*this.T+2];this.t.bi=this.D[this.R[3*q+2]*this.T];this.t.ci=this.D[this.R[3*q+2]*this.T+1];this.t.di=this.D[this.R[3*q+2]*this.T+2];break;case "TRIANGLESTRIP":0==
q%2?(this.t.Cg=this.D[this.R[q]*this.T],this.t.Dg=this.D[this.R[q]*this.T+1],this.t.Eg=this.D[this.R[q]*this.T+2],this.t.Fg=this.D[this.R[q+1]*this.T],this.t.Gg=this.D[this.R[q+1]*this.T+1],this.t.Hg=this.D[this.R[q+1]*this.T+2]):(this.t.Cg=this.D[this.R[q+1]*this.T],this.t.Dg=this.D[this.R[q+1]*this.T+1],this.t.Eg=this.D[this.R[q+1]*this.T+2],this.t.Fg=this.D[this.R[q]*this.T],this.t.Gg=this.D[this.R[q]*this.T+1],this.t.Hg=this.D[this.R[q]*this.T+2]);this.t.bi=this.D[this.R[q+2]*this.T];this.t.ci=
this.D[this.R[q+2]*this.T+1];this.t.di=this.D[this.R[q+2]*this.T+2];break;default:Dc(F("owg.Surface"),"This indexsemantic is not supported for function: Surface.ReadTriangleFromBuffer() ")}this.Ga&&(this.t.Cg+=this.Ga[0],this.t.Dg+=this.Ga[1],this.t.Eg+=this.Ga[2],this.t.Fg+=this.Ga[0],this.t.Gg+=this.Ga[1],this.t.Hg+=this.Ga[2],this.t.bi+=this.Ga[0],this.t.ci+=this.Ga[1],this.t.di+=this.Ga[2]);if(!(this.R[q]==this.R[q+1]||this.R[q]==this.R[q+2]||this.R[q+1]==this.R[q+2])){if(this.ja){q=new J;q.ca(this.se);
var u=new I;u.q(this.t.Cg,this.t.Dg,this.t.Eg);var v=new I;v.q(this.t.Fg,this.t.Gg,this.t.Hg);var z=new I;z.q(this.t.bi,this.t.ci,this.t.di);u=q.Za(u);v=q.Za(v);q=q.Za(z);q=this.pm.yj(a,b,c,d,e,f,u.a[0],u.a[1],u.a[2],v.a[0],v.a[1],v.a[2],q.a[0],q.a[1],q.a[2])}else q=this.pm.yj(a,b,c,d,e,f,this.t.Cg,this.t.Dg,this.t.Eg,this.t.Fg,this.t.Gg,this.t.Hg,this.t.bi,this.t.ci,this.t.di);q&&(g=j,q.J<m&&0<q.J&&(m=q.J,i=q.Gc,l=q.Ed,o=s))}}return g?(a={},a.J=m,a.Gc=i,a.Ed=l,a.qn=o,a):k};
function md(a){for(var b=1.0E20,c=1.0E20,d=1.0E20,e=-1.0E20,f=-1.0E20,g=-1.0E20,i,l,m,o=0;o<a.D.length;o++)i=a.D[o*a.T],l=a.D[o*a.T+1],m=a.D[o*a.T+2],i>e&&(e=i),l>f&&(f=l),m>g&&(g=m),i<b&&(b=i),l<c&&(c=l),m<d&&(d=m);a.ja&&(o=new I(b,c,d),m=new I(e,c,d),i=new I(e,f,d),d=new I(b,f,d),l=new I(b,c,g),c=new I(b,f,g),e=new I(e,f,g),g=new I(b,f,g),b=a.ja.Za(o),f=a.ja.Za(m),i=a.ja.Za(i),d=a.ja.Za(d),l=a.ja.Za(l),c=a.ja.Za(c),m=a.ja.Za(e),o=a.ja.Za(g),e=[b.a[0],f.a[0],i.a[0],d.a[0],l.a[0],c.a[0],m.a[0],o.a[0]],
g=[b.a[1],f.a[1],i.a[1],d.a[1],l.a[1],c.a[1],m.a[1],o.a[1]],i=[b.a[2],f.a[2],i.a[2],d.a[2],l.a[2],c.a[2],m.a[2],o.a[2]],e.sort(),g.sort(),i.sort(),b=e[0],e=e[e.length-1],c=g[0],f=g[g.length-1],d=i[0],g=i[i.length-1]);a.Ga&&(b+=a.Ga[0],c+=a.Ga[1],d+=a.Ga[2],e+=a.Ga[0],f+=a.Ga[1],g+=a.Ga[2]);a.Z===k&&(a.Z=Array(3));a.ua===k&&(a.ua=Array(3));a.Z[0]=b;a.Z[1]=c;a.Z[2]=d;a.ua[0]=e;a.ua[1]=f;a.ua[2]=g}
r.Ul=function(a,b,c,d,e,f){return this.vi.Tg(a,b,c,d,e,f,this.Z[0],this.Z[1],this.Z[2],this.ua[0],this.ua[1],this.ua[2])};r.ah=function(a,b,c,d,e,f){var g=this.c.Fa.a,i=new J;this.fe[0]=a;this.fe[1]=b;this.fe[2]=c;this.ee[0]=d||0;this.ee[1]=e||0;this.ee[2]=f||0;i.De([g[0],g[4],g[8],0,g[1],g[5],g[9],0,g[2],g[6],g[10],0,this.fe[0],this.fe[1],this.fe[2],1]);a=new J;a.fd(this.ee[0],this.ee[1],this.ee[2]);b=new J;b.P(i,a);this.ja=b};
function nd(a){a.ah(a.fe[0],a.fe[1],a.fe[2],a.ee[0],a.ee[1],a.ee[2])}
r.bh=function(a,b,c,d,e,f){this.cc=a;this.bc=b;this.$b=c;var g=new P(a,b,c),c=Array(3);g.oa(c);(new J).fd(c[0],c[1],c[2]);g=new J;g.Qd(a,b);a=Array(16);b=g.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;b=new J;b.De(a);a=new J;a.Xd(1.1920930376163766E-7,1.1920930376163766E-7,1.1920930376163766E-7);c=new J;c.P(b,a);b=new J;g=new J;a=new J;d?b.Jj(e*Math.PI/180):b.Jj(-1.57079633);e&&
g.Fl(d*Math.PI/180+1.57079633);f&&a.Gl(f*Math.PI/180);d=new J;d.P(b,g);e=new J;e.P(d,a);d=new J;d.P(c,e);this.ja=d;md(this)};r.jf=function(a,b,c){var d=new J;d.Xd(a,b,c);a=new J;b=this.ja.$e();a.P(b,d);this.ja=a};
r.Cb=function(a,b,c){var d=G(a),e=G(b),f=G(c),c=new J,b=Math.cos(d),a=Math.cos(e),g=Math.cos(f),d=Math.sin(d),e=Math.sin(e),f=Math.sin(f);c.a[0]=a*g;c.a[1]=d*e*g+b*f;c.a[2]=-b*e*g+d*f;c.a[3]=0;c.a[4]=-a*f;c.a[5]=-d*e*f+b*g;c.a[6]=b*e*f+d*g;c.a[7]=0;c.a[8]=e;c.a[9]=-d*a;c.a[10]=b*a;c.a[11]=0;c.a[12]=0;c.a[13]=0;c.a[14]=0;c.a[15]=1;b=this.ja.$e();a=new J;a.P(b,c);this.ja=a};
r.ca=function(a){this.Mc(a.j);this.D=a.D;this.mode=a.mode;this.T=a.T;this.R=a.R;this.oe=a.oe;this.dc=a.dc;this.Ha=a.Ha;this.Mh=a.Mh;this.aa=a.aa;this.Nb=a.Nb;this.ja=a.ja;this.oe=a.oe};
function od(a,b,c,d){var e=b[0],f=b[1],b=b[2],g=c[0],i=c[1],c=c[2],l={VertexSemantic:"",Vertices:k,IndexSemantic:"",Indices:k,VertexSemantic:"p"};l.Vertices=[-0.5*g+e,-0.5*i+f,-0.5*c+b,-0.5*g+e,-0.5*i+f,0.5*c+b,0.5*g+e,-0.5*i+f,-0.5*c+b,0.5*g+e,-0.5*i+f,0.5*c+b,0.5*g+e,0.5*i+f,-0.5*c+b,0.5*g+e,0.5*i+f,0.5*c+b,-0.5*g+e,0.5*i+f,-0.5*c+b,-0.5*g+e,0.5*i+f,0.5*c+b];l.IndexSemantic="TRIANGLES";l.Indices=[3,1,0,5,3,2,7,5,4,1,7,6,5,7,1,2,0,6,2,3,0,4,5,2,6,7,4,0,1,6,3,5,1,4,2,6];w(d)&&(4==d.length?a.Fc.q(d[0],
d[1],d[2],d[3]):3==d.length&&a.Fc.q(d[0],d[1],d[2],1));a.hc(l,k,k);md(a)}function pd(a){var b=[],c=a[0],d=a[1],a=a[2],e;e=Math.sqrt((c*c+d*d)/0.578106683090441+a*a/0.5742366172789609);e=1/e;b.push(e*c);b.push(e*d);b.push(e*a);return b}
function qd(a,b,c){var d=Math.sqrt(0.578106683090441),e={VertexSemantic:"",Vertices:k,IndexSemantic:"",Indices:k,VertexSemantic:"p"};e.Vertices=[-0.5*d+0,-0.5*d+0,-0.5*d+0,-0.5*d+0,-0.5*d+0,0.5*d+0,0.5*d+0,-0.5*d+0,-0.5*d+0,0.5*d+0,-0.5*d+0,0.5*d+0,0.5*d+0,0.5*d+0,-0.5*d+0,0.5*d+0,0.5*d+0,0.5*d+0,-0.5*d+0,0.5*d+0,-0.5*d+0,-0.5*d+0,0.5*d+0,0.5*d+0];e.IndexSemantic="TRIANGLES";e.Indices=[3,1,0,5,3,2,7,5,4,1,7,6,5,7,1,2,0,6,2,3,0,4,5,2,6,7,4,0,1,6,3,5,1,4,2,6];w(b)&&(4==b.length?a.Fc.q(b[0],b[1],b[2],
b[3]):3==b.length&&a.Fc.q(b[0],b[1],b[2],1));b=e.Vertices;for(d=0;d<c;d++){for(var f=[],g=e.Indices,i=0;i<g.length;i+=3){for(var l=g[i],m=g[i+1],o=g[i+2],s=[(b[3*l+0]+b[3*m+0])/2,(b[3*l+1]+b[3*m+1])/2,(b[3*l+2]+b[3*m+2])/2],s=pd(s),q=[(b[3*m+0]+b[3*o+0])/2,(b[3*m+1]+b[3*o+1])/2,(b[3*m+2]+b[3*o+2])/2],q=pd(q),u=[(b[3*o+0]+b[3*l+0])/2,(b[3*o+1]+b[3*l+1])/2,(b[3*o+2]+b[3*l+2])/2],u=pd(u),v=-1,z=-1,C=-1,R=0;R<b.length/3;R+=3){for(var X=j,O=j,ha=j,S=0;3>S;S++)1.0E-7<Math.abs(b[R+S]-s[S])&&(X&=0),1.0E-7<
Math.abs(b[R+S]-q[S])&&(O&=0),1.0E-7<Math.abs(b[R+S]-u[S])&&(ha&=0);X&&(v=R/3);O&&(z=R/3);ha&&(C=R/3)}-1==v&&(v=b.length/3,b.push(s[0]),b.push(s[1]),b.push(s[2]));-1==z&&(z=b.length/3,b.push(q[0]),b.push(q[1]),b.push(q[2]));-1==C&&(C=b.length/3,b.push(u[0]),b.push(u[1]),b.push(u[2]));f.push(l);f.push(v);f.push(C);f.push(m);f.push(z);f.push(v);f.push(o);f.push(C);f.push(z);f.push(v);f.push(z);f.push(C)}e.Indices=f}a.hc(e,k,k);md(a)}x("Surface",L);L.prototype.Draw=L.prototype.ra;
L.prototype.CopyFrom=L.prototype.ca;L.prototype.SetAsBillboard=L.prototype.ah;L.prototype.SetTexture=L.prototype.Mc;L.prototype.TestBoundingBoxIntersection=L.prototype.Ul;L.prototype.TestRayIntersection=L.prototype.Fe;var rd="art/";function M(a,b,c,d,e){this.c=a;this.b=a.b;this.j=k;this.Ji=this.Xb=n;this.Va=k;this.height=this.width=0;this.lm=this.sn=n;b&&sd(this,c||0,d||0,e||n);this.repeat=n}
function sd(a,b,c,d){td(a);a.Cc=a.b.createFramebuffer();a.b.bindFramebuffer(a.b.FRAMEBUFFER,a.Cc);a.Cc.width=b;a.Cc.height=c;a.j=a.b.createTexture();a.b.bindTexture(a.b.TEXTURE_2D,a.j);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_MAG_FILTER,a.b.LINEAR);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_MIN_FILTER,a.b.LINEAR);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_WRAP_S,a.b.CLAMP_TO_EDGE);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_WRAP_T,a.b.CLAMP_TO_EDGE);a.b.texImage2D(a.b.TEXTURE_2D,0,a.b.RGBA,
a.Cc.width,a.Cc.height,0,a.b.RGBA,a.b.UNSIGNED_BYTE,k);a.Wi=a.b.createRenderbuffer();a.b.bindRenderbuffer(a.b.RENDERBUFFER,a.Wi);d&&a.b.renderbufferStorage(a.b.RENDERBUFFER,a.b.DEPTH_STENCIL,a.Cc.width,a.Cc.height);a.b.framebufferTexture2D(a.b.FRAMEBUFFER,a.b.COLOR_ATTACHMENT0,a.b.TEXTURE_2D,a.j,0);d&&a.b.framebufferRenderbuffer(a.b.FRAMEBUFFER,a.b.DEPTH_STENCIL_ATTACHMENT,a.b.RENDERBUFFER,a.Wi);a.b.bindTexture(a.b.TEXTURE_2D,k);a.b.bindRenderbuffer(a.b.RENDERBUFFER,k);a.b.bindFramebuffer(a.b.FRAMEBUFFER,
k);a.Xb=j;a.sn=j;a.width=b;a.height=c}function td(a){a.Cc!=k&&(a.b.deleteRenderbuffer(a.Wi),a.Wi=k,a.b.deleteFramebuffer(a.Cc),a.Cc=k,a.b.deleteTexture(a.j),a.j=k,a.Va&&(a.Va.r(),a.Va=k))}
function N(a,b,c,d,e){a.lm=w(e)?e:n;a.j=a.b.createTexture();var f=a.j,g=a.b;a.j.Me=new Image;a.j.Me.crossOrigin="anonymous";a.j.Me.onload=function(){g.bindTexture(g.TEXTURE_2D,f);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,a.lm);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,f.Me);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR);a.repeat?(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.REPEAT),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,
g.REPEAT)):(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE));g.bindTexture(g.TEXTURE_2D,k);a.width=f.Me.width;a.height=f.Me.height;c!=k&&c(a);a.Xb=j};a.j.Me.onerror=function(){Dc(F("owg.Texture"),"***FAILED DOWNLOADING: "+b);this.Ji=j;d&&d(a)};a.j.Me.src=b}r=M.prototype;
r.U=function(a,b,c,d,e,f,g,i,l,m){c=c||0;d=d||0;e=e||1;f=f||1;g=g||n;i=i||n;l=l||1;if(this.Xb){var o=this.width,s=this.height,q=this.width/2,u=this.height/2;this.c.Jc();this.c.Lj();var d=G(d),v=new J;0<d?v.De([Math.cos(d)*e,Math.sin(d)*f,0,0,-Math.sin(d)*e,Math.cos(d)*f,0,0,0,0,1,0,-Math.cos(d)*e*q+Math.sin(d)*e*u+e*q+a,-Math.cos(d)*f*u-Math.sin(d)*f*q+f*u+b,c,1]):(v.fd(a,b,c),a=new J,a.Xd(e,f,1),v.P(v,a));this.c.Lc(v);this.Va===k&&(this.Va=new L(this.c),i?hd(this.Va,[0,0,0,0,0,o,0,0,1,0,o,s,0,1,
1,0,s,0,0,1]):hd(this.Va,[0,0,0,0,1,o,0,0,1,1,o,s,0,1,0,0,s,0,0,0]),id(this.Va,[0,1,2,0,2,3],"TRIANGLES"),this.Va.Mc(this));g?(this.c.b.enable(this.c.b.BLEND),this.c.b.disable(this.c.b.DEPTH_TEST),this.c.b.depthFunc(this.c.b.LEQUAL),this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA)):this.c.b.disable(this.c.b.BLEND);1>l&&(this.c.b.blendColor(0,0,0,l),this.c.b.blendFunc(this.c.b.CONSTANT_ALPHA,this.c.b.ONE_MINUS_CONSTANT_ALPHA));this.Va.ra(k,k,k,k,m);g&&(this.c.b.disable(this.c.b.BLEND),
this.c.b.enable(this.c.b.DEPTH_TEST));this.c.Id()}};r.r=function(){this.j.Me=k;this.c.b.deleteTexture(this.j);this.j=k;this.Ji=this.Xb=n;this.Va&&(this.Va.r(),this.Va=k);td(this)};r.jh=function(){this.sn&&(this.b.bindFramebuffer(this.b.FRAMEBUFFER,this.Cc),this.b.viewport(0,0,this.Cc.width,this.Cc.height))};r.Vl=function(){this.b.bindTexture(this.b.TEXTURE_2D,k);this.b.bindFramebuffer(this.b.FRAMEBUFFER,k);this.b.viewport(0,0,this.c.width,this.c.height)};
r.ca=function(a){this.j=a.j;this.Xb=a.Xb;this.Ji=a.Ji;this.height=this.width=this.Va=a.Va};x("Texture",M);M.prototype.CopyFrom=M.prototype.ca;M.prototype.Blit=M.prototype.U;M.prototype._EnableRenderToTexture=M.prototype.jh;M.prototype._DisableRenderToTexture=M.prototype.Vl;function P(a,b,c){this.G=new Float32Array([a,b,c])}P.prototype.q=function(a,b,c){this.G[0]=a;this.G[1]=b;this.G[2]=c};P.prototype.oa=function(a){var b=Math.sin(G(this.G[1])),c=Math.cos(G(this.G[1])),d=Math.sin(G(this.G[0])),e=Ic/Math.sqrt(1-Jc*b*b);a[0]=(e+this.G[2])*c*Math.cos(G(this.G[0]));a[1]=(e+this.G[2])*c*d;a[2]=(0.993305620011365*e+this.G[2])*b;a[0]*=1.1920930376163766E-7;a[1]*=1.1920930376163766E-7;a[2]*=1.1920930376163766E-7};
P.prototype.ic=function(a,b,c){for(var d=Math.atan2(b,a),e=Math.atan2(c,Math.sqrt(a*a+b*b)),f=0,g=0,i=0,g=0,a=8388607*a,b=8388607*b,c=8388607*c,l=0;10>l;l++)g=Math.sin(e),g*=g,i=Math.cos(e),g=Ic/Math.sqrt(1-Jc*g),f=Math.sqrt(a*a+b*b)/i-g,e=Math.atan2(c/Math.sqrt(a*a+b*b),1-g*Jc/(g+f));this.G[0]=Lc(d);this.G[1]=Lc(e);this.G[2]=f};P.prototype.ag=function(){return" Longitude: "+this.G[0].toPrecision(17)+" Latitude: "+this.G[1].toPrecision(17)+" Elevation: "+this.G[2].toPrecision(17)};x("GeoCoord",P);
P.prototype.FromCartesian=P.prototype.ic;P.prototype.ToCartesian=P.prototype.oa;P.prototype.ToString=P.prototype.ag;function ud(a){this.c=a;this.b=a.b;this.ja=this.aa=this.ve=k;this.se=new J;this.Jk=[];this.lj=this.Nh=this.Ga=0}r=ud.prototype;r.oi=function(a){this.Nh+=a.length/7;0==this.lj&&(this.lj=70*this.Nh);this.ve=k;this.ve=new Float32Array(a);this.Ge()};r.r=function(){this.aa&&(this.b.deleteBuffer(this.aa),this.aa=k);this.aa=this.ve=k};
r.bh=function(a,b,c){var d=new P(a,b,c),c=Array(3);d.oa(c);(new J).fd(c[0],c[1],c[2]);d=new J;d.ll(a,b);a=Array(16);b=d.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;b=new J;b.De(a);a=new J;a.Xd(1.1920930376163766E-7,1.1920930376163766E-7,1.1920930376163766E-7);c=new J;c.P(b,a);a=new J;b=new J;b.P(c,a);this.ja=b};
r.ra=function(){if(this.ve!=k){this.aa||this.Ge();this.ja&&(this.c.Jc(),this.se.P(this.ja,this.c.Pb),this.c.Lc(this.se));this.b.bindBuffer(this.b.ARRAY_BUFFER,this.aa);this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,n,28,0);this.b.vertexAttribPointer(1,4,this.b.FLOAT,n,28,12);var a=new J;a.ye(this.c.va);var b=this.c.hb,c=this.c.va;b.Vc&&(b.b.useProgram(b.Vc),b.b.uniformMatrix4fv(b.b.getUniformLocation(b.Vc,"matMVP"),n,c.Oa()),b.b.uniformMatrix4fv(b.b.getUniformLocation(b.Vc,
"matInvMVP"),n,a.Oa()));this.b.drawArrays(this.b.POINTS,0,this.Nh);this.b.disableVertexAttribArray(0);this.b.disableVertexAttribArray(1);this.ja&&this.c.Id()}};
r.Ge=function(){this.aa===k?(this.aa=this.b.createBuffer(),this.b.bindBuffer(this.b.ARRAY_BUFFER,this.aa),this.b.bufferData(this.b.ARRAY_BUFFER,this.lj,this.b.STATIC_DRAW),this.b.bufferSubData(this.b.ARRAY_BUFFER,0,this.ve)):(this.b.bindBuffer(this.b.ARRAY_BUFFER,this.aa),this.b.bufferSubData(this.b.ARRAY_BUFFER,this.Ga,this.ve));this.Ga+=4*this.ve.length};function vd(){}var wd=0;r=vd.prototype;r.key=0;r.xg=n;r.Zl=n;r.Nd=function(a,b,c,d,e,f){na(a)?this.rm=j:a&&a.handleEvent&&na(a.handleEvent)?this.rm=n:aa(Error("Invalid listener argument"));this.Ih=a;this.Xm=b;this.src=c;this.type=d;this.capture=!!e;this.qk=f;this.Zl=n;this.key=++wd;this.xg=n};r.handleEvent=function(a){return this.rm?this.Ih.call(this.qk||this.src,a):this.Ih.handleEvent.call(this.Ih,a)};var xd=!Cb||Sb(),yd=!Cb||Sb(),zd=Cb&&!Qb("8");!Eb||Qb("528");Db&&Qb("1.9b")||Cb&&Qb("8")||Bb&&Qb("9.5")||Eb&&Qb("528");Db&&!Qb("8")||Cb&&Qb("9");var Ad="dblclick",Bd="mousedown",Cd="mouseup",Dd="mousemove",Ed="keydown",Fd="keyup";function Gd(){}Gd.prototype.jm=n;Gd.prototype.zf=function(){this.jm||(this.jm=j,this.Ld())};Gd.prototype.Ld=function(){this.eo&&Hd.apply(k,this.eo)};function Hd(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];la(d)?Hd.apply(k,d):d&&"function"==typeof d.zf&&d.zf()}};function Id(a,b){this.type=a;this.currentTarget=this.target=b}Ba(Id,Gd);r=Id.prototype;r.Ld=function(){delete this.type;delete this.target;delete this.currentTarget};r.Nf=n;r.Uh=j;r.stopPropagation=function(){this.Nf=j};r.preventDefault=function(){this.Uh=n};function Jd(a){Jd[" "](a);return a}Jd[" "]=p();function Kd(a,b){a&&this.Nd(a,b)}Ba(Kd,Id);var Ld=0,Md=1,Nd=2,Od=[1,4,2];r=Kd.prototype;r.target=k;r.relatedTarget=k;r.offsetX=0;r.offsetY=0;r.clientX=0;r.clientY=0;r.screenX=0;r.screenY=0;r.button=0;r.keyCode=0;r.charCode=0;r.ctrlKey=n;r.altKey=n;r.shiftKey=n;r.metaKey=n;r.ne=k;
r.Nd=function(a,b){var c=this.type=a.type;Id.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(Db){var e;a:{try{Jd(d.nodeName);e=j;break a}catch(f){}e=n}e||(d=k)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=Eb||a.offsetX!==h?a.offsetX:a.layerX;this.offsetY=Eb||a.offsetY!==h?a.offsetY:a.layerY;this.clientX=a.clientX!==h?a.clientX:a.pageX;this.clientY=a.clientY!==h?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.state=a.state;this.ne=a;delete this.Uh;delete this.Nf};function Pd(a,b){return xd?a.ne.button==b:"click"==a.type?b==Ld:!!(a.ne.button&Od[b])}
r.stopPropagation=function(){Kd.Sf.stopPropagation.call(this);this.ne.stopPropagation?this.ne.stopPropagation():this.ne.cancelBubble=j};r.preventDefault=function(){Kd.Sf.preventDefault.call(this);var a=this.ne;if(a.preventDefault)a.preventDefault();else if(a.returnValue=n,zd)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};r.Ld=function(){Kd.Sf.Ld.call(this);this.relatedTarget=this.currentTarget=this.target=this.ne=k};var Qd={},Rd={},Sd={},Td={};
function Q(a,b,c,d,e){if(b){if(ka(b)){for(var f=0;f<b.length;f++)Q(a,b[f],c,d,e);return k}var d=!!d,g=Rd;b in g||(g[b]={La:0,Wc:0});g=g[b];d in g||(g[d]={La:0,Wc:0},g.La++);var g=g[d],i=qa(a),l;g.Wc++;if(g[i]){l=g[i];for(f=0;f<l.length;f++)if(g=l[f],g.Ih==c&&g.qk==e){if(g.xg)break;return l[f].key}}else l=g[i]=[],g.La++;f=Ud();f.src=a;g=new vd;g.Nd(c,f,a,b,d,e);c=g.key;f.key=c;l.push(g);Qd[c]=g;Sd[i]||(Sd[i]=[]);Sd[i].push(g);a.addEventListener?(a==t||!a.fm)&&a.addEventListener(b,f,d):a.attachEvent(b in
Td?Td[b]:Td[b]="on"+b,f);return c}aa(Error("Invalid event type"))}function Ud(){var a=Vd,b=yd?function(c){return a.call(b.src,b.key,c)}:function(c){c=a.call(b.src,b.key,c);if(!c)return c};return b}function Wd(a,b,c,d,e){if(ka(b))for(var f=0;f<b.length;f++)Wd(a,b[f],c,d,e);else{d=!!d;a:{f=Rd;if(b in f&&(f=f[b],d in f&&(f=f[d],a=qa(a),f[a]))){a=f[a];break a}a=k}if(a)for(f=0;f<a.length;f++)if(a[f].Ih==c&&a[f].capture==d&&a[f].qk==e){U(a[f].key);break}}}
function U(a){if(Qd[a]){var b=Qd[a];if(!b.xg){var c=b.src,d=b.type,e=b.Xm,f=b.capture;c.removeEventListener?(c==t||!c.fm)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(d in Td?Td[d]:Td[d]="on"+d,e);c=qa(c);e=Rd[d][f][c];if(Sd[c]){var g=Sd[c],i=ac(g,b);0<=i&&$b.splice.call(g,i,1);0==g.length&&delete Sd[c]}b.xg=j;e.Pm=j;Xd(d,f,c,e);delete Qd[a]}}}
function Xd(a,b,c,d){if(!d.Ri&&d.Pm){for(var e=0,f=0;e<d.length;e++)d[e].xg?d[e].Xm.src=k:(e!=f&&(d[f]=d[e]),f++);d.length=f;d.Pm=n;0==f&&(delete Rd[a][b][c],Rd[a][b].La--,0==Rd[a][b].La&&(delete Rd[a][b],Rd[a].La--),0==Rd[a].La&&delete Rd[a])}}function Yd(a){var b,c=0,d=b==k;b=!!b;if(a==k)Tb(Sd,function(a){for(var e=a.length-1;0<=e;e--){var f=a[e];if(d||b==f.capture)U(f.key),c++}});else if(a=qa(a),Sd[a])for(var a=Sd[a],e=a.length-1;0<=e;e--){var f=a[e];if(d||b==f.capture)U(f.key),c++}}
function Zd(a,b,c,d,e){var f=1,b=qa(b);if(a[b]){a.Wc--;a=a[b];a.Ri?a.Ri++:a.Ri=1;try{for(var g=a.length,i=0;i<g;i++){var l=a[i];l&&!l.xg&&(f&=$d(l,e)!==n)}}finally{a.Ri--,Xd(c,d,b,a)}}return Boolean(f)}function $d(a,b){var c=a.handleEvent(b);a.Zl&&U(a.key);return c}
function Vd(a,b){if(!Qd[a])return j;var c=Qd[a],d=c.type,e=Rd;if(!(d in e))return j;var e=e[d],f,g;if(!yd){f=b||ia("window.event");var i=j in e,l=n in e;if(i){if(0>f.keyCode||f.returnValue!=h)return j;a:{var m=n;if(0==f.keyCode)try{f.keyCode=-1;break a}catch(o){m=j}if(m||f.returnValue==h)f.returnValue=j}}m=new Kd;m.Nd(f,this);f=j;try{if(i){for(var s=[],q=m.currentTarget;q;q=q.parentNode)s.push(q);g=e[j];g.Wc=g.La;for(var u=s.length-1;!m.Nf&&0<=u&&g.Wc;u--)m.currentTarget=s[u],f&=Zd(g,s[u],d,j,m);
if(l){g=e[n];g.Wc=g.La;for(u=0;!m.Nf&&u<s.length&&g.Wc;u++)m.currentTarget=s[u],f&=Zd(g,s[u],d,n,m)}}else f=$d(c,m)}finally{s&&(s.length=0),m.zf()}return f}d=new Kd(b,this);try{f=$d(c,d)}finally{d.zf()}return f};function ae(a,b){this.xm=b;this.Dh=[];a>this.xm&&aa(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var c=0;c<a;c++)this.Dh.push(this.Fi())}Ba(ae,Gd);r=ae.prototype;r.bm=k;r.im=k;function be(a,b){a.Dh.length<a.xm?a.Dh.push(b):a.ak(b)}r.Fi=function(){return this.bm?this.bm():{}};r.ak=function(a){if(this.im)this.im(a);else if(oa(a))if(na(a.zf))a.zf();else for(var b in a)delete a[b]};r.Ld=function(){ae.Sf.Ld.call(this);for(var a=this.Dh;a.length;)this.ak(a.pop());delete this.Dh};function ce(){this.Bh=[];this.Dk=new jc;this.mn=this.nn=this.on=this.dn=0;this.Od=new jc;this.am=this.ln=0;this.to=1;this.bk=new ae(0,4E3);this.bk.Fi=function(){return new de};this.en=new ae(0,50);this.en.Fi=function(){return new ee};var a=this;this.sk=new ae(0,2E3);this.sk.Fi=function(){return""+a.to++};this.sk.ak=p()}function ee(){this.Sk=this.time=this.count=0}
ee.prototype.toString=function(){var a=[];a.push(this.type," ",this.count," (",Math.round(10*this.time)/10," ms)");this.Sk&&a.push(" [VarAlloc = ",this.Sk,"]");return a.join("")};function de(){}function fe(a,b,c,d){var e=[];-1==c?e.push("    "):e.push(ge(a.km-c));e.push(" ",he(a.km-b));0==a.ck?e.push(" Start        "):1==a.ck?(e.push(" Done "),e.push(ge(a.jp-a.startTime)," ms ")):e.push(" Comment      ");e.push(d,a);0<a.Ko&&e.push("[VarAlloc ",a.Ko,"] ");return e.join("")}
de.prototype.toString=function(){return this.type==k?this.$n:"["+this.type+"] "+this.$n};ce.prototype.reset=function(){for(var a=0;a<this.Bh.length;a++){var b=this.bk.id;b&&be(this.sk,b);be(this.bk,this.Bh[a])}this.Bh.length=0;this.Dk.clear();this.dn=Aa();this.am=this.ln=this.mn=this.nn=this.on=0;b=this.Od.Mi();for(a=0;a<b.length;a++){var c=this.Od.get(b[a]);c.count=0;c.time=0;c.Sk=0;be(this.en,c)}this.Od.clear()};
ce.prototype.toString=function(){for(var a=[],b=-1,c=[],d=0;d<this.Bh.length;d++){var e=this.Bh[d];1==e.ck&&c.pop();a.push(" ",fe(e,this.dn,b,c.join("")));b=e.km;a.push("\n");0==e.ck&&c.push("|  ")}if(0!=this.Dk.Bf()){var f=Aa();a.push(" Unstopped timers:\n");ic(this.Dk,function(b){a.push("  ",b," (",f-b.startTime," ms, started at ",he(b.startTime),")\n")})}b=this.Od.Mi();for(d=0;d<b.length;d++)c=this.Od.get(b[d]),1<c.count&&a.push(" TOTAL ",c,"\n");a.push("Total tracers created ",this.ln,"\n","Total comments created ",
this.am,"\n","Overhead start: ",this.on," ms\n","Overhead end: ",this.nn," ms\n","Overhead comment: ",this.mn," ms\n");return a.join("")};function ge(a){var a=Math.round(a),b="";1E3>a&&(b=" ");100>a&&(b="  ");10>a&&(b="   ");return b+a}function he(a){a=Math.round(a);return(""+(100+a/1E3%60)).substring(1,3)+"."+(""+(1E3+a%1E3)).substring(1,4)}new ce;var ie=0;function je(){ie++;this.dd=p();this.ed=p();this.cd=p();this.Ae=p();this.ze=p();this.Be=p();this.Zf=p();this.Ce=p();this.c=k}function ke(a){a.Be(a.c.I);a.Ae()}je.prototype.Ic=function(){this.Zf();this.ze()};function le(){}Ba(le,Gd);r=le.prototype;r.fm=j;r.Ek=k;r.addEventListener=function(a,b,c,d){Q(this,a,b,c,d)};r.removeEventListener=function(a,b,c,d){Wd(this,a,b,c,d)};
r.dispatchEvent=function(a){var b=a.type||a,c=Rd;if(b in c){if(ma(a))a=new Id(a,this);else if(a instanceof Id)a.target=a.target||this;else{var d=a,a=new Id(b,this);Wb(a,d)}var d=1,e,c=c[b],b=j in c,f;if(b){e=[];for(f=this;f;f=f.Ek)e.push(f);f=c[j];f.Wc=f.La;for(var g=e.length-1;!a.Nf&&0<=g&&f.Wc;g--)a.currentTarget=e[g],d&=Zd(f,e[g],a.type,j,a)&&a.Uh!=n}if(n in c)if(f=c[n],f.Wc=f.La,b)for(g=0;!a.Nf&&g<e.length&&f.Wc;g++)a.currentTarget=e[g],d&=Zd(f,e[g],a.type,n,a)&&a.Uh!=n;else for(e=this;!a.Nf&&
e&&f.Wc;e=e.Ek)a.currentTarget=e,d&=Zd(f,e,a.type,n,a)&&a.Uh!=n;a=Boolean(d)}else a=j;return a};r.Ld=function(){le.Sf.Ld.call(this);Yd(this);this.Ek=k};function me(){this.Zi=this.ij=this.gj=this.hj=this.fj=this.dj=this.ej=this.cj=this.aj=this.bj=this.$i=this.Ag=this.Bg=this.Uf=this.zg=this.Ei=this.Ci=k;this.Ak=this.zk=0;this.qc=n;this.elevation=this.latitude=this.longitude=this.Ta=0;this.Rc=-1;this.fb=this.nb=0;this.$=ne;this.lg=0;this.sd=48;this.Ec=this.Yi=this.Fd=this.Hb=this.Jg=this.Bb=this.Qb=this.gb=0;this.Wl=n;this.dm=this.cm=0;this.Pc=new ad(0.7,0.9,1,1);this.cd=p();this.kc=function(a){for(;360<a;)a-=360;for(;0>a;)a+=360;return a};this.dd=
function(){if(0==this.Rc)this.qc&&(this.Ei.U(this.zk-64,this.Ak-64,0,this.Ta,1,1,j,n),this.Ci.U(this.zk-64,this.Ak-64,0,0,1,1,j,n)),this.c.we("Current position: ("+this.longitude.toFixed(6)+", "+this.latitude.toFixed(6)+","+this.elevation.toFixed(2)+")",0,0,0.5);else if(1==this.Rc){this.Wl&&this.Zi.U(this.cm-16,this.dm-16,0,0,1,1,j,n,0.75);var a=this.c.width-1-64-this.lg,b=this.c.height-1-this.sd,c=this.kc(this.Jg+this.Yi);this.$==oe?this.Ag.U(a-64,b-64,0,c,1,1,j,n,1,this.Pc):this.$==pe?this.Ag.U(a-
64,b-64,0,c,1,1,j,n,1,this.Pc):this.Ag.U(a-64,b-64,0,c,1,1,j,n);this.$==qe?(this.Bg.U(a-32,b-32,0,0,1,1,j,n),this.Uf.U(a-32,b-32,0,this.Bb,1,1,j,n,0.5)):this.$==re?(this.Bg.U(a-32,b-32,0,0,1,1,j,n),this.Uf.U(a-32,b-32,0,this.Bb,1,1,j,n,0.5)):this.Bg.U(a-32,b-32,0,0,1,1,j,n);b=this.c.height-1-82-this.sd;this.$==se?(this.zg.U(a-32,b-32,0,0,1,1,j),this.Uf.U(a-32,b-32,0,this.gb,1,1,j,n,0.5)):this.$==te?(this.zg.U(a-32,b-32,0,0,1,1,j),this.Uf.U(a-32,b-32,0,this.gb,1,1,j,n,0.5)):this.zg.U(a-32,b-32,0,0,
1,1,j,n);b=this.c.height-1-82-128-this.sd;this.ij.U(a-8,b-64,0,0,1,1,j,n);b=this.c.height-1-82-64-this.sd;this.$==ue?this.ej.U(a-16,b-16,0,0,1,1,j,n):this.$==ve?this.dj.U(a-16,b-16,0,0,1,1,j,n):this.cj.U(a-16,b-16,0,0,1,1,j,n);b=this.c.height-1-82-128-64-this.sd;this.$==we?this.bj.U(a-16,b-16,0,0,1,1,j,n):this.$==xe?this.aj.U(a-16,b-16,0,0,1,1,j,n):this.$i.U(a-16,b-16,0,0,1,1,j,n);b=this.c.height-1-82-128-this.Ec-this.sd;this.$==ye?this.hj.U(a-16,b-16,0,0,1,1,j,n):this.$==ze?this.gj.U(a-16,b-16,0,
0,1,1,j,n):this.fj.U(a-16,b-16,0,0,1,1,j,n)}};this.ed=function(a){this.Rc=a.Rc;this.Ta=57.29577951308232*a.Di;this.longitude=a.Md.longitude;this.latitude=a.Md.latitude;this.elevation=a.Md.elevation;this.Wl=a.nd;this.cm=a.Wa[0];this.dm=this.c.height-a.Wa[1]-1;this.$!=oe&&(this.Yi=this.Ta,this.Jg=0);this.$==ve?(a.xa=Tc,a.pa=1):this.$==xe?(a.xa=Uc,a.pa=1):this.$==ze?0<this.Ec?(a.xa=Uc,a.pa=Math.sqrt(this.Ec)/4):0>this.Ec&&(a.pa=Math.sqrt(-this.Ec)/4,a.xa=Tc):this.$==te?(a.xa=Vc,a.pa=this.Qb):this.$==
oe?(a.xa=Wc,a.pa=this.Yi+this.Jg,a.pa=this.kc(a.pa),a.pa*=Math.PI/180):this.$==qe?(a.xa=Xc,a.pa=Math.PI*this.Bb/180):a.xa=Sc;a.Bk=this.$==ne?0:1};this.Ae=function(){this.Ci=new M(this.c);N(this.Ci,rd+"flightnavigation/cmpbg.png");this.Ei=new M(this.c);N(this.Ei,rd+"flightnavigation/cmpr.png");this.zg=new M(this.c);N(this.zg,rd+"globenavigation/MoveWheel.png");this.Bg=new M(this.c);N(this.Bg,rd+"globenavigation/YawPitchWheel.png");this.Ag=new M(this.c);N(this.Ag,rd+"globenavigation/yaw_pitch_adjust.png");
this.Uf=new M(this.c);N(this.Uf,rd+"globenavigation/movewheel_marker.png",k,k,j);this.$i=new M(this.c);N(this.$i,rd+"globenavigation/minus.png");this.bj=new M(this.c);N(this.bj,rd+"globenavigation/minus_over.png");this.aj=new M(this.c);N(this.aj,rd+"globenavigation/minus_clicked.png");this.cj=new M(this.c);N(this.cj,rd+"globenavigation/plus.png");this.ej=new M(this.c);N(this.ej,rd+"globenavigation/plus_over.png");this.dj=new M(this.c);N(this.dj,rd+"globenavigation/plus_clicked.png");this.fj=new M(this.c);
N(this.fj,rd+"globenavigation/slider.png");this.hj=new M(this.c);N(this.hj,rd+"globenavigation/slider_over.png");this.gj=new M(this.c);N(this.gj,rd+"globenavigation/slider_clicked.png");this.ij=new M(this.c);N(this.ij,rd+"globenavigation/slider_rail.png");this.Zi=new M(this.c);N(this.Zi,rd+"globenavigation/crosshair.png")};this.ze=function(){this.Ci.r();this.Ei.r();this.zg.r();this.Bg.r();this.Ag.r();this.Uf.r();this.$i.r();this.bj.r();this.aj.r();this.cj.r();this.ej.r();this.dj.r();this.fj.r();this.hj.r();
this.gj.r();this.ij.r();this.Zi.r()};this.Zf=function(){U(this.sc);U(this.uc);U(this.tc);U(this.qd)};this.Be=function(a){this.sc=Q(a,Bd,this.Sd,n,this);this.uc=Q(a,Cd,this.Ud,n,this);this.tc=Q(a,Dd,this.Td,n,this);this.qd=Q(a,Ad,this.Wg,n,this)};this.Sd=function(a){if(Pd(a,Ld)){var b=a.offsetX-this.c.I.offsetLeft,a=a.offsetY-this.c.I.offsetTop;this.zk=b;this.Ak=this.c.height-a-1;this.nb=b;this.fb=this.c.height-a-1;this.qc=j;1==this.Rc&&this.xj(0)}};this.Ud=function(a){if(Pd(a,Ld)){var b=a.offsetY-
this.c.I.offsetTop;this.nb=a.offsetX-this.c.I.offsetLeft;this.fb=this.c.height-b-1;this.qc=n;1==this.Rc&&this.xj(0);this.Ec=0}};this.Td=function(a){if(this.c&&this.c.I){var b=a.offsetY-this.c.I.offsetTop,c=this.c.height-b-1-this.fb;this.nb=a.offsetX-this.c.I.offsetLeft;this.fb=this.c.height-b-1;1==this.Rc&&this.xj(c)}};this.Wg=function(){this.$==pe&&Ae(this.c.sa,this.longitude,this.latitude,this.elevation,0,-90,0)};this.xj=function(a){var b=this.c.width-1-64-this.lg-8,c=this.c.height-1-82-64-this.sd+
8,d=this.c.width-1-64-this.lg-8,e=this.c.height-1-82-128-64-this.sd+8,f=this.c.width-1-64-this.lg-8,g=this.c.height-1-82-128-this.Ec-this.sd+8,i=this.c.width-1-64-this.lg,l=this.c.height-1-82-this.sd,m=Math.abs(this.nb-i),o=Math.abs(this.fb-l),s=this.c.width-1-64-this.lg,q=this.c.height-1-this.sd,u=Math.abs(this.nb-s),u=u*u,v=Math.abs(this.fb-q),v=v*v;this.qc&&this.$==ze?(this.Ec-=a,-40>this.Ec?this.Ec=-40:40<this.Ec&&(this.Ec=40)):this.qc&&this.$==te?(a=this.nb-i,l=this.fb-l,this.Qb=this.gb=180*
Math.atan2(Math.abs(l),a)/Math.PI,0>l?this.gb=360-this.gb:this.Qb=360-this.Qb,this.gb+=90,this.Qb+=90,this.gb=this.kc(this.gb),this.Qb=this.kc(this.Qb)):this.qc&&this.$==oe?(a=this.nb-s,l=this.fb-q,this.Hb=180*Math.atan2(Math.abs(l),a)/Math.PI,0>l&&(this.Hb=360-this.Hb),this.Hb-=90,this.Hb=this.kc(this.Hb),this.Jg=this.kc(this.Hb-this.Fd)):this.qc&&this.$==qe?(a=this.nb-s,l=this.fb-q,this.Bb=180*Math.atan2(Math.abs(l),a)/Math.PI,0>l&&(this.Bb=360-this.Bb),this.Bb+=90,this.Bb=this.kc(this.Bb)):(this.$=
0,this.nb>b&&this.fb>c-16&&this.nb<b+16&&this.fb<c&&(this.$=this.qc?ve:ue),this.nb>d&&this.fb>e-16&&this.nb<d+16&&this.fb<e&&(this.$=this.qc?xe:we),this.nb>f&&this.fb>g-16&&this.nb<f+16&&this.fb<g&&(this.$=this.qc?ze:ye),729>=m*m+o*o?this.qc?this.$=te:(this.$=se,a=this.nb-i,l=this.fb-l,this.Qb=this.gb=180*Math.atan2(Math.abs(l),a)/Math.PI,0>l?this.gb=360-this.gb:this.Qb=360-this.Qb,this.gb+=90,this.Qb+=90,this.gb=this.kc(this.gb),this.Qb=this.kc(this.Qb)):this.gb=0,625>=u+v)?(this.$=this.qc?qe:re,
a=this.nb-s,l=this.fb-q,this.Bb=180*Math.atan2(Math.abs(l),a)/Math.PI,0>l&&(this.Bb=360-this.Bb),this.Bb+=90,this.Bb=this.kc(this.Bb)):1600>=u+v&&(this.qc?(this.$=oe,a=this.nb-s,l=this.fb-q,this.Hb=180*Math.atan2(Math.abs(l),a)/Math.PI,0>l&&(this.Hb=360-this.Hb),this.Hb-=90,this.Hb=this.kc(this.Hb),this.Jg=this.kc(this.Hb-this.Fd),this.Yi=this.Ta):(this.$=pe,a=this.nb-s,l=this.fb-q,this.Fd=180*Math.atan2(Math.abs(l),a)/Math.PI,0>l&&(this.Fd=360-this.Fd),this.Fd-=90,this.Fd-=this.Jg,this.Fd=this.kc(this.Fd)))}}
var ne=0,ue=1,ve=2,we=3,xe=4,ye=5,ze=6,se=7,te=8,pe=9,oe=10,re=11,qe=12;me.prototype=new je;function Be(){this.name="ogAoeImage";this.type=$a;this.Da=-1;this.M=n;this.options=k;this.Ff=-1;this.Hf=-180;this.Ef=-90;this.og=180;this.ng=90;this.Xb=n;this.j=k;this.pg=[];this.ig=[]}Be.prototype=new D;r=Be.prototype;r.Na=function(a){this.options=a;this.Hf=a.longitude0;this.Ef=a.latitude0;this.og=a.longitude1;this.ng=a.latitude1;this.po=a.url;a=this.parent.parent.c;new M(a,j,256,256);this.j=new M(a);this.j.parent=this;N(this.j,this.po,Ce,De,j);this.Da=Ee(this).nj(this)};r.mb=function(){Ee(this).Ej(this.Da)};
function Ee(a){var b=k,a=a.parent.parent.c;a.e&&a.e.u&&(b=a.e.u.Pj);return b}r.ma=p();r.na=p();
r.rb=function(){var a=this.parent.parent.c;if(this.Xb!=n){var b=a.e.u.Ca.K.length,c,d,e,f,g=k;this.ig=k;this.ig=[];for(var i=0;i<b;i++)if(g=a.e.u.Ca.K[i],!(1>g.k.length)&&!g.Zo&&(c=g.Hf,d=g.Ef,e=g.og,f=g.ng,!(this.Hf>e|this.og<c|this.Ef>f|this.ng<d)&&(this.ig[g.k]=this.pg[g.k],!this.pg[g.k]))){var l=new L(g.c);l.ca(g.B);var m=g.j,o=new M(g.c,j,256,256),s=o;a.gf.push(s);s.jh();m.U(0,0,0,0,1,1,j,j,1);this.j.U(256*(this.Hf-c)/(e-c),256*(this.Ef-d)/(f-d),0,0,(this.og-this.Hf)/this.j.width/((e-c)/256),
(this.ng-this.Ef)/this.j.height/((f-d)/256),j,j,1);Fe(a);l.Mc(o);l.Mo=g.ha[0];l.No=g.ha[1];l.Oo=g.ha[2];this.pg[g.k]=l;this.ig[g.k]=l}}for(var q in this.ig)a=this.ig[q],b=new J,b.ca(a.c.Pb),b.a[12]+=a.Mo,b.a[13]+=a.No,b.a[14]+=a.Oo,a.c.Jc(),a.c.Lc(b),a.ra(),a.c.Id()};function Ce(a){a.parent.Xb=j;a.O&&a.O(a.k,a,a.o);a.O=k;a.N=k;a.k=k;a.caller=k;a.o=k}function De(a){a.N&&a.N(a.k,a.caller,a.o);a.O=k;a.N=k;a.k=k;a.caller=k;a.o=k};function Ge(a){this.c=a;this.rh=[]}Ge.prototype.rb=function(){for(var a=0;a<this.rh.length;a++)this.rh[a].rb()};Ge.prototype.nj=function(a){this.rh.push(a);return this.rh.length-1};Ge.prototype.Ej=function(a){this.rh.splice(a,1)};function He(a){this.c=a;this.Ra=[];this.Ke=new Ie}He.prototype.rb=function(a,b){var c=a.a[0],d=a.a[1],e=a.a[2],f=0,g=0,i=0;this.Ke.ti(b);for(var l=0;l<this.Ra.length;l++){var m=this.Ra[l];m.M||(this.Ke.si(m.Pe,m.Qe,m.Re,m.Pe+0.0010,m.Qe+0.0010,m.Re+0.0010),f=m.Pe-c,g=m.Qe-d,i=m.Re-e,f=f*f+g*g+i*i,g=m.Wk*m.Wk,m.Vk*m.Vk>f&&g<f&&m.ra())}};He.prototype.Zg=function(a,b){for(var c=0;c<this.Ra.length;c++)if(this.Ra[c].Xg(a,b))return this.Ra[c];return k};function Je(a){this.c=a;this.Ua=[]}Je.prototype.rb=function(){for(var a=0;a<this.Ua.length;a++){var b=this.Ua[a];b.M||b.ra()}};Je.prototype.oj=function(a){this.Ua.push(a)};Je.prototype.Fj=function(a){for(var b=0;b<this.Ua.length;b++)if(this.Ua[b]==a){this.Ua.splice(b,1);break}};Je.prototype.Yg=function(a,b){for(var c=0;c<this.Ua.length;c++){var d=this.Ua[c].Xg(a,b);if(d)return d}return k};function Ke(){this.n=this.y=this.x=0}function Ie(){this.L=Array(6);this.L[0]=new Le;this.L[1]=new Le;this.L[2]=new Le;this.L[3]=new Le;this.L[4]=new Le;this.L[5]=new Le;this.X=Array(8);this.X[0]=new Ke;this.X[1]=new Ke;this.X[2]=new Ke;this.X[3]=new Ke;this.X[4]=new Ke;this.X[5]=new Ke;this.X[6]=new Ke;this.X[7]=new Ke}function Le(){this.Ad=this.zd=this.yd=this.Rd=0}
Le.prototype.Hc=function(){var a=Math.sqrt(this.yd*this.yd+this.zd*this.zd+this.Ad*this.Ad);this.yd/=a;this.zd/=a;this.Ad/=a;this.Rd/=a};
Ie.prototype.si=function(a,b,c,d,e,f){this.X[0].x=a;this.X[0].y=b;this.X[0].n=c;this.X[1].x=d;this.X[1].y=b;this.X[1].n=c;this.X[2].x=d;this.X[2].y=e;this.X[2].n=c;this.X[3].x=a;this.X[3].y=e;this.X[3].n=c;this.X[4].x=a;this.X[4].y=b;this.X[4].n=f;this.X[5].x=a;this.X[5].y=e;this.X[5].n=f;this.X[6].x=d;this.X[6].y=e;this.X[6].n=f;this.X[7].x=d;this.X[7].y=b;this.X[7].n=f;for(a=0;6>a;a++){b=8;for(c=0;8>c;c++)0>this.L[a].yd*this.X[c].x+this.L[a].zd*this.X[c].y+this.L[a].Ad*this.X[c].n+this.L[a].Rd&&
--b;if(0==b)return n}return j};
Ie.prototype.ti=function(a){this.Eb=a.a;this.Dm=this.Eb[0];this.Hm=this.Eb[1];this.Lm=this.Eb[2];this.qg=this.Eb[3];this.Em=this.Eb[4];this.Im=this.Eb[5];this.Mm=this.Eb[6];this.rg=this.Eb[7];this.Fm=this.Eb[8];this.Jm=this.Eb[9];this.Nm=this.Eb[10];this.sg=this.Eb[11];this.Gm=this.Eb[12];this.Km=this.Eb[13];this.Om=this.Eb[14];this.tg=this.Eb[15];this.L[0].yd=this.qg+this.Dm;this.L[0].zd=this.rg+this.Em;this.L[0].Ad=this.sg+this.Fm;this.L[0].Rd=this.tg+this.Gm;this.L[0].Hc();this.L[1].yd=this.qg-
this.Dm;this.L[1].zd=this.rg-this.Em;this.L[1].Ad=this.sg-this.Fm;this.L[1].Rd=this.tg-this.Gm;this.L[1].Hc();this.L[2].yd=this.qg-this.Hm;this.L[2].zd=this.rg-this.Im;this.L[2].Ad=this.sg-this.Jm;this.L[2].Rd=this.tg-this.Km;this.L[2].Hc();this.L[3].yd=this.qg+this.Hm;this.L[3].zd=this.rg+this.Im;this.L[3].Ad=this.sg+this.Jm;this.L[3].Rd=this.tg+this.Km;this.L[3].Hc();this.L[4].yd=this.qg+this.Lm;this.L[4].zd=this.rg+this.Mm;this.L[4].Ad=this.sg+this.Nm;this.L[4].Rd=this.tg+this.Om;this.L[4].Hc();
this.L[5].yd=this.qg-this.Lm;this.L[5].zd=this.rg-this.Mm;this.L[5].Ad=this.sg-this.Nm;this.L[5].Rd=this.tg-this.Om;this.L[5].Hc()};x("ViewFrustum",Ie);Ie.prototype.TestBox=Ie.prototype.si;Ie.prototype.Update=Ie.prototype.ti;function Me(){this.sh=this.th=n;this.version=this.Se=this.Pf=this.yb=this.qb=k}
Me.prototype.Pg=function(a){this.V=new XMLHttpRequest;this.V.open("GET",a,j);var b=this;this.V.onreadystatechange=function(){a:if(4==b.V.readyState)if(200==b.V.status){var a=b.V.responseText,d;try{d=bd(a)}catch(e){alert(e);break a}d.extent?(b.version=1,b.ip=d.name,b.yb=d.maxlod,b.ro=256,a=d.extent,b.qb=a,b.Lo=[b.yb,a[0],a[1],a[2],a[3]],"image"==d.type?"png"==d.format?(b.Pf="image/png",b.Se=".png"):"jpg"==d.format?(b.Pf="image/jpg",b.Se=".jpg"):b.Pf="image/png":"elevation"==d.type&&(b.Se=".json")):
(b.version=0,b.hp=d.layer,b.gp=d.copyright,b.cp=d.srs,b.qb=d.boundingbox,b.yb=d.levelofdetail,b.bp=d.imagewidth,b.ap=d.imageheight,b.ro=d.tilesize,b.lp=d.tilelayout,b.Pf=d.tileformat,b.Lo=d.bounds,b.kp=d.center,"image/png"==b.Pf?b.Se=".png":"image/jpg"==b.Pf?b.Se=".jpg":"elevation/json"==b.Pf&&(b.Se=".json"));b.th=j}else Dc(F("owg.Datasetinfo"),"DATASET DOWNLOAD FAILED"),b.sh=j};this.V.send()};x("DatasetInfo",Me);Me.prototype.Download=Me.prototype.Pg;function Ne(){}r=Ne.prototype;r.$g=function(a,b){this.Dj(a,b);b[0]=2*b[0]-1;b[1]=2*b[1]-1;b[2]=2*b[2]-1;b[3]=2*b[3]-1};r.Dj=function(a,b){for(var c=a.length,d=0,e=0,f=1,g=0;g<c;g++)switch(f/=2,a[g]){case "0":e+=f;break;case "1":d+=f,e+=f;case "2":break;case "3":d+=f;break;default:alert("Wrong quadKey: "+a)}b[0]=d;b[1]=e+f;b[2]=d+f;b[3]=e};
r.Kc=function(a,b){b.x=0;b.y=0;b.Db=a.length;for(var c,d=b.Db;0<d;d--)switch(c=1<<d-1,a[b.Db-d]){case "1":b.x|=c;break;case "2":b.y|=c;break;case "3":b.x|=c,b.y|=c}};r.Dl=function(a,b){var c={x:k,y:k,Db:k};this.Kc(a,c);var d=4.007501668E7/Math.pow(2,c.Db);b[0]=-2.003750834E7+d*c.x;b[1]=2.003750834E7-d*(c.y+1);b[2]=-2.003750834E7+d*(c.x+1);b[3]=2.003750834E7-d*c.y};
r.El=function(a,b){var c=a.length,d=[],e=256*Math.pow(2,c);this.Dj(a,d);var f=256*d[0]*Math.pow(2,c),g=256*(1-d[1])*Math.pow(2,c),c=Math.min(Math.max(f,0),e-1)/e-0.5,i=0.5-Math.min(Math.max(g,0),e-1)/e,d=90-360*Math.atan(Math.exp(2*-i*Math.PI))/Math.PI,l=360*c,c=Math.min(Math.max(f,0),e-1)/e-0.5,i=0.5-Math.min(Math.max(g,0),e-1)/e,e=90-360*Math.atan(Math.exp(2*-i*Math.PI))/Math.PI;b[0]=d;b[1]=l;b[2]=e;b[3]=360*c};x("MercatorQuadtree",Ne);Ne.prototype.QuadKeyToMercatorCoord=Ne.prototype.$g;
Ne.prototype.QuadKeyToNormalizedCoord=Ne.prototype.Dj;Ne.prototype.QuadKeyToTileCoord=Ne.prototype.Kc;Ne.prototype.QuadKeyToMercator=Ne.prototype.Dl;Ne.prototype.QuadKeyToWGS84=Ne.prototype.El;var Oe={Cj:function(a){for(var b="",c=0;c<a.length;c++)0==c%2&&0<c&&c<a.length-4&&(b=b.concat("/")),b=b.concat(a[c]);return b}};x("GlobeUtils",Oe);x("GlobeUtils.MakeHierarchicalFilename",Oe.Cj);function Pe(){this.Ha=fa(n);this.ad=fa(n);this.Zb=p();this.jc=fa(0);this.We=this.Xe=-1;this.$c=fa(n)};function Qe(){this.H=new Me;this.o=this.Dc=k;this.qa=new Ne;this.coords=Array(4);this.Gb=1;this.Ha=function(){return this.H.th};this.ad=function(){return this.H.sh};this.Zb=function(a,b,c,d,e,f){if(this.Ha()){var g=this.Dc+"/"+this.o+"/"+Oe.Cj(b+this.H.Se),a=new M(a);a.k=b;a.o=c;a.O=d;a.N=e;a.caller=f;a.Gb=this.Gb;N(a,g,Re,Se,j)}};this.jc=function(){return this.H.yb?this.H.yb:0};this.$c=function(a){if(a.length>this.H.yb)return n;this.qa.$g(a,this.coords);var a=this.coords[0],b=this.coords[1],c=this.coords[2],
d=this.coords[3],e=this.H.qb[0],f=this.H.qb[1],g=this.H.qb[2],i=this.H.qb[3];return d>f||d>f||b<i||b<i||a>g||a>g||c<e||c<e?n:j};this.lb=function(a,b,c){this.Gb=c==k?1:c;this.Dc=a;this.o=b;this.H.Pg(a+"/"+b+".json")}}Qe.prototype=new Pe;function Re(a){a.O(a.k,a,a.o);a.O=k;a.N=k;a.k=k;a.caller=k;a.o=k}function Se(a){a.N(a.k,a.caller,a.o);a.O=k;a.N=k;a.k=k;a.caller=k;a.o=k}x("i3dImageLayer",Qe);Qe.prototype.Failed=Qe.prototype.ad;Qe.prototype.Ready=Qe.prototype.Ha;Qe.prototype.RequestTile=Qe.prototype.Zb;
Qe.prototype.Setup=Qe.prototype.lb;function Te(){this.o=this.ob=k;this.qa=new Ne;this.Ba=0;this.Ha=fa(j);this.ad=fa(n);this.Zb=function(a,b,c,d,e,f){var g={};this.qa.Kc(b,g);g=this.ob[this.Ba]+"/"+g.Db+"/"+g.x+"/"+g.y+".png";a=new M(a);a.k=b;a.o=c;a.O=d;a.N=e;a.caller=f;N(a,g,Ue,Ve,j);this.Ba++;this.Ba>=this.ob.length&&(this.Ba=0)};this.jc=fa(18);this.$c=function(a){return 19>a.length?j:n};this.lb=da("ob")}Te.prototype=new Pe;function Ue(a){a.O(a.k,a,a.o);a.O=k;a.N=k;a.k=k;a.caller=k;a.o=k}
function Ve(a){a.N(a.k,a.caller,a.o);a.O=k;a.N=k;a.k=k;a.caller=k;a.o=k};function We(){this.Ha=fa(n);this.ad=fa(n);this.Zb=p();this.jc=fa(0);this.$c=fa(n)};function Xe(){this.H=new Me;this.o=this.Dc=k;this.qa=new Ne;this.coords=Array(4);this.Ha=function(){return this.H.th};this.ad=function(){return this.H.sh};this.Zb=function(a,b,c,d,e,f){if(this.Ha()){var g=this.Dc+"/"+this.o+"_JSON/"+(Oe.Cj(b+".jso")+"n"),a=new L(a);a.k=b;a.o=c;a.O=d;a.N=e;a.caller=f;ld(a,g,Ye,Ze)}};this.jc=function(){return this.H.yb?this.H.yb:0};this.$c=function(a){if(a.length>this.H.yb)return n;this.qa.$g(a,this.coords);var a=this.coords[0],b=this.coords[1],c=this.coords[2],d=this.coords[3],
e=this.H.qb[0],f=this.H.qb[1],g=this.H.qb[2],i=this.H.qb[3];return d>f||d>f||b<i||b<i||a>g||a>g||c<e||c<e?n:j};this.lb=function(a,b){this.Dc=a;this.o=b;this.H.Pg(a+"/"+b+".json")}}Xe.prototype=new We;function Ye(a){a.O(a.k,a,a.o);a.O=k;a.N=k;a.k=k;a.caller=k;a.o=k}function Ze(a){a.N(a.k,a.caller,a.o);a.O=k;a.N=k;a.k=k;a.caller=k;a.o=k};function $e(){this.version=this.style=this.kg=this.o=this.Dc=k;this.Gb=1;this.sb=k;this.qa=new Ne;this.Ha=fa(j);this.ad=fa(n);this.Zb=function(a,b,c,d,e,f){-1==this.Dc.indexOf("?",this.Dc.length-1)&&(this.Dc+="?");var g=Array(4);"EPSG%3A4326"==this.sb?this.qa.El(b,g):this.qa.Dl(b,g);g=g[0]+","+g[1]+","+g[2]+","+g[3];g=this.Dc+"service=WMS&request=GetMap&WIDTH=256&HEIGHT=256&TILED=TRUE&SRS="+this.sb+"&LAYERS="+this.o+"&STYLES="+this.style+"&FORMAT="+this.kg+"&VERSION="+this.version+"&BBOX="+g;a=new M(a);
a.k=b;a.o=c;a.O=d;a.N=e;a.caller=f;"image/png"==this.kg&&(a.Gb=this.Gb);N(a,g,af,bf,j)};this.jc=fa(30);this.$c=function(a){return 31>a.length?j:n};this.lb=function(a,b,c,d,e,f,g){this.Dc=a;this.o=b;this.kg=d;this.style=e;this.version=f;this.Gb=g;this.sb=c;this.kg==k&&(this.kg="image/png");this.style==k&&(this.style="");this.version==k&&(this.version="1.1.1");this.sb==k&&(this.sb="EPSG%3A900913");"EPSG:900913"==this.sb&&(this.sb="EPSG%3A900913");"ESRI:102100"==this.sb&&(this.sb="ESRI%3A102100");"ESRI:102113"==
this.sb&&(this.sb="ESRI%3A102113");"EPSG:3785"==this.sb&&(this.sb="EPSG%3A3785");"EPSG:3857"==this.sb&&(this.sb="EPSG%3A3857");"EPSG:4326"==this.sb&&(this.sb="EPSG%3A4326")}}$e.prototype=new Pe;function af(a){a.O(a.k,a,a.o);a.O=k;a.N=k;a.k=k;a.caller=k;a.o=k}function bf(a){a.N(a.k,a.caller,a.o);a.O=k;a.N=k;a.k=k;a.caller=k;a.o=k};function cf(){this.o=this.ob=k;this.qa=new Ne;this.Ba=0;this.Ha=fa(j);this.ad=fa(n);this.Zb=function(a,b,c,d,e,f){var g={};this.qa.Kc(b,g);var i=Math.pow(2,g.Db),g=this.ob[this.Ba]+"/oym?f=m&ft=jpeg_sat_256&x="+(g.x-i/2)+"&y="+(i-g.y-i/2-1)+"&z="+(18-g.Db)+"&key=[KEY]",a=new M(a);a.k=b;a.o=c;a.O=d;a.N=e;a.caller=f;N(a,g,df,ef,j);this.Ba++;this.Ba>=this.ob.length&&(this.Ba=0)};this.jc=fa(16);this.$c=function(a){return 17>a.length?j:n};this.lb=da("ob")}Te.prototype=new Pe;
function df(a){a.O(a.k,a,a.o);a.O=k;a.N=k;a.k=k;a.caller=k;a.o=k}function ef(a){a.N(a.k,a.caller,a.o);a.O=k;a.N=k;a.k=k;a.caller=k;a.o=k};function ff(){this.H=new Me;this.o=this.Dc=k;this.qa=new Ne;this.coords=Array(4);this.Ba=0;this.Ha=function(){return this.H.th};this.ad=function(){return this.H.sh};this.Zb=function(a,b,c,d,e,f){if(this.Ha()){var g={};this.qa.Kc(b,g);g=this.ob[this.Ba]+"/"+this.o+"/tiles/"+g.Db+"/"+g.x+"/"+g.y+".json";a=new L(a);a.k=b;a.o=c;a.O=d;a.N=e;a.caller=f;ld(a,g,gf,hf);this.Ba++;this.Ba>=this.ob.length&&(this.Ba=0)}};this.jc=function(){return this.H.yb?this.H.yb:0};this.$c=function(a){if(a.length>this.H.yb)return n;
for(var b=a,c=a,d=0;d<this.H.yb-a.length;d++)b+="0",c+="3";d={};this.qa.Kc(b,d);b=d.x;a=d.y;this.qa.Kc(c,d);var c=d.x,d=d.y,e=this.H.qb[0],f=this.H.qb[1],g=this.H.qb[3];return!(b>this.H.qb[2]||c<e||a>g||d<f)};this.lb=function(a,b){this.ob=a;this.o=b;this.H.Pg(a[0]+"/"+b+"/layersettings.json")}}ff.prototype=new We;function gf(a){a.O(a.k,a,a.o);a.O=k;a.N=k;a.k=k;a.caller=k;a.o=k}function hf(a){a.N(a.k,a.caller,a.o);a.O=k;a.N=k;a.k=k;a.caller=k;a.o=k};function jf(){this.o=this.ob=k;this.qa=new Ne;this.sub=this.Ba=0;this.Jo="Galile,Galil,Gali,Gal,Ga,G".split(",");this.Ha=fa(j);this.ad=fa(n);this.Zb=function(a,b,c,d,e,f){var g={};this.qa.Kc(b,g);g=this.ob[this.Ba]+"/kh/v=101&x="+g.x+"&y="+g.y+"&z="+g.Db+"&s="+this.Jo[this.sub];this.sub++;5==this.sub&&(this.sub=0);a=new M(a);a.k=b;a.o=c;a.O=d;a.N=e;a.caller=f;N(a,g,Ue,Ve,j);this.Ba++;this.Ba>=this.ob.length&&(this.Ba=0)};this.jc=fa(19);this.$c=function(a){return 20>a.length?j:n};this.lb=da("ob")}
jf.prototype=new Te;function kf(a,b){this.If=a||-1;this.ao=b||n;this.Oe={};this.La=0;this.Ym=Math.round(0.75*this.If);this.Od={};this.Od.hits=0;this.Od.misses=0;lf(this,"Initialized cache with size "+a)}kf.prototype.getItem=function(a){var b=this.Oe[a];b!=k&&(mf(b)?(nf(this,a),b=k):b.Qi=(new Date).getTime());(b=b?b.value:k)?(this.Od.hits++,lf(this,"Cache HIT for key "+a)):(this.Od.misses++,lf(this,"Cache MISS for key "+a));return b};
kf.prototype.setItem=function(a,b,c){this.Oe[a]!=k&&nf(this,a);of(this,new function(a,b,c){(a==k||""==a)&&aa(Error("key cannot be null or empty"));this.key=a;this.value=b;c==k&&(c={});c.Ii!=k&&(c.Ii=c.Ii.getTime());c.Th==k&&(c.Th=2);this.options=c;this.Qi=(new Date).getTime()}(a,b,c));lf(this,"Setting key "+a);if(0<this.If&&this.La>this.If){var d=this;setTimeout(function(){d.Bo.call(d)},0)}};kf.prototype.clear=function(){for(var a in this.Oe)nf(this,a);lf(this,"Cache cleared")};
kf.prototype.Bo=function(){var a=[],b;for(b in this.Oe){var c=this.Oe[b];mf(c)?nf(this,b):a.push(c)}if(a.length>this.Ym)for(a=a.sort(function(a,b){return a.options.Th!=b.options.Th?b.options.Th-a.options.Th:b.Qi-a.Qi});a.length>this.Ym;)nf(this,a.pop().key);lf(this,"Purged cached")};function of(a,b){a.Oe[b.key]=b;a.La++}
function nf(a,b){var c=a.Oe[b];delete a.Oe[b];a.La--;lf(a,"removed key "+b);c.options.Xn!=k&&setTimeout(function(){c.options.Xn.call(k,c.key,c.value)},0);c.r!=k&&setTimeout(function(){c.r()},0)}function mf(a){var b=(new Date).getTime(),c=n;a.options.Ii&&a.options.Ii<b&&(c=j);!c&&a.options.jo&&a.Qi+1E3*a.options.jo<b&&(c=j);return c}function lf(a,b){a.ao&&F("owg.Cache").info(b)};function pf(a,b,c){a=G(a)-0;b=Math.log(Math.tan(Math.PI/4+G(b)/2));a/=Math.PI;b/=Math.PI;c[0]=a;c[1]=b}function qf(a,b,c){a*=Math.PI;b*=Math.PI;b=Math.PI/2-2*Math.atan(Math.exp(-b));b=Lc(b);for(a=Lc(a/1+0);180<a;)a-=180;for(;-180>a;)a+=180;for(;90<b;)b-=180;for(;-90>b;)b+=180;c[0]=a;c[1]=b};function rf(a,b,c){this.c=a;this.k=b;this.qa=c;this.j=k;this.Nc=n;this.B=k;this.nm=j;this.ha=[];this.jb=Array(5);this.jb[0]=new I;this.jb[1]=new I;this.jb[2]=new I;this.jb[3]=new I;this.jb[4]=new I;this.Ne=0;this.images=k;this.Sj=n;this.jg=0;this.ui=new I;this.Fb=new J;this.Hf=-180;this.Ef=-90;this.og=180;this.ng=90;var d=Array(4),e=Array(2);this.qa.$g(this.k,d);var a=Array(3),b=Array(3),c=Array(3),f,g,i=new P;f=d[0];g=d[1];qf(f,g,e);f=e[0];g=e[1];this.Hf=f;this.ng=g;i.q(f,g,0);i.oa(a);f=d[2];g=d[1];
qf(f,g,e);f=e[0];g=e[1];i.q(f,g,0);i.oa(b);f=d[2];g=d[3];qf(f,g,e);f=e[0];g=e[1];this.og=f;this.Ef=g;i.q(f,g,0);i.oa(c);d=new I;e=new I;d.q(b[0]-a[0],b[1]-a[1],b[2]-a[2]);e.q(c[0]-a[0],c[1]-a[1],c[2]-a[2]);Qc(this.ui,d,e);this.ui.Hc()}var sf=0;
function tf(a){if(0==a.Ne&&0==a.jg){var b=0,c=0;if(a.images!==k)for(var d=0;d<a.images.length;d++)a.images[d]!=k&&(b++,c=d);0==b?(a.j=a.c.Ck,a.B===k&&uf(a),a.B.Mc(a.j),a.Nc=j,a.images=k):1==b?(a.j=a.images[c],a.B===k&&uf(a),a.B.Mc(a.j),a.Nc=j,a.images=k):(a.Sj=j,a.B===k&&uf(a),a.Nc=j)}}function vf(a,b,c){a=b.caller;a.images[c]=b;a.Ne-=1;tf(a);sf--}function wf(a,b,c){0<=c?(b.images[c]=k,b.Ne-=1):(b.images=k,b.Ne=0);tf(b);sf--}
function xf(a,b){var c=b.caller;c.B=b;c.B.Db=c.k.length;c.ha=b.Ga;c.jb[0].q(b.Z[0],b.Z[1],b.Z[2]);c.jb[1].q(b.ua[0],b.Z[1],b.Z[2]);c.jb[2].q(b.ua[0],b.ua[1],b.Z[2]);c.jb[3].q(b.Z[0],b.ua[1],b.Z[2]);c.jb[4].q(0.5*(b.ua[0]-b.Z[0]),0.5*(b.ua[1]-b.Z[1]),0.5*(b.ua[2]-b.Z[2]));c.jg-=1;tf(c);sf--}function yf(a,b){b.B=k;b.jg-=1;tf(b);sf--}rf.prototype.r=function(){this.j&&this.j.r();this.B&&this.B.r()};
function uf(a){a.nm=n;a.B=new L(a.c);a.B.Db=a.k.length;var b;b=3>a.k.length?2:6>a.k.length?9:5;for(var c=Array(2*b*b),d=1/(b-1),e=0;e<b;e++)for(var f=0;f<b;f++)c[2*(e*b+f)+0]=f*d,c[2*(e*b+f)+1]=1-e*d;var f=[],g,i,d=Array(4),l=Array(2),m=Array(3);a.qa.$g(a.k,d);g=d[0];i=d[1];for(var o=(d[3]-i)/(b-1),s=(d[2]-g)/(b-1),q,u,v,z=new P,d=0;d<b;d++)for(e=0;e<b;e++)q=g+e*s,u=i+d*o,qf(q,u,l),z.q(l[0],l[1],0),z.oa(m),q=m[0],u=m[1],v=m[2],0==e&&0==d&&(a.ha=[q,u,v]),0==e&&0==d?a.jb[0].q(q,u,v):e==b-1&&0==d?a.jb[1].q(q,
u,v):e==b-1&&d==b-1?a.jb[2].q(q,u,v):0==e&&d==b-1?a.jb[3].q(q,u,v):e==(b-1)/2&&d==(b-1)/2&&a.jb[4].q(q,u,v),f.push(q-a.ha[0]),f.push(u-a.ha[1]),f.push(v-a.ha[2]);g=Array(5*b*b);for(d=0;d<b*b;d++)g[5*d+0]=f[3*d+0],g[5*d+1]=f[3*d+1],g[5*d+2]=f[3*d+2],g[5*d+3]=c[2*d+0],g[5*d+4]=c[2*d+1];for(var c=[],C,e=i=f=0;e<=b-2;e+=1){for(d=0;d<=b-1;d+=1)l=e,C=e+1,o=0==i%2?m=b-1-d:m=d,C+=o*b,c[f++]=l+m*b,c[f++]=C;c[f++]=C;i+=1}fd(a.B,g);id(a.B,c,"TRIANGLESTRIP");a.B.Mc(a.j);a.B.Ga=a.ha;md(a.B)}
rf.prototype.rb=function(a){if(!(3>this.k.length)){if(a){if(this.Fb.ca(this.c.Pb),this.Fb.a[12]+=this.ha[0],this.Fb.a[13]+=this.ha[1],this.Fb.a[14]+=this.ha[2],this.c.Jc(),this.c.Lc(this.Fb),a=this.B,a.Ha){a.aa==k&&a.Ge();a.b.bindBuffer(a.b.ARRAY_BUFFER,a.aa);a.b.bindBuffer(a.b.ELEMENT_ARRAY_BUFFER,a.Nb);a.ja&&(a.c.Jc(),a.se.P(a.ja,a.c.Pb),a.c.Lc(a.se));switch(a.mode){case "p":a.b.enableVertexAttribArray(0);a.b.vertexAttribPointer(0,3,a.b.FLOAT,n,12,0);jd(a.c.hb,a.c.va,a.Fc);break;case "pnt":a.b.enableVertexAttribArray(0);
a.b.enableVertexAttribArray(1);a.b.enableVertexAttribArray(2);a.b.vertexAttribPointer(0,3,a.b.FLOAT,n,32,0);a.b.vertexAttribPointer(1,3,a.b.FLOAT,n,32,12);a.b.vertexAttribPointer(2,2,a.b.FLOAT,n,32,24);jd(a.c.hb,a.c.va,a.Fc);break;case "pc":a.b.enableVertexAttribArray(0);a.b.enableVertexAttribArray(1);a.b.vertexAttribPointer(0,3,a.b.FLOAT,n,28,0);a.b.vertexAttribPointer(1,4,a.b.FLOAT,n,28,12);jd(a.c.hb,a.c.va,a.Fc);break;case "pt":a.b.enableVertexAttribArray(0);a.b.enableVertexAttribArray(1);a.b.vertexAttribPointer(0,
3,a.b.FLOAT,n,20,0);a.b.vertexAttribPointer(1,2,a.b.FLOAT,n,20,12);jd(a.c.hb,a.c.va,a.Fc);break;case "pnct":a.b.enableVertexAttribArray(0),a.b.enableVertexAttribArray(1),a.b.enableVertexAttribArray(2),a.b.enableVertexAttribArray(3),a.b.vertexAttribPointer(0,3,a.b.FLOAT,n,48,0),a.b.vertexAttribPointer(1,3,a.b.FLOAT,n,48,12),a.b.vertexAttribPointer(2,4,a.b.FLOAT,n,48,24),a.b.vertexAttribPointer(3,2,a.b.FLOAT,n,48,40),jd(a.c.hb,a.c.va,a.Fc)}switch(a.oe){case "TRIANGLES":a.b.drawElements(a.b.TRIANGLES,
a.dc,a.b.UNSIGNED_SHORT,0);break;case "TRIANGLESTRIP":a.b.drawElements(a.b.TRIANGLE_STRIP,a.dc,a.b.UNSIGNED_SHORT,0)}a.b.disableVertexAttribArray(0);a.b.disableVertexAttribArray(1);a.b.disableVertexAttribArray(2);a.b.disableVertexAttribArray(3)}}else{if(this.Sj){this.Sj=n;a=this.j=new M(this.c,j,256,256);this.c.gf.push(a);a.jh();for(a=0;a<this.images.length;a++)this.images[a]!=k&&(1>this.images[a].Gb?this.images[a].U(0,0,0,0,1,1,j,j,this.images[a].Gb):this.images[a].U(0,0,0,0,1,1,j,j,1));Fe(this.c);
for(a=0;a<this.images.length;a++)this.images[a]!=k&&this.images[a].r();this.images=k;this.B.Mc(this.j)}this.Fb.ca(this.c.Pb);this.Fb.a[12]+=this.ha[0];this.Fb.a[13]+=this.ha[1];this.Fb.a[14]+=this.ha[2];this.c.Jc();this.c.Lc(this.Fb);this.c.e.u.Ca.Mk==zf?this.B.mode="pt":this.c.e.u.Ca.Mk==Af&&(this.B.mode="pt_chroma");this.B.ra()}this.c.Id()}};function Bf(a,b,c,d,e){this.c=a;this.wa=b;this.vb=c;this.qa=d;this.yi=new kf(e,n);this.Qk={};this.Qk.Qm=0}Bf.prototype.r=function(){this.qa=this.vb=this.wa=this.c=k;this.yi.clear();this.yi=k};Bf.prototype.wl=function(){if(!this.wa||0==this.wa.length)return n;for(var a=0;a<this.wa.length;a++)if(!this.wa[a].Ha())return n;if(this.vb)for(a=0;a<this.vb.length;a++)if(!this.vb[a].Ha())return n;return j};
Bf.prototype.Wd=function(a){var b=this.yi.getItem(a);if(b==k){this.Qk.Qm++;var c=b=new rf(this.c,a,this.qa),d=this.wa,e=this.vb;if(3>c.k.length)wf(0,c,-1);else{if(0<d.length){c.Ne=d.length;c.images=Array(c.Ne);for(var f=0;f<d.length;f++){c.images[f]=k;var g=c.k.length,g=(g<=d[f].We||-1==d[f].We)&&(g>=d[f].Xe||-1==d[f].Xe);d[f].$c(c.k)&&g?(d[f].Zb(c.c,c.k,f,vf,wf,c),sf++):wf(0,c,f)}}e&&0<e.length&&8<c.k.length&&e[0].$c(c.k)&&(c.jg=1,e[0].Zb(c.c,c.k,0,xf,yf,c),sf++)}this.yi.setItem(a,b)}return b};
Bf.prototype.jc=function(){var a=0,b=0;if(0<this.vb.length)for(var c=0;c<this.vb.length;c++)b=Math.max(b,this.vb[c].jc());for(c=0;c<this.wa.length;c++)a=Math.max(a,this.wa[c].jc());return 0<b?Math.min(b,a):a};x("GlobeCache",Bf);Bf.prototype.IsReady=Bf.prototype.wl;Bf.prototype.RequestBlock=Bf.prototype.Wd;function Cf(){this.H=new Me;this.o=k;this.qa=new Ne;this.coords=Array(4);this.Gb=1;this.Ba=0;this.Ha=function(){return this.H.th};this.ad=function(){return this.H.sh};this.Zb=function(a,b,c,d,e,f){if(this.Ha()){var g={};this.qa.Kc(b,g);g=this.ob[this.Ba]+"/"+this.o+"/tiles/"+g.Db+"/"+g.x+"/"+g.y+this.H.Se;a=new M(a);a.k=b;a.o=c;a.O=d;a.N=e;a.caller=f;a.Gb=this.Gb;N(a,g,Df,Ef,j);this.Ba++;this.Ba>=this.ob.length&&(this.Ba=0)}};this.jc=function(){return this.H.yb?this.H.yb:0};this.$c=function(a){if(a.length>
this.H.yb)return n;for(var b=a,c=a,d=0;d<this.H.yb-a.length;d++)b+="0",c+="3";d={};this.qa.Kc(b,d);b=d.x;a=d.y;this.qa.Kc(c,d);var c=d.x,d=d.y,e=this.H.qb[0],f=this.H.qb[1],g=this.H.qb[3];return!(b>this.H.qb[2]||c<e||a>g||d<f)};this.lb=function(a,b,c){this.Gb=c==k?1:c;this.ob=a;this.o=b;this.H.Pg(a[0]+"/"+b+"/layersettings.json")}}Cf.prototype=new Pe;function Df(a){a.O(a.k,a,a.o);a.O=k;a.N=k;a.k=k;a.caller=k;a.o=k}function Ef(a){a.N(a.k,a.caller,a.o);a.O=k;a.N=k;a.k=k;a.caller=k;a.o=k}
x("owgImageLayer",Cf);Cf.prototype.Failed=Cf.prototype.ad;Cf.prototype.Ready=Cf.prototype.Ha;Cf.prototype.RequestTile=Cf.prototype.Zb;Cf.prototype.Setup=Cf.prototype.lb;function Ff(){this.Gb=1;this.Zb=function(a,b,c,d,e,f){var g={};this.qa.Kc(b,g);g.y=Math.pow(2,g.Db)-1-g.y;g=this.ob[this.Ba]+"/"+g.Db+"/"+g.x+"/"+g.y+".png";a=new M(a);a.k=b;a.o=c;a.O=d;a.N=e;a.caller=f;a.Gb=this.Gb;N(a,g,Ue,Ve,j)}}Ff.prototype=new Te;function Gf(a){this.c=a;this.wa=[];this.vb=[];this.qa=new Ne;this.Wn=1E3;this.bb=k;this.K=[];this.tm=0;this.Hh={};this.Hh.Bi=0;this.vh=k;this.xk=0;this.Zm=1;this.Ke=new Ie;this.la=Array(3);this.wk=new J;this.Kf=new L(this.c);this.Qf=new L(this.c);this.Lf=[8/255,24/255,58/255];this.Rf=[1,1,1];this.Lk=1;this.Mk=zf}r=Gf.prototype;r.r=function(){this.bb&&(this.bb.r(),this.bb=k);this.Kf&&(this.Kf.r(),this.Kf=k);this.Qf&&(this.Qf.r(),this.Qf=k)};
r.qj=function(a){var b=-1;if(w(a.service))if("i3d"==a.service){if(w(a.url)&&w(a.layer)&&0<a.url.length){var b=a.url[0],c=a.layer,d=new Qe;w(a.minlod)&&(d.Xe=a.minlod);w(a.maxlod)&&(d.We=a.maxlod);d.lb(b,c,a.transparency);b=this.wa.length;this.wa.push(d);Hf(this)}}else"osm"==a.service?w(a.url)&&0<a.url.length&&(d=new Te,w(a.minlod)&&(d.Xe=a.minlod),w(a.maxlod)&&(d.We=a.maxlod),d.lb(a.url),b=this.wa.length,this.wa.push(d),Hf(this)):"tms"==a.service?w(a.url)&&0<a.url.length&&(d=new Ff,w(a.minlod)&&(d.Xe=
a.minlod),w(a.maxlod)&&(d.We=a.maxlod),d.lb(a.url),b=this.wa.length,this.wa.push(d),Hf(this)):"wms"==a.service?w(a.url)&&0<a.url.length&&w(a.layer)&&0<a.layer.length&&(d=new $e,w(a.format)&&(d.kg=a.format),w(a.style)&&(d.style=a.style),w(a.version)&&(d.version=a.version),d.lb(a.url,a.layer,a.SRS,a.format,a.style,a.version,a.transparency),b=this.wa.length,this.wa.push(d),Hf(this)):"owg"==a.service?w(a.url)&&0<a.url.length&&(c=a.layer,d=new Cf,w(a.minlod)&&(d.Xe=a.minlod),w(a.maxlod)&&(d.We=a.maxlod),
d.lb(a.url,c,a.transparency),b=this.wa.length,this.wa.push(d),Hf(this)):"goo"==a.service?w(a.url)&&0<a.url.length&&(d=new jf,w(a.minlod)&&(d.Xe=a.minlod),w(a.maxlod)&&(d.We=a.maxlod),d.lb(a.url),b=this.wa.length,this.wa.push(d),Hf(this)):"oym"==a.service&&w(a.url)&&0<a.url.length&&(d=new cf,w(a.minlod)&&(d.Xe=a.minlod),w(a.maxlod)&&(d.We=a.maxlod),d.lb(a.url),b=this.wa.length,this.wa.push(d),Hf(this));return b};
r.pj=function(a){var b=-1;if("i3d"==a.service){if(a.url&&a.layer&&0<a.url.length){var b=a.layer,c=new Xe;c.lb(a.url[0],b);b=this.vb.length;this.vb.push(c);Hf(this)}}else if("owg"==a.service&&a.url&&a.layer&&0<a.url.length){var d=a.url,b=a.layer,c=new ff;c.lb(d,b);b=this.vb.length;this.vb.push(c);Hf(this)}return b};r.Ij=function(a){0>a||a>=this.wa.length||(this.wa.splice(a,1),Hf(this))};r.Gj=function(a){0>a||a>=this.vb.length||(this.vb.splice(a,1),Hf(this))};
function Hf(a){a.bb&&(a.bb.r(),a.bb=k);a.bb=new Bf(a.c,a.wa,a.vb,a.qa,a.Wn)}
r.rb=function(a,b){this.bb.Qk.Qm=0;this.wk.ca(b);this.Ke.ti(b);this.vh=a;if(this.bb&&this.bb.wl()){this.xk=this.bb.jc();var c=this.bb.Wd("0"),d=this.bb.Wd("1"),e=this.bb.Wd("2"),f=this.bb.Wd("3");if(c.Nc&&d.Nc&&e.Nc&&f.Nc){this.K=[];this.K.push(c);this.K.push(d);this.K.push(e);this.K.push(f);for(this.Hh.Bi=0;this.Hh.Bi!=this.K.length;)a:{c=this.Hh.Bi;if(this.K[c].k.length!=this.xk&&this.K[c].Nc&&If(this,c)){var g=this.K[c].k,d=this.bb.Wd(g+"0"),e=this.bb.Wd(g+"1"),f=this.bb.Wd(g+"2"),g=this.bb.Wd(g+
"3");if(d.Nc&&e.Nc&&f.Nc&&g.Nc){this.K.splice(c,1);this.K.push(d);this.K.push(e);this.K.push(f);this.K.push(g);break a}}this.Hh.Bi++}for(c=0;c<this.K.length;)e=this.K[c],d=e.jb[4].a,e=e.ui.a,f=this.vh.a,this.la[0]=f[0]-d[0],this.la[1]=f[1]-d[1],this.la[2]=f[2]-d[2],0.4<=(this.la[0]*e[0]+this.la[1]*e[1]+this.la[2]*e[2])/Math.sqrt(this.la[0]*this.la[0]+this.la[1]*this.la[1]+this.la[2]*this.la[2])?this.K.splice(c,1):c++;for(c=0;c<this.K.length;c++)this.K[c].rb(n);d=[];e=[];for(c=0;c<this.K.length;c++){var f=
this.K[c].k,g=0,i=f.charAt(0);if("0"==i||"1"==i)g=1;if("2"==i||"3"==i)g=2;for(var l=1;l<f.length;l++){i=f.charAt(l);if(("0"==i||"1"==i)&&"2"==g){g=0;break}if(("2"==i||"3"==i)&&"1"==g){g=0;break}}1==g&&d.push(this.K[c]);2==g&&e.push(this.K[c])}3<d.length&&Jf(this,d);3<e.length&&Kf(this,e)}}};
function If(a,b){var c=j,d=a.K[b],e=d.k.length;if(e>a.xk)return n;if(3>e)return j;c=a.Ke.si(d.B.Z[0],d.B.Z[1],d.B.Z[2],d.B.ua[0],d.B.ua[1],d.B.ua[2]);if(!c)return n;var f=d.jb[4].a,g=d.ui.a,e=a.vh.a;a.la[0]=e[0]-f[0];a.la[1]=e[1]-f[1];a.la[2]=e[2]-f[2];f=Math.sqrt(a.la[0]*a.la[0]+a.la[1]*a.la[1]+a.la[2]*a.la[2]);0<f&&(a.la[0]/=f,a.la[1]/=f,a.la[2]/=f);0.4<a.la[0]*g[0]+a.la[1]*g[1]+a.la[2]*g[2]&&(c=n);if(!c)return n;for(var c=[0,0,0],g=0,f=1.0E20,i=d.B.D.length/d.B.T,l=0;l<i;l++)c[0]=e[0]-(d.B.D[5*
l]+d.ha[0]),c[1]=e[1]-(d.B.D[5*l+1]+d.ha[1]),c[2]=e[2]-(d.B.D[5*l+2]+d.ha[2]),g=c[0]*c[0]+c[1]*c[1]+c[2]*c[2],g<f&&(f=g);e=Math.sqrt(f);c=a.Zm;g=d.jb[0].$e();g.Mj(d.jb[1]);return 1<c*g.Aj()/e}
r.Vd=function(a,b,c){for(var b=this.c.af(a,b,this.wk,j),d=[],e=a=0;e<this.K.length;e++){var f=this.K[e].B.Z,g=this.K[e].B.ua;this.K[e].B.vi.Tg(b.x,b.y,b.n,b.ke,b.le,b.me,f[0],f[1],f[2],g[0],g[1],g[2])&&d.push(this.K[e])}f=1.0E20;c.hit=n;c.numhits=d.length;for(e=0;e<d.length;e++)if((g=d[e].B.Fe(b.x,b.y,b.n,b.ke,b.le,b.me))&&g.J<f)c.hit=j,f=g.J,a=d[e].nm?0:1;c.tmin=f;c.hit&&(c.x=b.x+f*b.ke,c.y=b.y+f*b.le,c.z=b.n+f*b.me,b=new P(0,0,0),b.ic(c.x,c.y,c.z),c.lng=b.G[0],c.lat=b.G[1],c.elv=b.G[2],1==a&&(c.elv=
0))};r.$f=function(a,b,c,d){if(d)if(d={},this.Vd(a,b,d),d.hit)this.Lk=Math.sqrt(d.x*d.x+d.y*d.y+d.z*d.z);else return;var e=this.c.af(a,b,this.wk,j);c.hit=n;var f=e.x,b=e.y,a=e.n,g=e.ke,d=e.le,e=e.me,i=g*g+d*d+e*e,l=f*g+b*d+a*e,m=l*l-i*(f*f+b*b+a*a-this.Lk*this.Lk);0>=m||(i=(0-l-Math.sqrt(m))/i,f+=g*i,b+=d*i,a+=e*i,d=1/Math.sqrt(f*f+b*b+a*a),c.hit=j,c.x=f*d,c.y=b*d,c.z=a*d,a=new P(0,0,0),a.ic(c.x,c.y,c.z),c.lng=a.G[0],c.lat=a.G[1],c.elv=a.G[2])};
r.Xf=function(a,b){var c={hasvalue:n,elevation:0,lod:-1},d=[0,0,0],e=[0,0,0],f=new P(a,b,0);f.oa(e);f.q(a,b,-1);f.oa(d);var g,i,f=d[0];g=d[1];i=d[2];for(var l=e[0]-d[0],m=e[1]-d[1],d=e[2]-d[2],e=Math.sqrt(l*l+m*m+d*d),l=l/e,m=m/e,d=d/e,e=[],o=0;o<this.K.length;o++){var s=this.K[o].B.Z,q=this.K[o].B.ua;this.K[o].B.vi.Tg(f,g,i,l,m,d,s[0],s[1],s[2],q[0],q[1],q[2])&&e.push(this.K[o])}s=1.0E20;for(o=0;o<e.length;o++)if((q=e[o].B.Fe(f,g,i,l,m,d))&&q.J<s)c.hasvalue=j,c.lod=e[o].B.Db,s=q.J;c.hasvalue&&(c.x=
f+s*l,c.y=g+s*m,c.z=i+s*d,f=new P(0,0,0),f.ic(c.x,c.y,c.z),c.lng=f.G[0],c.lat=f.G[1],c.elevation=f.G[2]);return c};
function Jf(a,b){for(var c=0,d=0;d<b.length;d++)b[d].k.length>c&&(c=b[d].k.length);for(d=0;d<b.length;d++)for(b[d].Rb=b[d].k;b[d].Rb.length<c;)b[d].Rb+="0";b.sort(function(a,b){return parseInt(a.Rb,2)-parseInt(b.Rb,2)});for(var d=[0,0,0.7577840175609609],c=[d[0],d[1],d[2],a.Lf[0],a.Lf[1],a.Lf[2],1],e=[],d=0;d<b.length;d++)for(var f=2;0==b[d].B.D[f];)c.push(b[d].ha[0]+b[d].B.D[f-2]),c.push(b[d].ha[1]+b[d].B.D[f-1]),c.push(b[d].ha[2]+b[d].B.D[f]),c.push(a.Lf[0]),c.push(a.Lf[1]),c.push(a.Lf[2]),c.push(1),
f+=5;for(d=0;d<c.length/7-2;d++)e.push(d);e.push(1);e.push(2);e.push(3);a.Kf.r();a.Kf=new L(a.c);a.Kf.hc({VertexSemantic:"pc",Vertices:c,IndexSemantic:"TRIANGLEFAN",Indices:e},k,k);a.Kf.ra()}
function Kf(a,b){for(var c=0,d=0;d<b.length;d++)b[d].k.length>c&&(c=b[d].k.length);for(d=0;d<b.length;d++){b[d].Rb=b[d].k;b[d].Rb=b[d].Rb.replace(/2/g,"0");for(b[d].Rb=b[d].Rb.replace(/3/g,"1");b[d].Rb.length<c;)b[d].Rb+="0"}b.sort(function(a,b){return parseInt(b.Rb,2)-parseInt(a.Rb,2)});for(var d=[0,0,-0.7577840175609609],c=[d[0],d[1],d[2],a.Rf[0],a.Rf[1],a.Rf[2],1],e=[],d=0;d<b.length;d++)for(var f=b[d].B.D.length,f=f-1;0==b[d].B.D[f];)c.push(b[d].ha[0]+b[d].B.D[f-4]),c.push(b[d].ha[1]+b[d].B.D[f-
3]),c.push(b[d].ha[2]+b[d].B.D[f-2]),c.push(a.Rf[0]),c.push(a.Rf[1]),c.push(a.Rf[2]),c.push(1),f-=5;for(d=0;d<c.length/7-2;d++)e.push(d);e.push(1);a.Qf.r();a.Qf=new L(a.c);a.Qf.hc({VertexSemantic:"pc",Vertices:c,IndexSemantic:"TRIANGLEFAN",Indices:e},k,k);a.Qf.ra()}
r.Kg=function(){if(!this.vh)return NaN;var a=[],b=this.vh.a,c=new I;if(0==this.vb.length)return c=new P,c.ic(b[0],b[1],b[2]),c.G[2];c.q(-b[0],-b[1],-b[2]);for(var c=c.a,d=0;d<this.K.length;d++){var e=this.K[d].B.Z,f=this.K[d].B.ua;this.K[d].B.vi.Tg(b[0],b[1],b[2],c[0],c[1],c[2],e[0],e[1],e[2],f[0],f[1],f[2])&&a.push(this.K[d])}e=1.0E20;f=n;for(d=0;d<a.length;d++){var g=a[d].B.Fe(b[0],b[1],b[2],c[0],c[1],c[2]);g&&g.J<e&&(f=j,e=g.J)}return f?(b=e*c[0],a=e*c[1],c=e*c[2],b=8388607*Math.sqrt(b*b+a*a+c*
c),0>e&&(b=-b),this.tm=b):this.tm};r.pi=da("Mk");var zf=0,Af=1;function Lf(a){this.c=a;this.ba=[]}
Lf.prototype.rb=function(){for(var a=0;a<this.ba.length;a++){var b=new J;b.ca(this.c.Pb);b.a[12]+=this.ba[a].ha[0];b.a[13]+=this.ba[a].ha[1];b.a[14]+=this.ba[a].ha[2];this.c.Jc();this.c.Lc(b);var b=this.ba[a],c=this.ba[a],d=this.c.b;d.colorMask(n,n,n,n);d.enable(d.CULL_FACE);d.enable(d.DEPTH_TEST);d.depthMask(n);d.depthFunc(d.GEQUAL);d.enable(d.STENCIL_TEST);d.stencilFunc(d.ALWAYS,0,0);d.stencilOp(d.KEEP,d.KEEP,d.INCR);d.cullFace(d.FRONT);for(var e=0;e<b.length;e++)b[e].ra();d.stencilOp(d.KEEP,d.KEEP,
d.DECR);d.cullFace(d.BACK);for(e=0;e<b.length;e++)b[e].ra();d.depthMask(j);d.colorMask(j,j,j,j);d.cullFace(d.FRONT);d.stencilFunc(d.NOTEQUAL,0,1);d.stencilOp(d.KEEP,d.KEEP,d.KEEP);d.enable(d.BLEND);d.depthMask(j);for(e=0;e<c.length;e++)c[e].ra();d.stencilFunc(d.NOTEQUAL,0,2);for(e=0;e<c.length;e++)c[e].ra();d.disable(d.BLEND);d.enable(d.DEPTH_TEST);d.enable(d.CULL_FACE);d.cullFace(d.BACK);d.depthFunc(d.LESS);d.disable(d.STENCIL_TEST);this.c.Id()}};
Lf.prototype.kl=function(a){this.ba.push(a);return this.ba.length-1};Lf.prototype.ni=function(a){this.ba.splice(a,1)};function Mf(){this.name="ogGeometry";this.type=Na;this.eb=[];this.pg=[];this.Da=-1;this.M=n;this.pe="";this.options=this.ld=this.je=k;this.Ff=-1;this.Sm=this.ue=k}Mf.prototype=new D;r=Mf.prototype;
r.Na=function(a){this.options=a;a.url&&Nf(this,a.url);a.jsonobject&&this.hc(a.jsonobject);if("EarthPolyline"==a.type)this.Sm=V(bb,this,this.options),this.Da=Of(this).Gd(this.Sm.Je);else if("solidcube"==a.type){w(a.srs)||(a.srs="EPSG:4326");w(a.position)||(a.position=[0,0,0]);w(a.color)||(a.color=[1,1,1]);var b=this.parent.parent.c,c=k;b.e&&b.e.u&&(c=b.e.u.Af);if(c){var b=new L(b),d=a.position,e=a.length,f=a.color;"EPSG:4326"==a.srs?(od(b,[0,0,0],[e,e,e],f),b.bh(d[0],d[1],d[2],0,0,0),this.Da=c.Gd([[b]])):
"cartesian"==a.srs&&(od(b,d,[e,e,e],f),this.Da=c.Gd([[b]]))}}else if("solidgeosphere"==a.type&&(w(a.color)||(a.color=[1,1,1]),w(a.subdivisions)||(a.subdivisions=1),b=this.parent.parent.c,c=k,b.e&&b.e.u&&(c=b.e.u.Af),c))b=new L(b),qd(b,a.color,a.subdivisions),this.Da=c.Gd([[b]])};r.mb=function(){Of(this).Hj(this.Da);if(this.ue!=k)E(this.ue);else{for(var a=0;a<this.eb.length;a++)E(this.eb[a]);this.ia=k}};function Of(a){var b=k,a=a.parent.parent.c;a.e&&a.e.u&&(b=a.e.u.Af);return b}
r.Ee=function(a,b,c,d,e,f){for(var g=0;g<this.eb.length;g++)this.eb[g].Ee(a,b,c,d,e,f)};r.fh=function(a,b,c,d){for(var e=0;e<this.eb.length;e++)this.eb[e].fh(a,b,c,d)};r.Cb=function(a,b,c){for(var d=0;d<this.eb.length;d++)this.eb[d].Cb(a,b,c)};r.jf=function(a,b,c){for(var d=0;d<this.eb.length;d++)this.eb[d].jf(a,b,c)};r.ma=function(){if(this.ue!=k)this.ue.ma();else for(var a=0;a<this.eb.length;a++)this.eb[a].ma()};r.na=function(){if(this.ue!=k)this.ue.na();else for(var a=0;a<this.eb.length;a++)this.eb[a].na()};
r.hf=function(a,b,c,d){if(this.ue==k)for(var e=0;e<this.eb.length;e++)this.eb[e].hf(a,b,c,d)};r.Oj=function(){4==this.V.readyState&&(404==this.V.status?this.ld&&this.ld(this.id):this.hc(bd(this.V.responseText)))};
r.hc=function(a){if("pointcloud"==a.Type)this.options=a,this.ue=V(ab,this,this.options),a=Of(this),this.Da=a.Gd(this.ue.Bd);else{for(var b=0;b<a.length;b++){this.options.jsonobject=a[b];var c=V(Oa,this,this.options);this.eb.push(c);this.pg.push(c.Dd)}this.je&&this.je(this.id);a=Of(this);this.Da=a.Gd(this.pg)}};function Nf(a,b){b==k?alert("invalid json-url"):(a.pe=b,a.V=new window.XMLHttpRequest,a.V.open("GET",a.pe,j),a.V.onreadystatechange=function(){a.Oj()},a.V.send())};function Pf(a){this.c=a;this.ia=[];this.Ke=new Ie}
Pf.prototype.rb=function(a,b){this.Ke.ti(b);for(var c=a.a[0],d=a.a[1],e=a.a[2],f=0;f<this.ia.length;f++)if(this.ia[f]instanceof ud){var g=this.ia[f];g.M||g.ra()}else if(this.ia[f]instanceof Qf)g=this.ia[f],g.M||g.ra();else for(var g=this.ia[f],i=0;i<g.length;i++)for(var l=g[i],m=0;m<l.length;m++){var o=l[m];if(!o.M){var s=o.Z[0]-c,q=o.Z[1]-d,u=o.Z[2]-e,s=s*s+q*q+u*u,q=o.vn*o.vn;this.Ke.si(o.Z[0],o.Z[1],o.Z[2],o.ua[0],o.ua[1],o.ua[2])&&!(s>q)&&(this.c.b.enable(this.c.b.BLEND),this.c.b.depthFunc(this.c.b.LEQUAL),
this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA),o.ra(),this.c.b.disable(this.c.b.BLEND))}}};Pf.prototype.Gd=function(a){this.ia.push(a);return this.ia.length-1};Pf.prototype.Hj=function(a){this.ia.splice(a,1)};
Pf.prototype.ff=function(a,b){for(var c=this.c.af(a,b,this.c.va,j),d=1E4,e=k,f=0;f<this.ia.length;f++)for(var g=this.ia[f],i=0;i<g.length;i++)for(var l=g[i],m=0;m<l.length;m++){var o=l[m];if(!o.M){o.Ul(c.x,c.y,c.n,c.ke,c.le,c.me);var s=o.Fe(c.x,c.y,c.n,c.ke,c.le,c.me);s&&s.J<d&&(d=s.J,e=o)}}return e?e.vo:-1};function Rf(a){this.Ca=k;this.Kb=new I;this.Tk=this.Pj=this.uh=this.Af=this.Sh=k;this.Tj=j;this.j=k;this.elevation=this.Io=0;this.em=n;this.Cf=k;this.zo=j;"custom"==a.type&&(this.em=j);this.cd=p();this.dd=function(){if(this.Tj){var a=this.j;this.c.gf.push(a);a.jh();a=this.c.b;a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT|a.STENCIL_BUFFER_BIT);a.enable(a.DEPTH_TEST);a.disable(a.CULL_FACE)}if(this.Ca){if(this.Cf){a=this.c;a.b.disable(a.b.DEPTH_TEST);this.Cf.ra();a=this.c;a.b.enable(a.b.DEPTH_TEST)}this.Ca.rb(this.Kb,
this.c.va)}this.Tk.rb(this.Kb,this.c.va);this.Sh.rb(this.Kb,this.c.va);this.Af.rb(this.Kb,this.c.va);this.uh.rb(this.Kb,this.c.va);this.Pj.rb(this.Kb,this.c.va);if(this.Tj){Fe(this.c);if(this.Io==0){if(w(this.j.Va)&&this.j.Va!==k)this.j.Va.mode=this.zo?"blur":"pt";this.j.U(0,0,0,0,1,1,j,j,1)}}};this.ed=function(a){var c=a.bf();this.Kb.q(c.x,c.y,c.n);this.elevation=a.Md.elevation};this.Ae=function(){if(!this.em){this.Cf=new L(this.c);qd(this.Cf,[1,0,1,0],3);this.Ca=new Gf(this.c)}this.Tk=new Lf(this.c);
this.Sh=new He(this.c);this.Af=new Pf(this.c);this.uh=new Je(this.c);this.Pj=new Ge(this.c)};this.ze=function(){if(this.Cf){this.Cf.r();this.Cf=k}if(this.Ca){this.Ca.r();this.Ca=k}};this.uj=function(a,c){if(this.Tj)this.j==k?this.j=new M(this.c,j,a,c,j):sd(this.j,a,c,j)};this.Be=p()}Rf.prototype=new je;function Sf(a){this.fo=a;this.vm=Q(this.fo,Db?"DOMMouseScroll":"mousewheel",this)}Ba(Sf,le);var Tf="mousewheel";
Sf.prototype.handleEvent=function(a){var b=0,c=0,d=0,a=a.ne;if("mousewheel"==a.type){c=1;if(Cb||Eb&&(Hb||Qb("532.0")))c=40;d=Eb&&xb&&0!=-a.wheelDelta%c?-a.wheelDelta:-a.wheelDelta/c;w(a.wheelDeltaX)?(b=Eb&&xb&&0!=-a.wheelDeltaX%c?-a.wheelDeltaX:-a.wheelDeltaX/c,c=Eb&&xb&&0!=-a.wheelDeltaY%c?-a.wheelDeltaY:-a.wheelDeltaY/c):c=d}else d=a.detail,100<d?d=3:-100>d&&(d=-3),w(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;"number"==typeof this.ym&&Math.min(Math.max(b,-this.ym),this.ym);"number"==typeof this.zm&&
(c=Math.min(Math.max(c,-this.zm),this.zm));b=new Uf(d,a,0,c);try{this.dispatchEvent(b)}finally{b.zf()}};Sf.prototype.Ld=function(){Sf.Sf.Ld.call(this);U(this.vm);delete this.vm};function Uf(a,b,c,d){b&&this.Nd(b,h);this.type=Tf;this.detail=a;this.yf=d}Ba(Uf,Kd);function Vf(){this.Fa=new J;this.jd=new I;this.jd.q(1,0,0);this.s=0;this.p=-0.03;this.Ka=0;this.m=7.616;this.l=45.9088;this.g=17E3;this.nc=this.mc=this.be=this.ce=0;this.mf=this.hd=this.mh=this.lh=this.$a=1;this.za=this.Aa=0;this.Jb=n;this.ga=this.fa=0;this.pc=new I;this.sf=this.rf=0;this.Zd=this.Ib=n;this.v=Array(3);this.Sb=new P(0,0,0);this.vc=new J;this.xd=new J;this.ud=new J;this.Ob=new J;this.Fa=new J;this.cb=new J;this.wd=new J;this.Ob.Ze();this.Ja=100;this.ka=k;this.rd=this.qd=this.uc=this.tc=
this.sc=this.pd=this.od=0;this.Ug=da("Zd");this.cd=function(){this.c.gh(this.Fa)};this.dd=p();this.ed=function(a){a.Rc=0;this.Sb.q(this.m,this.l,this.g);this.Sb.oa(this.v);this.jd.q(this.v[0],this.v[1],this.v[2]);this.xd.fd(this.v[0],this.v[1],this.v[2]);this.ud.Qd(this.m,this.l);this.vc.Lg(this.s,this.p,this.Ka);this.cb.P(this.xd,this.ud);this.wd.P(this.cb,this.vc);this.cb.P(this.wd,this.Ob);this.Fa.ye(this.cb);a.Di=this.s;a.ya(this.v[0],this.v[1],this.v[2]);Yc(a,this.m,this.l,this.g);this.ka&&(this.ka.cc=
this.m,this.ka.bc=this.l,this.ka.$b=this.g,this.ka.pitch=57.29577951308232*this.p,this.ka.Ta=57.29577951308232*this.s,this.ka.fc=57.29577951308232*this.Ka)};this.Ae=p();this.ze=p();this.Zf=function(){U(this.od);U(this.pd);U(this.sc);U(this.tc);U(this.uc);U(this.qd);U(this.rd)};this.Be=function(a){this.od=Q(window,Ed,this.cf,n,this);this.pd=Q(window,Fd,this.df,n,this);this.sc=Q(a,Bd,this.Sd,n,this);this.uc=Q(a,Cd,this.Ud,n,this);this.tc=Q(a,Dd,this.Td,n,this);a=new Sf(a);this.rd=Q(a,Tf,this.ef,n,this)};
this.ef=function(a){0<a.yf?0<this.za?this.Aa=this.za=0:this.Aa+=0.05:0<this.Aa?this.za=this.Aa=0:this.za+=0.05};this.cf=function(a){81==a.keyCode?this.nc=this.$a*this.mf:65==a.keyCode?this.nc=-this.$a*this.mf:83==a.keyCode?this.mc=0.5*this.hd:88==a.keyCode&&(this.mc=-0.5*this.hd)};this.df=function(a){81==a.keyCode?this.nc=0:65==a.keyCode?this.nc=0:83==a.keyCode?this.mc=0:88==a.keyCode&&(this.mc=0)};this.Sd=function(a){Pd(a,Ld)&&(this.pc.q(0,0,0),this.rf=a.offsetX,this.sf=a.offsetY,this.Ib=j);this.fa=
a.offsetX;this.ga=a.offsetY;if(Pd(a,Md))return n};this.Ud=function(a){Pd(a,Ld)&&(this.Ib=n);this.fa=a.offsetX;this.ga=a.offsetY;this.ce=this.be=0;if(Pd(a,Md))return n};this.Td=function(a){this.fa=a.offsetX;this.ga=a.offsetY;if(this.Ib){var b=(this.rf-a.offsetX)/this.c.width,c=(this.sf-a.offsetY)/this.c.height,b=b*b,c=c*c;this.pc.q(a.offsetX-this.rf,this.c.height-1-a.offsetY-(this.c.height-1-this.sf),0);this.pc.Hc();var a=this.pc.a[0],d=this.pc.a[1],e=0,f=0;0<a?e=1:0>a&&(e=-1);0<d?f=1:0>d&&(f=-1);
this.be=this.$a*this.lh*c*f;this.ce=this.mh*b*e}};this.Ce=function(a){var b=this.mc*a/500,c=this.ce*a/500,d=this.nc*a,e=0,e=0,f=this.g/5E5*(this.g/5E5);10<f?f=10:0.0010>f&&(f=0.0010);var g=f*this.be*a/250;if(0<this.Aa){var i=0.5*this.hd*a/1E3;this.p+=i;this.Aa-=i;0>this.Aa&&(this.p+=this.Aa,this.Aa=0);this.Jb=j}0<this.za&&(i=0.5*this.hd*a/1E3,this.p-=i,this.za-=i,0>this.za&&(this.p-=this.za,this.za=0),this.Jb=j);b&&(this.p+=b,this.Jb=j);c&&(this.s+=c,this.s>2*Math.PI&&(this.s-=2*Math.PI),0>this.s&&
(this.s=2*Math.PI-this.s),this.Jb=j);this.Jb&&(e=this.c.Kg(),isNaN(e)&&(e=this.Ja));d&&(a=1E3*d*f,this.g+=a,e+=a,7E6<this.g&&(this.g=7E6));if(g){a=0.017453292519943295*this.l;d=Math.sin(a);f=Math.cos(a);c=this.s;b=0.017453292519943295*this.m;d=Ic/Math.sqrt(1-Jc*d*d);f=Ic/(d/(1+Kc*f*f))*g*Math.cos(c);i=Ic/d*g*Math.sin(c)/Math.cos(a);g=Ic/d*g*Math.sin(c)*Math.tan(a)+c;this.m=57.29577951308232*(i+b);this.l=57.29577951308232*(f+a);for(this.s=g;180<this.m;)this.m-=360;for(;-180>this.m;)this.m+=360;for(;90<
this.l;)this.l=180-this.l;for(;-90>this.l;)this.l=-180-this.l;this.Jb=j}e<this.Ja&&this.Jb&&(this.g+=this.Ja-e);this.ka&&(this.ka.cc=this.m,this.ka.bc=this.l,this.ka.$b=this.g,this.ka.pitch=57.29577951308232*this.p,this.ka.Ta=57.29577951308232*this.s,this.ka.fc=57.29577951308232*this.Ka)}}Vf.prototype=new je;r=Vf.prototype;r.ya=function(a,b,c){this.m=a;this.l=b;this.g=c};r.bf=function(){return{longitude:this.m,latitude:this.l,elevation:this.g}};r.Cb=function(a,b,c){this.s=a;this.p=b;this.Ka=c};
r.eh=p();r.Sg=function(){return{Ta:this.s,pitch:this.p,fc:this.Ka}};function Wf(){this.Fa=new J;this.Zd=this.tb=n;this.jd=new I;this.jd.q(1,0,0);this.s=0;this.p=-1.5707963267948966;this.Ka=0;this.m=7.77442050946391;this.l=47.472720418012834;this.g=75E5;this.ub=Xf;this.nc=this.mc=this.be=this.ce=this.pf=this.qf=this.of=this.nf=this.f=0;this.mf=this.hd=this.mh=this.lh=this.$a=1;this.za=this.Aa=0;new J;this.ga=this.fa=0;this.pc=new I;this.lf=this.$d=this.Ib=n;this.v=Array(3);this.Sb=new P(0,0,0);this.vc=new J;this.xd=new J;this.ud=new J;this.Ob=new J;this.Fa=new J;this.cb=
new J;this.wd=new J;this.Ob.Ze();this.ae=n;this.qh=this.ph=this.oh=0;this.nh=1;this.lc=n;this.ea={};this.da={};this.kf=new J;this.kh=new J;this.Yd=new J;new J;new J;this.Ja=50;this.re=1E7;this.xa=Sc;this.pa=0;this.nd=n;this.Wa=[0,0];this.ab=0;this.de=this.Pa=n;this.rd=this.qd=this.uc=this.tc=this.sc=this.pd=this.od=0;this.Ug=function(a){a||(this.tb=n);this.Zd=a};this.cd=function(){this.c.gh(this.Fa)};this.dd=p();this.ed=function(a){2E3>this.g?(this.c.e.zb.Kh=1.0E-7,this.c.e.zb.Ch=1.2):(this.c.e.zb.Kh=
1.0E-5,this.c.e.zb.Ch=10);this.xa=a.xa;this.pa=a.pa;a.nd=this.nd;a.Wa[0]=this.Wa[0];a.Wa[1]=this.Wa[1];a.Rc=1;this.tb=this.Zd?j:0!=a.Bk?j:n;if(this.ub==Yf&&!this.tb&&!this.c.sa.ac&&(this.$d&&(this.$d=n,this.Rj(this.fa,this.ga)),this.Ib&&this.lf))this.lf=n,this.Qj(this.fa,this.ga);this.Sb.q(this.m,this.l,this.g);this.Sb.oa(this.v);this.jd.q(this.v[0],this.v[1],this.v[2]);this.xd.fd(this.v[0],this.v[1],this.v[2]);this.ud.Qd(this.m,this.l);this.ae?(this.vc.Wf(this.oh,this.ph,this.qh,this.nh),this.Ob.rj()):
this.vc.Lg(this.s,this.p,this.Ka);this.cb.P(this.xd,this.ud);this.wd.P(this.cb,this.vc);this.cb.P(this.wd,this.Ob);this.Fa.ye(this.cb);a.Di=this.s;a.ya(this.v[0],this.v[1],this.v[2]);Yc(a,this.m,this.l,this.g)};this.Ae=p();this.ze=p();this.Zf=function(){U(this.od);U(this.pd);U(this.sc);U(this.tc);U(this.uc);U(this.qd);U(this.rd)};this.Be=function(a){this.od=Q(window,Ed,this.cf,n,this);this.pd=Q(window,Fd,this.df,n,this);this.sc=Q(a,Bd,this.Sd,n,this);this.tc=Q(a,Dd,this.Td,n,this);this.uc=Q(a,Cd,
this.Ud,n,this);this.qd=Q(a,Ad,this.Wg,n,this);a=new Sf(a);this.rd=Q(a,Tf,this.ef,n,this)};this.gd=function(){var a=Xf;(this.f&Zf)==$f&&(0==(this.f&ag)?a=Yf:(this.f&ag)==bg?a=cg:(this.f&ag)==dg&&(a=eg));(this.f&Zf)==fg&&(a=eg);if(a!=this.ub&&(this.ub==eg&&(this.s=this.qf+45*Math.PI*this.$a*(this.fa-this.nf)/(180*this.c.height),this.p=this.pf+45*Math.PI*this.$a*(this.of-this.ga)/(180*this.c.height)),this.ub=a,this.ub==eg))this.nf=this.fa,this.of=this.ga,this.qf=this.s,this.pf=this.p;this.ub==eg&&(this.s=
this.qf+45*Math.PI*this.$a*(this.fa-this.nf)/(180*this.c.height),this.p=this.pf+45*Math.PI*this.$a*(this.of-this.ga)/(180*this.c.height))};this.ef=function(a){if(this.tb||this.c.sa.ac)this.ab=0;else{if(this.ub==Xf)if(0==(this.f&ag)){var b={},c,d;0<this.ab?(c=this.Wa[0],d=this.Wa[1]):(c=this.fa,d=this.ga);this.c.Vd(c,d,b);if(b.hit){this.Wa=[c,d];this.ab=500;this.Sb.q(this.m,this.l,this.g);this.Sb.oa(this.v);c=this.v[0]-b.x;d=this.v[1]-b.y;b=this.v[2]-b.z;0<a.yf?(c*=0.2,d*=0.2,b*=0.2):(c*=-0.2,d*=-0.2,
b*=-0.2);var e=new P(0,0,0);e.ic(this.v[0]+c,this.v[1]+d,this.v[2]+b);this.m=e.G[0];this.l=e.G[1];this.de?e.G[2]>this.g&&(this.g=e.G[2]):this.g=e.G[2];this.Pa=j;this.g<this.Ja?(this.g=this.Ja,this.Pa=j):this.g>this.re&&(this.g=this.re,this.Pa=j)}}else(this.f&ag)==bg&&(this.p+=5*a.yf*Math.PI*this.$a/180);return this.W(a)}};this.cf=function(a){if(!this.tb&&!this.c.sa.ac){66==a.keyCode&&(this.ae=n);if(16==a.keyCode)return this.f|=bg,this.W(a);if(17==a.keyCode)return this.f|=dg,this.W(a);if(37==a.keyCode||
65==a.keyCode)return this.f|=gg,this.W(a);if(38==a.keyCode||87==a.keyCode)return this.f|=hg,this.W(a);if(39==a.keyCode||68==a.keyCode)return this.f|=ig,this.W(a);if(40==a.keyCode||83==a.keyCode)return this.f|=jg,this.W(a);this.gd();return j}};this.df=function(a){if(16==a.keyCode)return this.f&=~bg,this.W(a);if(17==a.keyCode)return this.f&=~dg,this.W(a);if(37==a.keyCode||65==a.keyCode)return this.f&=~gg,this.W(a);if(38==a.keyCode||87==a.keyCode)return this.f&=~hg,this.W(a);if(39==a.keyCode||68==a.keyCode)return this.f&=
~ig,this.W(a);if(40==a.keyCode||83==a.keyCode)return this.f&=~jg,this.W(a);this.gd();return j};this.Wg=function(a){if(!this.tb&&!this.c.sa.ac){var b={};this.c.Vd(this.fa,this.ga,b);if(b.hit){this.c.dh(2E3);var c=this.g;1E6<c?Ae(this.c.sa,b.lng,b.lat,1E6,h,h,h):25E4<c?Ae(this.c.sa,b.lng,b.lat,25E4,h,h,h):5E4<c?Ae(this.c.sa,b.lng,b.lat,5E4,h,h,h):(c=b.elv+5E3,Ae(this.c.sa,b.lng,b.lat,c,0,-90,0));this.Wa=[this.fa,this.ga];this.ab=2500}return this.W(a)}};this.Sd=function(a){if(this.c&&this.c.I&&!this.tb&&
!this.c.sa.ac){this.fa=a.offsetX-this.c.I.offsetLeft;this.ga=a.offsetY-this.c.I.offsetTop;if(Pd(a,Ld))this.f|=$f,document.body.style.cursor="move",this.$d=j;else{if(Pd(a,Md))return n;Pd(a,Nd)&&(this.f|=fg)}this.gd();return this.W(a)}};this.Ud=function(a){if(this.c&&this.c.I){this.Ib=j;this.fa=a.offsetX-this.c.I.offsetLeft;this.ga=a.offsetY-this.c.I.offsetTop;if(Pd(a,Ld))this.f&=~$f,this.lc=n,document.body.style.cursor="default",this.$d=n;else{if(Pd(a,Md))return n;Pd(a,Nd)&&(this.f&=~fg)}this.gd();
return this.W(a)}};this.Td=function(a){if(this.c&&this.c.I&&!this.tb&&!this.c.sa.ac)return this.Ib=this.ub==Yf,this.lf=j,this.fa=a.offsetX-this.c.I.offsetLeft,this.ga=a.offsetY-this.c.I.offsetTop,this.gd(),this.W(a)};this.Ce=function(a){if(this.xa==Tc){var b=this.pa*this.g/5E3;this.de||(this.g-=a*b);this.g<this.Ja&&(this.g=this.Ja);this.Pa=j}else this.xa==Uc?(b=this.pa*this.g/5E3,this.g+=a*b,this.g>this.re&&(this.g=this.re),this.Pa=j):this.xa==Wc?this.s=this.pa:this.xa==Xc&&(b=Math.sin(this.pa),this.p+=
a/5E3*-Math.cos(this.pa),this.s+=a/5E3*b,this.p<-Math.PI/2?this.p=-Math.PI/2:0<this.p&&(this.p=0));0<this.ab&&(this.nd=j,this.ab-=a,0>=this.ab&&(this.ab=0,this.nd=n));if((this.f&kg||this.xa==Vc)&&0==(this.f&ag)){b=0;this.f&hg&&(b+=1);this.f&jg&&(b-=1);var c=0;this.f&gg&&(c-=1);this.f&ig&&(c+=1);var d;d=this.xa==Vc?Math.PI*this.pa/180:Math.atan2(c,b);b=this.g/5E5;10<b?b=10:0.0010>b&&(b=0.0010);var a=b*a/5E4,b=Math.PI*this.l/180,e=Math.sin(b),c=Math.cos(b),f=this.s+d;d=Math.PI*this.m/180;var g=Ic/Math.sqrt(1-
Jc*e*e),e=Ic/g*a*Math.sin(f)/Math.cos(b),a=Ic/(g/(1+Kc*c*c))*a*Math.cos(f)+b;this.m=180*(e+d)/Math.PI;this.l=180*a/Math.PI}for(;180<this.m;)this.m-=180;for(;-180>this.m;)this.m+=180;for(;90<this.l;)this.l-=180;for(;-90>this.l;)this.l+=180;this.Pa&&(this.Pa=n,a=this.c.Xf(this.m,this.l),a.hasvalue?(this.g-this.Ja<a.elevation&&(this.g=a.elevation+this.Ja,this.Pa=j),this.de=n):5E3>this.g&&(this.Pa=this.de=j))};this.Cb=function(a,b,c){this.ae=n;this.Ob.Ze();this.s=a;this.p=b;this.Ka=c};this.eh=function(a,
b,c,d){this.ae=j;this.oh=a;this.ph=b;this.qh=c;this.nh=d;var e=a,a=b,b=e,e=a*b+c*d;if(0.499<e)this.s=2*Math.atan2(a,d),this.p=Math.PI/2,this.Ka=0;else if(-0.499>e)this.s=-2*Math.atan2(a,d),this.p=-Math.PI/2,this.Ka=0;else{var f=c*c;this.s=Math.atan2(2*b*d-2*a*c,1-2*b*b-2*f);this.p=Math.asin(2*e);this.Ka=Math.atan2(2*a*d-2*b*c,1-2*a*a-2*f)}};this.Rj=function(a,b){this.kf.ca(this.Yd);var c={};this.c.$f(a,b,c,j);c.hit?(this.ea.x=c.x,this.ea.y=c.y,this.ea.n=c.z,this.lc=j):this.lc=n};this.Qj=function(a,
b){if(this.lc){var c={};this.c.$f(a,b,c,n);if(c.hit)if(this.da.x=c.x,this.da.y=c.y,this.da.n=c.z,this.lc=j,this.da.x==this.ea.x&&this.da.y==this.ea.y&&this.da.n==this.ea.n)this.Yd.ca(this.kf);else{var d=this.ea.x*this.da.x+this.ea.y*this.da.y+this.ea.n*this.da.n,c=Math.sqrt(0.5*(1-d)),d=Math.sqrt(0.5*(1+d)),e,f,g;e=this.ea.y*this.da.n-this.ea.n*this.da.y;f=this.da.x*this.ea.n-this.ea.x*this.da.n;g=this.ea.x*this.da.y-this.ea.y*this.da.x;c/=Math.sqrt(e*e+f*f+g*g);this.kh.Wf(e*c,f*c,g*c,d);this.Yd.P(this.kf,
this.kh);c=[];(new P(this.m,this.l,this.g)).oa(c);c=this.Yd.Za(new I(c[0],c[1],c[2]));d=new P(0,0,0);d.ic(c.a[0],c.a[1],c.a[2]);this.m=d.G[0];this.l=d.G[1];this.Pa=j}else this.lc=n}};this.W=function(a){a=a?a:window.event;a.stopPropagation&&a.stopPropagation();a.preventDefault&&a.preventDefault();a.cancelBubble=j;a.cancel=j;return a.returnValue=n};this.Ll=da("Ja")}Ba(Wf,Vf);var $f=1,fg=4,Zf=7,gg=16,hg=32,ig=64,jg=128,kg=240,bg=256,dg=512,ag=768,Xf=0,Yf=1,eg=2,cg=3;function lg(){this.vd=new J;this.Kh=1.0E-5;this.Ch=10;this.mo=45;this.cd=function(){this.c.Ql(this.vd)};this.dd=p();this.ed=function(a){this.vd.Cl(this.mo,this.c.width/this.c.height,this.Kh,this.Ch);a.Yf[a.Yf.length-1].ca(this.vd)};this.Ae=p();this.ze=p();this.Be=p()}lg.prototype=new je;function mg(){this.Fa=new J;this.Zd=this.tb=n;this.jd=new I;this.jd.q(1,0,0);this.s=0;this.p=-1.5707963267948966;this.Ka=0;this.m=7.77442050946391;this.l=47.472720418012834;this.g=75E5;this.ub=ng;this.nc=this.mc=this.be=this.ce=this.pf=this.qf=this.of=this.nf=this.f=0;this.mf=this.hd=this.mh=this.lh=this.$a=1;this.za=this.Aa=0;new J;this.ga=this.fa=0;this.pc=new I;this.lf=this.$d=this.Ib=n;this.v=Array(3);this.Sb=new P(0,0,0);this.vc=new J;this.xd=new J;this.ud=new J;this.Ob=new J;this.Fa=new J;this.cb=
new J;this.wd=new J;this.Ob.Ze();this.ae=n;this.qh=this.ph=this.oh=0;this.nh=1;this.lc=n;this.ea={};this.da={};this.kf=new J;this.kh=new J;this.Yd=new J;new J;new J;this.Ja=50;this.re=1E7;this.xa=Sc;this.pa=0;this.nd=n;this.Wa=[0,0];this.ab=0;this.de=this.Pa=n;this.rd=this.qd=this.uc=this.tc=this.sc=this.pd=this.od=0;this.Ug=function(a){a||(this.tb=n);this.Zd=a};this.cd=function(){this.c.gh(this.Fa)};this.dd=p();this.ed=function(a){2E3>this.g?(this.c.e.zb.Kh=1.0E-7,this.c.e.zb.Ch=1.2):(this.c.e.zb.Kh=
1.0E-5,this.c.e.zb.Ch=10);this.xa=a.xa;this.pa=a.pa;a.nd=this.nd;a.Wa[0]=this.Wa[0];a.Wa[1]=this.Wa[1];a.Rc=1;this.tb=this.Zd?j:0!=a.Bk?j:n;if(this.ub==og&&!this.tb&&!this.c.sa.ac&&(this.$d&&(this.$d=n,this.Rj(this.fa,this.ga)),this.Ib&&this.lf))this.lf=n,this.Qj(this.fa,this.ga);this.Sb.q(this.m,this.l,this.g);this.Sb.oa(this.v);this.jd.q(this.v[0],this.v[1],this.v[2]);this.xd.fd(this.v[0],this.v[1],this.v[2]);this.ud.Qd(this.m,this.l);this.ae?(this.vc.Wf(this.oh,this.ph,this.qh,this.nh),this.Ob.rj()):
this.vc.Lg(this.s,this.p,this.Ka);this.cb.P(this.xd,this.ud);this.wd.P(this.cb,this.vc);this.cb.P(this.wd,this.Ob);this.Fa.ye(this.cb);a.Di=this.s;a.ya(this.v[0],this.v[1],this.v[2]);Yc(a,this.m,this.l,this.g)};this.Ae=p();this.ze=p();this.Zf=function(){U(this.od);U(this.pd);U(this.sc);U(this.tc);U(this.uc);U(this.qd);U(this.rd)};this.Be=function(a){this.od=Q(window,Ed,this.cf,n,this);this.pd=Q(window,Fd,this.df,n,this);this.sc=Q(a,Bd,this.Sd,n,this);this.tc=Q(a,Dd,this.Td,n,this);this.uc=Q(a,Cd,
this.Ud,n,this);this.qd=Q(a,Ad,this.Wg,n,this);a=new Sf(a);this.rd=Q(a,Tf,this.ef,n,this)};this.gd=function(){var a=ng;(this.f&pg)==qg&&(0==(this.f&rg)?a=og:(this.f&rg)==sg?a=tg:(this.f&rg)==ug&&(a=vg));(this.f&pg)==wg&&(a=vg);if(a!=this.ub&&(this.ub==vg&&(this.s=this.qf+45*Math.PI*this.$a*(this.fa-this.nf)/(180*this.c.height),this.p=this.pf+45*Math.PI*this.$a*(this.of-this.ga)/(180*this.c.height)),this.ub=a,this.ub==vg))this.nf=this.fa,this.of=this.ga,this.qf=this.s,this.pf=this.p;this.ub==vg&&(this.s=
this.qf+45*Math.PI*this.$a*(this.fa-this.nf)/(180*this.c.height),this.p=this.pf+45*Math.PI*this.$a*(this.of-this.ga)/(180*this.c.height))};this.ef=function(a){if(this.tb||this.c.sa.ac)this.ab=0;else{if(this.ub==ng)if(0==(this.f&rg)){var b={},c,d;0<this.ab?(c=this.Wa[0],d=this.Wa[1]):(c=this.fa,d=this.ga);this.c.Vd(c,d,b);if(b.hit){this.Wa=[c,d];this.ab=500;this.Sb.q(this.m,this.l,this.g);this.Sb.oa(this.v);c=this.v[0]-b.x;d=this.v[1]-b.y;b=this.v[2]-b.z;0<a.yf?(c*=0.2,d*=0.2,b*=0.2):(c*=-0.2,d*=-0.2,
b*=-0.2);var e=new P(0,0,0);e.ic(this.v[0]+c,this.v[1]+d,this.v[2]+b);this.m=e.G[0];this.l=e.G[1];this.de?e.G[2]>this.g&&(this.g=e.G[2]):this.g=e.G[2];this.Pa=j;this.g<this.Ja?(this.g=this.Ja,this.Pa=j):this.g>this.re&&(this.g=this.re,this.Pa=j)}}else(this.f&rg)==sg&&(this.p+=5*a.yf*Math.PI*this.$a/180);return this.W(a)}};this.cf=function(a){if(!this.tb&&!this.c.sa.ac){66==a.keyCode&&(this.ae=n);if(16==a.keyCode)return this.f|=sg,this.W(a);if(17==a.keyCode)return this.f|=ug,this.W(a);if(37==a.keyCode||
65==a.keyCode)return this.f|=xg,this.W(a);if(38==a.keyCode||87==a.keyCode)return this.f|=yg,this.W(a);if(39==a.keyCode||68==a.keyCode)return this.f|=zg,this.W(a);if(40==a.keyCode||83==a.keyCode)return this.f|=Ag,this.W(a);this.gd();return j}};this.df=function(a){if(16==a.keyCode)return this.f&=~sg,this.W(a);if(17==a.keyCode)return this.f&=~ug,this.W(a);if(37==a.keyCode||65==a.keyCode)return this.f&=~xg,this.W(a);if(38==a.keyCode||87==a.keyCode)return this.f&=~yg,this.W(a);if(39==a.keyCode||68==a.keyCode)return this.f&=
~zg,this.W(a);if(40==a.keyCode||83==a.keyCode)return this.f&=~Ag,this.W(a);this.gd();return j};this.Wg=function(a){if(!this.tb&&!this.c.sa.ac){var b={};this.c.Vd(this.fa,this.ga,b);if(b.hit){this.c.dh(2E3);var c=this.g;1E6<c?Ae(this.c.sa,b.lng,b.lat,1E6,h,h,h):25E4<c?Ae(this.c.sa,b.lng,b.lat,25E4,h,h,h):5E4<c?Ae(this.c.sa,b.lng,b.lat,5E4,h,h,h):(c=b.elv+5E3,Ae(this.c.sa,b.lng,b.lat,c,0,-90,0));this.Wa=[this.fa,this.ga];this.ab=2500}return this.W(a)}};this.Sd=function(a){if(this.c&&this.c.I&&!this.tb&&
!this.c.sa.ac){this.fa=a.offsetX-this.c.I.offsetLeft;this.ga=a.offsetY-this.c.I.offsetTop;if(Pd(a,Ld))this.f|=qg,document.body.style.cursor="move",this.$d=j;else{if(Pd(a,Md))return n;Pd(a,Nd)&&(this.f|=wg)}this.gd();return this.W(a)}};this.Ud=function(a){if(this.c&&this.c.I){this.Ib=j;this.fa=a.offsetX-this.c.I.offsetLeft;this.ga=a.offsetY-this.c.I.offsetTop;if(Pd(a,Ld))this.f&=~qg,this.lc=n,document.body.style.cursor="default",this.$d=n;else{if(Pd(a,Md))return n;Pd(a,Nd)&&(this.f&=~wg)}this.gd();
return this.W(a)}};this.Td=function(a){if(this.c&&this.c.I&&!this.tb&&!this.c.sa.ac)return this.Ib=this.ub==og,this.lf=j,this.fa=a.offsetX-this.c.I.offsetLeft,this.ga=a.offsetY-this.c.I.offsetTop,this.gd(),this.W(a)};this.Ce=function(a){if(this.xa==Tc){var b=this.pa*this.g/5E3;this.de||(this.g-=a*b);this.g<this.Ja&&(this.g=this.Ja);this.Pa=j}else this.xa==Uc?(b=this.pa*this.g/5E3,this.g+=a*b,this.g>this.re&&(this.g=this.re),this.Pa=j):this.xa==Wc?this.s=this.pa:this.xa==Xc&&(b=Math.sin(this.pa),this.p+=
a/5E3*-Math.cos(this.pa),this.s+=a/5E3*b,this.p<-Math.PI/2?this.p=-Math.PI/2:0<this.p&&(this.p=0));0<this.ab&&(this.nd=j,this.ab-=a,0>=this.ab&&(this.ab=0,this.nd=n));if((this.f&Bg||this.xa==Vc)&&0==(this.f&rg)){b=0;this.f&yg&&(b+=1);this.f&Ag&&(b-=1);var c=0;this.f&xg&&(c-=1);this.f&zg&&(c+=1);var d;d=this.xa==Vc?Math.PI*this.pa/180:Math.atan2(c,b);b=this.g/5E5;10<b?b=10:0.0010>b&&(b=0.0010);var a=b*a/5E4,b=Math.PI*this.l/180,e=Math.sin(b),c=Math.cos(b),f=this.s+d;d=Math.PI*this.m/180;var g=Ic/Math.sqrt(1-
Jc*e*e),e=Ic/g*a*Math.sin(f)/Math.cos(b),a=Ic/(g/(1+Kc*c*c))*a*Math.cos(f)+b;this.m=180*(e+d)/Math.PI;this.l=180*a/Math.PI}for(;180<this.m;)this.m-=180;for(;-180>this.m;)this.m+=180;for(;90<this.l;)this.l-=180;for(;-90>this.l;)this.l+=180;this.Pa&&(this.Pa=n,a=this.c.Xf(this.m,this.l),a.hasvalue?(this.g-this.Ja<a.elevation&&(this.g=a.elevation+this.Ja,this.Pa=j),this.de=n):5E3>this.g&&(this.Pa=this.de=j))};this.Cb=function(a,b,c){this.ae=n;this.Ob.Ze();this.s=a;this.p=b;this.Ka=c};this.eh=function(a,
b,c,d){this.ae=j;this.oh=a;this.ph=b;this.qh=c;this.nh=d;var e=a,a=b,b=e,e=a*b+c*d;if(0.499<e)this.s=2*Math.atan2(a,d),this.p=Math.PI/2,this.Ka=0;else if(-0.499>e)this.s=-2*Math.atan2(a,d),this.p=-Math.PI/2,this.Ka=0;else{var f=c*c;this.s=Math.atan2(2*b*d-2*a*c,1-2*b*b-2*f);this.p=Math.asin(2*e);this.Ka=Math.atan2(2*a*d-2*b*c,1-2*a*a-2*f)}};this.Rj=function(a,b){this.kf.ca(this.Yd);var c={};this.c.$f(a,b,c,j);c.hit?(this.ea.x=c.x,this.ea.y=c.y,this.ea.n=c.z,this.lc=j):this.lc=n};this.Qj=function(a,
b){if(this.lc){var c={};this.c.$f(a,b,c,n);if(c.hit)if(this.da.x=c.x,this.da.y=c.y,this.da.n=c.z,this.lc=j,this.da.x==this.ea.x&&this.da.y==this.ea.y&&this.da.n==this.ea.n)this.Yd.ca(this.kf);else{var d=this.ea.x*this.da.x+this.ea.y*this.da.y+this.ea.n*this.da.n,c=Math.sqrt(0.5*(1-d)),d=Math.sqrt(0.5*(1+d)),e,f,g;e=this.ea.y*this.da.n-this.ea.n*this.da.y;f=this.da.x*this.ea.n-this.ea.x*this.da.n;g=this.ea.x*this.da.y-this.ea.y*this.da.x;c/=Math.sqrt(e*e+f*f+g*g);this.kh.Wf(e*c,f*c,g*c,d);this.Yd.P(this.kf,
this.kh);c=[];(new P(this.m,this.l,this.g)).oa(c);c=this.Yd.Za(new I(c[0],c[1],c[2]));d=new P(0,0,0);d.ic(c.a[0],c.a[1],c.a[2]);this.m=d.G[0];this.l=d.G[1];this.Pa=j}else this.lc=n}};this.W=function(a){a=a?a:window.event;a.stopPropagation&&a.stopPropagation();a.preventDefault&&a.preventDefault();a.cancelBubble=j;a.cancel=j;return a.returnValue=n};this.Ll=da("Ja")}Ba(mg,Vf);var qg=1,wg=4,pg=7,xg=16,yg=32,zg=64,Ag=128,Bg=240,sg=256,ug=512,rg=768,ng=0,og=1,vg=2,tg=3;function Cg(a){this.Fa=new J;this.jd=new I;this.jd.q(1,0,0);this.s=0;this.p=-0.03;this.Ka=0;this.m=7.616;this.l=45.9088;this.g=17E3;this.nc=this.mc=this.be=this.ce=0;this.mf=this.hd=this.mh=this.lh=this.$a=1;this.za=this.Aa=0;this.Jb=n;this.ga=this.fa=0;this.pc=new I;this.sf=this.rf=0;this.Zd=this.Ib=n;this.v=Array(3);this.Sb=new P(0,0,0);this.vc=new J;this.xd=new J;this.ud=new J;this.Ob=new J;this.Fa=new J;this.cb=new J;this.wd=new J;this.Ob.Ze();this.Ja=100;this.ka=k;this.rd=this.qd=this.uc=this.tc=
this.sc=this.pd=this.od=0;this.wi=this.xi=n;this.xe=[];w(a.ElevationSteps)&&(this.xe=a.ElevationSteps);this.yl=0;this.xl=7E6;this.gc=[];w(a.BoundingRect)&&(this.gc=a.BoundingRect);w(a.BoundingPolygon)&&(this.gc=[]);this.Ug=da("Zd");this.cd=function(){this.c.gh(this.Fa)};this.dd=p();this.ed=function(a){a.Rc=0;this.Sb.q(this.m,this.l,this.g);this.Sb.oa(this.v);this.jd.q(this.v[0],this.v[1],this.v[2]);this.xd.fd(this.v[0],this.v[1],this.v[2]);this.ud.Qd(this.m,this.l);this.vc.Lg(this.s,this.p,this.Ka);
this.cb.P(this.xd,this.ud);this.wd.P(this.cb,this.vc);this.cb.P(this.wd,this.Ob);this.Fa.ye(this.cb);a.Di=this.s;a.ya(this.v[0],this.v[1],this.v[2]);Yc(a,this.m,this.l,this.g);if(this.ka){this.ka.cc=this.m;this.ka.bc=this.l;this.ka.$b=this.g;this.ka.pitch=this.p*57.29577951308232;this.ka.Ta=this.s*57.29577951308232;this.ka.fc=this.Ka*57.29577951308232}};this.Ae=p();this.ze=p();this.Zf=function(){U(this.od);U(this.pd);U(this.sc);U(this.tc);U(this.uc);U(this.qd);U(this.rd)};this.Be=function(a){this.od=
Q(window,Ed,this.cf,n,this);this.pd=Q(window,Fd,this.df,n,this);this.sc=Q(a,Bd,this.Sd,n,this);this.uc=Q(a,Cd,this.Ud,n,this);this.tc=Q(a,Dd,this.Td,n,this);a=new Sf(a);this.rd=Q(a,Tf,this.ef,n,this)};this.ef=function(a){if(a.yf>0)if(this.za>0)this.Aa=this.za=0;else this.Aa=this.Aa+0.05;else if(this.Aa>0)this.za=this.Aa=0;else this.za=this.za+0.05};this.cf=function(a){if(a.keyCode==81){this.nc=this.$a*this.mf;this.xi=j}else if(a.keyCode==65){this.nc=-this.$a*this.mf;this.wi=j}else if(a.keyCode==83)this.mc=
0.5*this.hd;else if(a.keyCode==88)this.mc=-0.5*this.hd};this.df=function(a){if(a.keyCode==81){this.nc=0;this.xi=n}else if(a.keyCode==65){this.nc=0;this.wi=n}else if(a.keyCode==83)this.mc=0;else if(a.keyCode==88)this.mc=0};this.Sd=function(a){if(Pd(a,Ld)){this.pc.q(0,0,0);this.rf=a.offsetX;this.sf=a.offsetY;this.Ib=j}this.fa=a.offsetX;this.ga=a.offsetY;if(Pd(a,Md))return n};this.Ud=function(a){if(Pd(a,Ld))this.Ib=n;this.fa=a.offsetX;this.ga=a.offsetY;this.ce=this.be=0;if(Pd(a,Md))return n};this.Td=
function(a){this.fa=a.offsetX;this.ga=a.offsetY;if(this.Ib){var c=(this.rf-a.offsetX)/this.c.width,d=(this.sf-a.offsetY)/this.c.height,c=c*c,d=d*d;this.pc.q(a.offsetX-this.rf,this.c.height-1-a.offsetY-(this.c.height-1-this.sf),0);this.pc.Hc();var a=this.pc.a[0],e=this.pc.a[1],f=0,g=0;a>0?f=1:a<0&&(f=-1);e>0?g=1:e<0&&(g=-1);this.be=this.$a*this.lh*d*g;this.ce=this.mh*c*f}};this.Ce=function(a){var c=this.mc*a/500,d=this.ce*a/500,e=this.nc*a,f=0,f=0,g=this.g/5E5*(this.g/5E5);g>10?g=10:g<0.0010&&(g=0.0010);
var i=g*this.be*a/250;if(this.Aa>0){var l=0.5*this.hd*a/1E3;this.p=this.p+l;this.Aa=this.Aa-l;if(this.Aa<0){this.p=this.p+this.Aa;this.Aa=0}this.Jb=j}if(this.za>0){l=0.5*this.hd*a/1E3;this.p=this.p-l;this.za=this.za-l;if(this.za<0){this.p=this.p-this.za;this.za=0}this.Jb=j}if(c){this.p=this.p+c;this.Jb=j}if(d){this.s=this.s+d;if(this.s>2*Math.PI)this.s=this.s-2*Math.PI;if(this.s<0)this.s=2*Math.PI-this.s;this.Jb=j}if(this.Jb){f=this.c.Kg();if(isNaN(f))f=this.Ja}if(e){if(this.xe.length==0){a=1E3*e*
g;this.g=this.g+a;f=f+a}else if(this.xi){this.xi=n;for(a=0;a<this.xe.length;a++)if(this.xe[a]>this.g){this.g=this.xe[a];break}}else if(this.wi){this.wi=n;for(a=this.xe.length-1;a>=0;a--)if(this.xe[a]<this.g){this.g=this.xe[a];break}}if(this.g>this.xl)this.g=this.xl;else if(this.g<this.yl)this.g=this.yl}if(i){a=this.l*0.017453292519943295;e=Math.sin(a);g=Math.cos(a);d=this.s;c=this.m*0.017453292519943295;e=Ic/Math.sqrt(1-Jc*e*e);g=Ic/(e/(1+Kc*g*g))*i*Math.cos(d);l=Ic/e*i*Math.sin(d)/Math.cos(a);i=
Ic/e*i*Math.sin(d)*Math.tan(a)+d;this.m=57.29577951308232*(l+c);this.l=57.29577951308232*(g+a);for(this.s=i;this.m>180;)this.m=this.m-360;for(;this.m<-180;)this.m=this.m+360;for(;this.l>90;)this.l=180-this.l;for(;this.l<-90;)this.l=-180-this.l;this.Jb=j}if(f<this.Ja&&this.Jb)this.g=this.g+(this.Ja-f);if(this.gc.length==2&&this.gc[0].length==2&&this.gc[1].length==2){if(this.gc[0][0]>this.m)this.m=this.gc[0][0];if(this.gc[1][0]<this.m)this.m=this.gc[1][0];if(this.gc[0][1]>this.l)this.l=this.gc[0][1];
if(this.gc[1][1]<this.l)this.l=this.gc[1][1]}if(this.ka){this.ka.cc=this.m;this.ka.bc=this.l;this.ka.$b=this.g;this.ka.pitch=this.p*57.29577951308232;this.ka.Ta=this.s*57.29577951308232;this.ka.fc=this.Ka*57.29577951308232}}}Ba(Cg,Vf);function Dg(a,b){this.c=a;this.S=new Wf;this.S.c=a;ke(this.S);this.zb=new lg;this.u=new Rf(b);this.te=new me;this.zb.c=a;ke(this.zb);this.u.c=a;ke(this.u);this.te.c=a;ke(this.te);this.Pd=new Rc;this.Pb=new J;this.Fa=new J;this.qo=new J}Dg.prototype.rb=function(){this.S.cd();this.S.dd();this.zb.cd();this.zb.dd();this.u.cd();this.u.dd();this.te.cd();this.te.dd()};
Dg.prototype.r=function(){this.S&&(this.S.Ic(),this.S=k);this.zb&&(this.zb.Ic(),this.zb=k);this.u&&(this.u.Ic(),this.u=k);this.te&&(this.te.Ic(),this.te=k)};
Dg.prototype.Kj=function(a){var b,c,d,e,f,g;w(a.type)&&("globe"==a.type?(this.S.Ic(),this.S=new Wf,this.S.c=this.c):"fly"==a.type?(this.S.Ic(),this.S=new Vf,this.S.c=this.c):"constrained"==a.type?(this.S.Ic(),this.S=new Cg(a),this.S.c=this.c):"dynamic"==a.type&&(this.S.Ic(),this.S=new mg,this.S.c=this.c),b=this.S.m,c=this.S.l,d=this.S.g,e=this.S.s,f=this.S.p,g=this.S.Ka,w(a.Longitude)&&(b=a.Longitude),w(a.Latitude)&&(c=a.Latitude),w(a.Elevation)&&(d=a.Elevation),w(a.Yaw)&&(e=G(a.Yaw)),w(a.Pitch)&&
(f=G(a.Pitch)),w(a.Roll)&&(g=G(a.Roll)),this.S.ya(b,c,d),this.S.Cb(e,f,g),ke(this.S))};function Eg(a){this.b=a;this.Nd=n;this.fk=this.Xk=this.Tb=this.ok=this.fl=this.Ac=this.mk=this.dl=this.Vc=this.lk=this.cl=this.Uc=this.gk=this.Yk=this.Sc=this.jk=this.al=this.yc=this.nk=this.el=this.zc=this.ik=this.$k=this.Tc=this.kk=this.bl=this.Ub=this.hk=this.Zk=this.Cd=k}function jd(a,b,c){a.Cd&&(a.b.useProgram(a.Cd),a.b.uniformMatrix4fv(a.b.getUniformLocation(a.Cd,"matMVP"),n,b.Oa()),a.b.uniform4fv(a.b.getUniformLocation(a.Cd,"uColor"),c.Oa()))}
function kd(a,b,c){a.Tc&&(a.b.useProgram(a.Tc),a.b.uniformMatrix4fv(a.b.getUniformLocation(a.Tc,"matMVP"),n,b.Oa()),a.b.uniform4fv(a.b.getUniformLocation(a.Tc,"uColor"),c.Oa()))}
function Fg(a){a.Nd=j;a.Zk=Gg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n}\n");a.hk=Gg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform vec4 uColor;\n\nvoid main()\n{\n   gl_FragColor = uColor;\n}");a.Zk&&a.hk&&(a.Cd=a.b.createProgram(),a.b.attachShader(a.Cd,a.Zk),a.b.attachShader(a.Cd,a.hk),a.b.bindAttribLocation(a.Cd,0,"aPosition"),a.b.linkProgram(a.Cd),!a.b.getProgramParameter(a.Cd,
a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert("Shader Link: "+a.b.getProgramInfoLog(a.Cd)));a.bl=Gg(a,a.b.VERTEX_SHADER,"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 matModelView;\nuniform mat4 matProjection;\nuniform mat4 matNormal;\n\nvarying vec2 vTexCoord;\nvarying vec3 vNormal;\nvarying vec4 vPosition;\n\nvoid main(void)\n{\nvPosition = matModelView * vec4(aPosition, 1.0);\ngl_Position = matProjection * vPosition;\nvTexCoord = aTexCoord;\nvNormal = (matNormal * vec4(aNormal,1.0)).xyz;\n}\n");
a.kk=Gg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nvarying vec3 vNormal;\nvarying vec4 vPosition;\nuniform sampler2D uTexture;\nvoid main(void)\n{\nvec3 L = normalize(-vPosition.xyz);\nfloat lamb = 2.0*max(dot(normalize(vNormal), L), 0.0);\nvec3 diff = vec3(1.0,0.0,0.0) * lamb;\ngl_FragColor = vec4(diff.xyz, 1.0);\n}\n");a.bl&&a.kk&&(a.Ub=a.b.createProgram(),a.b.attachShader(a.Ub,a.bl),a.b.attachShader(a.Ub,a.kk),a.b.bindAttribLocation(a.Ub,0,"aPosition"),
a.b.bindAttribLocation(a.Ub,1,"aNormal"),a.b.bindAttribLocation(a.Ub,2,"aTexCoord"),a.b.linkProgram(a.Ub),!a.b.getProgramParameter(a.Ub,a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert(a.b.getProgramInfoLog(a.Ub)));a.$k=Gg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec4 aColor;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition, 1.0);\n   vColor = aColor;\n   gl_PointSize = 1.0;}\n");a.ik=Gg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nuniform vec4 uColor;\nvoid main()\n{\n   gl_FragColor = vColor * uColor;\n}\n\n");
a.$k&&a.ik&&(a.Tc=a.b.createProgram(),a.b.attachShader(a.Tc,a.$k),a.b.attachShader(a.Tc,a.ik),a.b.bindAttribLocation(a.Tc,0,"aPosition"),a.b.bindAttribLocation(a.Tc,1,"aColor"),a.b.linkProgram(a.Tc),!a.b.getProgramParameter(a.Tc,a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert(a.b.getProgramInfoLog(a.Tc)));a.el=Gg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");
a.nk=Gg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   gl_FragColor = texture2D(uTexture, vTexCoord)*uColor;\n}\n\n");a.el&&a.nk&&(a.zc=a.b.createProgram(),a.b.attachShader(a.zc,a.el),a.b.attachShader(a.zc,a.nk),a.b.bindAttribLocation(a.zc,0,"aPosition"),a.b.bindAttribLocation(a.zc,1,"aTexCoord"),a.b.linkProgram(a.zc),!a.b.getProgramParameter(a.zc,a.b.LINK_STATUS)&&!a.b.isContextLost()&&
alert(a.b.getProgramInfoLog(a.zc)));a.al=Gg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\nattribute vec4 aColor;\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n   vNormal = aNormal;\n   vColor = aColor;\n}\n");a.jk=Gg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec4 vColor;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   gl_FragColor = vColor * texture2D(uTexture, vTexCoord);\n}\n\n");
a.al&&a.jk&&(a.yc=a.b.createProgram(),a.b.attachShader(a.yc,a.al),a.b.attachShader(a.yc,a.jk),a.b.bindAttribLocation(a.yc,0,"aPosition"),a.b.bindAttribLocation(a.yc,1,"aNormal"),a.b.bindAttribLocation(a.yc,2,"aTexCoord"),a.b.bindAttribLocation(a.yc,3,"aColor"),a.b.linkProgram(a.yc),!a.b.getProgramParameter(a.yc,a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert(a.b.getProgramInfoLog(a.yc)));a.Yk=Gg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");
a.gk=Gg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\n\nuniform vec4 uColor;\nvoid main()\n{\n   gl_FragColor = uColor*texture2D(uTexture, vTexCoord);\n}\n\n");a.Yk&&a.gk&&(a.Sc=a.b.createProgram(),a.b.attachShader(a.Sc,a.Yk),a.b.attachShader(a.Sc,a.gk),a.b.bindAttribLocation(a.Sc,0,"aPosition"),a.b.bindAttribLocation(a.Sc,1,"aTexCoord"),a.b.linkProgram(a.Sc),!a.b.getProgramParameter(a.Sc,a.b.LINK_STATUS)&&!a.b.isContextLost()&&
alert("font shader: "+a.b.getProgramInfoLog(a.Sc)));a.cl=Gg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");a.lk=Gg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\n\nuniform vec4 uColor;\nvoid main()\n{\n   if(texture2D(uTexture, vTexCoord)[3]<0.1){discard;}\n gl_FragColor = uColor*texture2D(uTexture, vTexCoord);\n}\n\n");
a.cl&&a.lk&&(a.Uc=a.b.createProgram(),a.b.attachShader(a.Uc,a.cl),a.b.attachShader(a.Uc,a.lk),a.b.bindAttribLocation(a.Uc,0,"aPosition"),a.b.bindAttribLocation(a.Uc,1,"aTexCoord"),a.b.linkProgram(a.Uc),!a.b.getProgramParameter(a.Uc,a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert("poi shader: "+a.b.getProgramInfoLog(a.Uc)));a.dl=Gg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nuniform mat4 matInvMVP;\nattribute vec3 aPosition;\nattribute vec4 aColor;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition, 1.0);\n   vColor = aColor;\n   gl_PointSize=4.0; \n}\n");
a.mk=Gg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_FragColor = vColor;\n}\n\n");a.dl&&a.mk&&(a.Vc=a.b.createProgram(),a.b.attachShader(a.Vc,a.dl),a.b.attachShader(a.Vc,a.mk),a.b.bindAttribLocation(a.Vc,0,"aPosition"),a.b.bindAttribLocation(a.Vc,1,"aColor"),a.b.linkProgram(a.Vc),!a.b.getProgramParameter(a.Vc,a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert(a.b.getProgramInfoLog(a.Vc)));a.fl=Gg(a,a.b.VERTEX_SHADER,"uniform mat4 matM;uniform mat4 matMVP;\nvarying float w_val;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{gl_Position = matMVP * vec4(aPosition,1.0);\nvec4 xyz = matM * vec4(aPosition,1.0);\nfloat x = xyz.x*8388607.0;\nfloat y = xyz.y*8388607.0;\nfloat z = xyz.z*8388607.0;\nfloat sq, lat, sinlat, coslat, sinlat2, Rn, elevation;\nsq = sqrt(x*x+y*y);\n lat = atan(z,sq);\n      for (int i=0;i<2;i++)\n{\nsinlat = sin(lat);\ncoslat = cos(lat);\nsinlat2 = sinlat*sinlat;\nRn = 6378137.0 / sqrt(1.0-0.0066943799*sinlat2);\n   elevation = sq / coslat - Rn;\nlat = atan(z/sq, 1.0-(Rn*0.0066943799)/(Rn+elevation));\n}\nw_val = 1.0-clamp(abs(elevation)/4000.0,0.0,1.0); vTexCoord = aTexCoord;\n}\n");
a.ok=Gg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying float w_val;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   float depth = w_val;\nfloat depth2 = depth*depth;\nvec4 rgb;\n if (depth < 0.5) { rgb.g = 1.6*depth2+1.2*depth; } else { rgb.g = 3.2*depth2-6.8*depth+3.6; rgb.b = depth2*-4.8+9.2*depth-3.4; }\nrgb.a=1.0;\ndepth = depth/0.9;\ndepth2 = depth2/0.81;\nrgb.r = -2.14*depth2*depth2 -1.07*depth2*depth + 0.133*depth2 +0.0667*depth +1.0;\ngl_FragColor = texture2D(uTexture, vTexCoord)*rgb;\n\n}\n\n");
a.fl&&a.ok&&(a.Ac=a.b.createProgram(),a.b.attachShader(a.Ac,a.fl),a.b.attachShader(a.Ac,a.ok),a.b.bindAttribLocation(a.Ac,0,"aPosition"),a.b.bindAttribLocation(a.Ac,1,"aTexCoord"),a.b.linkProgram(a.Ac),!a.b.getProgramParameter(a.Ac,a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert(a.b.getProgramInfoLog(a.Ac)));a.Xk=Gg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");
a.fk=Gg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 uInvTexSize;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   float weight=0.0; vec4 colorsum = vec4(0.0,0.0,0.0,0.0);\n   vec4 mid = texture2D(uTexture, vTexCoord);\n   if (mid.r == 1.0 && mid.g == 0.0 && mid.b == 1.0 && mid.a < 0.5)\n   {   for (int i=-3;i<3;i++) {\n       \n          for (int j=-3;j<3;j++) {\n          \n             vec4 val = texture2D(uTexture, vTexCoord + uInvTexSize * vec2(i,j));\n             if (val.r == 1.0 && val.g == 0.0 && val.b == 1.0 && val.a < 0.5) \n             {}\n             else \n             {                gl_FragColor = val; return;\n             }\n           }\n        }\n        gl_FragColor = vec4(0,1,0.5,0); return;\n   }\n   gl_FragColor = mid;\n}\n");
a.Xk&&a.fk&&(a.Tb=a.b.createProgram(),a.b.attachShader(a.Tb,a.Xk),a.b.attachShader(a.Tb,a.fk),a.b.bindAttribLocation(a.Tb,0,"aPosition"),a.b.bindAttribLocation(a.Tb,1,"aTexCoord"),a.b.linkProgram(a.Tb),!a.b.getProgramParameter(a.Tb,a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert(a.b.getProgramInfoLog(a.Tb)))}
function Gg(a,b,c){var d=a.b.createShader(b);if(!d)return k;a.b.shaderSource(d,c);a.b.compileShader(d);return!a.b.getShaderParameter(d,a.b.COMPILE_STATUS)&&!a.b.isContextLost()?(b==a.b.VERTEX_SHADER?alert("Vertex Shader "+a.b.getShaderInfoLog(d)):b==a.b.FRAGMENT_SHADER?alert("Fragment Shader "+a.b.getShaderInfoLog(d)):alert("Unknown Shader "+a.b.getShaderInfoLog(d)),k):d};function Hg(a){this.c=a;this.kj=[];this.Yb=[]}x("TextureManager",Hg);Hg.prototype.pl=function(a,b,c,d){var e=this.kj[a];e?(this.Yb[a]+=1,b(e)):(e=new M(this.c),N(e,a,b,c,d),this.Yb[a]=1,this.kj[a]=e);return e};Hg.prototype.CreateTexture=Hg.prototype.pl;Hg.prototype.rl=function(a){this.Yb[a]-=1;0==this.Yb[a]&&(this.kj[a].r(),delete this.kj[a],delete this.Yb[a])};Hg.prototype.DestroyTexture=Hg.prototype.rl;var Ig=[14,28,14,14,14,14,14,14,14,96,0,14,14,0,14,14,14,14,14,14,14,14,14,14,14,14,14,14,0,0,0,0,8,8,10,16,16,25,19,5,9,9,11,16,8,9,8,8,16,16,16,16,16,16,16,16,16,16,8,8,16,16,16,16,28,19,19,20,20,19,17,22,20,8,14,19,16,23,20,22,19,22,20,19,16,20,19,28,19,18,17,8,8,8,14,16,9,15,16,14,16,15,7,16,16,6,6,14,6,24,16,15,16,16,9,14,8,16,13,19,13,13,14,9,6,9,16,8,16,0,6,16,9,28,16,16,9,29,19,9,28,0,17,0,0,6,6,9,9,10,16,28,8,28,14,9,26,0,14,19,8,8,16,16,16,16,6,16,9,21,10,16,16,9,21,15,11,15,9,9,9,16,15,
9,9,9,10,16,23,23,23,17,19,19,19,19,19,19,28,20,19,19,19,19,8,8,8,8,20,20,22,22,22,22,22,16,22,20,20,20,20,19,19,17,16,16,16,16,16,16,25,14,16,16,16,16,8,8,8,8,16,16,16,16,16,16,16,15,17,16,16,16,16,14,16,14];
function Jg(a){this.c=a;this.b=a.b;var b=0,c=0;this.Li=new L(this.c);for(var a=[],d=[],e=0;16>e;e++)for(var f=0;16>f;f++){var b=0.0625*e,g=0.0625*f;a.push(0,31,0,g,b+0.001953125);a.push(0,0,0,g,b+0.0625);a.push(31,0,0,g+0.0625,b+0.0625);a.push(31,31,0,g+0.0625,b+0.001953125);b=4*c;d.push(b,b+1,b+2,b,b+2,b+3);c++}c=this.Li;0==a.length%5&&(c.D=new Float32Array(a),c.mode="font",c.T=5);id(this.Li,d,"TRIANGLES");a=new M(this.c);N(a,rd+"font.png");this.Li.Mc(a);new J}
Jg.prototype.we=function(a,b,c,d,e){d==k&&(d=1);this.c.Jc();this.c.Lj();this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);for(var f=new J,g=0,i=0,l=0;l<a.length;l++)g=a.charCodeAt(l),i+=Ig[g]/2*d,f.Xd(d,d,1),f.Bl(f,b+i,c,0),this.c.Lc(f),this.Li.ra(j,6,12*g,e),i+=Ig[g]/2*d;this.c.Id();this.c.b.disable(this.c.b.BLEND)};Jg.prototype.tl=function(a){for(var b=0,c=0;c<a.length;c++)b+=Ig[a.charCodeAt(c)];return b};
Jg.prototype.Kn=fa(32);x("Font",Jg);Jg.prototype.DrawText=Jg.prototype.we;Jg.prototype.GetStringHeight=Jg.prototype.Kn;Jg.prototype.GetStringWidth=Jg.prototype.tl;function Kg(a){this.c=a;this.b=a.b;this.Mf=n;this.Uk=this.xc=this.A=k;this.C=this.w=0}
Kg.prototype.Og=function(a,b){this.Tf=document.createElement("canvas");this.Q=this.Tf.getContext("2d");this.Ya=new M(this.c);this.Ya.j=this.b.createTexture();this.text=a;this.Q.save();this.Q.font=b.fontString;this.Q.textAlign="left";this.Q.textBaseline="top";this.Q.lineWidth=b.lineWidth;this.Q.strokeStyle=b.strokeStyle;var c=this.Q.measureText(this.text),c=Math.round(c.width);this.Q.restore();this.w=c+2*parseInt(b.lineWidth,10)+Math.abs(b.shadowOffsetX)+Math.abs(b.shadowOffsetY)+b.shadowBlur;this.C=
parseInt(b.fontString,10)+2*parseInt(b.lineWidth,10)+Math.abs(b.shadowOffsetY)+b.shadowBlur;this.Zc=Mc(this.w);this.Yc=Mc(this.C);this.Ya.width=this.Zc;this.Ya.height=this.Yc;this.Q.canvas.width=this.Zc;this.Q.canvas.height=this.Yc;this.Q.fillStyle=b.backgroundColor;this.Q.fillRect(0,0,this.w,this.C);this.Q.shadowOffsetX=b.shadowOffsetX;this.Q.shadowOffsetY=b.shadowOffsetY;this.Q.shadowBlur=b.shadowBlur;this.Q.shadowColor=b.shadowColor;this.Q.fillStyle=b.fontColor;this.Q.font=b.fontString;this.Q.textAlign=
"left";this.Q.textBaseline="middle";this.Q.lineWidth=b.lineWidth;this.Q.strokeStyle=b.strokeStyle;this.Q.strokeText(a,b.lineWidth,this.C/2);this.Q.fillText(a,b.lineWidth,this.C/2);this.ih();this.A=new L(this.c);this.A.Mc(this.Ya);c=[];c.push(-this.w/2,this.C/2,0,0,0);c.push(-this.w/2,-this.C/2,0,0,1/this.Yc*this.C);c.push(this.w/2,-this.C/2,0,1/this.Zc*this.w,1/this.Yc*this.C);c.push(this.w/2,this.C/2,0,1/this.Zc*this.w,0);hd(this.A,c);id(this.A,[0,1,2,0,2,3],"TRIANGLES");this.A.w=this.w;this.A.C=
this.C;return this.A};
Kg.prototype.Mg=function(a,b){this.Tf=document.createElement("canvas");this.Q=this.Tf.getContext("2d");this.Ya=new M(this.c);this.Ya.j=this.b.createTexture();Lg(this,a,b);this.A=new L(this.c);this.A.Mc(this.Ya);var c=[];c.push(-this.w/2,this.C/2,0,0,0);c.push(-this.w/2,-this.C/2,0,0,1/this.Yc*this.C);c.push(this.w/2,-this.C/2,0,1/this.Zc*this.w,1/this.Yc*this.C);c.push(this.w/2,this.C/2,0,1/this.Zc*this.w,0);hd(this.A,c);id(this.A,[0,1,2,0,2,3],"TRIANGLES");this.A.Z=[-this.w/2,-this.C/2,0];this.A.ua=
[this.w/2,this.C/2,0];this.A.w=this.w;this.A.C=this.C;return this.A};
function Lg(a,b,c){a.w=c.iconWidth+2*c.border+Math.abs(c.shadowOffsetX)+Math.abs(c.shadowOffsetY)+c.shadowBlur;a.C=c.iconHeight+2*c.border+Math.abs(c.shadowOffsetX)+Math.abs(c.shadowOffsetY)+c.shadowBlur;a.Zc=Mc(a.w);a.Yc=Mc(a.C);a.Ya.width=a.Zc;a.Ya.height=a.Yc;a.Q.canvas.width=a.Zc;a.Q.canvas.height=a.Yc;a.Q.fillStyle=c.backgroundColor;a.Q.fillRect(0,0,a.w,a.C);a.Q.shadowOffsetX=c.shadowOffsetX;a.Q.shadowOffsetY=c.shadowOffsetY;a.Q.shadowBlur=c.shadowBlur;a.Q.shadowColor=c.shadowColor;var d=new Image;
d.crossOrigin="anonymous";d.onload=function(){a.Q.drawImage(d,c.border,c.border,c.iconWidth,c.iconHeight);a.ih()};d.src=b}
Kg.prototype.ih=function(){this.b.enable(this.b.TEXTURE_2D);this.b.bindTexture(this.b.TEXTURE_2D,this.Ya.j);this.b.pixelStorei(this.b.UNPACK_FLIP_Y_WEBGL,0);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.c.b.RGBA,this.b.UNSIGNED_BYTE,this.Tf);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,
this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.bindTexture(this.b.TEXTURE_2D,k);this.Ya.Xb=j};Kg.prototype.r=function(){this.A&&(this.A.r(),this.A=k);this.xc&&(this.xc.r(),this.xc=k);this.Uk&&(this.Uk.r(),this.Uk=k);this.Ya&&(this.Ya.r(),this.Ya=k);this.Tf&&(document.removeChild(this.Tf),this.Tf=k)};function Mg(a){this.c=a;this.b=a.b;this.$b=this.cc=this.bc=0;this.Mf=n;this.Sa=this.Xa=this.xc=k;this.scale=20;this.text=this.mg="";this.wh=new Kg(a);this.Ph=this.vg=0;this.Vm=this.Wm=1;this.Um=0;this.Tm=1;this.Wk=0;this.Vk=Infinity;this.Ik=new ad(1,1,1,1);this.Oi={iconWidth:64,iconHeight:64,border:0,backgroundColor:"rgba(255, 255, 255, 0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0)"};this.Xh={id:1,fontString:"48px bold Arial",backgroundColor:"rgba(0,0,0,0)",fontColor:"rgba(255,255,255,1.0)",
lineWidth:8,strokeStyle:"rgba(0,0,0,1.0)",fontSize:48,shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 1.0)"};this.Ai=n;this.Fk=0;this.Gk=1;this.Hk=0}r=Mg.prototype;r.Rn=function(a,b,c,d){this.mg=c?c:"";b&&(this.Xh=b);this.text=a;d&&(this.Oi=d);c&&(this.Xa=this.wh.Mg(this.mg,this.Oi));this.wh=new Kg(this.c);a&&(this.Sa=this.wh.Og(a,this.Xh))};
r.ya=function(a,b,c,d){this.Xa&&this.Sa?(this.vg=this.Xa.w+this.Sa.w,this.Ph=this.Xa.C):this.Xa?(this.vg=this.Xa.w,this.Ph=this.Xa.C):this.Sa&&(this.vg=this.Sa.w,this.Ph=this.Sa.C);var e=this.vg-this.Sa.w,f=this.Ai?-this.Fk*e/2:-this.Fk*this.vg/2;if(this.Xa){var g=this.vg-e,g=this.Ai?0:-g/2;this.Xa.ah(a,b,c,1.1920930376163766E-7*(g+f)*this.scale,1.1920930376163766E-7*this.Gk*(this.Ph/2)*this.scale,1.1920930376163766E-7*this.Hk*this.scale)}this.Sa&&(g=this.Ai?e/2+this.Sa.w/2:e/2,this.Sa.ah(a,b,c,1.1920930376163766E-7*
(g+f)*this.scale,1.1920930376163766E-7*this.Gk*(this.Ph/2)*this.scale,1.1920930376163766E-7*this.Hk*this.scale));this.Pe=a;this.Qe=b;this.Re=c;if(d!=k){this.Mf=j;var d=this.wh,e=this.Wm,f=this.Vm,g=this.Um,i=this.Tm;d.xc=new L(d.c);var l=[];l.push(a,b,c,e,f,g,i);l.push(0,0,0,e,f,g,i);ed(d.xc,l);id(d.xc,[0,1],"LINES");this.xc=d.xc}};
r.ra=function(){this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);this.Mf&&this.xc.ra();this.Xa&&nd(this.Xa);this.Sa&&nd(this.Sa);this.c.Jc();var a=new J;a.Xd(1.1920930376163766E-7*this.scale,1.1920930376163766E-7*this.scale,1);this.c.Lc(a);this.Xa&&this.Xa.ra(n,0,0,k,this.Ik);this.Sa&&this.Sa.ra(n,0,0,k,this.Ik);this.c.Id();this.c.b.disable(this.c.b.BLEND)};
function Ng(a){a.Mf?a.ya(a.Pe,a.Qe,a.Re,0):a.ya(a.Pe,a.Qe,a.Re,k)}r.qi=function(a){this.scale=a;Ng(this)};r.Xg=function(a,b){var c=n,d=n;if(this.Xa)var e=this.c.af(a,b,this.c.va,j),c=this.Xa.Fe(e.x,e.y,e.n,e.ke,e.le,e.me);this.Sa&&(e=this.c.af(a,b,this.c.va,j),d=this.Sa.Fe(e.x,e.y,e.n,e.ke,e.le,e.me));return c||d};r.r=function(){this.wh=k;this.$b=this.cc=this.bc=0;this.Xa&&this.Xa.r();this.Sa&&this.Sa.r();this.xc&&this.xc.r();this.Mf=n;this.xc=k;this.scale=0};x("Poi",Mg);Mg.prototype.Draw=Mg.prototype.ra;
Mg.prototype.SetContent=Mg.prototype.Rn;Mg.prototype.SetPosition=Mg.prototype.ya;Mg.prototype.SetSize=Mg.prototype.qi;Mg.prototype.Destroy=Mg.prototype.r;function Og(a){this.c=a;this.Qh=[];this.Yb=[];this.dg=k;this.Rh=[];this.Of=[]}r=Og.prototype;r.ol=function(a,b,c,d){var e=new Mg(this.c);b&&(e.Xh=b);e.text=a;d&&(e.Oi=d);c&&(e.mg=c,e.Xa=this.Mg(c,e.Oi));a&&(e.Sa=this.Og(a,e.Xh));return e};r.ql=function(a){a.Xa&&Pg(this,a.mg);a.Sa&&Qg(this,a.text,a.Xh)};r.Mg=function(a,b){var c=this.Qh[a];if(c){this.Yb[a]+=1;var d=new L(this.c);d.ca(c);d.w=c.w;d.C=c.C;this.Qh[a]=d}else this.dg=new Kg(this.c),d=this.dg.Mg(a,b),this.Yb[a]=1,this.Qh[a]=d,this.dg=k;return d};
function Pg(a,b){a.Yb[b]-=1;0==a.Yb[b]&&(a.Qh[b].j.r(),delete a.Qh[b],delete a.Yb[b])}r.Og=function(a,b){var c=this.Rh[a+b.id];if(c){this.Of[a+b.id]+=1;var d=new L(this.c);d.ca(c);d.w=c.w;d.C=c.C;this.Rh[a+b.id]=d}else this.dg=new Kg(this.c),d=this.dg.Og(a,b),this.Of[a+b.id]=1,this.Rh[a+b.id]=d,this.dg=k;return d};function Qg(a,b,c){a.Of[b+c.id]-=1;0==a.Of[b+c.id]&&(a.Rh[b+c.id].j.r(),delete a.Rh[b+c.id],delete a.Of[b+c.id])}
r.ml=function(a,b,c){a.Xa=this.Mg(b,c);a.ya(a.Pe,a.Qe,a.Re,k);Pg(this,a.mg);a.mg=b};r.nl=function(a,b,c){a.Sa=this.Og(b,c);a.ya(a.Pe,a.Qe,a.Re,k);Qg(this,a.text,c);a.text=b};x("PoiManager",Og);Og.prototype.CreatePoi=Og.prototype.ol;Og.prototype.DestroyPoi=Og.prototype.ql;Og.prototype.ChangePoiIcon=Og.prototype.ml;Og.prototype.ChangePoiText=Og.prototype.nl;var Rg=new Date,Sg=new Date,Tg=[],Ug=0,Vg=k,Wg=k;function Xg(){for(var a=0;a<Tg.length;a++){var b=Tg[a];b.Xl&&(0<b.gl&&0<b.rk?(b.I.width=window.innerWidth-b.gl,b.I.height=window.innerHeight-b.rk):(b.I.width=window.innerWidth,b.I.height=window.innerHeight));b.b.isContextLost()||Yg(b,b.I.width,b.I.height)}}
function W(){this.He=this.md=this.he=this.ie=this.ge=k;this.Nd=n;this.height=this.width=0;this.Xl=n;this.hb=this.I=this.b=k;this.Xj=0.670588;this.Wj=0.921569;this.Uj=this.Vj=1;this.wn=this.xn=this.zn=this.yn=0;this.fi=this.ei=20;this.Pb=new J;this.Fa=new J;this.vd=new J;this.Jh=new J;this.va=new J;this.vk=new J;this.gf=[];this.cg=new Rc;this.tn=[];this.un=[];Tg[Ug]=this;Ug++;this.Ck=this.e=this.yg=k;this.Ye=1;this.sa=this.jj=this.wg=k;this.rk=this.gl=0}
function Zg(a){function b(b){var c=a.parentNode;c&&(c.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+b+"</div></div></td></tr></table>")}if(!window.WebGLRenderingContext)return b('This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>'),k;var c=$g(a);return c===k?(b('It doesn\'t appear your browser supports WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>'),
k):c}function $g(a){for(var b=["webgl","experimental-webgl","webkit-3d","moz-webgl"],c=k,d=0;d<b.length;++d){try{c=a.getContext(b[d],{antialias:n})}catch(e){}if(c)break}return c}r=W.prototype;
r.ul=function(a,b){var c=document.getElementById(a);if(this.b=Zg(c)){this.I=c;c.addEventListener("webglcontextlost",function(a){a.preventDefault()},n);c.addEventListener("webglcontextrestored",function(){window.location.reload()},n);b&&(this.fi=this.ei=0,c.width=window.innerWidth-this.ei,c.height=window.innerHeight-this.fi,this.Xl=j);for(var d=["webgl","experimental-webgl","moz-webgl","webkit-3d"],e=0;d.length>e;e++)try{if(this.b=c.getContext(d[e]))break}catch(f){}this.b?(Yg(this,this.I.width,this.I.height),
this.b.clearColor(0,0,0,1),this.b.enable(this.b.DEPTH_TEST),this.b.frontFace(this.b.CCW),this.b.cullFace(this.b.BACK),this.hb=new Eg(this.b),Fg(this.hb),this.yg=new Jg(this),this.Ck=new M(this),N(this.Ck,rd+"nodata.png"),this.wg=new Og(this),this.jj=new Hg(this),this.sa=new ah(this),this.ge&&this.ge(this),Sg=new Date,"undefined"!=typeof window&&window.an(bh,this.I),this.I.oncontextmenu=function(a){a.preventDefault();a.stopPropagation();return n},Q(window,"resize",Xg,n,this),Q(window,"unload",this.Ic,
n,this)):alert("Can't find webgl context. It seems your browser is not compatible! For example, you can get the latest Firefox or Chrome")}};
r.Ic=function(){this.ge&&(this.ge=k);this.Jd&&(U(this.Jd),this.Jd=k);this.Kd&&(U(this.Kd),this.Kd=k);this.md&&(U(this.md),this.md=k);this.ie&&(this.ie=k);this.he&&(this.he=k);Vg&&(U(Vg),Wg=k);Wg&&(U(Wg),Wg=k);this.e&&(this.e.r(),this.e=k);this.b.clearColor(0,0,0,0);this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT);this.hb=this.I=this.b=k;this.tn=[];this.un=[];this.jj=this.wg=this.e=this.yg=k;Wd(window,"resize",k,n,this);Ug=0;Tg=[]};
r.Hl=function(a,b,c,d){0<=a&&1>=a&&0<=b&&1>=b&&0<=c&&1>=c&&0<=d&&1>=d&&(this.Xj=a,this.Wj=b,this.Vj=c,this.Uj=d)};r.Jn=function(){return{fp:this.Xj,Xo:this.Wj,So:this.Vj,Ro:this.Uj}};r.sj=function(){var a=this.b;a?(a.clearColor(this.Xj,this.Wj,this.Vj,this.Uj),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)):ch("Warning: no gl context!!")};r.Tl=function(a,b,c,d){this.b&&(this.yn=a,this.zn=b,this.xn=c,this.wn=d,this.b.viewport(a,b,c,d))};r.Ln=function(){return{x:this.yn,y:this.zn,np:this.xn,Yo:this.wn}};
r.Ql=function(a){this.vd.ca(a);dh(this)};r.gh=function(a){this.Fa.ca(a);dh(this)};r.Lc=function(a){this.Pb.ca(a);dh(this)};function dh(a){a.Jh.P(a.Fa,a.Pb);a.va.P(a.vd,a.Jh);a.vk.ye(a.Jh);a.vk.bg()}r.Nn=function(a){var b=new M(this);N(b,a);this.un.push(b);return b};r.Mn=function(a){var b=new L(this);ld(b,a);this.tn.push(b);return b};r.Jc=function(){var a=this.cg,b=this.Fa,c=new J;c.ca(b);a.ii.push(c);a=this.cg;b=this.Pb;c=new J;c.ca(b);a.hi.push(c);a=this.cg;b=this.vd;c=new J;c.ca(b);a.Yf.push(c)};
r.Id=function(){this.Pb.ca(this.cg.hi.pop());this.Fa.ca(this.cg.ii.pop());this.vd.ca(this.cg.Yf.pop());dh(this)};r.Lj=function(){var a=this.b.getParameter(this.b.VIEWPORT),b=a[2]-a[0],a=a[3]-a[1];this.Pb.gi();this.Fa.gi();this.vd.Al(0,b,0,a);dh(this)};
r.Ng=function(){if(0==this.Ye){var a={type:"custom"};this.e=new Dg(this,a);this.e.u.uj(this.width,this.height)}else 1==this.Ye?(a={type:"ellipsoid"},this.e=new Dg(this,a),this.e.u.uj(this.width,this.height)):2==this.Ye?Dc(F("owg.engine3d"),"** WARNING: not implemented"):3==this.Ye&&Dc(F("owg.engine3d"),"** WARNING: not implemented")};r.we=function(a,b,c,d,e){this.yg&&this.yg.we(a,b,c,d,e)};r.wj=function(a){var b=Array(2);b[0]=0;b[1]=0;this.yg&&(b[0]=this.yg.tl(a),b[1]=32);return b};
r.af=function(a,b,c,d){var e=new J;e.ye(c);var f=this.height-b-1,b=2*(a-0)/this.width-1,c=2*(f-0)/this.height-1,a=2*(a-0)/this.width-1,f=2*(f-0)/this.height-1,g=new I;g.q(b,c,-1);b=e.Za(g);c=new I;c.q(a,f,1);c=e.Za(c);e=c.a[0]-b.a[0];a=c.a[1]-b.a[1];c=c.a[2]-b.a[2];d&&(d=Math.sqrt(e*e+a*a+c*c),e/=d,a/=d,c/=d);d=b.a;b={};b.x=d[0];b.y=d[1];b.n=d[2];b.ke=e;b.le=a;b.me=c;return b};
"undefined"!=typeof window&&(window.an=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,30)});
function bh(){Rg=new Date;var a=Rg.valueOf()-Sg.valueOf();Sg=Rg;for(var b=0;b<Tg.length;b++){var c=Tg[b];if(!c.b.isContextLost()){if(c.e){var d=c.e,e=a;d.S.Ce(e);d.zb.Ce(e);d.u.Ce(e);d.te.Ce(e)}c.ie&&c.ie(a,c);c.Tl(0,0,c.width,c.height);c.sj();if(c.e){var d=c.e,e=d.Pd,f=d.Pb,g=new J;g.ca(f);e.hi.push(g);e=d.Pd;f=d.Fa;g=new J;g.ca(f);e.ii.push(g);e=d.Pd;f=d.qo;g=new J;g.ca(f);e.Yf.push(g);d.S.ed(d.Pd);d.zb.ed(d.Pd);d.u.ed(d.Pd);d.te.ed(d.Pd);d.Pd.hi.pop();d.Pd.ii.pop();d.Pd.Yf.pop();c.e.rb()}d=c.b.getError();
d!=c.b.NO_ERROR&&d!=c.b.Qo&&ch("WebGL Error: "+d);c.he&&c.he(c);typeof window!="undefined"&&window.an(bh,c.I)}}}function Yg(a,b,c){a.width=b;a.height=c;a.He&&a.He(b,c,a);a.e&&a.e.u.uj(b,c)}r=W.prototype;r.Il=da("ge");r.ri=da("ie");r.Rl=da("he");r.Ml=function(a){if(this.Jd){U(this.Jd);this.Jd=k}if(a)this.Jd=Q(this.I,Bd,function(b){a(b.button,b.clientX-this.ei/2,b.clientY-this.fi/2,this)},n,this)};
r.Ol=function(a){if(this.Kd){U(this.Kd);this.Kd=k}if(a)this.Kd=Q(this.I,Cd,function(b){a(b.button,b.clientX-this.ei/2,b.clientY-this.fi/2,this)},n,this)};r.Nl=function(a){if(this.xf){U(this.xf);this.xf=k}if(a)this.xf=Q(this.I,Dd,function(b){a(b.clientX-this.ei/2,b.clientY-this.fi/2,this)},n,this)};r.Pl=function(a){if(this.md){U(this.md);this.md=k}if(a){var b=new Sf(this.I);this.md=Q(b,Dd,function(b){b.preventDefault();a(b.yf,this)},n,this)}};r.Sl=da("He");
r.Jl=function(a){if(Vg){U(Vg);Vg=k}a&&(Vg=Q(window,Ed,function(b){a(b.keyCode,this)},n,this))};r.Kl=function(a){if(Wg){U(Wg);Wg=k}a&&(Wg=Q(window,Fd,function(b){a(b.keyCode,this)},n,this))};r.Vd=function(a,b,c){this.e&&this.e.u&&this.e.u.Ca&&this.e.u.Ca.Vd(a,b,c)};r.$f=function(a,b,c,d){this.e&&this.e.u&&this.e.u.Ca&&this.e.u.Ca.$f(a,b,c,d)};r.Zg=function(a,b){return this.e&&this.e.u&&this.e.u.Sh?this.e.u.Sh.Zg(a,b):k};r.ff=function(a,b){return this.e&&this.e.u&&this.e.u.Af?this.e.u.Af.ff(a,b):-1};
r.Yg=function(a,b){return this.e&&this.e.u&&this.e.u.uh?this.e.u.uh.Yg(a,b):-1};r.Kg=function(){return this.e&&this.e.u&&this.e.u.Ca?this.e.u.Ca.Kg():0};r.Cn=function(){return this.e?this.e.S.bf().elevation:0};r.Xf=function(a,b){return this.e&&this.e.u&&this.e.u.Ca?this.e.u.Ca.Xf(a,b):!this.e.u.Ca?{hasvalue:j,elevation:0,lod:0}:{hasvalue:n,elevation:0,lod:-1}};r.vj=function(a,b,c,d,e,f,g){this.sa.vj(a,b,c,d,e,f,g)};r.dh=function(a){this.sa.dh(a)};r.hh=function(){this.sa.hh()};
function Fe(a){if(a.gf.length<1)eh("Fatal error with render target stack. PushRenderTarget/PopRenderTarget do not correspond.");else{var b=a.gf.pop(),c=a.gf.length;c>0?a.gf[c-1].jh():b.Vl()}}x("engine3d",W);W.prototype.AltitudeAboveEllipsoid=W.prototype.Cn;W.prototype.AltitudeAboveGround=W.prototype.Kg;W.prototype.Clear=W.prototype.sj;W.prototype.CreateScene=W.prototype.Ng;W.prototype.DrawText=W.prototype.we;W.prototype.GetClearColor=W.prototype.Jn;W.prototype.GetDirectionMousePos=W.prototype.af;
W.prototype.GetViewport=W.prototype.Ln;W.prototype.InitEngine=W.prototype.ul;W.prototype.LoadMesh=W.prototype.Mn;W.prototype.LoadTexture=W.prototype.Nn;W.prototype.PickGlobe=W.prototype.Vd;W.prototype.PopMatrices=W.prototype.Id;W.prototype.PushMatrices=W.prototype.Jc;W.prototype.SetClearColor=W.prototype.Hl;W.prototype.SetInitCallback=W.prototype.Il;W.prototype.SetKeyDownCallback=W.prototype.Jl;W.prototype.SetKeyUpCallback=W.prototype.Kl;W.prototype.SetModelMatrix=W.prototype.Lc;
W.prototype.SetMouseDownCallback=W.prototype.Ml;W.prototype.SetMouseMoveCallback=W.prototype.Nl;W.prototype.SetMouseUpCallback=W.prototype.Ol;W.prototype.SetMouseWheelCallback=W.prototype.Pl;W.prototype.SetOrtho2D=W.prototype.Lj;W.prototype.SetProjectionMatrix=W.prototype.Ql;W.prototype.SetRenderCallback=W.prototype.Rl;W.prototype.SetResizeCallback=W.prototype.Sl;W.prototype.SetTimerCallback=W.prototype.ri;W.prototype.SetViewMatrix=W.prototype.gh;W.prototype.SetViewport=W.prototype.Tl;
W.prototype.GetElevationAt=W.prototype.Xf;W.prototype.OnDestroy=W.prototype.Ic;function fh(a){a=a.ec;a.ge&&a.ge(a.id)}function gh(a,b){var c=b.ec;c.ie&&c.ie(c.id,a)}function hh(a){a=a.ec;a.he&&a.he(a.id)}function ih(a,b,c,d){d=d.ec;d.Jd&&d.Jd(d.id,a,b,c)}function jh(a,b,c,d){d=d.ec;d.Kd&&d.Kd(d.id,a,b,c)}function kh(a,b,c){c=c.ec;c.xf&&c.xf(c.id,a,b)}function lh(a,b){var c=b.ec;c.md&&c.md(c.id,a)}function mh(a,b,c){c=c.ec;c.He&&c.He(c.id,a,b)}function nh(a,b){var c=b.ec;c.Yj&&c.Yj(c.id,a)}function oh(a,b){var c=b.ec;c.Zj&&c.Zj(c.id,a)}
function ph(a){var b=a.ec;b.vf&&b.vf(a.ec.id)}function qh(a){var b=a.ec;b.wf&&b.wf(a.ec.id)}function rh(){this.name="ogContext";this.type=y;this.mm=n;this.e=this.c=k;this.fontcolor=new ad(1,1,1,1);this.wf=this.vf=this.ge=this.ie=this.he=this.He=this.Zj=this.Yj=this.xf=this.md=this.Kd=this.Jd=k}rh.prototype=new D;
rh.prototype.Na=function(a){this.ge=a.cbfInit;this.He=a.cbfResize;a.fullscreen&&(this.mm=j);this.c=new W;this.c.ec=this;a.canvas?this.c.ul(a.canvas,this.mm):Dc(F("owg.ogContext"),"**ERROR: auto creating canvas is not supported yet!");this.c.Il(fh);this.c.ri(gh);this.c.Rl(hh);this.c.Ml(ih);this.c.Ol(jh);this.c.Nl(kh);this.c.Pl(lh);this.c.Sl(mh);this.c.Jl(nh);this.c.Kl(oh);this.c.sa.vf=ph;this.c.sa.wf=qh};rh.prototype.we=function(a,b,c){this.c&&this.c.we(a,b,c,1,this.fontcolor)};
rh.prototype.wj=function(a){return this.c?this.c.wj(a):k};rh.prototype.mb=function(){this.c.Ic();this.c=k};function sh(){this.name="ogWorld";this.type=Ca}sh.prototype=new D;sh.prototype.Na=function(a){if(a==k)Dc(F("owg.ogTexture"),"** ERROR: no options for texture creation!");else if(a.scenetype){var b=this.parent.parent.c;a.scenetype==db?(b.Ye=1,b.Ng(),b.e&&(b.e.Ig=this)):a.scenetype==eb?(b.Ye=2,b.Ng(),b.e&&(b.e.Ig=this)):a.scenetype==fb?(b.Ye=3,b.Ng(),b.e&&(b.e.Ig=this)):a.scenetype==gb&&(b.Ye=0,b.Ng(),b.e&&(b.e.Ig=this))}};
sh.prototype.pi=function(a){var b=this.parent.parent.c.e.u.Ca;switch(a){case 0:b.pi(zf);break;case 1:b.pi(Af)}};function th(){this.name="ogScene";this.type=A;this.tf=this.Ig=k;this.zi=[];this.Xc=db}th.prototype=new D;r=th.prototype;r.Na=function(a){a==k?Dc(F("owg.ogScene"),"** ERROR: no options for scene creation!"):a.type&&(this.Xc=a.type)};r.Xg=function(a,b){var c={};this.parent.c.Vd(a,b,c);var d=Array(4);d[0]=c.hit;d[1]=c.lng;d[2]=c.lat;d[3]=c.elv;d[4]=c.x;d[5]=c.y;d[6]=c.z;return d};r.Zg=function(a,b){var c=this.parent.c.Zg(a,b);return c?c.wo.id:-1};r.ff=function(a,b){return this.parent.c.ff(a,b)};
r.Yg=function(a,b){return this.parent.c.Yg(a,b)};function uh(a,b){var c=B(b);if(c&&c.type==Ra){var d=Oc(c);d.ya(c.cc,c.bc,c.$b);d.Cb(G(c.Ta),G(c.pitch),G(c.fc));d.ka=c}a.tf=c}r.Kj=function(a,b){var c=this.parent.c;if(0==a)b.type="globe";else if(1==a)b.type="fly";else if(2==a)b.type="constrained";else if(3==a)b.type="dynamic";else return;c.e.Kj(b)};function vh(){this.name="ogPOI";this.type=Wa;this.M=n;this.o=this.ta=k}vh.prototype=new D;
vh.prototype.Na=function(a){var b="",c=40,d=k;a.text&&(b=a.text);if(a.position){var e=a.position,f=[];(new P(e[0],e[1],e[2])).oa(f)}a.size&&(c=a.size);a.icon&&(d=a.icon);a.textstyle&&(this.Vf=a.textstyle);a.iconstyle&&(this.Df=a.iconstyle);this.ta=this.parent.parent.c.wg.ol(b,this.Vf,d,this.Df);this.ta.M=n;a.flagpoleColor&&(b=this.ta,d=a.flagpoleColor,b.Wm=d[0],b.Vm=d[1],b.Um=d[2],b.Tm=d[3]);a.flagpole==j?this.ta.ya(f[0],f[1],f[2],0):this.ta.ya(f[0],f[1],f[2],k);this.ta.qi(c);a.centerOnIcon==j&&(c=
this.ta,c.Ai=j,Ng(c));a.pivotPoint&&(c=a.pivotPoint,f=this.ta,b=c[1],d=c[2],f.Fk=c[0],f.Gk=b,f.Hk=d,Ng(f));this.ta.wo=this;(c=wh(this))&&c.Ra.push(this.ta);a.visibilityRange&&(c=this.ta,a=a.visibilityRange,c.Wk=1.1920930376163766E-4*a[0],c.Vk=1.1920930376163766E-4*a[1])};vh.prototype.mb=function(){var a=this.parent.parent,b=wh(this);if(b)for(var c=this.ta,d=0;d<b.Ra.length;d++)if(b.Ra[d]==c){b.Ra.splice(d,1);break}a.c.wg.ql(this.ta)};vh.prototype.ma=function(){this.M=j;this.ta.M=j};
vh.prototype.na=function(){this.M=n;this.ta.M=n};function wh(a){var b=k,a=a.parent.parent.c;a.e&&a.e.u&&(b=a.e.u.Sh);return b};function xh(){this.name="ogPOILayer";this.type=Ga;this.M=n;this.Ra=[];this.Df=this.Vf=k;this.co={fontString:"48px Arial",backgroundColor:"rgba(0, 0, 0, 0)",fontColor:"rgba(255, 255, 255, 1.0)",lineWidth:3,strokeStyle:"rgba(0, 0, 0, 1.0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.0)"};this.bo={iconWidth:64,iconHeight:64,border:0,backgroundColor:"rgba(0, 0, 0, 0.0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(255, 0, 0, 0)"}}xh.prototype=new D;
function yh(a){a.font&&a.fontSize&&(a.fontString=a.fontSize+"px "+a.font);if(a.backgroundColor){var b=a.backgroundColor;a.backgroundColor="rgba("+255*b[0]+","+255*b[1]+","+255*b[2]+","+b[3]+")"}a.fontColor&&(b=a.fontColor,a.fontColor="rgba("+255*b[0]+","+255*b[1]+","+255*b[2]+","+b[3]+")");a.strokeColor&&(b=a.strokeColor,a.strokeStyle="rgba("+255*b[0]+","+255*b[1]+","+255*b[2]+","+b[3]+")");a.shadowColor&&(b=a.shadowColor,a.shadowColor="rgba("+255*b[0]+","+255*b[1]+","+255*b[2]+","+b[3]+")");a.width&&
(a.iconWidth=a.width);a.height&&(a.iconHeight=a.height)}xh.prototype.Na=function(a){a.textstyle?(yh(a.textstyle),this.Vf=a.textstyle):this.Vf=this.co;a.iconstyle?(yh(a.iconstyle),this.Df=a.iconstyle):this.Df=this.bo};xh.prototype.mb=function(){for(var a=0;a<this.Ra.length;a++)E(this.Ra[a])};xh.prototype.ma=function(){this.M=j;for(var a=0;a<this.Ra.length;a++)this.Ra[a].ma()};xh.prototype.na=function(){this.M=n;for(var a=0;a<this.Ra.length;a++)this.Ra[a].na()};function zh(){this.name="ogElevationLayer";this.type=Ea;this.Gf=-1}zh.prototype=new D;zh.prototype.Rg=function(){var a=k,b=this.parent.parent.parent.c;b.e&&b.e.u&&(a=b.e.u.Ca);return a};zh.prototype.pj=function(a){var b=this.Rg();b&&(this.Gf=b.pj(a))};zh.prototype.Gj=function(){var a=this.Rg();a&&-1!=this.Gf&&a.Gj(this.Gf)};zh.prototype.Na=function(a){this.pj(a)};function ah(a){this.c=a;this.b=a.b;this.Jf=k;this.sm=this.ac=n;this.ji=[];this.ki=[];this.li=[];this.mi=[];this.pn=2E3;this.no=new P;this.wf=this.vf=k}function Ah(a,b,c,d){var e=a.Jf.bf(),f=[e.longitude,e.latitude,e.elevation],g=[b,c,d];a.xh=Ic*Math.acos(Math.sin(G(f[1]))*Math.sin(G(g[1]))+Math.cos(G(f[1]))*Math.cos(G(g[1]))*Math.cos(G(g[0]-f[0])));isNaN(a.xh)&&(a.xh=0);e=[e.longitude,e.latitude,e.elevation+a.xh/4];b=[b,c,d+a.xh/4];a.ji=f;a.ki=e;a.li=b;a.mi=g;a.sm=j}
function Ae(a,b,c,d,e,f,g){a.Jf=a.c.e.S;var i=a.Jf.Sg();a.Pk=i.Ta;a.Nk=i.pitch;a.Ok=i.fc;e!=k&&f!=k&&g!=k?(a.hn=G(e),a.fn=G(f),a.gn=G(g)):(a.hn=a.Pk,a.fn=a.Nk,a.gn=a.Ok);a.hg=a.hn-a.Pk;Math.abs(a.hg)>Math.PI&&(a.hg=0<a.hg?a.hg-2*Math.PI:a.hg+2*Math.PI);a.fg=a.fn-a.Nk;Math.abs(a.fg)>Math.PI&&(a.fg=0<a.fg?a.fg-2*Math.PI:a.fg+2*Math.PI);a.gg=a.gn-a.Ok;Math.abs(a.gg)>Math.PI&&(a.gg=0<a.gg?a.gg-2*Math.PI:a.gg+2*Math.PI);Ah(a,b,c,d);a.vf&&a.vf(a.c);a.c.ri(function(b){if(a.sm){a.yk=a.yk+b;b=a.yk/a.pn;a.J=
0.5*Math.sin(Math.PI*b-Math.PI/2)+0.5;if(b>1){a.J=1;a.hh()}var b=Math.pow(1-a.J,3)*a.ji[0]+3*a.J*Math.pow(1-a.J,2)*a.ki[0]+3*a.J*a.J*(1-a.J)*a.li[0]+Math.pow(a.J,3)*a.mi[0],c=Math.pow(1-a.J,3)*a.ji[1]+3*a.J*Math.pow(1-a.J,2)*a.ki[1]+3*a.J*a.J*(1-a.J)*a.li[1]+Math.pow(a.J,3)*a.mi[1],d=Math.pow(1-a.J,3)*a.ji[2]+3*a.J*Math.pow(1-a.J,2)*a.ki[2]+3*a.J*a.J*(1-a.J)*a.li[2]+Math.pow(a.J,3)*a.mi[2];a.no.ic(b,c,d);a.Jf.ya(b,c,d);a.Jf.Cb(a.Pk+a.J*a.hg,a.Nk+a.J*a.fg,a.Ok+a.J*a.gg);a.J==1&&a.hh()}});a.J=0;a.yk=
0;a.ac=j}ah.prototype.hh=function(){this.c.ri(k);this.ac=n;this.wf&&this.wf(this.c)};
ah.prototype.vj=function(a,b,c,d,e,f,g){this.Jf=this.c.e.S;var d=1.1920930376163766E-7*d,i=new P(a,b,c),l=[];i.oa(l);var m=new J;m.Qd(a,b);a=new J;a.fd(l[0],l[1],l[2]);l=new J;l.P(a,m);m={};e!=k&&f!=k&&g!=k?(m.Ta=G(e),m.pitch=G(f),m.fc=G(g)):m=this.Jf.Sg();a=m.pitch-Math.PI/2;d=new I(d*Math.sin(a)*Math.cos(m.Ta),d*Math.sin(a)*Math.sin(m.Ta),d*Math.cos(a));d=l.Za(d).a;i.ic(d[0],d[1],d[2]);d=i.G[1];l=i.G[0];i=i.G[2];i>c?Ae(this,l,d,i,e,f,g):Ae(this,l,d,-i,m.Ta,-Lc(m.pitch),m.fc)};ah.prototype.dh=da("pn");function Qf(a,b){this.c=a;this.b=a.b;this.ja=this.Nb=this.aa=this.R=this.D=k;this.se=new J;this.Jk=[];this.options=b;this.Pc=new ad;this.Pc.q(1,1,1,1)}
Qf.prototype.oi=function(a){this.Jk=a;var b=0,c=[],d=[];if(this.options.segmentation)for(var e=0;e<a.length-1;e++){var f=[];pf(a[e][0],a[e][1],f);f[2]=a[e][2];var g=[];pf(a[e+1][0],a[e+1][1],g);g[2]=a[e+1][2];for(var g=[g[0]-f[0],g[1]-f[1],g[2]-g[2]],i=0;i<this.options.segmentation+1;i++){var l=f[2]+g[2]*i/this.options.segmentation,m=[];qf(f[0]+g[0]*i/this.options.segmentation,f[1]+g[1]*i/this.options.segmentation,m);m[2]=l;l=new P(m[0],m[1],m[2]);m=[];l.oa(m);c.push(m[0]);c.push(m[1]);c.push(m[2]);
c.push(this.options.color[0]);c.push(this.options.color[1]);c.push(this.options.color[2]);c.push(this.options.color[3]);d.push(b);d.push(b+1);b+=1}}else for(e=0;e<a.length;e++)l=new P(a[e][0],a[e][1],a[e][2]),m=[],l.oa(m),c.push(m[0]),c.push(m[1]),c.push(m[2]),c.push(this.options.color[0]),c.push(this.options.color[1]),c.push(this.options.color[2]),c.push(this.options.color[3]),d.push(e),d.push(e+1);d.pop();d.pop();this.Nh=e*this.options.segmentation;this.D=new Float32Array(c);this.R=new Uint16Array(d);
this.dc=d.length;this.Ge()};Qf.prototype.r=function(){this.aa&&(this.b.deleteBuffer(this.aa),this.aa=k);this.Nb&&(this.b.deleteBuffer(this.Nb),this.aa=k);this.aa=this.ve=k};
Qf.prototype.ra=function(){this.Jk!=k&&(this.aa||this.Ge(),this.b.bindBuffer(this.b.ARRAY_BUFFER,this.aa),this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.Nb),this.b.enableVertexAttribArray(0),this.b.enableVertexAttribArray(1),this.b.vertexAttribPointer(0,3,this.b.FLOAT,n,28,0),this.b.vertexAttribPointer(1,4,this.b.FLOAT,n,28,12),kd(this.c.hb,this.c.va,this.Pc),this.b.lineWidth(this.options.linewidth),this.b.enable(this.b.POLYGON_OFFSET_FILL),this.b.polygonOffset(1,1E3),this.b.drawElements(this.b.LINES,
this.dc,this.b.UNSIGNED_SHORT,0),this.b.disable(this.b.POLYGON_OFFSET_FILL),this.b.disableVertexAttribArray(0),this.b.disableVertexAttribArray(1),this.b.lineWidth(1))};Qf.prototype.Ge=function(){this.aa=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,this.aa);this.b.bufferData(this.b.ARRAY_BUFFER,this.D,this.b.STATIC_DRAW);this.Nb=this.b.createBuffer();this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.Nb);this.b.bufferData(this.b.ELEMENT_ARRAY_BUFFER,this.R,this.b.STATIC_DRAW)};function Bh(){this.name="ogEarthPolylineObject";this.type=bb;this.options=this.Je=k}Bh.prototype=new D;r=Bh.prototype;r.Na=function(a){this.options=a;this.Je=new Qf(this.parent.parent.parent.c,a);this.Je.oi(a.coords)};r.mb=function(){this.Je&&(this.Je.r(),this.Je=k,this.status=3)};r.ma=function(){this.Je.M=j};r.Ee=p();r.na=function(){this.Je.M=n};function Ch(a){this.c=a;this.b=a.b;this.$b=this.cc=this.bc=0;this.canvas=k;this.C=this.w=0;this.Q=this.A=k;this.Rm=-1}r=Ch.prototype;
r.ih=function(){this.b.enable(this.b.TEXTURE_2D);this.b.bindTexture(this.b.TEXTURE_2D,this.Ya.j);this.b.pixelStorei(this.b.UNPACK_FLIP_Y_WEBGL,0);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.c.b.RGBA,this.b.UNSIGNED_BYTE,this.canvas);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,
this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.bindTexture(this.b.TEXTURE_2D,k);this.Ya.Xb=j};r.ya=function(a,b,c){var d=[];(new P(a,b,c)).oa(d);this.A.ah(d[0],d[1],d[2],0,0,0)};
r.ra=function(){this.scale=20;this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);this.A&&nd(this.A);this.c.Jc();var a=new J;a.Xd(1.1920930376163766E-7*this.scale,1.1920930376163766E-7*this.scale,1);this.c.Lc(a);this.A&&this.A.ra(n,0,0,k,k);this.c.Id();this.c.b.disable(this.c.b.BLEND)};r.qi=da("scale");
r.Xg=function(a,b){if(this.A)var c=this.c.af(a,b,this.c.va,j),d=this.A.Fe(c.x,c.y,c.n,c.ke,c.le,c.me);if(d){var e=c=0,f=d.Gc,g=d.Ed,i=1-f-g;0==d.qn?(c=f*-this.w/2+g*this.w/2+i*-this.w/2/(f+g+i)+this.w/2,e=f*this.C/2+g*this.C/2+i*-this.C/2/(f+g+i)+this.C/2):1==d.qn&&(c=f*this.w/2+g*this.w/2+i*-this.w/2/(f+g+i)+this.w/2,e=f*this.C/2+g*-this.C/2+i*-this.C/2/(f+g+i)+this.C/2);c/=this.w;e/=this.C;d={};d.id=this.Rm;d.x=c;d.y=e;return d}return k};r.r=function(){this.A&&(this.A.r(),this.Ya.r())};function Dh(){this.name="ogBillboard";this.type=Xa;this.status=ib;this.o=-1;this.M=n}Dh.prototype=new D;r=Dh.prototype;
r.Na=function(a){if(a==k)Dc(F("owg.ogBillboard"),"** ERROR: no options for billboard creation!");else if(this.parent==k)Dc(F("owg.ogBillboard"),"** ERROR: no parent!");else if(this.parent.type!=A)Dc(F("owg.ogBillboard"),"** ERROR: parent is not scene!");else if(a.canvas){this.Oc=new Ch(this.parent.parent.c);this.Oc.Rm=this.id;var b=this.Oc,c=a.canvas;b.canvas=c;switch(c.constructor.toString()){case "[object HTMLCanvasElement]":b.Q=b.canvas.getContext("2d");b.w=b.Q.canvas.width;b.C=b.Q.canvas.height;
break;case "[object HTMLVideoElement]":b.w=c.videoWidth,b.C=c.videoHeight}b.Ya=new M(b.c);b.Ya.j=b.b.createTexture();b.A=new L(b.c);b.A.Mc(b.Ya);b.Zc=b.w;b.Yc=b.C;c=[];c.push(-b.w/2,b.C/2,0,0,0);c.push(-b.w/2,-b.C/2,0,0,1/b.Yc*b.C);c.push(b.w/2,-b.C/2,0,1/b.Zc*b.w,1/b.Yc*b.C);c.push(b.w/2,b.C/2,0,1/b.Zc*b.w,0);hd(b.A,c);id(b.A,[0,1,2,0,2,3],"TRIANGLES");b.A.Z=[-b.w/2,-b.C/2,0];b.A.ua=[b.w/2,b.C/2,0];b.A.w=b.w;b.A.C=b.C;b.ih();a=a.position;this.Oc.ya(a[0],a[1],a[2]);Eh(this).oj(this.Oc)}};
r.mb=function(){this.Oc&&(Eh(this).Fj(this.Oc),this.Oc.r(),this.status=3)};r.ra=function(){this.Oc.ra()};function Eh(a){var b=k,a=a.parent.parent.c;a.e&&a.e.u&&(b=a.e.u.uh);return b}r.ma=function(){this.M=j;this.Oc.M=j};r.na=function(){this.M=n;this.Oc.M=n};function Fh(){this.name="ogMeshObject";this.type=Oa;this.ib=[];this.Dd=[]}Fh.prototype=new D;r=Fh.prototype;r.Na=function(a){this.options=a;if(this.options.jsonobject)for(var a=this.options.jsonobject,b=0;b<a.length;b++){this.options.jsonobject=a[b];var c=V(Pa,this,this.options);this.ib.push(c);this.Dd.push(c.A)}};r.mb=function(){for(var a=0;a<this.ib.length;a++)E(this.ib[a]);this.Dd=this.ib=k};r.ma=function(){for(var a=0;a<this.ib.length;a++)this.ib[a].ma()};
r.hf=function(a,b,c,d){for(var e=0;e<this.ib.length;e++)this.ib[e].hf(a,b,c,d)};r.Ee=function(a,b,c,d,e,f){for(var g=0;g<this.ib.length;g++)this.ib[g].Ee(a,b,c,d,e,f)};r.fh=function(a,b,c,d){for(var e=0;e<this.ib.length;e++)this.ib[e].fh(a,b,c,d)};r.jf=function(a,b,c){for(var d=0;d<this.ib.length;d++)this.ib[d].jf(a,b,c)};r.Cb=function(a,b,c){for(var d=0;d<this.ib.length;d++)this.ib[d].Cb(a,b,c)};r.na=function(){for(var a=0;a<this.ib.length;a++)this.ib[a].na()};function Gh(){this.$m=Aa()}var Hh=new Gh;Gh.prototype.set=da("$m");Gh.prototype.reset=function(){this.set(Aa())};Gh.prototype.get=ea("$m");function Ih(a){this.Kk=a||"";this.Ho=Hh}Ih.prototype.Do=j;Ih.prototype.Fo=j;Ih.prototype.Eo=j;Ih.prototype.cn=n;function Jh(a){return 10>a?"0"+a:""+a}function Kh(a,b){var c=(a.kn-b)/1E3,d=c.toFixed(3),e=0;if(1>c)e=2;else for(;100>c;)e++,c*=10;for(;0<e--;)d=" "+d;return d}function Lh(a){Ih.call(this,a)}Ba(Lh,Ih);Lh.prototype.cn=j;function Mh(a){this.If=a||100;this.uf=[]}r=Mh.prototype;r.Lh=0;r.add=function(a){this.uf[this.Lh]=a;this.Lh=(this.Lh+1)%this.If};r.get=function(a){a=Nh(this,a);return this.uf[a]};r.set=function(a,b){a=Nh(this,a);this.uf[a]=b};r.Bf=function(){return this.uf.length};r.clear=function(){this.Lh=this.uf.length=0};r.pk=function(){for(var a=this.Bf(),b=[],c=this.Bf()-this.Bf();c<a;c++)b[c]=this.get(c);return b};r.Mi=function(){for(var a=[],b=this.Bf(),c=0;c<b;c++)a[c]=c;return a};
function Nh(a,b){b>=a.uf.length&&aa(Error("Out of bounds exception"));return a.uf.length<a.If?b:(a.Lh+Number(b))%a.If};function Oh(a,b){this.Le=a||"";this.Kk=b||"";this.ug=[];this.Xi=new Mh(Ph);this.Ao=za(this.Vn,this);this.lo=new Lh(this.Kk);this.ko={};if(j!=this.qm){this.qm=j;Gc();var c=Fc,d=this.Ao;c.Fh||(c.Fh=[]);c.Fh.push(d)}this.Hi="1"==Qh(this.Le,"enabled");t.setInterval(za(this.Co,this),7500)}var Ph=500;r=Oh.prototype;r.An="LOGGING";r.ho=n;r.kb=k;r.hl=n;r.qm=n;r.Yl=k;r.tk=Aa();r.Nd=function(){this.Hi&&Rh(this)};function Sh(a,b){a.Hi=b;a.Hi&&Rh(a);Th(a,"enabled",b?"1":"0")}
function Uh(a){return!!a.kb&&!a.kb.closed}r.Yn=function(){this.Xi.clear();Uh(this)&&this.jl()};
r.Vn=function(a){if(!this.ko[a.wm]){var b=this.lo,c;switch(a.td.value){case uc.value:c="dbg-sh";break;case vc.value:c="dbg-sev";break;case wc.value:c="dbg-w";break;case xc.value:c="dbg-i";break;default:c="dbg-f"}var d=[];d.push(b.Kk," ");if(b.Do){var e=new Date(a.kn);d.push("[",Jh(e.getFullYear()-2E3)+Jh(e.getMonth()+1)+Jh(e.getDate())+" "+Jh(e.getHours())+":"+Jh(e.getMinutes())+":"+Jh(e.getSeconds())+"."+Jh(Math.floor(e.getMilliseconds()/10)),"] ")}b.Fo&&d.push("[",sb(Kh(a,b.Ho.get())),"s] ");b.Eo&&
d.push("[",mb(a.wm),"] ");d.push('<span class="',c,'">',lb(sb(mb(a.Cm))));b.cn&&a.ek&&d.push("<br>",lb(sb(a.dk||"")));d.push("</span><br>");b=d.join("");this.Hi?(Rh(this),this.Xi.add(b),Vh(this,b)):this.Xi.add(b);this.ho&&a.td.value>=vc.value&&Sh(this,j)}};function Vh(a,b){a.ug.push(b);t.clearTimeout(a.Yl);750<Aa()-a.tk?a.il():a.Yl=t.setTimeout(za(a.il,a),250)}
r.il=function(){this.tk=Aa();if(Uh(this)){var a=this.kb.document.body,a=a&&100>=a.scrollHeight-(a.scrollTop+a.clientHeight);this.kb.document.write(this.ug.join(""));this.ug.length=0;a&&this.kb.scrollTo(0,1E6)}};function Wh(a){for(var b=a.Xi.pk(),c=0;c<b.length;c++)Vh(a,b[c])}
function Rh(a){if(!Uh(a)&&!a.hl){var b=Qh(a.Le,"dbg","0,0,800,500").split(","),c=Number(b[0]),d=Number(b[1]),e=Number(b[2]),b=Number(b[3]);a.hl=j;a.kb=window.open("",Cb?a.Le.replace(/[\s\-\.\,]/g,"_"):a.Le,"width="+e+",height="+b+",toolbar=no,resizable=yes,scrollbars=yes,left="+c+",top="+d+",status=no,screenx="+c+",screeny="+d);!a.kb&&!a.Go&&(alert("Logger popup was blocked"),a.Go=j);a.hl=n;a.kb&&a.jl()}}r.Ni=fa("*{font:normal 14px monospace;}.dbg-sev{color:#F00}.dbg-w{color:#E92}.dbg-sh{background-color:#fd4;font-weight:bold;color:#000}.dbg-i{color:#666}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}");
r.jl=function(){Uh(this)||(this.kb.document.open(),Vh(this,"<style>"+this.Ni()+'</style><hr><div class="dbg-ev" style="text-align:center">'+this.An+"<br><small>Logger: "+this.Le+"</small></div><hr>"),Wh(this))};function Th(a,b,c){b+=a.Le;document.cookie=b+"="+encodeURIComponent(c)+";path=/;expires="+(new Date(Aa()+2592E6)).toUTCString()}
function Qh(a,b,c){var a=b+a,b=""+document.cookie,d=b.indexOf(a+"=");return-1!=d?(c=b.indexOf(";",d),decodeURIComponent(b.substring(d+a.length+1,-1==c?b.length:c))):c||""}r.Co=function(){Uh(this)&&Th(this,"dbg",(this.kb.screenX||this.kb.screenLeft||0)+","+(this.kb.screenY||this.kb.screenTop||0)+","+(this.kb.outerWidth||800)+","+(this.kb.outerHeight||500))};function Xh(a,b){var c;c=a.className;c=ma(c)&&c.match(/\S+/g)||[];for(var d=ec(arguments,1),e=c.length+d.length,f=c,g=0;g<d.length;g++)0<=ac(f,d[g])||f.push(d[g]);a.className=c.join(" ");return c.length==e};var Yh=!Cb||Sb();!Db&&!Cb||Cb&&Sb()||Db&&Qb("1.9.1");Cb&&Qb("9");function Zh(a,b){Tb(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in $h?a.setAttribute($h[d],b):0==d.lastIndexOf("aria-",0)?a.setAttribute(d,b):a[d]=b})}var $h={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};
function ai(a,b,c){function d(c){c&&b.appendChild(ma(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];la(f)&&!(oa(f)&&0<f.nodeType)?bc(bi(f)?dc(f):f,d):d(f)}}function bi(a){if(a&&"number"==typeof a.length){if(oa(a))return"function"==typeof a.item||"string"==typeof a.item;if(na(a))return"function"==typeof a.item}return n}function ci(a){this.yh=a||t.document||document}function di(a,b){return ma(b)?a.yh.getElementById(b):b}
ci.prototype.eg=function(a,b,c){var d=this.yh,e=arguments,f=e[0],g=e[1];if(!Yh&&g&&(g.name||g.type)){f=["<",f];g.name&&f.push(' name="',mb(g.name),'"');if(g.type){f.push(' type="',mb(g.type),'"');var i={};Wb(i,g);g=i;delete g.type}f.push(">");f=f.join("")}f=d.createElement(f);g&&(ma(g)?f.className=g:ka(g)?Xh.apply(k,[f].concat(g)):Zh(f,g));2<e.length&&ai(d,f,e);return f};ci.prototype.createElement=function(a){return this.yh.createElement(a)};ci.prototype.createTextNode=function(a){return this.yh.createTextNode(a)};
ci.prototype.appendChild=function(a,b){a.appendChild(b)};function ei(a,b){if(fi){var c=gi(),d;for(d in c){var e=d.replace("fancywindow.sel.",""),e=F(e),f=e.td,g=window.localStorage.getItem(d).toString();(!f||f.toString()!=g)&&e.Wh(Bc(g))}}Oh.call(this,a,b)}Ba(ei,Oh);var fi;a:{try{fi=!!window.localStorage.getItem;break a}catch(hi){}fi=n}r=ei.prototype;
r.il=function(){this.tk=Aa();if(Uh(this)){for(var a=di(this.rc,"log"),b=100>=a.scrollHeight-(a.scrollTop+a.offsetHeight),c=0;c<this.ug.length;c++){var d=this.rc.eg("div","logmsg");d.innerHTML=this.ug[c];a.appendChild(d)}this.ug.length=0;this.bn();b&&(a.scrollTop=a.scrollHeight)}};
r.jl=function(){if(Uh(this)){var a=this.kb.document;a.open();a.write('<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd"><html><head><title>Logging: '+this.Le+"</title><style>"+this.Ni()+'</style></head><body><div id="log" style="overflow:auto"></div><div id="head"><p><b>Logging: '+this.Le+"</b></p><p>"+this.An+'</p><span id="clearbutton">clear</span><span id="exitbutton">exit</span><span id="openbutton">options</span></div><div id="options"><big><b>Options:</b></big><div id="optionsarea"></div><span id="closebutton">save and close</span></div></body></html>');
a.close();(Cb?a.body:this.kb).onresize=za(this.bn,this);this.rc=new ci(a);di(this.rc,"openbutton").onclick=za(this.xo,this);di(this.rc,"closebutton").onclick=za(this.Zn,this);di(this.rc,"clearbutton").onclick=za(this.Yn,this);di(this.rc,"exitbutton").onclick=za(this.io,this);Wh(this)}};
r.xo=function(){var a=di(this.rc,"optionsarea");a.innerHTML="";for(var b=ii(),c=this.rc,d=0;d<b.length;d++){var e=F(b[d]),e=c.eg("div",{},ji(this,"sel"+b[d],e.td?e.td.name:"INHERIT"),c.eg("span",{},b[d]||"(root)"));a.appendChild(e)}di(this.rc,"options").style.display="block";return n};
function ji(a,b,c){for(var a=a.rc,b=a.eg("select",{id:b}),d=0;d<zc.length;d++){var e=zc[d],f=a.eg("option",{},e.name);c==e.name&&(f.selected=j);b.appendChild(f)}b.appendChild(a.eg("option",{selected:"INHERIT"==c},"INHERIT"));return b}
r.Zn=function(){di(this.rc,"options").style.display="none";for(var a=ii(),b=this.rc,c=0;c<a.length;c++){var d=F(a[c]),e=di(b,"sel"+a[c]),e=e.options[e.selectedIndex].text;"INHERIT"==e?d.Wh(k):d.Wh(Bc(e))}if(fi){a=ii();b=gi();for(c=0;c<a.length;c++)d="fancywindow.sel."+a[c],e=F(a[c]).td,d in b?e?window.localStorage.getItem(d)!=e.name&&window.localStorage.setItem(d,e.name):window.localStorage.removeItem(d):e&&window.localStorage.setItem(d,e.name)}return n};
r.bn=function(){var a=this.rc,b=di(a,"log"),c=di(a,"head");b.style.top=c.offsetHeight+"px";b.style.height=a.yh.body.offsetHeight-c.offsetHeight-(Cb?4:0)+"px"};r.io=function(){Sh(this,n);this.kb&&this.kb.close()};r.Ni=function(){return ei.Sf.Ni.call(this)+"html,body{height:100%;width:100%;margin:0px;padding:0px;background-color:#FFF;overflow:hidden}*{}.logmsg{border-bottom:1px solid #CCC;padding:2px;font:90% monospace}#head{position:absolute;width:100%;font:x-small arial;border-bottom:2px solid #999;background-color:#EEE;}#head p{margin:0px 5px;}#log{position:absolute;width:100%;background-color:#FFF;}#options{position:absolute;right:0px;width:50%;height:100%;border-left:1px solid #999;background-color:#DDD;display:none;padding-left: 5px;font:normal small arial;overflow:auto;}#openbutton,#closebutton{text-decoration:underline;color:#00F;cursor:pointer;position:absolute;top:0px;right:5px;font:x-small arial;}#clearbutton{text-decoration:underline;color:#00F;cursor:pointer;position:absolute;top:0px;right:80px;font:x-small arial;}#exitbutton{text-decoration:underline;color:#00F;cursor:pointer;position:absolute;top:0px;right:50px;font:x-small arial;}select{font:x-small arial;margin-right:10px;}hr{border:0;height:5px;background-color:#8c8;color:#8c8;}"};
function gi(){for(var a={},b=0,c=window.localStorage.length;b<c;b++){var d=window.localStorage.key(b);d!=k&&0==d.lastIndexOf("fancywindow.sel.",0)&&(a[d]=j)}return a}function ii(){var a=Ub(Ec);a.sort();return a};function ki(a){this.y=this.x=k;this.index=-1;0==arguments.length?this.y=this.x=0:2==arguments.length?(this.x=arguments[0],this.y=arguments[1]):3==arguments.length?(this.x=arguments[0],this.y=arguments[1],this.index=arguments[2]):alert("Invalid poly2tri.Point constructor call!");this.Ah=[]}r=ki.prototype;r.set=function(a,b){this.x=a;this.y=b};r.add=function(a){this.x+=a.x;this.y+=a.y};r.sub=function(a){this.x-=a.x;this.y-=a.y};r.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};
r.i=function(a){return this.x==a.x&&this.y==a.y};function li(a,b){return a.y==b.y?a.x-b.x:a.y-b.y}
function mi(a){this.Ab=this.Qa=k;2==arguments.length?arguments[0].y>arguments[1].y?(this.Ab=arguments[0],this.Qa=arguments[1]):arguments[0].y==arguments[1].y?arguments[0].x>arguments[1].x?(this.Ab=arguments[0],this.Qa=arguments[1]):arguments[0].x==arguments[1].x?alert("Invalid poly2tri.edge constructor call: repeated points!"):(this.Qa=arguments[0],this.Ab=arguments[1]):(this.Qa=arguments[0],this.Ab=arguments[1]):alert("Invalid poly2tri.Edge constructor call!");this.Ab.Ah.push(this)}
function ni(a,b,c){this.d=[k,k,k];this.Ma=[k,k,k];this.om=n;this.Ea=[n,n,n];this.Ia=[n,n,n];3==arguments.length&&(this.d[0]=a,this.d[1]=b,this.d[2]=c)}r=ni.prototype;r.Hd=function(a){return this.d[a]};r.tj=function(a,b){for(var c=j,d=0;d<arguments.length;++d)c=c&&(arguments[d].i(this.d[0])||arguments[d].i(this.d[1])||arguments[d].i(this.d[2]));return c};r.vl=function(){0!=arguments.length&&(this.om=arguments[0]);return this.om};
r.bd=function(a){var b;if(3==arguments.length){var c=arguments[0],d=arguments[1];b=arguments[2];c.i(this.d[2])&&d.i(this.d[1])||c.i(this.d[1])&&d.i(this.d[2])?this.Ma[0]=b:c.i(this.d[0])&&d.i(this.d[2])||c.i(this.d[2])&&d.i(this.d[0])?this.Ma[1]=b:c.i(this.d[0])&&d.i(this.d[1])||c.i(this.d[1])&&d.i(this.d[0])?this.Ma[2]=b:alert("Invalid poly2tri.Triangle.MarkNeighbor call (1)!")}else 1==arguments.length?(b=arguments[0],b.tj(this.d[1],this.d[2])?(this.Ma[0]=b,b.bd(this.d[1],this.d[2],this)):b.tj(this.d[0],
this.d[2])?(this.Ma[1]=b,b.bd(this.d[0],this.d[2],this)):b.tj(this.d[0],this.d[1])&&(this.Ma[2]=b,b.bd(this.d[0],this.d[1],this))):alert("Invalid poly2tri.Triangle.MarkNeighbor call! (2)")};function oi(a){a.Ma[0]=k;a.Ma[1]=k;a.Ma[2]=k}function pi(a){a.Ia[0]=n;a.Ia[1]=n;a.Ia[2]=n}function qi(a,b){return b.i(a.d[0])?a.d[2]:b.i(a.d[1])?a.d[0]:b.i(a.d[2])?a.d[1]:k}function ri(a,b){return b.i(a.d[0])?a.d[1]:b.i(a.d[1])?a.d[2]:b.i(a.d[2])?a.d[0]:k}
function si(a,b){return b.i(a.d[0])?a.Ma[1]:b.i(a.d[1])?a.Ma[2]:a.Ma[0]}function ti(a,b){return b.i(a.d[0])?a.Ma[2]:b.i(a.d[1])?a.Ma[0]:a.Ma[1]}function ui(a,b){return b.i(a.d[0])?a.Ea[1]:b.i(a.d[1])?a.Ea[2]:a.Ea[0]}function vi(a,b){return b.i(a.d[0])?a.Ea[2]:b.i(a.d[1])?a.Ea[0]:a.Ea[1]}function wi(a,b,c){b.i(a.d[0])?a.Ea[1]=c:b.i(a.d[1])?a.Ea[2]=c:a.Ea[0]=c}function xi(a,b,c){b.i(a.d[0])?a.Ea[2]=c:b.i(a.d[1])?a.Ea[0]=c:a.Ea[1]=c}
function yi(a,b){return b.i(a.d[0])?a.Ia[1]:b.i(a.d[1])?a.Ia[2]:a.Ia[0]}function zi(a,b){return b.i(a.d[0])?a.Ia[2]:b.i(a.d[1])?a.Ia[0]:a.Ia[1]}function Ai(a,b,c){b.i(a.d[0])?a.Ia[1]=c:b.i(a.d[1])?a.Ia[2]=c:a.Ia[0]=c}function Bi(a,b,c){b.i(a.d[0])?a.Ia[2]=c:b.i(a.d[1])?a.Ia[0]=c:a.Ia[1]=c}function Ci(a,b){return b.i(a.d[0])?a.Ma[0]:b.i(a.d[1])?a.Ma[1]:a.Ma[2]}
r.zj=function(a){if(1==arguments.length)this.zj(this.d[0],arguments[0]);else if(2==arguments.length){var b=arguments[0],c=arguments[1];b.i(this.d[0])?(this.d[1]=this.d[0],this.d[0]=this.d[2],this.d[2]=c):b.i(this.d[1])?(this.d[2]=this.d[1],this.d[1]=this.d[0],this.d[0]=c):b.i(this.d[2])?(this.d[0]=this.d[2],this.d[2]=this.d[1],this.d[1]=c):alert("Invalid poly2tri.Triangle.Legalize call!")}else alert("Invalid poly2tri.Triangle.Legalize call!")};
function Di(a,b,c){if(b.i(a.d[0])){if(c.i(a.d[1]))return 2;if(c.i(a.d[2]))return 1}else if(b.i(a.d[1])){if(c.i(a.d[2]))return 0;if(c.i(a.d[0]))return 2}else if(b.i(a.d[2])){if(c.i(a.d[0]))return 1;if(c.i(a.d[1]))return 0}return-1}
r.Vg=function(a){if(1==arguments.length)"number"==typeof arguments[0]?this.Ea[arguments[0]]=j:this.Vg(arguments[0].Qa,arguments[0].Ab);else if(2==arguments.length){var b=arguments[0],c=arguments[1];if(c.i(this.d[0])&&b.i(this.d[1])||c.i(this.d[1])&&b.i(this.d[0]))this.Ea[2]=j;else if(c.i(this.d[0])&&b.i(this.d[2])||c.i(this.d[2])&&b.i(this.d[0]))this.Ea[1]=j;else if(c.i(this.d[1])&&b.i(this.d[2])||c.i(this.d[2])&&b.i(this.d[1]))this.Ea[0]=j}else alert("Invalid poly2tri.Triangle.MarkConstrainedEdge call!")};
var Ei=3*Math.PI/4,Fi=Math.PI/2;function Gi(a,b,c){a=(a.x-c.x)*(b.y-c.y)-(a.y-c.y)*(b.x-c.x);return-1.0E-16<a&&1.0E-16>a?0:0<a?-1:1}function Hi(a,b,c,d){var e=d.x,d=d.y,f=a.x-e,a=a.y-d;return 1.0E-16>=f*(b.y-d)-(b.x-e)*a?n:1.0E-16>=(c.x-e)*a-f*(c.y-d)?n:j}
function Ii(a){this.F=this.next=this.Ve=this.h=k;this.value=0;1==arguments.length?(this.h=arguments[0],this.value=this.h.x):2==arguments.length?(this.h=arguments[0],this.Ve=arguments[1],this.value=this.h.x):alert("Invalid poly2tri.Node constructor call!")}function Ji(a,b){this.Gh=a;this.Rk=b;this.Vh=a}Ji.prototype.head=ea("Gh");Ji.prototype.Bj=function(a){var b=this.Vh;if(a<b.value)for(;(b=b.F)!=k;){if(a>=b.value)return this.Vh=b}else for(;(b=b.next)!=k;)if(a<b.value)return this.Vh=b.F;return k};
function Ki(){this.Bc=this.kd=this.qe=k;this.width=0;this.uk=n}Ki.prototype.sj=function(){this.Bc=this.kd=this.qe=k;this.width=0;this.uk=n};function Li(){this.Ea=k;this.right=n}function Mi(a){this.rn=[];this.Qc=[];this.d=a;this.Ah=[];this.Rk=this.Gh=this.Eh=k;this.Y=new Ki;this.zh=new Li;Ni(this,this.d)}Mi.prototype.head=ea("Gh");function Ni(a,b){for(var c=0;c<b.length;++c)a.Ah.push(new mi(b[c],b[(c+1)%b.length]))}Mi.prototype.Hd=function(a){return this.d[a]};Mi.prototype.Bj=function(a){return this.Eh.Bj(a.x)};
function Oi(a,b){for(var c=0;3>c;++c)if(b.Ma[c]==k){var d;a:{d=a.Eh;var e=qi(b,b.Hd(c)),f=e.x,g=d.Vh,i=g.h.x;if(f==i)if(e.i(g.F.h))g=g.F;else if(e.i(g.next.h))g=g.next;else{if(!e.i(g.h)){alert("Invalid poly2tri.AdvancingFront.LocatePoint call!");d=k;break a}}else if(f<i)for(;(g=g.F)!=k&&!e.i(g.h););else for(;(g=g.next)!=k&&!e.i(g.h););g!=k&&(d.Vh=g);d=g}d!=k&&(d.Ve=b)}}function Pi(a,b){if(b!=k&&!b.vl()){b.vl(j);a.rn.push(b);for(var c=0;3>c;++c)b.Ea[c]||Pi(a,b.Ma[c])}}
function Qi(a){var b;if(3==arguments.length){b=arguments[0];var c=arguments[1],d=arguments[2];b.zh.Ea=c;b.zh.right=c.Qa.x>c.Ab.x;if(!Ri(d.Ve,c.Qa,c.Ab)){var e=b;if(e.zh.right)for(var f=d;f.next.h.x<c.Qa.x;)-1==Gi(c.Ab,f.next.h,c.Qa)?Si(e,c,f):f=f.next;else for(f=d;f.F.h.x>c.Qa.x;)1==Gi(c.Ab,f.F.h,c.Qa)?Ti(e,c,f):f=f.F;Qi(b,c.Qa,c.Ab,d.Ve,c.Ab)}}else if(5==arguments.length){if(b=arguments[0],c=arguments[1],d=arguments[2],e=arguments[3],f=arguments[4],!Ri(e,c,d)){var g=ri(e,f),g=Gi(d,g,c);if(0==g)alert("poly2tri.sweep.EdgeEvent: Collinear not supported!");
else{var i=qi(e,f),i=Gi(d,i,c);0==i?alert("poly2tri.sweep.EdgeEvent: Collinear not supported!"):g==i?(e=1==g?ti(e,f):si(e,f),Qi(b,c,d,e,f)):Ui(b,c,d,e,f)}}}else alert("Invalid poly2tri.sweep.EdgeEvent call!")}function Ri(a,b,c){var d=Di(a,b,c);return-1!=d?(a.Vg(d),a=a.Ma[d],a!=k&&a.Vg(b,c),j):n}function Vi(a,b){var c=new ni(b.F.h,b.h,b.next.h);c.bd(b.F.Ve);c.bd(b.Ve);a.Qc.push(c);b.F.next=b.next;b.next.F=b.F;Wi(a,c)||Oi(a,c)}
function Xi(a){var b=a.next.h.x-a.h.x,c=a.next.h.y-a.h.y,d=a.F.h.x-a.h.x,a=a.F.h.y-a.h.y;return Math.atan2(b*a-c*d,b*d+c*a)}
function Wi(a,b){for(var c=0;3>c;++c)if(!b.Ia[c]){var d=b.Ma[c];if(d!=k){var e=b.Hd(c),f=qi(d,qi(b,e)),g=f.i(d.d[0])?0:f.i(d.d[1])?1:f.i(d.d[2])?2:-1;if(d.Ea[g]||d.Ia[g])b.Ea[c]=d.Ea[g];else{var i;var l=ri(b,e),m=qi(b,e);i=e.x-f.x;var o=e.y-f.y,s=l.x-f.x,l=l.y-f.y,q=i*l-s*o;if(0>=q)i=n;else{var u=m.x-f.x,m=m.y-f.y,v=u*o-i*m;i=0>=v?n:0<(i*i+o*o)*(s*m-u*l)+(s*s+l*l)*v+(u*u+m*m)*q}if(i)return b.Ia[c]=j,d.Ia[g]=j,Yi(b,e,d,f),(e=!Wi(a,b))&&Oi(a,b),(e=!Wi(a,d))&&Oi(a,d),b.Ia[c]=n,d.Ia[g]=n,j}}}return n}
function Yi(a,b,c,d){var e,f,g,i;e=ti(a,b);f=si(a,b);g=ti(c,d);i=si(c,d);var l,m,o,s;l=vi(a,b);m=ui(a,b);o=vi(c,d);s=ui(c,d);var q,u,v,z;q=zi(a,b);u=yi(a,b);v=zi(c,d);z=yi(c,d);a.zj(b,d);c.zj(d,b);Bi(c,b,q);Ai(a,b,u);Bi(a,d,v);Ai(c,d,z);xi(c,b,l);wi(a,b,m);xi(a,d,o);wi(c,d,s);oi(a);oi(c);e&&c.bd(e);f&&a.bd(f);g&&a.bd(g);i&&c.bd(i);a.bd(c)}
function Zi(a,b){if(!(a.Y.width>(a.Y.uk?a.Y.qe.h.y-b.h.y:a.Y.Bc.h.y-b.h.y))){Vi(a,b);var c;if(!(b.F==a.Y.qe&&b.next==a.Y.Bc)){if(b.F==a.Y.qe){c=Gi(b.h,b.next.h,b.next.next.h);if(1==c)return;b=b.next}else if(b.next==a.Y.Bc){c=Gi(b.h,b.F.h,b.F.F.h);if(-1==c)return;b=b.F}else b=b.F.h.y<b.next.h.y?b.F:b.next;Zi(a,b)}}}function Si(a,b,c){c.h.x<b.Qa.x&&(-1==Gi(c.h,c.next.h,c.next.next.h)?$i(a,b,c):(aj(a,b,c),Si(a,b,c)))}
function $i(a,b,c){Vi(a,c.next);c.next.h!=b.Qa&&-1==Gi(b.Ab,c.next.h,b.Qa)&&-1==Gi(c.h,c.next.h,c.next.next.h)&&$i(a,b,c)}function aj(a,b,c){-1==Gi(c.next.h,c.next.next.h,c.next.next.next.h)?$i(a,b,c.next):-1==Gi(b.Ab,c.next.next.h,b.Qa)&&aj(a,b,c.next)}function Ti(a,b,c){c.h.x>b.Qa.x&&(1==Gi(c.h,c.F.h,c.F.F.h)?bj(a,b,c):(cj(a,b,c),Ti(a,b,c)))}function cj(a,b,c){1==Gi(c.F.h,c.F.F.h,c.F.F.F.h)?bj(a,b,c.F):1==Gi(b.Ab,c.F.F.h,b.Qa)&&cj(a,b,c.F)}
function bj(a,b,c){Vi(a,c.F);c.F.h!=b.Qa&&1==Gi(b.Ab,c.F.h,b.Qa)&&1==Gi(c.h,c.F.h,c.F.F.h)&&bj(a,b,c)}
function Ui(a,b,c,d,e){var f=Ci(d,e);if(f==k)alert("[BUG:FIXME] FLIP failed due to missing triangle!");else{var g=qi(f,qi(d,e));Hi(e,ri(d,e),qi(d,e),g)?(Yi(d,e,f,g),Oi(a,d),Oi(a,f),e==c&&g==b?c==a.zh.Ea.Ab&&b==a.zh.Ea.Qa&&(d.Vg(b,c),f.Vg(b,c),Wi(a,d),Wi(a,f)):(-1==Gi(c,g,b)?(g=Di(f,e,g),f.Ia[g]=j,Wi(a,f),pi(f)):(g=Di(d,e,g),d.Ia[g]=j,Wi(a,d),pi(d),d=f),Ui(a,b,c,d,e))):(g=dj(b,c,f,g),ej(a,b,c,d,f,g),Qi(a,b,c,d,e))}}
function dj(a,b,c,d){a=Gi(b,d,a);if(1==a)return ri(c,d);if(-1==a)return qi(c,d);alert("[Unsupported] poly2tri.sweep.NextFlipPoint: opposing point on constrained edge!")}function ej(a,b,c,d,e,f){var g=Ci(e,f);g==k?alert("[BUG:FIXME] FLIP failed due to missing triangle"):(e=qi(g,qi(e,f)),Hi(c,ri(d,c),qi(d,c),e)?Ui(a,c,e,g,e):(e=dj(b,c,g,e),ej(a,b,c,d,g,e)))};function fj(){this.name="ogGeometry";this.type=Na;this.pe="";this.options=this.ld=this.je=k;this.Dd=[];this.Dd.ha=[0,0,0];this.Ff=this.Da=-1;this.color=[1,1,1,1];this.Pc=[1,1,1,1];this.um=10;this.Bm=-1E3;this.Am=9E3}fj.prototype=new D;r=fj.prototype;r.Na=function(a){a.dynamic?this.hc(a.data):w(a.url)&&"GeoJSON"==a.type&&gj(this,a.url)};r.mb=function(){hj(this).ni(this.Da)};function hj(a){var b=k,a=a.parent.parent.c;a.e&&a.e.u&&(b=a.e.u.Tk);return b}r.ma=p();r.na=p();
r.Oj=function(){4==this.V.readyState&&(404==this.V.status?this.ld&&this.ld(this.id):this.hc(bd(this.V.responseText)))};
function ij(a,b,c,d){var e={Oh:n,xh:0,wc:[0,0,0],yo:[0,0,0]},b=[b[0]-a[0],b[1]-a[1],b[2]-a[2]],d=[d[0]-c[0],d[1]-c[1],d[2]-c[2]],f=[a[0]-c[0],a[1]-c[1],a[2]-c[2]],g=b[0]*b[0]+b[1]*b[1]+b[2]*b[2],i=b[0]*d[0]+b[1]*d[1]+b[2]*d[2],l=d[0]*d[0]+d[1]*d[1]+d[2]*d[2],m=b[0]*f[0]+b[1]*f[1]+b[2]*f[2],o=d[0]*f[0]+d[1]*f[1]+d[2]*f[2],s=g*l-i*i;1.0E-14>s?(e.Oh=j,f=0,g=i>l?m/i:o/l):(f=(i*o-l*m)/s,g=(g*o-i*m)/s);e.wc=[a[0]+f*b[0],a[1]+f*b[1],a[2]+f*b[2]];e.yo=[c[0]+g*d[0],c[1]+g*d[1],c[2]+g*d[2]];return e}
function jj(a,b,c,d,e,f,g,i,l,m,o){m.push(b[0]);m.push(b[1]);m.push(b[2]);b=a;a++;m.push(f[0]);m.push(f[1]);m.push(f[2]);f=a;a++;m.push(e[0]);m.push(e[1]);m.push(e[2]);e=a;a++;m.push(l[0]);m.push(l[1]);m.push(l[2]);l=a;a++;m.push(c[0]);m.push(c[1]);m.push(c[2]);c=a;a++;m.push(g[0]);m.push(g[1]);m.push(g[2]);g=a;a++;m.push(d[0]);m.push(d[1]);m.push(d[2]);d=a;a++;m.push(i[0]);m.push(i[1]);m.push(i[2]);i=a;a++;o.push(c);o.push(g);o.push(d);o.push(g);o.push(i);o.push(d);o.push(b);o.push(e);o.push(f);
o.push(f);o.push(e);o.push(l);o.push(b);o.push(f);o.push(c);o.push(f);o.push(g);o.push(c);o.push(e);o.push(d);o.push(i);o.push(l);o.push(e);o.push(i);o.push(b);o.push(c);o.push(e);o.push(c);o.push(d);o.push(e);o.push(f);o.push(i);o.push(g);o.push(f);o.push(l);o.push(i);return a}
function kj(a,b,c){var d={VertexSemantic:"",Vertices:k,IndexSemantic:"",Indices:k,VertexSemantic:"p",IndexSemantic:"TRIANGLES"};d.Vertices=b;d.Indices=c;b=new L(a.parent.parent.c);b.hc(d,k,k,b);4==a.color.length?b.Fc.q(a.color[0],a.color[1],a.color[2],a.color[3]):3==a.color.length&&b.Fc.q(a.color[0],a.color[1],a.color[2],1);return b}
r.hc=function(a){ch("CreateFromJSONObject");var b=n;if("FeatureCollection"==a.type&&(ch("[GeoJSON Parser] type = FeatureCollection"),w(a.features)))for(var a=a.features,c=a.length,d=0;d<c;d++)if(w(a[d].type)&&"Feature"==a[d].type&&w(a[d].properties)&&w(a[d].geometry)){var e=a[d].properties,f=a[d].geometry;w(e.color)&&(this.color=e.color);w(e.highlightcolor)&&(this.Pc=e.highlightcolor);w(e.linewidth)&&(this.um=e.linewidth);w(e.minelv)&&(this.Bm=e.minelv);w(e.maxelv)&&(this.Am=e.maxelv);if(w(f.type))if(e=
f.type,"LineString"==e)w(f.coordinates&&ka(f.coordinates))&&(b=lj(this,f.coordinates));else if("MultiLineString"==e){if(w(f.coordinates&&ka(f.coordinates))){f=f.coordinates;for(e=0;e<f.length;e++)lj(this,f[e])&&(b=j)}}else if("Polygon"==e){if(w(f.coordinates&&ka(f.coordinates))){var b=f.coordinates,e=0,g=[],f=[],i=[];new P;var l=b.length;if(0==l)b=n;else{if(1<=l){for(var m=0;m<l;m++)if(0==m)for(var o=0;o<b[m].length;o++)g.push(new ki(b[m][o][0],b[m][o][1],e)),i.push([b[m][o][0],b[m][o][1]]),e++;else{for(var s=
[],o=0;o<b[m].length;o++)s.push(new ki(b[m][o][0],b[m][o][1]),e),i.push([b[m][o][0],b[m][o][1]]),e++;f.push(s)}b=new Mi(g);e=h;for(e in f)for(l in g=b,i=f[e],Ni(g,i),l=h,i)g.d.push(i[l]);e=f=b;g=e.d[0].x;i=e.d[0].x;m=e.d[0].y;l=e.d[0].y;o=h;for(o in e.d)if(s=e.d[o],s.x>g&&(g=s.x),s.x<i&&(i=s.x),s.y>m&&(m=s.y),s.y<l)l=s.y;m=0.3*(m-l);e.Gh=new ki(g+0.3*(g-i),l-m);e.Rk=new ki(i-m,l-m);e.d.sort(li);e=f;l=i=g=h;l=new ni(e.d[0],e.Rk,e.Gh);e.Qc.push(l);g=new Ii(l.Hd(1),l);i=new Ii(l.Hd(0),l);l=new Ii(l.Hd(2));
e.Eh=new Ji(g,l);g.next=i;i.next=l;i.F=g;l.F=i;e=f;for(g=1;g<e.d.length;++g){var i=e.Hd(g),l=e,m=i,o=l.Bj(m),s=l,q=m,u=o,v=new ni(q,u.h,u.next.h);v.bd(u.Ve);s.Qc.push(v);q=new Ii(q);q.next=u.next;q.F=u;u.next.F=q;u.next=q;Wi(s,v)||Oi(s,v);s=q;m.x<=o.h.x+1.0E-16&&Vi(l,o);m=s;o=m.next;for(u=h;o.next!=k;){u=Xi(o);if(u>Fi||u<-Fi)break;Vi(l,o);o=o.next}for(o=m.F;o.F!=k;){u=Xi(o);if(u>Fi||u<-Fi)break;Vi(l,o);o=o.F}if(m.next!=k&&m.next.next!=k&&(u=Math.atan2(m.h.y-m.next.next.h.y,m.h.x-m.next.next.h.x),
u<Ei)){l.Y.qe=-1==Gi(m.h,m.next.h,m.next.next.h)?m.next.next:m.next;for(l.Y.kd=l.Y.qe;l.Y.kd.next!=k&&l.Y.kd.h.y>=l.Y.kd.next.h.y;)l.Y.kd=l.Y.kd.next;if(l.Y.kd!=l.Y.qe){for(l.Y.Bc=l.Y.kd;l.Y.Bc.next!=k&&l.Y.Bc.h.y<l.Y.Bc.next.h.y;)l.Y.Bc=l.Y.Bc.next;l.Y.Bc!=l.Y.kd&&(l.Y.width=l.Y.Bc.h.x-l.Y.qe.h.x,l.Y.uk=l.Y.qe.h.y>l.Y.Bc.h.y,Zi(l,l.Y.kd))}}l=s;for(m=0;m<i.Ah.length;++m)Qi(e,i.Ah[m],l)}e=f.Eh.head().next.Ve;for(g=f.Eh.head().next.h;!ui(e,g);)e=ti(e,g);Pi(f,e);b=b.rn;f=[];for(e=0;e<b.length;e++)g=
b[e].Hd(1).index,i=b[e].Hd(2).index,f.push(b[e].Hd(0).index),f.push(g),f.push(i)}b=j}}}else"MultiPolygon"==e?eh("MultiPolygon is not yet supported"):"Point"==e?eh("Point is not yet supported"):"MultiPoint"==e&&eh("MultiPoint is not yet supported")}b&&(this.Da=hj(this).kl(this.Dd))};function mj(a,b){for(var c=0;c<a.length;c+=3)a[c+0]-=b[0],a[c+1]-=b[1],a[c+2]-=b[2]}
function gj(a,b){b==k?alert("invalid json-url"):(a.pe=b,a.V=new window.XMLHttpRequest,a.V.open("GET",a.pe,j),a.V.onreadystatechange=function(){a.Oj()},a.V.send())}
function lj(a,b){var c=new P,d=[0,0,0],e=[0,0,0],f=[],g=b.length;if(1<g)for(var i=0;i<g;i++){var l=b[i][0],m=b[i][1];c.q(l,m,a.Am);c.oa(d);c.q(l,m,a.Bm);c.oa(e);f.push([d[0],d[1],d[2]]);f.push([e[0],e[1],e[2]])}else return n;g=f.length;for(l=e=d=c=0;l<f.length;l++)c+=f[l][0]/g,d+=f[l][1]/g,e+=f[l][2]/g;a.Dd.ha[0]=c;a.Dd.ha[1]=d;a.Dd.ha[2]=e;var g=[],l=[],o=5.960465188081883E-8*a.um,m=0,s,q,u,v,z,C,R,X,O,ha,S,T,K,Y,Z,$,va,wa,xa;if(4==f.length){i=f[0];s=f[1];q=f[2];u=f[3];var H=q[0]-i[0],ba=q[1]-i[1],
ta=q[2]-i[2],ca=s[0]-i[0],pa=s[1]-i[1],ga=s[2]-i[2],f=ba*ga-ta*pa;K=ta*ca-H*ga;m=H*pa-ba*ca;H=o/Math.sqrt(f*f+K*K+m*m);f*=H;K*=H;m*=H;C=[i[0]+f,i[1]+K,i[2]+m];R=[s[0]+f,s[1]+K,s[2]+m];X=[q[0]+f,q[1]+K,q[2]+m];O=[u[0]+f,u[1]+K,u[2]+m];ha=[i[0]-f,i[1]-K,i[2]-m];S=[s[0]-f,s[1]-K,s[2]-m];T=[q[0]-f,q[1]-K,q[2]-m];K=[u[0]-f,u[1]-K,u[2]-m];jj(0,C,ha,T,X,R,S,K,O,l,g);mj(l,[c,d,e]);a.Dd.push(kj(a,l,g))}else if(6<=f.length){i=f[0];s=f[1];q=f[2];u=f[3];v=f[4];z=f[5];H=q[0]-i[0];ba=q[1]-i[1];ta=q[2]-i[2];ca=
s[0]-i[0];pa=s[1]-i[1];ga=s[2]-i[2];Y=ba*ga-ta*pa;Z=ta*ca-H*ga;$=H*pa-ba*ca;H=o/Math.sqrt(Y*Y+Z*Z+$*$);Y*=H;Z*=H;$*=H;C=[i[0]+Y,i[1]+Z,i[2]+$];R=[s[0]+Y,s[1]+Z,s[2]+$];ha=[i[0]-Y,i[1]-Z,i[2]-$];S=[s[0]-Y,s[1]-Z,s[2]-$];for(i=4;i<f.length;i+=2)v=f[i],z=f[i+1],H=v[0]-q[0],ba=v[1]-q[1],ta=v[2]-q[2],ca=u[0]-q[0],pa=u[1]-q[1],ga=u[2]-q[2],va=ba*ga-ta*pa,wa=ta*ca-H*ga,xa=H*pa-ba*ca,H=o/Math.sqrt(va*va+wa*wa+xa*xa),va*=H,wa*=H,xa*=H,ca=u[0]-s[0],pa=u[1]-s[1],ga=u[2]-s[2],O=Math.sqrt(ca*ca+pa*pa+ga*ga),ca/=
O,pa/=O,ga/=O,H=u[0]-z[0],ba=u[1]-z[1],ta=u[2]-z[2],O=Math.sqrt(H*H+ba*ba+ta*ta),H/=O,ba/=O,T=[z[0]+va,z[1]+wa,z[2]+xa],s=[z[0]-va,z[1]-wa,z[2]-xa],K=[v[0]+va,v[1]+wa,v[2]+xa],X=[v[0]-va,v[1]-wa,v[2]-xa],O=ij([R[0],R[1],R[2]],[R[0]+ca,R[1]+pa,R[2]+ga],[T[0],T[1],T[2]],[T[0]+H,T[1]+ba,T[2]+ga]),T=ij([S[0],S[1],S[2]],[S[0]+ca,S[1]+pa,S[2]+ga],[s[0],s[1],T[2]],[s[0]+H,s[1]+ba,s[2]+ga]),s=ij([C[0],C[1],C[2]],[C[0]+ca,C[1]+pa,C[2]+ga],[K[0],K[1],K[2]],[K[0]+H,K[1]+ba,K[2]+ga]),H=ij([ha[0],ha[1],ha[2]],
[ha[0]+ca,ha[1]+pa,ha[2]+ga],[X[0],X[1],X[2]],[X[0]+H,X[1]+ba,X[2]+ga]),!O.Oh&&!T.Oh&&!s.Oh&&!H.Oh?(O=[O.wc[0],O.wc[1],O.wc[2]],K=[T.wc[0],T.wc[1],T.wc[2]],X=[s.wc[0],s.wc[1],s.wc[2]],T=[H.wc[0],H.wc[1],H.wc[2]]):(O=[u[0]+Y,u[1]+Z,u[2]+$],K=[u[0]-Y,u[1]-Z,u[2]-$],X=[q[0]+Y,q[1]+Z,q[2]+$],T=[q[0]-Y,q[1]-Z,q[2]-$]),m=jj(m,C,ha,T,X,R,S,K,O,l,g),Y=va,Z=wa,$=xa,s=u,q=v,u=z,R=O,S=K,C=X,ha=T;f=[z[0]+Y,z[1]+Z,z[2]+$];o=[z[0]-Y,z[1]-Z,z[2]-$];i=[v[0]+Y,v[1]+Z,v[2]+$];q=[v[0]-Y,v[1]-Z,v[2]-$];jj(m,X,T,q,i,
O,K,o,f,l,g);mj(l,[c,d,e]);a.Dd.push(kj(a,l,g))}else return n;return j};function nj(){this.name="ogAoeImageLayer";this.type=Za;this.M=n;this.wb=[]}nj.prototype=new D;r=nj.prototype;r.Na=p();r.mb=function(){for(var a=0;a<this.wb.length;a++){for(var b=a;b<this.wb.length;b++)this.wb[a].Da-=1;E(this.wb[a])}};r.ma=function(){this.M=j;for(var a=0;a<this.wb.length;a++)this.wb[a].ma()};r.na=function(){this.M=n;for(var a=0;a<this.wb.length;a++)this.wb[a].na()};r.nj=function(a){this.wb.push(a);a.Ff=this.id};
r.Ej=function(a){for(var b=0;b<this.wb.length;b++)if(this.wb[b]==a){for(var c=b+1;c<this.wb.length;c++)this.wb[c].Da-=1;E(this.wb[b]);this.wb.splice(b,1)}};function oj(){this.name="ogVectorLayer";this.type=Ja;this.M=n;this.ba=[]}oj.prototype=new D;r=oj.prototype;r.Na=p();function pj(a,b){var c=V(Qa,a.parent.parent,b);a.ba.push(c);c.mp=a;return c}r.ni=function(a){for(var b=0;b<this.ba.length;b++)this.ba[b]==a&&(E(this.ba[b]),this.ba.splice(b,1))};r.mb=function(){qj(this)};r.ma=function(){this.M=j;for(var a=0;a<this.ba.length;a++)this.ba[a].ma()};r.na=function(){this.M=n;for(var a=0;a<this.ba.length;a++)this.ba[a].na()};
function qj(a){for(var b=0;b<a.ba.length;b++){for(var c=b;c<a.ba.length;c++)a.ba[b].Da-=1;E(a.ba[b])}}r.kl=function(a){this.ba.push(a);a.Ff=this.id};r.ni=function(a){for(var b=0;b<this.ba.length;b++)if(this.ba[b]==a){for(var c=b+1;c<this.ba.length;c++)this.ba[c].Da-=1;E(this.ba[b]);this.ba.splice(b,1)}};function rj(){this.name="ogImageLayer";this.type=Da;this.Gf=-1}rj.prototype=new D;rj.prototype.Rg=function(){var a=k,b=this.parent.parent.parent.c;b.e&&b.e.u&&(a=b.e.u.Ca);return a};rj.prototype.qj=function(a){var b=this.Rg();b&&(this.Gf=b.qj(a))};rj.prototype.Ij=function(){var a=this.Rg();a&&-1!=this.Gf&&a.Ij(this.Gf)};rj.prototype.Na=function(a){this.qj(a)};function sj(){this.name="ogBillboardLayer";this.type=Ya;this.M=n;this.Ua=[]}sj.prototype=new D;r=sj.prototype;r.Na=p();r.mb=function(){for(var a=0;a<this.Ua.length;a++)E(this.Ua[a])};r.ma=function(){this.M=j;for(var a=0;a<this.Ua.length;a++)this.Ua[a].ma()};r.na=function(){this.M=n;for(var a=0;a<this.Ua.length;a++)this.Ua[a].na()};r.Fj=function(a){for(var b=0;b<this.Ua.length;b++)this.Ua[b]==a&&(E(this.Ua[b]),this.Ua.splice(b,1))};r.oj=function(a){this.Ua.push(a)};function tj(){this.name="ogPointSpriteObject";this.type=ab;this.ve=this.options=this.Bd=k;this.Ui=this.Gi=0}tj.prototype=new D;r=tj.prototype;r.Na=function(a){this.options=a;this.Bd=new ud(this.parent.parent.parent.c);a.Vertices&&this.Bd.oi(a.Vertices);a.PointUrl&&(uj(this,a.PointUrl),this.uo=a.NumberOfPoints,this.Bd.lj=this.uo);this.Bd.bh(a.Center[0],a.Center[1],a.Center[2])};r.mb=function(){this.Bd&&(this.Bd.r(),this.Bd=k,this.status=3)};r.ma=function(){this.Bd.M=j};r.Ee=p();
r.na=function(){this.Bd.M=n};function uj(a,b){b==k?alert("invalid xyzurl"):(a.Po=b,a.V=new window.XMLHttpRequest,a.V.open("GET",a.Po,j),a.V.onreadystatechange=function(){4==a.V.readyState&&(404==a.V.status?alert("xyz-file not found..."):vj(a))},a.V.onprogress=function(){vj(a)},a.V.send(),a.Gi=0,a.Ui=0)}
function vj(a){var b=a.V.responseText;a.Gi=b.lastIndexOf("\n");for(var b=b.substr(a.Ui,a.Gi-a.Ui-1),c=[],b=b.split(","),d=0;d<b.length;d++){var e=parseFloat(b[d]);isNaN(e)||c.push(e)}a.Bd.oi(c);a.Ui=a.Gi};function wj(){this.name="ogGeometryLayer";this.type=Ha;this.M=n;this.ia=[]}wj.prototype=new D;r=wj.prototype;r.Na=p();r.mb=function(){for(var a=0;a<this.ia.length;a++){for(var b=a;b<this.ia.length;b++)this.ia[a].Da-=1;E(this.ia[a])}};r.ma=function(){this.M=j;for(var a=0;a<this.ia.length;a++)this.ia[a].ma()};r.na=function(){this.M=n;for(var a=0;a<this.ia.length;a++)this.ia[a].na()};r.Gd=function(a){this.ia.push(a);a.Ff=this.id};
r.Hj=function(a){for(var b=0;b<this.ia.length;b++)if(this.ia[b]==a){for(var c=b+1;c<this.ia.length;c++)this.ia[c].Da-=1;E(this.ia[b]);this.ia.splice(b,1)}};function xj(){this.name="ogSurface";this.type=Pa;this.elevation=this.latitude=this.longitude=0;this.status=ib;this.A=k;this.elevation=this.latitude=this.longitude=0}xj.prototype=new D;r=xj.prototype;r.Ee=function(a,b,c,d,e,f){this.longitude=a;this.latitude=b;this.elevation=c;this.A.bh(a,b,c,d,e,f)};
r.fh=function(a,b,c,d){this.longitude=a;this.latitude=b;this.elevation=c;var e=this.A;e.cc=a;e.bc=b;e.$b=c;var f=new P(a,b,c),c=Array(3);f.oa(c);f=new J;f.Qd(a,b);a=Array(16);b=f.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;c=new J;c.De(a);a=new J;a.De([1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1]);a.bg();b=new J;b.Wf(d[0],d[1],d[2],d[3]);b.bg();f=new J;f.P(a,b);d=new J;d.P(a,f);b=new J;
b.De([0,-1,0,0,1,0,0,0,0,0,1,0,0,0,0,1]);b.bg();a=new J;a.P(b,d);d=new J;d.P(c,a);c=new J;c.Xd(1.1920930376163766E-7,1.1920930376163766E-7,1.1920930376163766E-7);a=new J;a.P(d,c);e.ja=a;md(e)};r.Cb=function(a,b,c){this.A.Cb(a,b,c)};r.jf=function(a,b,c){this.A.jf(a,b,c)};
r.Na=function(a){if(a==k)Dc(F("owg.ogTexture"),"** ERROR: no options for surface creation!");else if(this.parent==k)Dc(F("owg.ogTexture"),"** ERROR: no parent!");else if(this.parent.type!=Oa)Dc(F("owg.ogTexture"),"** ERROR: parent is not scene!");else{if(a.jsonobject){this.A=new L(this.parent.parent.parent.parent.c);this.A.M=n;this.A.vo=this.id;var b=this;this.A.hc(a.jsonobject,function(){0!=b.longitude&&0!=b.latitude&&b.Ee(b.longitude,b.latitude,b.elevation);b.status=hb;b.O&&b.O(b.id)},function(){b.status=
3;b.N&&b.N(b.id)});this.pe=a.url;this.A.vn=a.jsonobject.VisibilityDistance?1.1920930376163766E-7*a.jsonobject.VisibilityDistance:0.005960465188081883}this.longitude=a.jsonobject.Center[0];this.latitude=a.jsonobject.Center[1];this.elevation=a.jsonobject.Center[2]}};r.mb=function(){this.A&&(this.A.r(),this.A=k,this.status=3)};r.na=function(){this.A&&(this.A.M=n)};r.ma=function(){this.A&&(this.A.M=j)};r.hf=function(a,b,c,d){this.A&&this.A.hf(a,b,c,d)};var yj=-1;function V(a,b,c){var d=k;a==y?d=new rh:a==A?d=new th:a==Ca?d=new sh:a==Da?d=new rj:a==Ea?d=new zh:a!=Fa&&(a==Ga?d=new xh:a==Ha?d=new wj:a!=Ia&&a!=Ka&&(a==La?d=new Hc:a==Wa?d=new vh:a!=Ma&&(a==Na?d=new Mf:a==Oa?d=new Fh:a==Pa?d=new xj:a==Ra?d=new Nc:a!=Sa&&a!=Ta&&a!=Ua&&a!=Va&&(a==Xa?d=new Dh:a==Ya?d=new sj:a==Za?d=new nj:a==$a?d=new Be:a==ab?d=new tj:a==bb?d=new Bh:a==Ja?d=new oj:a==Qa&&(d=new fj)))));d!=k&&(yj++,d.id=yj,d.parent=b,jb.push(d),d.Na(c));return d}x("_CreateObject",V);
x("ogGetObjectType",function(a){return(a=B(a))?a.type:cb});x("ogGetObjectName",function(a){return(a=B(a))?a.name:""});x("ogGetObjectPosition",function(a){var a=B(a),b={};if(a)switch(a.type){case Na:b={};w(a.options.jsonobject)&&w(a.options.jsonobject.Center)&&(b.longitude=a.options.jsonobject.Center[0],b.latitude=a.options.jsonobject.Center[1],b.elevation=a.options.jsonobject.Center[2]);break;case Wa:var c=new P;c.ic(a.ta.Pe,a.ta.Qe,a.ta.Re);b={};b.longitude=c.G[0];b.latitude=c.G[1];b.elevation=c.G[2]}return b});
x("ogGetNumObjects",function(){return jb.length});x("ogGetObjectAt",function(a){a=0>a||a>jb.length-1?k:jb[a];return a==k?-1:a.id});x("ogGetParentObject",function(a){return(a=B(a))&&a.parent?a.parent.id:-1});x("ogSetObjectName",function(a,b){var c=B(a);c&&(c.name=b)});x("ogGetObjectByName",function(a){a:{for(var b=0;b<jb.length;b++)if(jb[b].name==a){a=jb[b];break a}a=k}return a?a.id:-1});x("ogGetObjectStatus",function(a){return(a=B(a))?a.status:3});
x("ogOnLoad",function(a,b){var c=B(a);c&&(c.status==hb?b(a):c.O=b)});x("ogOnFailure",function(a,b){var c=B(a);c&&(3==c.status?b(a):c.N=b)});function zj(a,b,c,d){a.cbfInit=b;a.cbfExit=c;a.cbfResize=d;a=V(y,k,a);return a!=k?a.id:-1}x("ogCreateContext",zj);x("ogCreateContextFromCanvas",function(a,b,c,d,e){var f={};f.fullscreen=b?j:n;f.canvas=a;return zj(f,c,d,e)});x("ogDestroyContext",function(a){(a=B(a))&&a.type==y&&E(a)});x("ogGetGL",function(a){return(a=B(a))&&a.type==y?a.c.b:k});
x("ogGetWidth",function(a){return(a=B(a))&&a.type==y?a.c?a.c.width:0:0});x("ogGetHeight",function(a){return(a=B(a))&&a.type==y?a.c?a.c.height:0:0});x("ogGetScene",function(a){return(a=B(a))&&a.type==y&&a.e?a.e.id:-1});x("ogSetBackgroundColor",function(a,b,c,d,e){(a=B(a))&&a.type==y&&a.c&&a.c.Hl(b,c,d,e)});x("ogSetTextColor",function(a,b,c,d){(a=B(a))&&a.type==y&&a.fontcolor.q(b,c,d,1)});x("ogDrawText",function(a,b,c,d){(a=B(a))&&a.type==y&&a.we(b,c,d)});
x("ogGetTextSize",function(a,b){var c=B(a);if(c&&c.type==y&&(c=c.wj(b)))return c;c=Array(2);c[0]=0;c[1]=0;return c});x("ogSetMouseDownFunction",function(a,b){var c=B(a);c&&c.type==y&&(c.Jd=b)});x("ogSetMouseUpFunction",function(a,b){var c=B(a);c&&c.type==y&&(c.Kd=b)});x("ogSetMouseMoveFunction",function(a,b){var c=B(a);c&&c.type==y&&(c.xf=b)});x("ogSetMouseWheelFunction",function(a,b){var c=B(a);c&&c.type==y&&(c.md=b)});x("ogSetKeyDownFunction",function(a,b){var c=B(a);c&&c.type==y&&(c.Yj=b)});
x("ogSetKeyUpFunction",function(a,b){var c=B(a);c&&c.type==y&&(c.Zj=b)});x("ogSetResizeFunction",function(a,b){var c=B(a);c&&c.type==y&&(c.He=b)});x("ogSetRenderFunction",function(a,b){var c=B(a);c&&c.type==y&&(c.he=b)});x("ogSetTimerFunction",function(a,b){var c=B(a);c&&c.type==y&&(c.ie=b)});x("ogSetRenderGeometryFunction",function(a,b){var c=B(a);c&&c.type==y&&(c.Vo=b)});x("ogSetBeginRenderFunction",function(a,b){var c=B(a);c&&c.type==y&&(c.To=b)});
x("ogSetEndRenderFunction",function(a,b){var c=B(a);c&&c.type==y&&(c.Uo=b)});x("ogSetFlyToStartedFunction",function(a,b){var c=B(a);c&&c.type==y&&(c.vf=b)});x("ogSetInPositionFunction",function(a,b){var c=B(a);c&&c.type==y&&(c.wf=b)});x("ogSetNumRenderPasses",function(a,b){var c=B(a);c&&c.type==y&&(c.dp=b)});x("ogExec",p());x("ogSetArtworkDirectory",function(a){rd=a});
function Aj(a,b){var c=B(a);if(c&&c.type==y){var d={};d.type=b;if(b==db||b==eb||b==fb||b==gb)return d=V(A,c,d),c.e=d,d.id;Dc(F("owg.og"),"** WARNING: wrong scene type");return-1}Dc(F("owg.og"),"** WARNING: context is not valid");return-1}x("ogCreateScene",Aj);x("ogGetContext",function(a){if((a=B(a))&&a.type==A)if(a=a.parent)return a.id;return-1});x("ogGetWorld",function(a){if((a=B(a))&&a.type==A)if(a=a.Ig)return a.id;return-1});
x("ogPickGlobe",function(a,b,c){return(a=B(a))&&a.type==A&&a.Xc==db?a.Xg(b,c):[n,0,0,0,0,0,0]});x("ogToCartesian",function(a,b,c,d){if((a=B(a))&&a.type==A&&a.Xc==db){var e=[];(new P(b,c,d)).oa(e)}return e||k});x("ogToWGS84",function(a,b,c,d){if((a=B(a))&&a.type==A&&a.Xc==db){var e=new P;e.ic(b,c,d);e=[e.G[0],e.G[1],e.G[2]]}return e||k});x("ogCreateCamera",function(a){if((a=B(a))&&a.type==A){var b=V(Ra,a,k);a.zi.push(b);return b.id}return-1});x("ogDestroyCamera",function(a){(a=B(a))&&a.type==Ra&&E(a)});
x("ogSetPosition",function(a,b,c,d){(a=B(a))&&a.type==Ra&&a.ya(b,c,d)});function Bj(a){return(a=B(a))&&a.type==A?(a=a.tf,Pc(a),a.bf()):k}x("ogGetPosition",Bj);function Cj(a,b,c,d){return(a=B(a))&&a.type==Ra?(360<b&&(b-=360),0>b&&(b=360+b),a.Cb(b,c,d)):k}x("ogSetOrientation",Cj);x("ogSetOrientationFromQuaternion",function(a,b,c,d,e){return(a=B(a))&&a.type==Ra?a.eh(b,c,d,e):k});function Dj(a){return(a=B(a))&&a.type==A?(a=a.tf,Pc(a),a.Sg()):k}x("ogGetOrientation",Dj);
function Ej(a){return(a=B(a))&&a.type==A?a.tf.id:-1}x("ogGetActiveCamera",Ej);x("ogSetActiveCamera",function(a){(a=B(a))&&a.type==Ra&&uh(a.parent,a.id)});x("ogGetNumCameras",function(a){if((a=B(a))&&a.type==A)return a.zi.length});x("ogGetCameraAt",function(a,b){var c=B(a);return c&&c.type==A?c.zi[b].id:-1});
x("ogLookAt",function(a,b,c,d){var e=Ej(a);Pc(B(e));var f=Bj(a),g=[];(new P(f.longitude,f.latitude,f.elevation)).oa(g);var i=new I(g[0],g[1],g[2]),l=[];(new P(b,c,d)).oa(l);b=(new I(l[0],l[1],l[2])).$e();b.Mj(i);i=new J;i.Qd(f.longitude,f.latitude);f=new J;f.fd(g[0],g[1],g[2]);g=new J;g.P(f,i);g.bg();g=g.Za(b);g.Hc();g=g.a;f=g[0];i=g[1];b=g[2];g=57.29577951308232*Math.acos(f/Math.sqrt(1-b*b));0>i&&0<f&&(g=360-g);0>i&&0>f&&(g=360-g);f=-(90-57.29577951308232*Math.acos(b));-0.9>b&&(g=180+g,f=-f);a=Dj(a);
Cj(e,g,f,a.roll)});x("ogSetNavigationMode",function(a,b,c){w(c)||(c={});(a=B(a))&&a.type==A&&a.Kj(b,c)});function Fj(a){if((a=B(a))&&a.type==A){var b={};b.scenetype=a.Xc;b=V(Ca,a,b);a.Ig=b;var c=V(Ra,a,k);Pc(c);uh(a,c.id);a.zi.push(c);return b.id}return-1}x("ogCreateWorld",Fj);x("ogCreateGlobe",function(a){a=Aj(a,db);return Fj(a)});x("ogSetNorthpoleColor",function(a,b,c,d){if((a=B(a))&&a.type==Ca)a.parent.parent.c.e.u.Ca.Lf=[b,c,d]});
x("ogSetSouthpoleColor",function(a,b,c,d){if((a=B(a))&&a.type==Ca)a.parent.parent.c.e.u.Ca.Rf=[b,c,d]});x("ogSetRenderQuality",function(a,b){var c=B(a);c&&c.type==Ca&&(c=c.parent.parent.c.e.u.Ca,0<b&&3>=b&&(c.Zm=b))});x("ogSetRenderEffect",function(a,b,c){(a=B(a))&&a.type==Ca&&a.pi(b,c)});x("ogGetElevationAt",function(a,b,c){var d={hasvalue:n,elevation:0,lod:0};(a=B(a))&&a.type==Ca&&(d=a.parent.parent.c.Xf(b,c));return d});
x("ogLoadTextureAsync",function(a,b){var c=B(a);if(c&&c.type==A){var d={};d.url=b;return V(La,c,d).id}return-1});x("ogDestroyTexture",function(a){(a=B(a))&&a.type==La&&E(a)});x("ogBlitTexture",function(a,b,c,d){(a=B(a))&&a.type==La&&a.U(b,c,d)});x("ogAddImageLayer",function(a,b){var c=B(a);return c&&c.type==Ca?V(Da,c,b).id:-1});x("ogRemoveImageLayer",function(a){if((a=B(a))&&a.type==Da)a.Ij(),E(a)});x("ogAddElevationLayer",function(a,b){var c=B(a);return c&&c.type==Ca?V(Ea,c,b).id:-1});
x("ogRemoveElevationLayer",function(a){if((a=B(a))&&a.type==Ea)a.Gj(),E(a)});x("ogCreatePOILayer",function(a,b,c,d){var e={};e.name=b;e.textstyle=c;e.iconstyle=d;return(a=B(a))&&a.type==Ca?V(Ga,a,e).id:-1});x("ogRemovePOILayer",function(a){(a=B(a))&&a.type==Ga&&E(a)});x("ogHidePOILayer",function(a){(a=B(a))&&a.type==Ga&&a.ma()});x("ogShowPOILayer",function(a){(a=B(a))&&a.type==Ga&&a.na()});x("ogAddVectorLayer",function(a,b){var c=B(a);return c&&c.type==Ca?V(Ja,c,b).id:-1});
x("ogRemoveVectorLayer",function(a){if((a=B(a))&&a.type==Ja)qj(a),E(a)});x("ogLoadVectorAsync",function(a,b){var c=B(a);return c&&c.type==Ja?pj(c,{url:b,dynamic:n,type:"GeoJSON"}).id:-1});x("ogDestroyVector",function(a){if((a=B(a))&&a.type==Qa)if(a.o){var b=a.o;b&&b.type==Ja&&b.ni(a)}else E(a);return-1});x("ogAddGeoJSON",function(a,b){var c=B(a);return c&&c.type==Ja?pj(c,{dynamic:j,type:"GeoJSON",data:b}).id:-1});
x("ogCreatePOI",function(a,b){var c=B(a);if(c&&c.type==Ga){b.textstyle=c.Vf;b.iconstyle=c.Df;var d=V(Wa,c.parent.parent,b);c.Ra.push(d);d.ep=c;c=d.id}else c=-1;return c});x("ogDestroyPOI",function(a){if((a=B(a))&&a.type==Wa)if(a.o){var b=a.o;if(b&&b.type==Ga)for(var c=0;c<b.Ra.length;c++)b.Ra[c]==a&&(E(b.Ra[c]),b.Ra.splice(c,1))}else E(a);return-1});x("ogChangePOIText",function(a,b){var c=B(a);if(c&&c.type==Wa){var d=c.parent.parent;c.Vf&&d.c.wg.nl(c.ta,b,c.Vf)}});
x("ogChangePOIIcon",function(a,b){var c=B(a);if(c&&c.type==Wa){var d=c.parent.parent;c.Df&&d.c.wg.ml(c.ta,b,c.Df)}});x("ogChangePOISize",function(a,b){var c=B(a);c&&c.type==Wa&&c.ta.qi(b)});x("ogChangePOIPositionWGS84",function(a,b,c,d){if((a=B(a))&&a.type==Wa){var e=[];(new P(b,c,d)).oa(e);b=e[0];c=e[1];e=e[2];a.ta.Mf?a.ta.ya(b,c,e,0):a.ta.ya(b,c,e,k)}});x("ogChangePOIPosition",function(a,b,c,d){(a=B(a))&&a.type==Wa&&(a.ta.Mf?a.ta.ya(b,c,d,0):a.ta.ya(b,c,d,k))});
x("ogHidePOI",function(a){(a=B(a))&&a.type==Wa&&a.ma()});x("ogShowPOI",function(a){(a=B(a))&&a.type==Wa&&a.na()});x("ogSetPOIActiveColor",function(a,b,c,d,e){if((a=B(a))&&a.type==Wa)a.ta.Ik=new ad(b,c,d,e)});x("ogPickPOI",function(a,b,c){return(a=B(a))&&a.type==A&&a.Xc==db?a.Zg(b,c):-1});x("ogCreateGeometryLayer",function(a,b){var c={};c.name=b;var d=B(a);return d&&d.type==Ca?V(Ha,d,c).id:-1});x("ogCreateAoeImageLayer",function(a,b){var c={};c.name=b;var d=B(a);return d&&d.type==Ca?V(Za,d,c).id:-1});
x("ogCreateAoeImage",function(a,b){var c=B(a);if(c&&c.type==Za){var d=V($a,c.parent.parent,b);c.nj(d);return d.id}return-1});x("ogDestroyAoeImage",function(a){if((a=B(a))&&a.type==$a){var b=B(a.Ff);b&&b.type==Za&&b.Ej(a)}return-1});x("ogHideGeometryLayer",function(a){(a=B(a))&&a.type==Ha&&a.ma()});x("ogShowGeometryLayer",function(a){(a=B(a))&&a.type==Ha&&a.na()});x("ogRemoveGeometryLayer",function(a){(a=B(a))&&a.type==Ha&&E(a);return-1});
x("ogCreateGeometry",function(a,b){var c={};w(b.type)?c=b:c.jsonobject=b;var d=B(a);return d&&d.type==Ha?(c=V(Na,d.parent.parent,c),d.Gd(c),c.id):-1});x("ogLoadGeometryAsync",function(a,b){var c={};c.url=b;var d=B(a);return d&&d.type==Ha?(c=V(Na,d.parent.parent,c),d.Gd(c),c.id):-1});x("ogDestroyGeometry",function(a){if((a=B(a))&&a.type==Na){var b=B(a.Ff);b&&b.type==Ha&&b.Hj(a)}return-1});x("ogSetGeometryPositionWGS84",function(a,b,c,d,e,f,g){return(a=B(a))&&a.type==Na?a.Ee(b,c,d,e,f,g):-1});
x("ogSetGeometryOrientation",function(a,b,c,d){return(a=B(a))&&a.type==Na?a.Cb(b,c,d):-1});x("ogSetGeometryPositionWGS84Quat",function(a,b,c,d,e){return(a=B(a))&&a.type==Na?a.fh(b,c,d,e):-1});x("ogSetGeometryScale",function(a,b,c,d){(a=B(a))&&a.type==Na&&a.jf(b,c,d)});x("ogGetNumMeshes",function(a){return(a=B(a))&&a.type==Na?a.eb.length:-1});x("ogGetMeshAt",function(a,b){var c=B(a);return c&&c.type==Na?c.eb[b].id:-1});x("ogHideGeometry",function(a){(a=B(a))&&a.type==Na&&a.ma()});
x("ogShowGeometry",function(a){(a=B(a))&&a.type==Na&&a.na()});x("ogHighlightGeometry",function(a,b,c,d,e){(a=B(a))&&a.type==Na&&a.hf(b,c,d,e)});x("ogPickGeometry",function(a,b,c){if((a=B(a))&&a.type==A&&a.Xc==db)if(b=a.ff(b,c),b=B(b))return b.parent.parent.id;return-1});x("ogCreatePolylineWGS84",function(a,b,c){return(a=B(a))&&a.type==Ha?(c.coords=b,c.type="EarthPolyline",b=V(Na,a.parent.parent,c),a.Gd(b),b.id):-1});x("ogGetSurfaceAt",function(a,b){var c=B(a);return c&&c.type==Oa?c.ib[b].id:-1});
x("ogHideMesh",function(a){(a=B(a))&&a.type==Oa&&a.ma()});x("ogShowMesh",function(a){(a=B(a))&&a.type==Oa&&a.na()});x("ogPickMesh",function(a,b,c){if((a=B(a))&&a.type==A&&a.Xc==db)if(b=a.ff(b,c),b=B(b))return b.parent.id;return-1});x("ogHideSurface",function(a){(a=B(a))&&a.type==Pa&&a.ma()});x("ogShowSurface",function(a){(a=B(a))&&a.type==Pa&&a.na()});x("ogPickSurface",function(a,b,c){return(a=B(a))&&a.type==A&&a.Xc==db?a.ff(b,c):-1});
x("ogCreateBillboardLayer",function(a,b){var c={};c.name=b;var d=B(a);return d&&d.type==Ca?V(Ya,d,c).id:-1});x("ogRemoveBillboardLayer",function(a){(a=B(a))&&a.type==Ya&&E(a)});x("ogHideBillboardLayer",function(a){(a=B(a))&&a.type==Ya&&a.ma()});x("ogShowBillboardLayer",function(a){(a=B(a))&&a.type==Ya&&a.na()});x("ogCreateBillboardFromCanvas",function(a,b,c,d,e){if((a=B(a))&&a.type==Ya){var f={};f.canvas=b;f.position=[c,d,e];b=V(Xa,a.parent.parent,f);a.oj(b);b.o=a.id;return b.id}return-1});
x("ogDestroyBillboard",function(a){if((a=B(a))&&a.type==Xa)if(a.o){var b=B(a.o);b&&b.type==Ya&&b.Fj(a)}else E(a);return-1});x("ogHideBillboard",function(a){(a=B(a))&&a.type==Xa&&a.ma();return-1});x("ogShowBillboard",function(a){(a=B(a))&&a.type==Xa&&a.na();return-1});x("ogPickBillboard",function(a,b,c){return(a=B(a))&&a.type==A&&a.Xc==db?a.Yg(b,c):-1});x("ogUpdateBillboard",function(a,b){var c=B(a);c&&c.type==Xa?(c.Oc.canvas=b,c.Oc.ih(),c=h):c=-1;return c});
x("ogFlyTo",function(a,b,c,d,e,f,g){(a=B(a).parent.c)&&Ae(a.sa,b,c,d,e,f,g)});x("ogFlyToLookAtPosition",function(a,b,c,d,e,f,g,i){(a=B(a).parent.c)&&a.vj(b,c,d,e,f,g,i)});x("ogSetFlightDuration",function(a,b){var c=B(a).parent.c;c&&c.dh(b)});x("ogStopFlyTo",function(a){(a=B(a).parent.c)&&a.hh()});x("ogLockNavigation",function(a){(a=B(a).parent.c)&&a.e.S.Ug(j)});x("ogUnlockNavigation",function(a){(a=B(a).parent.c)&&a.e.S.Ug(n)});
x("ogSetCanvasSizeOffset",function(a,b,c){a=B(a).parent.c;a.gl=b;a.rk=c;Xg()});x("ogDebug",function(){var a=new ei;Sh(a,j);a.Nd()});x("ogWarning",function(a){Dc(F("warning"),a)});function eh(a){F("error").log(vc,a,h)}x("ogError",eh);function ch(a){F("message").info(a)}x("ogLog",ch);
x("ogWorldToWindow",function(a,b,c,d){var e;if((a=B(a))&&a.type==A&&a.Xc==db)e=a.parent.c,a=new J,a.P(e.vd,e.Jh),b=new I(b,c,d),d=a.Za(b),b=d.a[0],c=-d.a[1],d=d.a[2],b=Math.floor(0.5*(b+1)*e.width+0.5),c=Math.floor(0.5*(c+1)*e.height-1+0.5),e=[b,c,0.5*(d+1)];return e||k});x("ogCalcDistanceWGS84",function(a,b,c,d){a=Ic*Math.acos(Math.sin(G(b))*Math.sin(G(d))+Math.cos(G(b))*Math.cos(G(d))*Math.cos(G(c-a)));isNaN(a)&&(a=0);return a});
x("ogSetMinAltitude",function(a,b){var c=B(a);c&&c.type==A&&c.Xc==db&&c.parent.c.e.S.Ll(b)});
