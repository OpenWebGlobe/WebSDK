function ea(a){throw a;}var h=void 0,j=!0,k=null,n=!1;function p(){return function(){}}function fa(a){return function(b){this[a]=b}}function ga(a){return function(){return this[a]}}function s(a){return function(){return a}}var u,x=this;function ha(a){for(var a=a.split("."),b=x,c;c=a.shift();)if(b[c]!=k)b=b[c];else return k;return b}
function ka(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function y(a){return a!==h}function la(a){return"array"==ka(a)}function ma(a){var b=ka(a);return"array"==b||"object"==b&&"number"==typeof a.length}function na(a){return"string"==typeof a}function oa(a){return"function"==ka(a)}function pa(a){var b=typeof a;return"object"==b&&a!=k||"function"==b}function ra(a){return a[sa]||(a[sa]=++ta)}var sa="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),ta=0;
function va(a,b,c){return a.call.apply(a.bind,arguments)}function za(a,b,c){a||ea(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function Aa(a,b,c){Aa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?va:za;return Aa.apply(k,arguments)}var Ba=Date.now||function(){return+new Date};
function z(a,b){var c=a.split("."),d=x;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&y(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function Ca(a,b){function c(){}c.prototype=b.prototype;a.Yf=b.prototype;a.prototype=new c;a.prototype.constructor=a};var D=0,E=1,Da=2,Ea=3,Fa=4,Ga=5,Ha=6,Ia=7,Ja=8,Ka=9,La=10,Ma=11,Na=12,Oa=13,Pa=14,Qa=15,Ra=16,Sa=17,Ta=18,Ua=19,Va=20,Wa=21,Xa=22,Ya=23,Za=24,$a=65533,ab=65534,bb=25,cb=26,db=65535;z("OG_OBJECT_CONTEXT",D);z("OG_OBJECT_SCENE",E);z("OG_OBJECT_WORLD",Da);z("OG_OBJECT_IMAGELAYER",Ea);z("OG_OBJECT_ELEVATIONLAYER",Fa);z("OG_OBJECT_WAYPOINTLAYER",Ga);z("OG_OBJECT_GEOMETRYLAYER",Ia);z("OG_OBJECT_POILAYER",Ha);z("OG_OBJECT_VOXELLAYER",Ja);z("OG_OBJECT_VECTORLAYER",Ka);z("OG_OBJECT_IMAGE",La);
z("OG_OBJECT_TEXTURE",Ma);z("OG_OBJECT_PIXELBUFFER",Na);z("OG_OBJECT_GEOMETRY",Oa);z("OG_OBJECT_MESH",Pa);z("OG_OBJECT_SURFACE",Qa);z("OG_OBJECT_VECTOR",Ra);z("OG_OBJECT_CAMERA",Sa);z("OG_OBJECT_TEXT",Ta);z("OG_OBJECT_BINARYDATA",Ua);z("OG_OBJECT_LIGHT",Va);z("OG_OBJECT_NAVIGATIONCONTROLLER",Wa);z("OG_OBJECT_POI",Xa);z("OG_OBJECT_BILLBOARD",Ya);z("OG_OBJECT_BILLBOARDLAYER",Za);z("OG_OBJECT_AOEIMAGELAYER",$a);z("OG_OBJECT_AOEIMAGE",ab);z("OG_OBJECT_POINTSPRITE",bb);z("OG_OBJECT_EARTHPOLYLINE",cb);
z("OG_OBJECT_INVALID",db);z("OG_RENDEREFFECT_RGB",0);z("OG_RENDEREFFECT_CHROMADEPTH",1);var eb=1,fb=2,gb=3,hb=4;z("OG_SCENE_3D_ELLIPSOID_WGS84",eb);z("OG_SCENE_3D_FLAT_CARTESIAN",fb);z("OG_SCENE_2D_SCREEN",gb);z("OG_SCENE_CUSTOM",hb);z("OG_NAVIGATIONMODE_GLOBE",0);z("OG_NAVIGATIONMODE_FLIGHT",1);z("OG_NAVIGATIONMODE_CONSTRAINED",2);z("OG_NAVIGATIONMODE_DYNAMIC",3);var ib=1,jb=2;z("OG_OBJECT_READY",ib);z("OG_OBJECT_BUSY",jb);z("OG_OBJECT_FAILED",3);var kb=[];function F(a){if(-1==a)return k;for(var b=0;b<kb.length;b++)if(kb[b].id==a)return kb[b];return k}function G(){this.parent=k;this.name="ogObject";this.type=db;this.id=-1;this.status=ib;this.J=this.K=k}G.prototype.ob=p();function H(a){for(var a=a.id,b=0;b<kb.length;b++)if(kb[b].id==a){kb[b].ob();kb.splice(b,1);break}}G.prototype.Ra=p();function lb(a,b){for(var c=1;c<arguments.length;c++)var d=(""+arguments[c]).replace(/\$/g,"$$$$"),a=a.replace(/\%s/,d);return a}function mb(a,b){return a.replace(/(\r\n|\r|\n)/g,b?"<br />":"<br>")}function nb(a){if(!ob.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(pb,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(qb,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(rb,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(sb,"&quot;"));return a}var pb=/&/g,qb=/</g,rb=/>/g,sb=/\"/g,ob=/[&<>\"]/;
function tb(a){return mb(a.replace(/  /g," &#160;"),h)};var ub,vb,wb,xb,yb;function zb(){return x.navigator?x.navigator.userAgent:k}xb=wb=vb=ub=n;var Ab;if(Ab=zb()){var Bb=x.navigator;ub=0==Ab.indexOf("Opera");vb=!ub&&-1!=Ab.indexOf("MSIE");wb=!ub&&-1!=Ab.indexOf("WebKit");xb=!ub&&!wb&&"Gecko"==Bb.product}var Cb=ub,Db=vb,Eb=xb,Fb=wb,Gb,Hb=x.navigator;Gb=Hb&&Hb.platform||"";yb=-1!=Gb.indexOf("Mac");var Ib=-1!=Gb.indexOf("Win"),Jb;
a:{var Kb="",Lb;if(Cb&&x.opera)var Mb=x.opera.version,Kb="function"==typeof Mb?Mb():Mb;else if(Eb?Lb=/rv\:([^\);]+)(\)|;)/:Db?Lb=/MSIE\s+([^\);]+)(\)|;)/:Fb&&(Lb=/WebKit\/(\S+)/),Lb)var Nb=Lb.exec(zb()),Kb=Nb?Nb[1]:"";if(Db){var Ob,Pb=x.document;Ob=Pb?Pb.documentMode:h;if(Ob>parseFloat(Kb)){Jb=""+Ob;break a}}Jb=Kb}var Qb={};
function Rb(a){var b;if(!(b=Qb[a])){b=0;for(var c=(""+Jb).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=(""+a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",i=d[f]||"",l=RegExp("(\\d*)(\\D*)","g"),m=RegExp("(\\d*)(\\D*)","g");do{var o=l.exec(g)||["","",""],r=m.exec(i)||["","",""];if(0==o[0].length&&0==r[0].length)break;b=((0==o[1].length?0:parseInt(o[1],10))<(0==r[1].length?0:parseInt(r[1],10))?-1:(0==o[1].length?0:parseInt(o[1],
10))>(0==r[1].length?0:parseInt(r[1],10))?1:0)||((0==o[2].length)<(0==r[2].length)?-1:(0==o[2].length)>(0==r[2].length)?1:0)||(o[2]<r[2]?-1:o[2]>r[2]?1:0)}while(0==b)}b=Qb[a]=0<=b}return b}var Sb={};function Tb(){return Sb[9]||(Sb[9]=Db&&!!document.documentMode&&9<=document.documentMode)};function Ub(a,b){for(var c in a)b.call(h,a[c],c,a)}function Vb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}var Wb="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");function Xb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Wb.length;f++)c=Wb[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function Yb(a){this.stack=Error().stack||"";a&&(this.message=""+a)}Ca(Yb,Error);Yb.prototype.name="CustomError";function Zb(a,b){b.unshift(a);Yb.call(this,lb.apply(k,b));b.shift()}Ca(Zb,Yb);Zb.prototype.name="AssertionError";function $b(a,b){ea(new Zb("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1)))};var ac=Array.prototype,bc=ac.indexOf?function(a,b,c){return ac.indexOf.call(a,b,c)}:function(a,b,c){c=c==k?0:0>c?Math.max(0,a.length+c):c;if(na(a))return!na(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},cc=ac.forEach?function(a,b,c){ac.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=na(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)};function dc(a){return ac.concat.apply(ac,arguments)}
function ec(a){if(la(a))return dc(a);for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}function fc(a,b,c){return 2>=arguments.length?ac.slice.call(a,b):ac.slice.call(a,b,c)};var gc="StopIteration"in x?x.StopIteration:Error("StopIteration");function hc(){}hc.prototype.next=function(){ea(gc)};hc.prototype.Rj=function(){return this};function ic(a){if(a instanceof hc)return a;if("function"==typeof a.Rj)return a.Rj(n);if(ma(a)){var b=0,c=new hc;c.next=function(){for(;;){b>=a.length&&ea(gc);if(b in a)return a[b++];b++}};return c}ea(Error("Not implemented"))}
function jc(a,b){if(ma(a))try{cc(a,b,h)}catch(c){c!==gc&&ea(c)}else{a=ic(a);try{for(;;)b.call(h,a.next(),h,a)}catch(d){d!==gc&&ea(d)}}};function kc(a,b){this.Xc={};this.yb=[];var c=arguments.length;if(1<c){c%2&&ea(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){if(a instanceof kc)c=a.Ri(),d=a.sk();else{var c=Vb(a),e=[],f=0;for(d in a)e[f++]=a[d];d=e}for(e=0;e<c.length;e++)this.set(c[e],d[e])}}u=kc.prototype;u.Na=0;u.qj=0;u.Ff=ga("Na");u.sk=function(){lc(this);for(var a=[],b=0;b<this.yb.length;b++)a.push(this.Xc[this.yb[b]]);return a};u.Ri=function(){lc(this);return this.yb.concat()};
u.i=function(a,b){if(this===a)return j;if(this.Na!=a.Ff())return n;var c=b||mc;lc(this);for(var d,e=0;d=this.yb[e];e++)if(!c(this.get(d),a.get(d)))return n;return j};function mc(a,b){return a===b}u.clear=function(){this.Xc={};this.qj=this.Na=this.yb.length=0};
function lc(a){if(a.Na!=a.yb.length){for(var b=0,c=0;b<a.yb.length;){var d=a.yb[b];Object.prototype.hasOwnProperty.call(a.Xc,d)&&(a.yb[c++]=d);b++}a.yb.length=c}if(a.Na!=a.yb.length){for(var e={},c=b=0;b<a.yb.length;)d=a.yb[b],Object.prototype.hasOwnProperty.call(e,d)||(a.yb[c++]=d,e[d]=1),b++;a.yb.length=c}}u.get=function(a,b){return Object.prototype.hasOwnProperty.call(this.Xc,a)?this.Xc[a]:b};
u.set=function(a,b){Object.prototype.hasOwnProperty.call(this.Xc,a)||(this.Na++,this.yb.push(a),this.qj++);this.Xc[a]=b};u.Rj=function(a){lc(this);var b=0,c=this.yb,d=this.Xc,e=this.qj,f=this,g=new hc;g.next=function(){for(;;){e!=f.qj&&ea(Error("The map has changed since the iterator was created"));b>=c.length&&ea(gc);var g=c[b++];return a?g:d[g]}};return g};function nc(a){return oc(a||arguments.callee.caller,[])}
function oc(a,b){var c=[];if(0<=bc(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(pc(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){0<e&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=""+f;break;case "boolean":f=f?"true":"false";break;case "function":f=(f=pc(f))?f:"[fn]";break;default:f=typeof f}40<f.length&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(oc(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function pc(a){if(qc[a])return qc[a];a=""+a;if(!qc[a]){var b=/function ([^\(]+)/.exec(a);qc[a]=b?b[1]:"[Anonymous]"}return qc[a]}var qc={};function rc(a,b,c,d,e){this.reset(a,b,c,d,e)}rc.prototype.hk=k;rc.prototype.gk=k;var sc=0;rc.prototype.reset=function(a,b,c,d,e){"number"==typeof e||sc++;this.rn=d||Ba();this.xd=a;this.Hm=b;this.Bm=c;delete this.hk;delete this.gk};rc.prototype.$h=fa("xd");function tc(a){this.yo=a}tc.prototype.Zi=k;tc.prototype.xd=k;tc.prototype.ck=k;tc.prototype.Hh=k;function uc(a,b){this.name=a;this.value=b}uc.prototype.toString=ga("name");var vc=new uc("SHOUT",1200),wc=new uc("SEVERE",1E3),xc=new uc("WARNING",900),yc=new uc("INFO",800),zc=new uc("CONFIG",700),Ac=[new uc("OFF",Infinity),vc,wc,xc,yc,zc,new uc("FINE",500),new uc("FINER",400),new uc("FINEST",300),new uc("ALL",0)],Bc=k;
function Cc(a){if(!Bc){Bc={};for(var b=0,c;c=Ac[b];b++)Bc[c.value]=c,Bc[c.name]=c}return Bc[a]||k}u=tc.prototype;u.getParent=ga("Zi");u.$h=fa("xd");function Dc(a){if(a.xd)return a.xd;if(a.Zi)return Dc(a.Zi);$b("Root logger has no level set.");return k}
u.log=function(a,b,c){if(a.value>=Dc(this).value){a=this.uo(a,b,c);b="log:"+a.Hm;x.console&&(x.console.timeStamp?x.console.timeStamp(b):x.console.markTimeline&&x.console.markTimeline(b));x.msWriteProfilerMark&&x.msWriteProfilerMark(b);for(b=this;b;){var c=b,d=a;if(c.Hh)for(var e=0,f=h;f=c.Hh[e];e++)f(d);b=b.getParent()}}};
u.uo=function(a,b,c){var d=new rc(a,""+b,this.yo);if(c){d.hk=c;var e;var f=arguments.callee.caller;try{var g;var i=ha("window.location.href");if(na(c))g={message:c,name:"Unknown error",lineNumber:"Not available",fileName:i,stack:"Not available"};else{var l,m,o=n;try{l=c.lineNumber||c.ep||"Not available"}catch(r){l="Not available",o=j}try{m=c.fileName||c.filename||c.sourceURL||i}catch(q){m="Not available",o=j}g=o||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,lineNumber:l,fileName:m,
stack:c.stack||"Not available"}:c}e="Message: "+nb(g.message)+'\nUrl: <a href="view-source:'+g.fileName+'" target="_new">'+g.fileName+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+nb(g.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+nb(nc(f)+"-> ")}catch(t){e="Exception trying to expose exception! You win, we lose. "+t}d.gk=e}return d};function Ec(a,b){a.log(xc,b,h)}u.info=function(a,b){this.log(yc,a,b)};var Fc={},Gc=k;function Hc(){Gc||(Gc=new tc(""),Fc[""]=Gc,Gc.$h(zc))}
function I(a){Hc();var b;if(!(b=Fc[a])){b=new tc(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=I(a.substr(0,c));c.ck||(c.ck={});c.ck[d]=b;b.Zi=c;Fc[a]=b}return b};function Ic(){this.name="ogTexture";this.type=Ma;this.l=k;this.qn="";this.status=jb}Ic.prototype=new G;
Ic.prototype.Ra=function(a){if(a==k)Ec(I("owg.ogTexture"),"** ERROR: no options for texture creation!");else if(this.parent==k)Ec(I("owg.ogTexture"),"** ERROR: no parent!");else if(this.parent.type!=E)Ec(I("owg.ogTexture"),"** ERROR: parent is not scene!");else if(a.url){var b=this;this.l=this.parent.parent.c.nj.tl(a.url,function(){b.status=ib;b.K&&b.K(b.id)},function(){b.status=3;b.J&&b.J(b.id)},n);this.qn=a.url}};
Ic.prototype.ob=function(){this.l&&(this.parent.parent.c.nj.vl(this.qn),this.l=k,this.status=3)};Ic.prototype.U=function(a,b,c){this.status==ib&&this.l&&(c!=k?this.l.U(a,b,c.z,c.angle,c.scalex,c.scaley,c.blend,c.invtexcoord,c.alpha):this.l.U(a,b))};var Jc=6378137,Kc=0.006694379990197,Lc=0.006739496742,K=1.1920930376163766E-7,Mc=8388607;function L(a){return 0.017453292519943295*a}function Nc(a){return 57.29577951308232*a}function Oc(a){for(var b=1;a>b;)b*=2;return b};function Pc(){this.name="ogCamera";this.type=Sa;this.kc=this.pitch=this.Va=this.dc=this.fc=this.gc=0}Pc.prototype=new G;u=Pc.prototype;u.ob=function(){this.kc=this.pitch=this.Va=this.dc=this.fc=this.gc=0};u.Aa=function(a,b,c){this.gc=a;this.fc=b;this.dc=c;this.parent.xf==this&&Qc(this).Aa(a,b,c)};u.hf=function(){var a={};a.longitude=this.gc;a.latitude=this.fc;a.elevation=this.dc;return a};u.Eb=function(a,b,c){this.Va=a;this.pitch=b;this.kc=c;this==this.parent.xf&&Qc(this).Eb(L(a),L(b),L(c))};
u.Vg=function(){var a={};a.yaw=this.Va;a.pitch=this.pitch;a.roll=this.kc;return a};u.hh=function(a,b,c,d){this==this.parent.xf&&Qc(this).hh(a,b,c,d)};function Qc(a){var b=k,a=a.parent.parent.c;a.e&&a.e.Q&&(b=a.e.Q);return b}function Rc(a){var b=Qc(a),c=b.hf(),b=b.Vg();a.gc=c.longitude;a.fc=c.latitude;a.dc=c.elevation;a.Va=Nc(b.Va);a.pitch=Nc(b.pitch);a.kc=Nc(b.kc)};function N(a,b,c){a=a||0;b=b||0;c=c||0;this.a=[a,b,c];this.vc=new Float32Array([a,b,c])}u=N.prototype;u.m=function(a,b,c){this.a[0]=a;this.a[1]=b;this.a[2]=c};u.Ba=function(){this.vc[0]=this.a[0];this.vc[1]=this.a[1];this.vc[2]=this.a[2];return this.vc};u.Tg=ga("a");u.ff=function(){var a=new N;a.m(this.a[0],this.a[1],this.a[2]);return a};u.In=function(a){this.a[0]+=a.a[0];this.a[1]+=a.a[1];this.a[2]+=a.a[2];return this};u.Qj=function(a){this.a[0]-=a.a[0];this.a[1]-=a.a[1];this.a[2]-=a.a[2];return this};
u.$n=function(a,b){this.a[0]=a.a[0]-b.a[0];this.a[1]=a.a[1]-b.a[1];this.a[2]=a.a[2]-b.a[2]};u.Ln=function(a){var b=this.a[0],c=this.a[1],d=this.a[2],e=a.a[0],f=a.a[1],a=a.a[2];this.a[0]=c*a-f*d;this.a[1]=d*e-a*b;this.a[2]=b*f-e*c;return this};function Sc(a,b,c){var d=b.a[0],e=b.a[1],b=b.a[2],f=c.a[0],g=c.a[1],c=c.a[2];a.a[0]=e*c-g*b;a.a[1]=b*f-c*d;a.a[2]=d*g-f*e}u.Mn=function(a){return this.a[0]*a.a[0]+this.a[1]*a.a[1]+this.a[2]*a.a[2]};
u.Ej=function(){var a=this.a[0],b=this.a[1],c=this.a[2];return Math.sqrt(a*a+b*b+c*c)};u.Zn=function(){var a=this.a[0],b=this.a[1],c=this.a[2];return a*a+b*b+c*c};u.Pc=function(){var a=this.Ej();0!=a&&(this.a[0]/=a,this.a[1]/=a,this.a[2]/=a);return this};u.Wn=function(){this.a[0]=-this.a[0];this.a[1]=-this.a[1];this.a[2]=-this.a[2];return this};u.hg=function(){return"["+this.a[0]+","+this.a[1]+","+this.a[2]+"]"};z("Cross",Sc);z("vec3",N);N.prototype.Add=N.prototype.In;N.prototype.Cross=N.prototype.Ln;
N.prototype.Dot=N.prototype.Mn;N.prototype.Get=N.prototype.Tg;N.prototype.Length=N.prototype.Ej;N.prototype.Neg=N.prototype.Wn;N.prototype.Normalize=N.prototype.Pc;N.prototype.Set=N.prototype.m;N.prototype.SquaredLength=N.prototype.Zn;N.prototype.Subtract=N.prototype.$n;N.prototype.Sub=N.prototype.Qj;N.prototype.ToString=N.prototype.hg;function O(){this.a=Array(16);this.ki();this.vc=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}u=O.prototype;u.He=function(a){if(16==a.length)for(var b=0;16>b;b++)this.a[b]=a[b]};u.Ba=function(){for(var a=0;16>a;a++)this.vc[a]=this.a[a];return this.vc};u.Tg=ga("a");u.ff=function(){for(var a=new O,b=0;16>b;b++)a.a[b]=this.a[b];return a};u.da=function(a){for(var b=0;16>b;b++)this.a[b]=a.a[b]};
u.ki=function(){this.a[0]=1;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=1;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=1;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};u.ao=function(){this.a[0]=0;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=0;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
u.kd=function(a,b,c){this.a[0]=1;this.a[4]=0;this.a[8]=0;this.a[12]=a;this.a[1]=0;this.a[5]=1;this.a[9]=0;this.a[13]=b;this.a[2]=0;this.a[6]=0;this.a[10]=1;this.a[14]=c;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};u.Gl=function(a,b,c,d){a.a[12]=b;a.a[13]=c;a.a[14]=d};u.Zd=function(a,b,c){this.a[0]=a;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=b;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=c;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1;return j};
u.Nj=function(a){var b=Math.sin(a),a=Math.cos(a);this.a[0]=1;this.a[1]=0;this.a[2]=0;this.a[3]=0;this.a[4]=0;this.a[5]=a;this.a[6]=b;this.a[7]=0;this.a[8]=0;this.a[9]=-b;this.a[10]=a;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};u.Kl=function(a){var b=Math.sin(a),a=Math.cos(a);this.a[0]=a;this.a[1]=0;this.a[2]=-b;this.a[3]=0;this.a[4]=0;this.a[5]=1;this.a[6]=0;this.a[7]=0;this.a[8]=b;this.a[9]=0;this.a[10]=a;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};
u.Ll=function(a){var b=Math.sin(a),a=Math.cos(a);this.a[0]=a;this.a[1]=b;this.a[2]=0;this.a[3]=0;this.a[4]=-b;this.a[5]=a;this.a[6]=0;this.a[7]=0;this.a[8]=0;this.a[9]=0;this.a[10]=1;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};
u.Vn=function(a,b,c,d,e,f,g,i,l){var m,o,r,q,d=a-d,e=b-e,f=c-f;q=1/Math.sqrt(d*d+e*e+f*f);d*=q;e*=q;f*=q;m=i*f-l*e;l=l*d-g*f;g=g*e-i*d;(q=Math.sqrt(m*m+l*l+g*g))?(q=1/q,m*=q,l*=q,g*=q):g=l=m=0;i=e*g-f*l;o=f*m-d*g;r=d*l-e*m;(q=Math.sqrt(i*i+o*o+r*r))?(q=1/q,i*=q,o*=q,r*=q):r=o=i=0;this.a[0]=m;this.a[4]=l;this.a[8]=g;this.a[12]=-(m*a+l*b+g*c);this.a[1]=i;this.a[5]=o;this.a[9]=r;this.a[13]=-(i*a+o*b+r*c);this.a[2]=d;this.a[6]=e;this.a[10]=f;this.a[14]=-(d*a+e*b+f*c);this.a[3]=0;this.a[7]=0;this.a[11]=
0;this.a[15]=1};
u.W=function(a,b){var c=a.a[0],d=a.a[1],e=a.a[2],f=a.a[3],g=a.a[4],i=a.a[5],l=a.a[6],m=a.a[7],o=a.a[8],r=a.a[9],q=a.a[10],t=a.a[11],v=a.a[12],w=a.a[13],B=a.a[14],A=a.a[15],C=b.a[0],R=b.a[1],ja=b.a[2],V=b.a[3],W=b.a[4],M=b.a[5],$=b.a[6],aa=b.a[7],ba=b.a[8],wa=b.a[9],xa=b.a[10],ya=b.a[11],J=b.a[12],ca=b.a[13],ua=b.a[14],da=b.a[15];this.a[0]=C*c+R*g+ja*o+V*v;this.a[1]=C*d+R*i+ja*r+V*w;this.a[2]=C*e+R*l+ja*q+V*B;this.a[3]=C*f+R*m+ja*t+V*A;this.a[4]=W*c+M*g+$*o+aa*v;this.a[5]=W*d+M*i+$*r+aa*w;this.a[6]=
W*e+M*l+$*q+aa*B;this.a[7]=W*f+M*m+$*t+aa*A;this.a[8]=ba*c+wa*g+xa*o+ya*v;this.a[9]=ba*d+wa*i+xa*r+ya*w;this.a[10]=ba*e+wa*l+xa*q+ya*B;this.a[11]=ba*f+wa*m+xa*t+ya*A;this.a[12]=J*c+ca*g+ua*o+da*v;this.a[13]=J*d+ca*i+ua*r+da*w;this.a[14]=J*e+ca*l+ua*q+da*B;this.a[15]=J*f+ca*m+ua*t+da*A};u.Ke=function(){for(var a=this.ff(),b=0;4>b;b++)for(var c=0;4>c;c++)this.a[4*b+c]=a.a[4*c+b]};
u.Qa=function(a){var b=new N;b.a[0]=this.a[0]*a.a[0]+this.a[4]*a.a[1]+this.a[8]*a.a[2]+this.a[12];b.a[1]=this.a[1]*a.a[0]+this.a[5]*a.a[1]+this.a[9]*a.a[2]+this.a[13];b.a[2]=this.a[2]*a.a[0]+this.a[6]*a.a[1]+this.a[10]*a.a[2]+this.a[14];a=this.a[3]*a.a[0]+this.a[7]*a.a[1]+this.a[11]*a.a[2]+this.a[15];b.a[0]/=a;b.a[1]/=a;b.a[2]/=a;return b};
u.Pn=function(a,b,c,d,e,f){var g=b-a,i=d-c,l=f-e;this.a[0]=2*e/g;this.a[4]=0;this.a[8]=(b+a)/g;this.a[12]=0;this.a[1]=0;this.a[5]=2*e/i;this.a[9]=(d+c)/i;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=-(f+e)/l;this.a[14]=-(2*f*e)/l;this.a[3]=0;this.a[7]=0;this.a[11]=-1;this.a[15]=0};
u.Hl=function(a,b,c,d){a=1/Math.tan(a*Math.PI/360);this.a[0]=a/b;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=a;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=(d+c)/(c-d);this.a[14]=2*d*c/(c-d);this.a[3]=0;this.a[7]=0;this.a[11]=-1;this.a[15]=0};
u.El=function(a,b,c,d,e,f){var g=b-a,i=d-c,l=f-e;this.a[0]=2/g;this.a[1]=0;this.a[2]=0;this.a[3]=0;this.a[4]=0;this.a[5]=2/i;this.a[6]=0;this.a[7]=0;this.a[8]=0;this.a[9]=0;this.a[10]=-2/l;this.a[11]=0;this.a[12]=-(a+b)/g;this.a[13]=-(d+c)/i;this.a[14]=-(f+e)/l;this.a[15]=1};u.Fl=function(a,b,c,d){this.El(a,b,c,d,-1,1)};
u.Sd=function(a,b){var c=0.017453292519943295*a,d=0.017453292519943295*b,e=Math.sin(d),f=Math.sin(c),d=Math.cos(d),c=Math.cos(c);this.a[0]=-e*c;this.a[4]=-f;this.a[8]=-d*c;this.a[12]=0;this.a[1]=-e*f;this.a[5]=c;this.a[9]=-d*f;this.a[13]=0;this.a[2]=d;this.a[6]=0;this.a[10]=-e;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
u.Kn=function(a,b){var c=0.017453292519943295*a,d=0.017453292519943295*b,e=Math.sin(d),f=Math.sin(c),d=Math.cos(d),c=Math.cos(c);this.a[0]=-f;this.a[4]=c;this.a[8]=0;this.a[12]=0;this.a[1]=-e*c;this.a[5]=-e*f;this.a[9]=-d;this.a[13]=0;this.a[2]=d*c;this.a[6]=d*f;this.a[10]=e;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
u.pl=function(a,b){var c=0.017453292519943295*a,d=0.017453292519943295*b,e=Math.sin(d),f=Math.sin(c),d=Math.cos(d),c=Math.cos(c);this.a[0]=-f;this.a[4]=-e*c;this.a[8]=d*c;this.a[12]=0;this.a[1]=c;this.a[5]=-e*f;this.a[9]=d*f;this.a[13]=0;this.a[2]=0;this.a[6]=d;this.a[10]=e;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
u.Og=function(a,b,c){var d=Math.cos(b),e=Math.cos(c),f=Math.cos(a),b=Math.sin(b),c=Math.sin(c),a=Math.sin(a);this.a[0]=d*f;this.a[4]=-e*a+c*b*f;this.a[8]=c*a+e*b*f;this.a[12]=0;this.a[1]=d*a;this.a[5]=e*f+c*b*a;this.a[9]=-c*f+e*b*a;this.a[13]=0;this.a[2]=-b;this.a[6]=c*d;this.a[10]=e*d;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
u.Nn=function(a){var b=this.a[0],c=this.a[4],d=this.a[1],e=this.a[5],f=this.a[2],g=this.a[6],i=this.a[10];1.0E-6>Math.abs(b)&&1.0E-6>Math.abs(d)?(a.pitch=-Math.PI/2,a.roll=0,a.yaw=Math.atan2(c,e)):(a.pitch=Math.atan2(-f,Math.sqrt(b*b+d*d)),a.roll=Math.atan2(d,b),a.yaw=Math.atan2(g,i))};
u.ef=function(){this.a[0]=0;this.a[4]=0;this.a[8]=-1;this.a[12]=0;this.a[1]=1;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=-1;this.a[10]=0;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};u.vj=function(){this.a[0]=0;this.a[4]=1;this.a[8]=0;this.a[12]=0;this.a[1]=1;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=-1;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
u.On=function(a){var b=a[0],c=a[1],d=a[2],a=a[3],e=a*a,f=b*b,g=c*c,i=d*d;this.a[0]=e+f-g-i;this.a[4]=2*(b*c-a*d);this.a[8]=2*(b*d+a*c);this.a[12]=0;this.a[1]=2*(b*c+a*d);this.a[5]=e-f+g-i;this.a[9]=2*(c*d-a*b);this.a[13]=0;this.a[2]=2*(b*d-a*c);this.a[6]=2*(c*d+a*b);this.a[10]=e-f-g+i;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
u.bg=function(a,b,c,d){var e=a*a,f=b*b,g=c*c,i=a*b,l=a*c,m=b*c,a=d*a,b=d*b,c=d*c;this.a[0]=1-2*f-2*g;this.a[4]=2*i+2*c;this.a[8]=2*l-2*b;this.a[12]=0;this.a[1]=2*i-2*c;this.a[5]=1-2*e-2*g;this.a[9]=2*m+2*a;this.a[13]=0;this.a[2]=2*l+2*b;this.a[6]=2*m-2*a;this.a[10]=1-2*e-2*f;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
u.Xn=function(){var a=this.a[0],b=this.a[4],c=this.a[8],d=this.a[1],e=this.a[5],f=this.a[9],g=this.a[2],i=this.a[6],l=this.a[10],m=a+e+l;0<m?(m=2*Math.sqrt(m+1),a=0.25*m,e=(i-f)/m,l=(c-g)/m,b=(d-b)/m):a>e&a>l?(m=2*Math.sqrt(1+a-e-l),a=(i-f)/m,e=0.25*m,l=(b+d)/m,b=(c+g)/m):e>l?(m=2*Math.sqrt(1+e-a-l),a=(c-g)/m,e=(b+d)/m,l=0.25*m,b=(f+i)/m):(m=2*Math.sqrt(1+l-a-e),a=(d-b)/m,e=(c+g)/m,l=(f+i)/m,b=0.25*m);return[e,l,b,a]};
u.dg=function(a){var b=a.a[0],c=a.a[1],d=a.a[2],e=a.a[3],f=a.a[4],g=a.a[5],i=a.a[6],l=a.a[7],m=a.a[8],o=a.a[9],r=a.a[10],q=a.a[11],t=a.a[12],v=a.a[13],w=a.a[14],a=a.a[15],B=1/(b*g*r*a+b*i*q*v+b*l*o*w+c*f*q*w+c*i*m*a+c*l*r*t+d*f*o*a+d*g*q*t+d*l*m*v+e*f*r*v+e*g*m*w+e*i*o*t-b*g*q*w-b*i*o*a-b*l*r*v-c*f*r*a-c*i*q*t-c*l*m*w-d*f*q*v-d*g*m*a-d*l*o*t-e*f*o*w-e*g*r*t-e*i*m*v);this.a[0]=(g*r*a+i*q*v+l*o*w-g*q*w-i*o*a-l*r*v)*B;this.a[4]=(f*q*w+i*m*a+l*r*t-f*r*a-i*q*t-l*m*w)*B;this.a[8]=(f*o*a+g*q*t+l*m*v-f*q*
v-g*m*a-l*o*t)*B;this.a[12]=(f*r*v+g*m*w+i*o*t-f*o*w-g*r*t-i*m*v)*B;this.a[1]=(c*q*w+d*o*a+e*r*v-c*r*a-d*q*v-e*o*w)*B;this.a[5]=(b*r*a+d*q*t+e*m*w-b*q*w-d*m*a-e*r*t)*B;this.a[9]=(b*q*v+c*m*a+e*o*t-b*o*a-c*q*t-e*m*v)*B;this.a[13]=(b*o*w+c*r*t+d*m*v-b*r*v-c*m*w-d*o*t)*B;this.a[2]=(c*i*a+d*l*v+e*g*w-c*l*w-d*g*a-e*i*v)*B;this.a[6]=(b*l*w+d*f*a+e*i*t-b*i*a-d*l*t-e*f*w)*B;this.a[10]=(b*g*a+c*l*t+e*f*v-b*l*v-c*f*a-e*g*t)*B;this.a[14]=(b*i*v+c*f*w+d*g*t-b*g*w-c*i*t-d*f*v)*B;this.a[3]=(c*l*r+d*g*q+e*i*o-c*
i*q-d*l*o-e*g*r)*B;this.a[7]=(b*i*q+d*l*m+e*f*r-b*l*r-d*f*q-e*i*m)*B;this.a[11]=(b*l*o+c*f*q+e*g*m-b*g*q-c*l*m-e*f*o)*B;this.a[15]=(b*g*r+c*i*m+d*f*o-b*i*o-c*f*r-d*g*m)*B};u.hg=function(){return"[ "+this.a[0]+" "+this.a[4]+" "+this.a[8]+" "+this.a[12]+"\n  "+this.a[1]+" "+this.a[5]+" "+this.a[9]+" "+this.a[13]+"\n  "+this.a[2]+" "+this.a[6]+" "+this.a[10]+" "+this.a[14]+"\n  "+this.a[3]+" "+this.a[7]+" "+this.a[11]+" "+this.a[15]+" ]"};z("mat4",O);O.prototype.CalcBodyFrame=O.prototype.Og;
O.prototype.CalcNavigationFrame=O.prototype.Sd;O.prototype.Cami3d=O.prototype.ef;O.prototype.CopyFrom=O.prototype.da;O.prototype.Copy=O.prototype.ff;O.prototype.Frustum=O.prototype.Pn;O.prototype.Get=O.prototype.Tg;O.prototype.Identity=O.prototype.ki;O.prototype.Inverse=O.prototype.dg;O.prototype.LookAt=O.prototype.Vn;O.prototype.Multiply=O.prototype.W;O.prototype.MultiplyVec3=O.prototype.Qa;O.prototype.Ortho2D=O.prototype.Fl;O.prototype.Ortho=O.prototype.El;O.prototype.OverwriteTranslation=O.prototype.Gl;
O.prototype.Perspective=O.prototype.Hl;O.prototype.RotationX=O.prototype.Nj;O.prototype.RotationY=O.prototype.Kl;O.prototype.RotationZ=O.prototype.Ll;O.prototype.Scale=O.prototype.Zd;O.prototype.SetFromArray=O.prototype.He;O.prototype.ToString=O.prototype.hg;O.prototype.Translation=O.prototype.kd;O.prototype.Transpose=O.prototype.Ke;O.prototype.Zero=O.prototype.ao;O.prototype.CalcNavigationFrame2=O.prototype.Kn;O.prototype.CalcNavigationFrameZUp=O.prototype.pl;O.prototype.ExtractEulerAngles=O.prototype.Nn;
O.prototype.CamViewFrustum=O.prototype.vj;O.prototype.FromQuaternion=O.prototype.On;O.prototype.FromQuaternionComponents=O.prototype.bg;O.prototype.Rot2Quat=O.prototype.Xn;function Tc(){this.mi=[];this.li=[];this.eg=[];this.Pb={};this.Pb.x=0;this.Pb.y=0;this.Pb.p=0;this.Od={};this.Od.longitude=0;this.Od.latitude=0;this.Od.elevation=0;this.rd=n;this.Za=[0,0];this.Yc=-1;this.Dk=0;this.za=Uc;this.sa=0}var Uc=0,Vc=1,Wc=2,Xc=3,Yc=4,Zc=5;Tc.prototype.Aa=function(a,b,c){this.Pb.x=a;this.Pb.y=b;this.Pb.p=c};Tc.prototype.hf=ga("Pb");function $c(a,b,c,d){a.Od.longitude=b;a.Od.latitude=c;a.Od.elevation=d};function ad(){this.result={};this.result.M=0;this.result.Mc=0;this.result.Gd=0;this.Qb={};this.Qb.x=0;this.Qb.y=0;this.Qb.p=0;this.Rb={};this.Rb.x=0;this.Rb.y=0;this.Rb.p=0;this.rb={};this.rb.x=0;this.rb.y=0;this.rb.p=0;this.Zb={};this.Zb.x=0;this.Zb.y=0;this.Zb.p=0;this.$b={};this.$b.x=0;this.$b.y=0;this.Ui=this.Ne=this.$b.p=0;this.wl=2.220446049250313E-16}
ad.prototype.Cj=function(a,b,c,d,e,f,g,i,l,m,o,r,q,t,v){this.Qb.x=m-g;this.Qb.y=o-i;this.Qb.p=r-l;this.Rb.x=q-g;this.Rb.y=t-i;this.Rb.p=v-l;this.Zb.x=e*this.Rb.p-f*this.Rb.y;this.Zb.y=f*this.Rb.x-d*this.Rb.p;this.Zb.p=d*this.Rb.y-e*this.Rb.x;this.Ne=this.Qb.x*this.Zb.x+this.Qb.y*this.Zb.y+this.Qb.p*this.Zb.p;this.rb.x=a-g;this.rb.y=b-i;this.rb.p=c-l;this.Ui=1/this.Ne;this.$b.x=this.rb.y*this.Qb.p-this.rb.p*this.Qb.y;this.$b.y=this.rb.p*this.Qb.x-this.rb.x*this.Qb.p;this.$b.p=this.rb.x*this.Qb.y-this.rb.y*
this.Qb.x;if(this.Ne>this.wl){this.result.Mc=this.rb.x*this.Zb.x+this.rb.y*this.Zb.y+this.rb.p*this.Zb.p;if(0>this.result.Mc||this.result.Mc>this.Ne)return k;this.result.Gd=d*this.$b.x+e*this.$b.y+f*this.$b.p;if(0>this.result.Gd||this.result.Mc+this.result.Gd>this.Ne)return k}else if(this.Ne<-this.wl){this.result.Mc=this.rb.x*this.Zb.x+this.rb.y*this.Zb.y+this.rb.p*this.Zb.p;if(0<this.result.Mc||this.result.Mc<this.Ne)return k;this.result.Gd=d*this.$b.x+e*this.$b.y+f*this.$b.p;if(0<this.result.Gd||
this.result.Mc+this.result.Gd<this.Ne)return k}else return k;this.result.M=this.Rb.x*this.$b.x+this.Rb.y*this.$b.y+this.Rb.p*this.$b.p;this.result.Mc*=this.Ui;this.result.Gd*=this.Ui;this.result.M*=this.Ui;return this.result};z("TriangleIntersector",ad);ad.prototype.IntersectTriangle=ad.prototype.Cj;function bd(){this.di=this.ei=this.bi=this.ci=0;this.Pi=1;this.result={$e:0,Ze:0}}
bd.prototype.Wg=function(a,b,c,d,e,f,g,i,l,m,o,r){this.Pi=1;0<=d?(this.result.$e=(g-a)/d,this.result.Ze=(m-a)/d):(this.result.$e=(m-a)/d,this.result.Ze=(g-a)/d);0<=e?(this.ci=(i-b)/e,this.bi=(o-b)/e):(this.ci=(o-b)/e,this.bi=(i-b)/e);if(this.result.$e>this.bi||this.ci>this.result.Ze)this.Pi=-1;this.ci>this.result.$e&&(this.result.$e=this.ci);this.bi<this.result.Ze&&(this.result.Ze=this.bi);0<=f?(this.ei=(l-c)/f,this.di=(r-c)/f):(this.ei=(r-c)/f,this.di=(l-c)/f);if(this.result.$e>this.di||this.ei>
this.result.Ze)this.Pi=-1;this.ei>this.result.$e&&(this.result.$e=this.ei);this.di<this.result.Ze&&(this.result.Ze=this.di);return 0<this.Pi?this.result:k};z("AABB",bd);bd.prototype.HitBox=bd.prototype.Wg;function cd(a,b,c,d){a=a||0;b=b||0;c=c||0;d=d||0;this.a=[a,b,c,d];this.vc=new Float32Array([a,b,c,d])}cd.prototype.m=function(a,b,c,d){this.a[0]=a;this.a[1]=b;this.a[2]=c;this.a[3]=d};cd.prototype.Ba=function(){this.vc[0]=this.a[0];this.vc[1]=this.a[1];this.vc[2]=this.a[2];this.vc[3]=this.a[3];return this.vc};cd.prototype.Tg=ga("a");cd.prototype.hg=function(){return"["+this.a[0]+","+this.a[1]+","+this.a[2]+","+this.a[3]+"]"};z("vec4",cd);cd.prototype.Get=cd.prototype.Tg;cd.prototype.Set=cd.prototype.m;function dd(a){a=""+a;if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}ea(Error("Invalid JSON string: "+a))};function P(a){this.c=a;this.b=a.b;this.D=this.l=this.Sb=this.fa=k;this.mode="";this.kb=0;this.qe=this.S=k;this.Ha=n;this.em=this.re=this.X=k;this.lm=new cd;this.lm.m(1,1,1,1);this.mm=new cd;this.mm.m(1,1,1,1);this.Cc=new cd;this.Cc.m(1,1,1,1);this.mc=new cd;this.mc.m(1,0,0,1);this.um=new ad;this.Ja=this.ya=this.aa=k;this.zi=new bd;this.na=k;this.Nh=this.T=0;this.u={};this.he=Array(3);this.ge=Array(3);this.we=new O;this.Xi=n;this.zb=-1}u=P.prototype;u.mf=function(a,b,c,d){this.Cc.m(a,b,c,d)};
function ed(a,b){0==b.length%3&&(a.D=new Float32Array(b),a.mode="p",a.T=3)}function fd(a,b){0==b.length%8&&(a.D=new Float32Array(b),a.mode="pnt",a.T=8)}function gd(a,b){0==b.length%7&&(a.D=new Float32Array(b),a.mode="pc",a.T=7)}function hd(a,b){0==b.length%10&&(a.D=new Float32Array(b),a.mode="pnc",a.T=10)}function id(a,b){0==b.length%5&&(a.D=new Float32Array(b),a.mode="pt",a.T=5)}function jd(a,b){0==b.length%12&&(a.D=new Float32Array(b),a.mode="pnct",a.T=12)}
function kd(a,b){0==b.length%5&&(a.D=new Float32Array(b),a.mode="poi",a.T=5)}function ld(a,b,c){a.S=new Uint16Array(b);a.qe=c;a.kb=b.length;a.Ha=j;switch(c){case "TRIANGLES":a.Nh=b.length/3;break;case "TRIANGLESTRIP":a.Nh=b.length-2}}u.Tc=fa("l");
u.Le=function(){this.fa=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,this.fa);this.b.bufferData(this.b.ARRAY_BUFFER,this.D,this.b.STATIC_DRAW);this.Sb=this.b.createBuffer();this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.Sb);this.b.bufferData(this.b.ELEMENT_ARRAY_BUFFER,this.S,this.b.STATIC_DRAW)};
u.s=function(){this.fa&&(this.b.deleteBuffer(this.fa),this.fa=k);this.Sb&&(this.b.deleteBuffer(this.Sb),this.Sb=k);this.Xi?this.l.s():this.l=k;this.D=k;this.mode="";this.kb=0;this.qe=this.S=k};
u.ta=function(a,b,c,d,e){if(this.Ha){b=b||0;c=c||0;this.fa==k&&this.Le();this.b.bindBuffer(this.b.ARRAY_BUFFER,this.fa);this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.Sb);this.na&&(this.c.Rc(),this.we.W(this.na,this.c.Ub),this.c.Sc(this.we));switch(this.mode){case "p":this.b.enableVertexAttribArray(0);this.b.vertexAttribPointer(0,3,this.b.FLOAT,n,12,0);md(this.c.$a,this.c.wa,this.mc);break;case "pnt":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.enableVertexAttribArray(2);
this.b.vertexAttribPointer(0,3,this.b.FLOAT,n,32,0);this.b.vertexAttribPointer(1,3,this.b.FLOAT,n,32,12);this.b.vertexAttribPointer(2,2,this.b.FLOAT,n,32,24);var d=this.c.$a,e=this.c.Lh,f=this.c.Nf,g=this.c.zd;d.Yb&&(d.b.useProgram(d.Yb),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Yb,"matModelView"),n,f.Ba()),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Yb,"matProjection"),n,g.Ba()),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Yb,"matNormal"),n,e.Ba()),d.b.uniform1i(d.b.getUniformLocation(d.Yb,
"uTexture"),0));break;case "pc":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,n,28,0);this.b.vertexAttribPointer(1,4,this.b.FLOAT,n,28,12);nd(this.c.$a,this.c.wa,this.Cc);break;case "pnc":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.enableVertexAttribArray(2);this.b.vertexAttribPointer(0,3,this.b.FLOAT,n,40,0);this.b.vertexAttribPointer(1,3,this.b.FLOAT,n,40,12);this.b.vertexAttribPointer(2,4,this.b.FLOAT,
n,40,24);od(this.c.$a,this.c.Lh,this.c.Nf,this.c.wa,this.Cc);break;case "pt":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,n,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,n,20,12);d=this.c.$a;e=this.c.wa;f=this.Cc;d.Hc&&(d.b.useProgram(d.Hc),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Hc,"matMVP"),n,e.Ba()),d.b.uniform1i(d.b.getUniformLocation(d.Hc,"uTexture"),0),d.b.uniform4fv(d.b.getUniformLocation(d.Hc,"uColor"),f.Ba()));break;
case "pnct":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.enableVertexAttribArray(2);this.b.enableVertexAttribArray(3);this.b.vertexAttribPointer(0,3,this.b.FLOAT,n,48,0);this.b.vertexAttribPointer(1,3,this.b.FLOAT,n,48,12);this.b.vertexAttribPointer(2,4,this.b.FLOAT,n,48,24);this.b.vertexAttribPointer(3,2,this.b.FLOAT,n,48,40);d=this.c.$a;e=this.c.wa;d.Gc&&(d.b.useProgram(d.Gc),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Gc,"matMVP"),n,e.Ba()));break;case "font":this.b.enableVertexAttribArray(0);
this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,n,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,n,20,12);d==k&&(d=this.lm);e=this.c.$a;f=this.c.wa;e.Zc&&(e.b.useProgram(e.Zc),e.b.uniformMatrix4fv(e.b.getUniformLocation(e.Zc,"matMVP"),n,f.Ba()),e.b.uniform4fv(e.b.getUniformLocation(e.Zc,"uColor"),d.Ba()));break;case "poi":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,n,20,0);this.b.vertexAttribPointer(1,
2,this.b.FLOAT,n,20,12);e==k&&(e=this.mm);d=this.c.$a;f=this.c.wa;d.ad&&(d.b.useProgram(d.ad),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.ad,"matMVP"),n,f.Ba()),d.b.uniform4fv(d.b.getUniformLocation(d.ad,"uColor"),e.Ba()));break;case "pt_chroma":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,n,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,n,20,12);d=this.c.$a;e=this.c.wa;f=this.c.Ub;d.Ic&&(d.b.useProgram(d.Ic),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Ic,
"matM"),n,f.Ba()),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Ic,"matMVP"),n,e.Ba()),d.b.uniform1i(d.b.getUniformLocation(d.Ic,"uTexture"),0));break;default:alert("Draw: unknown surface mode!!")}this.l&&(d=this.l,d.ac&&(d.b.activeTexture(d.b.TEXTURE0),d.b.bindTexture(d.b.TEXTURE_2D,d.l)));switch(this.qe){case "TRIANGLES":a?this.b.drawElements(this.b.TRIANGLES,b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLES,this.kb,this.b.UNSIGNED_SHORT,0);break;case "TRIANGLESTRIP":a?this.b.drawElements(this.b.TRIANGLE_STRIP,
b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLE_STRIP,this.kb,this.b.UNSIGNED_SHORT,0);break;case "LINES":this.b.drawElements(this.b.LINES,this.kb,this.b.UNSIGNED_SHORT,0);break;case "POINTS":this.b.drawElements(this.b.POINTS,this.kb,this.b.UNSIGNED_SHORT,0);break;case "TRIANGLEFAN":a?this.b.drawElements(this.b.TRIANGLE_FAN,b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLE_FAN,this.kb,this.b.UNSIGNED_SHORT,0);break;default:alert("unknown indexsemantic")}this.na&&this.c.Kd();
this.l&&(a=this.l,a.ac&&a.b.bindTexture(a.b.TEXTURE_2D,k));this.b.disableVertexAttribArray(0);this.b.disableVertexAttribArray(1);this.b.disableVertexAttribArray(2);this.b.disableVertexAttribArray(3)}};
u.oc=function(a,b,c,d){d||(d=this);c&&(this.pd=c);b&&(this.le=b);a.BoundingBox&&(d.aa=a.BoundingBox[0],d.ya=a.BoundingBox[1]);a.Offset&&(d.Ja=a.Offset);a.CurtainIndex&&(d.ap=a.CurtainIndex);switch(a.VertexSemantic){case "p":d.Ph=a.Vertices.length/3;ed(d,a.Vertices);d.mode="p";ld(d,a.Indices,a.IndexSemantic);d.kb=a.Indices.length;break;case "pnt":d.Ph=a.Vertices.length/8;fd(d,a.Vertices);d.mode="pnt";ld(d,a.Indices,a.IndexSemantic);d.kb=a.Indices.length;break;case "pc":d.Ph=a.Vertices.length/7;d.mode=
"pc";gd(d,a.Vertices);ld(d,a.Indices,a.IndexSemantic);d.kb=a.Indices.length;break;case "pnc":d.Ph=a.Vertices.length/10;d.mode="pnc";hd(d,a.Vertices);ld(d,a.Indices,a.IndexSemantic);d.kb=a.Indices.length;break;case "pt":d.Ph=a.Vertices.length/5;d.mode="pt";id(d,a.Vertices);ld(d,a.Indices,a.IndexSemantic);d.kb=a.Indices.length;break;case "pnct":d.Ph=a.Vertices.length/12;d.mode="p";jd(d,a.Vertices);ld(d,a.Indices,a.IndexSemantic);d.kb=a.Indices.length;break;default:alert("CreateFromJSONObject: unknown surface mode!!")}a.DiffuseMap&&
(d.l=new Q(d.c),d.l.repeat=j,S(d.l,a.DiffuseMap,function(){var a=d;a.ac=j;a.le&&a.le(a)},function(){var a=d;Ec(I("owg.Mesh"),"Downloading Error: Texture not found...");a.pd&&a.pd(a)},j),d.Xi=j);a.Center&&d.fh(a.Center[0],a.Center[1],a.Center[2]);d.Xi||(d.ac=j);d.em&&d.em();d.le&&!d.Xi&&d.le(d)};
function pd(a,b,c,d){b==k?alert("invalid json-url"):(a.re=b,a.X=new window.XMLHttpRequest,a.X.open("GET",a.re,j),a.le=c,a.pd=d,a.X.onreadystatechange=function(){if(4==a.X.readyState)if(404==a.X.status)a.pd&&a.pd(a);else{var b=dd(a.X.responseText);a.oc(b,k,k,a)}},a.X.send())}
u.Je=function(a,b,c,d,e,f){var g=n,i,l,m,o;l=i=0;m=1.0E20;for(var r=0;r<this.Nh;r++){var q=r;switch(this.qe){case "TRIANGLES":this.u.Fg=this.D[this.S[3*q]*this.T];this.u.Gg=this.D[this.S[3*q]*this.T+1];this.u.Hg=this.D[this.S[3*q]*this.T+2];this.u.Ig=this.D[this.S[3*q+1]*this.T];this.u.Jg=this.D[this.S[3*q+1]*this.T+1];this.u.Kg=this.D[this.S[3*q+1]*this.T+2];this.u.fi=this.D[this.S[3*q+2]*this.T];this.u.gi=this.D[this.S[3*q+2]*this.T+1];this.u.hi=this.D[this.S[3*q+2]*this.T+2];break;case "TRIANGLESTRIP":0==
q%2?(this.u.Fg=this.D[this.S[q]*this.T],this.u.Gg=this.D[this.S[q]*this.T+1],this.u.Hg=this.D[this.S[q]*this.T+2],this.u.Ig=this.D[this.S[q+1]*this.T],this.u.Jg=this.D[this.S[q+1]*this.T+1],this.u.Kg=this.D[this.S[q+1]*this.T+2]):(this.u.Fg=this.D[this.S[q+1]*this.T],this.u.Gg=this.D[this.S[q+1]*this.T+1],this.u.Hg=this.D[this.S[q+1]*this.T+2],this.u.Ig=this.D[this.S[q]*this.T],this.u.Jg=this.D[this.S[q]*this.T+1],this.u.Kg=this.D[this.S[q]*this.T+2]);this.u.fi=this.D[this.S[q+2]*this.T];this.u.gi=
this.D[this.S[q+2]*this.T+1];this.u.hi=this.D[this.S[q+2]*this.T+2];break;default:Ec(I("owg.Surface"),"This indexsemantic is not supported for function: Surface.ReadTriangleFromBuffer() ")}this.Ja&&(this.u.Fg+=this.Ja[0],this.u.Gg+=this.Ja[1],this.u.Hg+=this.Ja[2],this.u.Ig+=this.Ja[0],this.u.Jg+=this.Ja[1],this.u.Kg+=this.Ja[2],this.u.fi+=this.Ja[0],this.u.gi+=this.Ja[1],this.u.hi+=this.Ja[2]);if(!(this.S[q]==this.S[q+1]||this.S[q]==this.S[q+2]||this.S[q+1]==this.S[q+2])){if(this.na){q=new O;q.da(this.we);
var t=new N;t.m(this.u.Fg,this.u.Gg,this.u.Hg);var v=new N;v.m(this.u.Ig,this.u.Jg,this.u.Kg);var w=new N;w.m(this.u.fi,this.u.gi,this.u.hi);t=q.Qa(t);v=q.Qa(v);q=q.Qa(w);q=this.um.Cj(a,b,c,d,e,f,t.a[0],t.a[1],t.a[2],v.a[0],v.a[1],v.a[2],q.a[0],q.a[1],q.a[2])}else q=this.um.Cj(a,b,c,d,e,f,this.u.Fg,this.u.Gg,this.u.Hg,this.u.Ig,this.u.Jg,this.u.Kg,this.u.fi,this.u.gi,this.u.hi);q&&(g=j,q.M<m&&0<q.M&&(m=q.M,i=q.Mc,l=q.Gd,o=r))}}return g?(a={},a.M=m,a.Mc=i,a.Gd=l,a.xn=o,a):k};
function qd(a){for(var b=1.0E20,c=1.0E20,d=1.0E20,e=-1.0E20,f=-1.0E20,g=-1.0E20,i,l,m,o=0;o<a.D.length;o++)i=a.D[o*a.T],l=a.D[o*a.T+1],m=a.D[o*a.T+2],i>e&&(e=i),l>f&&(f=l),m>g&&(g=m),i<b&&(b=i),l<c&&(c=l),m<d&&(d=m);a.na&&(o=new N(b,c,d),m=new N(e,c,d),i=new N(e,f,d),d=new N(b,f,d),l=new N(b,c,g),c=new N(b,f,g),e=new N(e,f,g),g=new N(b,f,g),b=a.na.Qa(o),f=a.na.Qa(m),i=a.na.Qa(i),d=a.na.Qa(d),l=a.na.Qa(l),c=a.na.Qa(c),m=a.na.Qa(e),o=a.na.Qa(g),e=[b.a[0],f.a[0],i.a[0],d.a[0],l.a[0],c.a[0],m.a[0],o.a[0]],
g=[b.a[1],f.a[1],i.a[1],d.a[1],l.a[1],c.a[1],m.a[1],o.a[1]],i=[b.a[2],f.a[2],i.a[2],d.a[2],l.a[2],c.a[2],m.a[2],o.a[2]],e.sort(),g.sort(),i.sort(),b=e[0],e=e[e.length-1],c=g[0],f=g[g.length-1],d=i[0],g=i[i.length-1]);a.Ja&&(b+=a.Ja[0],c+=a.Ja[1],d+=a.Ja[2],e+=a.Ja[0],f+=a.Ja[1],g+=a.Ja[2]);a.aa===k&&(a.aa=Array(3));a.ya===k&&(a.ya=Array(3));a.aa[0]=b;a.aa[1]=c;a.aa[2]=d;a.ya[0]=e;a.ya[1]=f;a.ya[2]=g}
u.Zl=function(a,b,c,d,e,f){return this.zi.Wg(a,b,c,d,e,f,this.aa[0],this.aa[1],this.aa[2],this.ya[0],this.ya[1],this.ya[2])};u.eh=function(a,b,c,d,e,f){var g=this.c.ba.a,i=new O;this.he[0]=a;this.he[1]=b;this.he[2]=c;this.ge[0]=d||0;this.ge[1]=e||0;this.ge[2]=f||0;i.He([g[0],g[4],g[8],0,g[1],g[5],g[9],0,g[2],g[6],g[10],0,this.he[0],this.he[1],this.he[2],1]);a=new O;a.kd(this.ge[0],this.ge[1],this.ge[2]);b=new O;b.W(i,a);this.na=b};
function rd(a){a.eh(a.he[0],a.he[1],a.he[2],a.ge[0],a.ge[1],a.ge[2])}
u.fh=function(a,b,c,d,e,f){this.gc=a;this.fc=b;this.dc=c;var g=new T(a,b,c),c=Array(3);g.V(c);(new O).kd(c[0],c[1],c[2]);g=new O;g.Sd(a,b);a=Array(16);b=g.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;b=new O;b.He(a);a=new O;a.Zd(K,K,K);c=new O;c.W(b,a);b=new O;g=new O;a=new O;d?b.Nj(e*Math.PI/180):b.Nj(-1.57079633);e&&g.Kl(d*Math.PI/180+1.57079633);f&&a.Ll(f*Math.PI/180);d=new O;
d.W(b,g);e=new O;e.W(d,a);d=new O;d.W(c,e);this.na=d;qd(this)};u.nf=function(a,b,c){var d=new O;d.Zd(a,b,c);a=new O;b=this.na.ff();a.W(b,d);this.na=a};
u.Eb=function(a,b,c){var d=L(a),e=L(b),f=L(c),c=new O,b=Math.cos(d),a=Math.cos(e),g=Math.cos(f),d=Math.sin(d),e=Math.sin(e),f=Math.sin(f);c.a[0]=a*g;c.a[1]=d*e*g+b*f;c.a[2]=-b*e*g+d*f;c.a[3]=0;c.a[4]=-a*f;c.a[5]=-d*e*f+b*g;c.a[6]=b*e*f+d*g;c.a[7]=0;c.a[8]=e;c.a[9]=-d*a;c.a[10]=b*a;c.a[11]=0;c.a[12]=0;c.a[13]=0;c.a[14]=0;c.a[15]=1;b=this.na.ff();a=new O;a.W(b,c);this.na=a};
u.da=function(a){this.Tc(a.l);this.D=a.D;this.mode=a.mode;this.T=a.T;this.S=a.S;this.qe=a.qe;this.kb=a.kb;this.Ha=a.Ha;this.Nh=a.Nh;this.fa=a.fa;this.Sb=a.Sb;this.na=a.na;this.qe=a.qe};
function sd(a,b,c,d){var e=b[0],f=b[1],b=b[2],g=c[0],i=c[1],c=c[2],l={VertexSemantic:"",Vertices:k,IndexSemantic:"",Indices:k,VertexSemantic:"p"};l.Vertices=[-0.5*g+e,-0.5*i+f,-0.5*c+b,-0.5*g+e,-0.5*i+f,0.5*c+b,0.5*g+e,-0.5*i+f,-0.5*c+b,0.5*g+e,-0.5*i+f,0.5*c+b,0.5*g+e,0.5*i+f,-0.5*c+b,0.5*g+e,0.5*i+f,0.5*c+b,-0.5*g+e,0.5*i+f,-0.5*c+b,-0.5*g+e,0.5*i+f,0.5*c+b];l.IndexSemantic="TRIANGLES";l.Indices=[3,1,0,5,3,2,7,5,4,1,7,6,5,7,1,2,0,6,2,3,0,4,5,2,6,7,4,0,1,6,3,5,1,4,2,6];y(d)&&(4==d.length?a.mc.m(d[0],
d[1],d[2],d[3]):3==d.length&&a.mc.m(d[0],d[1],d[2],1));a.oc(l,k,k);qd(a)}function td(a){var b=[],c=a[0],d=a[1],a=a[2],e;e=Math.sqrt((c*c+d*d)/0.578106683090441+a*a/0.5742366172789609);e=1/e;b.push(e*c);b.push(e*d);b.push(e*a);return b}
function ud(a,b,c){var d=Math.sqrt(0.578106683090441),e={VertexSemantic:"",Vertices:k,IndexSemantic:"",Indices:k,VertexSemantic:"p"};e.Vertices=[-0.5*d+0,-0.5*d+0,-0.5*d+0,-0.5*d+0,-0.5*d+0,0.5*d+0,0.5*d+0,-0.5*d+0,-0.5*d+0,0.5*d+0,-0.5*d+0,0.5*d+0,0.5*d+0,0.5*d+0,-0.5*d+0,0.5*d+0,0.5*d+0,0.5*d+0,-0.5*d+0,0.5*d+0,-0.5*d+0,-0.5*d+0,0.5*d+0,0.5*d+0];e.IndexSemantic="TRIANGLES";e.Indices=[3,1,0,5,3,2,7,5,4,1,7,6,5,7,1,2,0,6,2,3,0,4,5,2,6,7,4,0,1,6,3,5,1,4,2,6];y(b)&&(4==b.length?a.mc.m(b[0],b[1],b[2],
b[3]):3==b.length&&a.mc.m(b[0],b[1],b[2],1));b=e.Vertices;for(d=0;d<c;d++){for(var f=[],g=e.Indices,i=0;i<g.length;i+=3){for(var l=g[i],m=g[i+1],o=g[i+2],r=[(b[3*l+0]+b[3*m+0])/2,(b[3*l+1]+b[3*m+1])/2,(b[3*l+2]+b[3*m+2])/2],r=td(r),q=[(b[3*m+0]+b[3*o+0])/2,(b[3*m+1]+b[3*o+1])/2,(b[3*m+2]+b[3*o+2])/2],q=td(q),t=[(b[3*o+0]+b[3*l+0])/2,(b[3*o+1]+b[3*l+1])/2,(b[3*o+2]+b[3*l+2])/2],t=td(t),v=-1,w=-1,B=-1,A=0;A<b.length/3;A+=3){for(var C=j,R=j,ja=j,V=0;3>V;V++)1.0E-7<Math.abs(b[A+V]-r[V])&&(C&=0),1.0E-7<
Math.abs(b[A+V]-q[V])&&(R&=0),1.0E-7<Math.abs(b[A+V]-t[V])&&(ja&=0);C&&(v=A/3);R&&(w=A/3);ja&&(B=A/3)}-1==v&&(v=b.length/3,b.push(r[0]),b.push(r[1]),b.push(r[2]));-1==w&&(w=b.length/3,b.push(q[0]),b.push(q[1]),b.push(q[2]));-1==B&&(B=b.length/3,b.push(t[0]),b.push(t[1]),b.push(t[2]));f.push(l);f.push(v);f.push(B);f.push(m);f.push(w);f.push(v);f.push(o);f.push(B);f.push(w);f.push(v);f.push(w);f.push(B)}e.Indices=f}a.oc(e,k,k);qd(a)}z("Surface",P);P.prototype.Draw=P.prototype.ta;
P.prototype.CopyFrom=P.prototype.da;P.prototype.SetAsBillboard=P.prototype.eh;P.prototype.SetTexture=P.prototype.Tc;P.prototype.TestBoundingBoxIntersection=P.prototype.Zl;P.prototype.TestRayIntersection=P.prototype.Je;var vd="art/";function Q(a,b,c,d,e){this.c=a;this.b=a.b;this.l=k;this.Oi=this.ac=n;this.Ya=k;this.height=this.width=0;this.qm=this.zn=n;b&&wd(this,c||0,d||0,e||n);this.repeat=n}
function wd(a,b,c,d){xd(a);a.Kc=a.b.createFramebuffer();a.b.bindFramebuffer(a.b.FRAMEBUFFER,a.Kc);a.Kc.width=b;a.Kc.height=c;a.l=a.b.createTexture();a.b.bindTexture(a.b.TEXTURE_2D,a.l);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_MAG_FILTER,a.b.LINEAR);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_MIN_FILTER,a.b.LINEAR);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_WRAP_S,a.b.CLAMP_TO_EDGE);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_WRAP_T,a.b.CLAMP_TO_EDGE);a.b.texImage2D(a.b.TEXTURE_2D,0,a.b.RGBA,
a.Kc.width,a.Kc.height,0,a.b.RGBA,a.b.UNSIGNED_BYTE,k);a.$i=a.b.createRenderbuffer();a.b.bindRenderbuffer(a.b.RENDERBUFFER,a.$i);d&&a.b.renderbufferStorage(a.b.RENDERBUFFER,a.b.DEPTH_STENCIL,a.Kc.width,a.Kc.height);a.b.framebufferTexture2D(a.b.FRAMEBUFFER,a.b.COLOR_ATTACHMENT0,a.b.TEXTURE_2D,a.l,0);d&&a.b.framebufferRenderbuffer(a.b.FRAMEBUFFER,a.b.DEPTH_STENCIL_ATTACHMENT,a.b.RENDERBUFFER,a.$i);a.b.bindTexture(a.b.TEXTURE_2D,k);a.b.bindRenderbuffer(a.b.RENDERBUFFER,k);a.b.bindFramebuffer(a.b.FRAMEBUFFER,
k);a.ac=j;a.zn=j;a.width=b;a.height=c}function xd(a){a.Kc!=k&&(a.b.deleteRenderbuffer(a.$i),a.$i=k,a.b.deleteFramebuffer(a.Kc),a.Kc=k,a.b.deleteTexture(a.l),a.l=k,a.Ya&&(a.Ya.s(),a.Ya=k))}
function S(a,b,c,d,e){a.qm=y(e)?e:n;a.l=a.b.createTexture();var f=a.l,g=a.b;a.l.If=new Image;a.l.If.crossOrigin="anonymous";a.l.If.onload=function(){g.bindTexture(g.TEXTURE_2D,f);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,a.qm);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,f.If);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,
g.CLAMP_TO_EDGE);g.bindTexture(g.TEXTURE_2D,k);a.width=f.If.width;a.height=f.If.height;c!=k&&c(a);a.ac=j};a.l.If.onerror=function(){Ec(I("owg.Texture"),"***FAILED DOWNLOADING: "+b);this.Oi=j;d&&d(a)};a.l.If.src=b}u=Q.prototype;
u.U=function(a,b,c,d,e,f,g,i,l,m){c=c||0;d=d||0;e=e||1;f=f||1;g=g||n;i=i||n;l=l||1;if(this.ac){var o=this.width,r=this.height,q=this.width/2,t=this.height/2;this.c.Rc();this.c.Pj();var d=L(d),v=new O;0<d?v.He([Math.cos(d)*e,Math.sin(d)*f,0,0,-Math.sin(d)*e,Math.cos(d)*f,0,0,0,0,1,0,-Math.cos(d)*e*q+Math.sin(d)*e*t+e*q+a,-Math.cos(d)*f*t-Math.sin(d)*f*q+f*t+b,c,1]):(v.kd(a,b,c),a=new O,a.Zd(e,f,1),v.W(v,a));this.c.Sc(v);this.Ya===k&&(this.Ya=new P(this.c),i?kd(this.Ya,[0,0,0,0,0,o,0,0,1,0,o,r,0,1,
1,0,r,0,0,1]):kd(this.Ya,[0,0,0,0,1,o,0,0,1,1,o,r,0,1,0,0,r,0,0,0]),ld(this.Ya,[0,1,2,0,2,3],"TRIANGLES"),this.Ya.Tc(this));g?(this.c.b.enable(this.c.b.BLEND),this.c.b.disable(this.c.b.DEPTH_TEST),this.c.b.depthFunc(this.c.b.LEQUAL),this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA)):this.c.b.disable(this.c.b.BLEND);1>l&&(this.c.b.blendColor(0,0,0,l),this.c.b.blendFunc(this.c.b.CONSTANT_ALPHA,this.c.b.ONE_MINUS_CONSTANT_ALPHA));this.Ya.ta(k,k,k,k,m);g&&(this.c.b.disable(this.c.b.BLEND),
this.c.b.enable(this.c.b.DEPTH_TEST));this.c.Kd()}};u.s=function(){this.c.b.deleteTexture(this.l);this.l=k;this.Oi=this.ac=n;this.Ya&&(this.Ya.s(),this.Ya=k);xd(this)};u.mh=function(){this.zn&&(this.b.bindFramebuffer(this.b.FRAMEBUFFER,this.Kc),this.b.viewport(0,0,this.Kc.width,this.Kc.height))};u.$l=function(){this.b.bindTexture(this.b.TEXTURE_2D,k);this.b.bindFramebuffer(this.b.FRAMEBUFFER,k);this.b.viewport(0,0,this.c.width,this.c.height)};
u.da=function(a){this.l=a.l;this.ac=a.ac;this.Oi=a.Oi;this.height=this.width=this.Ya=a.Ya};z("Texture",Q);Q.prototype.CopyFrom=Q.prototype.da;Q.prototype.Blit=Q.prototype.U;Q.prototype._EnableRenderToTexture=Q.prototype.mh;Q.prototype._DisableRenderToTexture=Q.prototype.$l;function T(a,b,c){this.H=new Float32Array([a,b,c])}T.prototype.m=function(a,b,c){this.H[0]=a;this.H[1]=b;this.H[2]=c};T.prototype.V=function(a){var b=Math.sin(L(this.H[1])),c=Math.cos(L(this.H[1])),d=Math.sin(L(this.H[0])),e=Jc/Math.sqrt(1-Kc*b*b);a[0]=(e+this.H[2])*c*Math.cos(L(this.H[0]));a[1]=(e+this.H[2])*c*d;a[2]=(0.993305620011365*e+this.H[2])*b;a[0]*=K;a[1]*=K;a[2]*=K};
T.prototype.pc=function(a,b,c){for(var d=Math.atan2(b,a),e=Math.atan2(c,Math.sqrt(a*a+b*b)),f=0,g=0,i=0,g=0,a=a*Mc,b=b*Mc,c=c*Mc,l=0;10>l;l++)g=Math.sin(e),g*=g,i=Math.cos(e),g=Jc/Math.sqrt(1-Kc*g),f=Math.sqrt(a*a+b*b)/i-g,e=Math.atan2(c/Math.sqrt(a*a+b*b),1-g*Kc/(g+f));this.H[0]=Nc(d);this.H[1]=Nc(e);this.H[2]=f};T.prototype.hg=function(){return" Longitude: "+this.H[0].toPrecision(17)+" Latitude: "+this.H[1].toPrecision(17)+" Elevation: "+this.H[2].toPrecision(17)};z("GeoCoord",T);
T.prototype.FromCartesian=T.prototype.pc;T.prototype.ToCartesian=T.prototype.V;T.prototype.ToString=T.prototype.hg;function yd(a){this.c=a;this.b=a.b;this.na=this.fa=this.ye=k;this.we=new O;this.Lk=[];this.pj=this.Oh=this.Ja=0}u=yd.prototype;u.si=function(a){this.Oh+=a.length/7;0==this.pj&&(this.pj=70*this.Oh);this.ye=k;this.ye=new Float32Array(a);this.Le()};u.s=function(){this.fa&&(this.b.deleteBuffer(this.fa),this.fa=k);this.fa=this.ye=k};
u.fh=function(a,b,c){var d=new T(a,b,c),c=Array(3);d.V(c);(new O).kd(c[0],c[1],c[2]);d=new O;d.pl(a,b);a=Array(16);b=d.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;b=new O;b.He(a);a=new O;a.Zd(K,K,K);c=new O;c.W(b,a);a=new O;b=new O;b.W(c,a);this.na=b};
u.ta=function(){if(this.ye!=k){this.fa||this.Le();this.na&&(this.c.Rc(),this.we.W(this.na,this.c.Ub),this.c.Sc(this.we));this.b.bindBuffer(this.b.ARRAY_BUFFER,this.fa);this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,n,28,0);this.b.vertexAttribPointer(1,4,this.b.FLOAT,n,28,12);var a=new O;a.dg(this.c.wa);var b=this.c.$a,c=this.c.wa;b.bd&&(b.b.useProgram(b.bd),b.b.uniformMatrix4fv(b.b.getUniformLocation(b.bd,"matMVP"),n,c.Ba()),b.b.uniformMatrix4fv(b.b.getUniformLocation(b.bd,
"matInvMVP"),n,a.Ba()));this.b.drawArrays(this.b.POINTS,0,this.Oh);this.b.disableVertexAttribArray(0);this.b.disableVertexAttribArray(1);this.na&&this.c.Kd()}};
u.Le=function(){this.fa===k?(this.fa=this.b.createBuffer(),this.b.bindBuffer(this.b.ARRAY_BUFFER,this.fa),this.b.bufferData(this.b.ARRAY_BUFFER,this.pj,this.b.STATIC_DRAW),this.b.bufferSubData(this.b.ARRAY_BUFFER,0,this.ye)):(this.b.bindBuffer(this.b.ARRAY_BUFFER,this.fa),this.b.bufferSubData(this.b.ARRAY_BUFFER,this.Ja,this.ye));this.Ja+=4*this.ye.length};function zd(){}var Ad=0;u=zd.prototype;u.key=0;u.Ag=n;u.dm=n;u.Pd=function(a,b,c,d,e,f){oa(a)?this.wm=j:a&&a.handleEvent&&oa(a.handleEvent)?this.wm=n:ea(Error("Invalid listener argument"));this.Kh=a;this.bn=b;this.src=c;this.type=d;this.capture=!!e;this.tk=f;this.dm=n;this.key=++Ad;this.Ag=n};u.handleEvent=function(a){return this.wm?this.Kh.call(this.tk||this.src,a):this.Kh.handleEvent.call(this.Kh,a)};var Bd=!Db||Tb(),Cd=!Db||Tb(),Dd=Db&&!Rb("8");!Fb||Rb("528");Eb&&Rb("1.9b")||Db&&Rb("8")||Cb&&Rb("9.5")||Fb&&Rb("528");Eb&&!Rb("8")||Db&&Rb("9");var Ed="dblclick",Fd="mousedown",Gd="mouseup",Hd="mousemove",Id="keydown",Jd="keyup";function Kd(){}Kd.prototype.om=n;Kd.prototype.Df=function(){this.om||(this.om=j,this.Nd())};Kd.prototype.Nd=function(){this.mo&&Ld.apply(k,this.mo)};function Ld(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];ma(d)?Ld.apply(k,d):d&&"function"==typeof d.Df&&d.Df()}};function Md(a,b){this.type=a;this.currentTarget=this.target=b}Ca(Md,Kd);u=Md.prototype;u.Nd=function(){delete this.type;delete this.target;delete this.currentTarget};u.Tf=n;u.Yh=j;u.stopPropagation=function(){this.Tf=j};u.preventDefault=function(){this.Yh=n};function Nd(a){Nd[" "](a);return a}Nd[" "]=p();function Od(a,b){a&&this.Pd(a,b)}Ca(Od,Md);var Pd=0,Qd=1,Rd=2,Sd=[1,4,2];u=Od.prototype;u.target=k;u.relatedTarget=k;u.offsetX=0;u.offsetY=0;u.clientX=0;u.clientY=0;u.screenX=0;u.screenY=0;u.button=0;u.keyCode=0;u.charCode=0;u.ctrlKey=n;u.altKey=n;u.shiftKey=n;u.metaKey=n;u.pe=k;
u.Pd=function(a,b){var c=this.type=a.type;Md.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(Eb){var e;a:{try{Nd(d.nodeName);e=j;break a}catch(f){}e=n}e||(d=k)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=Fb||a.offsetX!==h?a.offsetX:a.layerX;this.offsetY=Fb||a.offsetY!==h?a.offsetY:a.layerY;this.clientX=a.clientX!==h?a.clientX:a.pageX;this.clientY=a.clientY!==h?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.state=a.state;this.pe=a;delete this.Yh;delete this.Tf};function Td(a,b){return Bd?a.pe.button==b:"click"==a.type?b==Pd:!!(a.pe.button&Sd[b])}
u.stopPropagation=function(){Od.Yf.stopPropagation.call(this);this.pe.stopPropagation?this.pe.stopPropagation():this.pe.cancelBubble=j};u.preventDefault=function(){Od.Yf.preventDefault.call(this);var a=this.pe;if(a.preventDefault)a.preventDefault();else if(a.returnValue=n,Dd)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};u.Nd=function(){Od.Yf.Nd.call(this);this.relatedTarget=this.currentTarget=this.target=this.pe=k};var Ud={},Vd={},Wd={},Xd={};
function U(a,b,c,d,e){if(b){if(la(b)){for(var f=0;f<b.length;f++)U(a,b[f],c,d,e);return k}var d=!!d,g=Vd;b in g||(g[b]={Na:0,cd:0});g=g[b];d in g||(g[d]={Na:0,cd:0},g.Na++);var g=g[d],i=ra(a),l;g.cd++;if(g[i]){l=g[i];for(f=0;f<l.length;f++)if(g=l[f],g.Kh==c&&g.tk==e){if(g.Ag)break;return l[f].key}}else l=g[i]=[],g.Na++;f=Yd();f.src=a;g=new zd;g.Pd(c,f,a,b,d,e);c=g.key;f.key=c;l.push(g);Ud[c]=g;Wd[i]||(Wd[i]=[]);Wd[i].push(g);a.addEventListener?(a==x||!a.km)&&a.addEventListener(b,f,d):a.attachEvent(b in
Xd?Xd[b]:Xd[b]="on"+b,f);return c}ea(Error("Invalid event type"))}function Yd(){var a=Zd,b=Cd?function(c){return a.call(b.src,b.key,c)}:function(c){c=a.call(b.src,b.key,c);if(!c)return c};return b}function $d(a,b,c,d,e){if(la(b))for(var f=0;f<b.length;f++)$d(a,b[f],c,d,e);else{d=!!d;a:{f=Vd;if(b in f&&(f=f[b],d in f&&(f=f[d],a=ra(a),f[a]))){a=f[a];break a}a=k}if(a)for(f=0;f<a.length;f++)if(a[f].Kh==c&&a[f].capture==d&&a[f].tk==e){X(a[f].key);break}}}
function X(a){if(Ud[a]){var b=Ud[a];if(!b.Ag){var c=b.src,d=b.type,e=b.bn,f=b.capture;c.removeEventListener?(c==x||!c.km)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(d in Xd?Xd[d]:Xd[d]="on"+d,e);c=ra(c);e=Vd[d][f][c];if(Wd[c]){var g=Wd[c],i=bc(g,b);0<=i&&ac.splice.call(g,i,1);0==g.length&&delete Wd[c]}b.Ag=j;e.Um=j;ae(d,f,c,e);delete Ud[a]}}}
function ae(a,b,c,d){if(!d.Wi&&d.Um){for(var e=0,f=0;e<d.length;e++)d[e].Ag?d[e].bn.src=k:(e!=f&&(d[f]=d[e]),f++);d.length=f;d.Um=n;0==f&&(delete Vd[a][b][c],Vd[a][b].Na--,0==Vd[a][b].Na&&(delete Vd[a][b],Vd[a].Na--),0==Vd[a].Na&&delete Vd[a])}}function be(a){var b,c=0,d=b==k;b=!!b;if(a==k)Ub(Wd,function(a){for(var e=a.length-1;0<=e;e--){var f=a[e];if(d||b==f.capture)X(f.key),c++}});else if(a=ra(a),Wd[a])for(var a=Wd[a],e=a.length-1;0<=e;e--){var f=a[e];if(d||b==f.capture)X(f.key),c++}}
function ce(a,b,c,d,e){var f=1,b=ra(b);if(a[b]){a.cd--;a=a[b];a.Wi?a.Wi++:a.Wi=1;try{for(var g=a.length,i=0;i<g;i++){var l=a[i];l&&!l.Ag&&(f&=de(l,e)!==n)}}finally{a.Wi--,ae(c,d,b,a)}}return Boolean(f)}function de(a,b){var c=a.handleEvent(b);a.dm&&X(a.key);return c}
function Zd(a,b){if(!Ud[a])return j;var c=Ud[a],d=c.type,e=Vd;if(!(d in e))return j;var e=e[d],f,g;if(!Cd){f=b||ha("window.event");var i=j in e,l=n in e;if(i){if(0>f.keyCode||f.returnValue!=h)return j;a:{var m=n;if(0==f.keyCode)try{f.keyCode=-1;break a}catch(o){m=j}if(m||f.returnValue==h)f.returnValue=j}}m=new Od;m.Pd(f,this);f=j;try{if(i){for(var r=[],q=m.currentTarget;q;q=q.parentNode)r.push(q);g=e[j];g.cd=g.Na;for(var t=r.length-1;!m.Tf&&0<=t&&g.cd;t--)m.currentTarget=r[t],f&=ce(g,r[t],d,j,m);
if(l){g=e[n];g.cd=g.Na;for(t=0;!m.Tf&&t<r.length&&g.cd;t++)m.currentTarget=r[t],f&=ce(g,r[t],d,n,m)}}else f=de(c,m)}finally{r&&(r.length=0),m.Df()}return f}d=new Od(b,this);try{f=de(c,d)}finally{d.Df()}return f};function ee(a,b){this.Cm=b;this.Fh=[];a>this.Cm&&ea(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var c=0;c<a;c++)this.Fh.push(this.Ki())}Ca(ee,Kd);u=ee.prototype;u.gm=k;u.nm=k;function fe(a,b){a.Fh.length<a.Cm?a.Fh.push(b):a.dk(b)}u.Ki=function(){return this.gm?this.gm():{}};u.dk=function(a){if(this.nm)this.nm(a);else if(pa(a))if(oa(a.Df))a.Df();else for(var b in a)delete a[b]};u.Nd=function(){ee.Yf.Nd.call(this);for(var a=this.Fh;a.length;)this.dk(a.pop());delete this.Fh};function ge(){this.Eh=[];this.Fk=new kc;this.tn=this.un=this.vn=this.ln=0;this.Qd=new kc;this.fm=this.sn=0;this.zo=1;this.ek=new ee(0,4E3);this.ek.Ki=function(){return new he};this.mn=new ee(0,50);this.mn.Ki=function(){return new ie};var a=this;this.vk=new ee(0,2E3);this.vk.Ki=function(){return""+a.zo++};this.vk.dk=p()}function ie(){this.Wk=this.time=this.count=0}
ie.prototype.toString=function(){var a=[];a.push(this.type," ",this.count," (",Math.round(10*this.time)/10," ms)");this.Wk&&a.push(" [VarAlloc = ",this.Wk,"]");return a.join("")};function he(){}function je(a,b,c,d){var e=[];-1==c?e.push("    "):e.push(ke(a.pm-c));e.push(" ",le(a.pm-b));0==a.fk?e.push(" Start        "):1==a.fk?(e.push(" Done "),e.push(ke(a.op-a.startTime)," ms ")):e.push(" Comment      ");e.push(d,a);0<a.Po&&e.push("[VarAlloc ",a.Po,"] ");return e.join("")}
he.prototype.toString=function(){return this.type==k?this.io:"["+this.type+"] "+this.io};ge.prototype.reset=function(){for(var a=0;a<this.Eh.length;a++){var b=this.ek.id;b&&fe(this.vk,b);fe(this.ek,this.Eh[a])}this.Eh.length=0;this.Fk.clear();this.ln=Ba();this.fm=this.sn=this.tn=this.un=this.vn=0;b=this.Qd.Ri();for(a=0;a<b.length;a++){var c=this.Qd.get(b[a]);c.count=0;c.time=0;c.Wk=0;fe(this.mn,c)}this.Qd.clear()};
ge.prototype.toString=function(){for(var a=[],b=-1,c=[],d=0;d<this.Eh.length;d++){var e=this.Eh[d];1==e.fk&&c.pop();a.push(" ",je(e,this.ln,b,c.join("")));b=e.pm;a.push("\n");0==e.fk&&c.push("|  ")}if(0!=this.Fk.Ff()){var f=Ba();a.push(" Unstopped timers:\n");jc(this.Fk,function(b){a.push("  ",b," (",f-b.startTime," ms, started at ",le(b.startTime),")\n")})}b=this.Qd.Ri();for(d=0;d<b.length;d++)c=this.Qd.get(b[d]),1<c.count&&a.push(" TOTAL ",c,"\n");a.push("Total tracers created ",this.sn,"\n","Total comments created ",
this.fm,"\n","Overhead start: ",this.vn," ms\n","Overhead end: ",this.un," ms\n","Overhead comment: ",this.tn," ms\n");return a.join("")};function ke(a){var a=Math.round(a),b="";1E3>a&&(b=" ");100>a&&(b="  ");10>a&&(b="   ");return b+a}function le(a){a=Math.round(a);return(""+(100+a/1E3%60)).substring(1,3)+"."+(""+(1E3+a%1E3)).substring(1,4)}new ge;var me=0;function ne(){me++;this.hd=p();this.jd=p();this.gd=p();this.Ce=p();this.Be=p();this.Fe=p();this.fg=p();this.Ge=p();this.c=k}function oe(a){a.Fe(a.c.L);a.Ce()}ne.prototype.Qc=function(){this.fg();this.Be()};function pe(){}Ca(pe,Kd);u=pe.prototype;u.km=j;u.Gk=k;u.addEventListener=function(a,b,c,d){U(this,a,b,c,d)};u.removeEventListener=function(a,b,c,d){$d(this,a,b,c,d)};
u.dispatchEvent=function(a){var b=a.type||a,c=Vd;if(b in c){if(na(a))a=new Md(a,this);else if(a instanceof Md)a.target=a.target||this;else{var d=a,a=new Md(b,this);Xb(a,d)}var d=1,e,c=c[b],b=j in c,f;if(b){e=[];for(f=this;f;f=f.Gk)e.push(f);f=c[j];f.cd=f.Na;for(var g=e.length-1;!a.Tf&&0<=g&&f.cd;g--)a.currentTarget=e[g],d&=ce(f,e[g],a.type,j,a)&&a.Yh!=n}if(n in c)if(f=c[n],f.cd=f.Na,b)for(g=0;!a.Tf&&g<e.length&&f.cd;g++)a.currentTarget=e[g],d&=ce(f,e[g],a.type,n,a)&&a.Yh!=n;else for(e=this;!a.Tf&&
e&&f.cd;e=e.Gk)a.currentTarget=e,d&=ce(f,e,a.type,n,a)&&a.Yh!=n;a=Boolean(d)}else a=j;return a};u.Nd=function(){pe.Yf.Nd.call(this);be(this);this.Gk=k};function qe(){this.Qh=this.cj=this.mj=this.kj=this.lj=this.jj=this.hj=this.ij=this.gj=this.ej=this.fj=this.dj=this.Dg=this.Eg=this.$f=this.Cg=this.Ji=this.Hi=k;this.Ck=this.Bk=0;this.xc=n;this.elevation=this.latitude=this.longitude=this.Va=0;this.Yc=-1;this.ib=this.pb=0;this.ca=re;this.Gf=0;this.Wc=48;this.Lc=this.bj=this.Hd=this.Lb=this.Mg=this.Db=this.Vb=this.jb=0;this.am=n;this.im=this.hm=0;this.Cc=new cd(0.7,0.9,1,1);this.kn=j;this.gd=p();this.rc=function(a){for(;360<a;)a-=360;for(;0>a;)a+=360;
return a};this.hd=function(){if(0==this.Yc)this.xc&&(this.Ji.U(this.Bk-64,this.Ck-64,0,this.Va,1,1,j,n),this.Hi.U(this.Bk-64,this.Ck-64,0,0,1,1,j,n)),this.c.ze("Current position: ("+this.longitude.toFixed(6)+", "+this.latitude.toFixed(6)+","+this.elevation.toFixed(2)+")",0,0,0.5);else if(1==this.Yc){this.am&&this.cj.U(this.hm-16,this.im-16,0,0,1,1,j,n,0.75);var a=this.c.width-1-64-this.Gf,b=this.c.height-1-this.Wc,c=this.rc(this.Mg+this.bj);this.ca==se?this.Dg.U(a-64,b-64,0,c,1,1,j,n,1,this.Cc):this.ca==
te?this.Dg.U(a-64,b-64,0,c,1,1,j,n,1,this.Cc):this.Dg.U(a-64,b-64,0,c,1,1,j,n);this.ca==ue?(this.Eg.U(a-32,b-32,0,0,1,1,j,n),this.$f.U(a-32,b-32,0,this.Db,1,1,j,n,0.5)):this.ca==ve?(this.Eg.U(a-32,b-32,0,0,1,1,j,n),this.$f.U(a-32,b-32,0,this.Db,1,1,j,n,0.5)):this.Eg.U(a-32,b-32,0,0,1,1,j,n);b=this.c.height-1-82-this.Wc;this.ca==we?(this.Cg.U(a-32,b-32,0,0,1,1,j),this.$f.U(a-32,b-32,0,this.jb,1,1,j,n,0.5)):this.ca==xe?(this.Cg.U(a-32,b-32,0,0,1,1,j),this.$f.U(a-32,b-32,0,this.jb,1,1,j,n,0.5)):this.Cg.U(a-
32,b-32,0,0,1,1,j,n);b=this.c.height-1-82-128-this.Wc;this.mj.U(a-8,b-64,0,0,1,1,j,n);b=this.c.height-1-82-64-this.Wc;this.ca==ye?this.ij.U(a-16,b-16,0,0,1,1,j,n):this.ca==ze?this.hj.U(a-16,b-16,0,0,1,1,j,n):this.gj.U(a-16,b-16,0,0,1,1,j,n);b=this.c.height-1-82-128-64-this.Wc;this.ca==Ae?this.fj.U(a-16,b-16,0,0,1,1,j,n):this.ca==Be?this.ej.U(a-16,b-16,0,0,1,1,j,n):this.dj.U(a-16,b-16,0,0,1,1,j,n);b=this.c.height-1-82-128-this.Lc-this.Wc;this.ca==Ce?this.lj.U(a-16,b-16,0,0,1,1,j,n):this.ca==De?this.kj.U(a-
16,b-16,0,0,1,1,j,n):this.jj.U(a-16,b-16,0,0,1,1,j,n);this.Qh&&this.kn&&(a=this.c.width-1-170-this.Gf,b=this.Wc-25,this.Qh.U(a-16,b-16,0,0,1,1,j,n))}};this.jd=function(a){this.Yc=a.Yc;this.Va=57.29577951308232*a.Ii;this.longitude=a.Od.longitude;this.latitude=a.Od.latitude;this.elevation=a.Od.elevation;this.am=a.rd;this.hm=a.Za[0];this.im=this.c.height-a.Za[1]-1;this.ca!=se&&(this.bj=this.Va,this.Mg=0);this.ca==ze?(a.za=Vc,a.sa=1):this.ca==Be?(a.za=Wc,a.sa=1):this.ca==De?0<this.Lc?(a.za=Wc,a.sa=Math.sqrt(this.Lc)/
4):0>this.Lc&&(a.sa=Math.sqrt(-this.Lc)/4,a.za=Vc):this.ca==xe?(a.za=Xc,a.sa=this.Vb):this.ca==se?(a.za=Yc,a.sa=this.bj+this.Mg,a.sa=this.rc(a.sa),a.sa*=Math.PI/180):this.ca==ue?(a.za=Zc,a.sa=Math.PI*this.Db/180):a.za=Uc;a.Dk=this.ca==re?0:1};this.Ce=function(){this.Hi=new Q(this.c);S(this.Hi,vd+"flightnavigation/cmpbg.png");this.Ji=new Q(this.c);S(this.Ji,vd+"flightnavigation/cmpr.png");this.Cg=new Q(this.c);S(this.Cg,vd+"globenavigation/MoveWheel.png");this.Eg=new Q(this.c);S(this.Eg,vd+"globenavigation/YawPitchWheel.png");
this.Dg=new Q(this.c);S(this.Dg,vd+"globenavigation/yaw_pitch_adjust.png");this.$f=new Q(this.c);S(this.$f,vd+"globenavigation/movewheel_marker.png",k,k,j);this.dj=new Q(this.c);S(this.dj,vd+"globenavigation/minus.png");this.fj=new Q(this.c);S(this.fj,vd+"globenavigation/minus_over.png");this.ej=new Q(this.c);S(this.ej,vd+"globenavigation/minus_clicked.png");this.gj=new Q(this.c);S(this.gj,vd+"globenavigation/plus.png");this.ij=new Q(this.c);S(this.ij,vd+"globenavigation/plus_over.png");this.hj=new Q(this.c);
S(this.hj,vd+"globenavigation/plus_clicked.png");this.jj=new Q(this.c);S(this.jj,vd+"globenavigation/slider.png");this.lj=new Q(this.c);S(this.lj,vd+"globenavigation/slider_over.png");this.kj=new Q(this.c);S(this.kj,vd+"globenavigation/slider_clicked.png");this.mj=new Q(this.c);S(this.mj,vd+"globenavigation/slider_rail.png");this.cj=new Q(this.c);S(this.cj,vd+"globenavigation/crosshair.png");this.Qh=new Q(this.c);S(this.Qh,vd+"owg.png")};this.Be=function(){this.Hi.s();this.Ji.s();this.Cg.s();this.Eg.s();
this.Dg.s();this.$f.s();this.dj.s();this.fj.s();this.ej.s();this.gj.s();this.ij.s();this.hj.s();this.jj.s();this.lj.s();this.kj.s();this.mj.s();this.cj.s();this.Qh.s()};this.fg=function(){X(this.zc);X(this.Bc);X(this.Ac);X(this.ud)};this.Fe=function(a){this.zc=U(a,Fd,this.Ud,n,this);this.Bc=U(a,Gd,this.Wd,n,this);this.Ac=U(a,Hd,this.Vd,n,this);this.ud=U(a,Ed,this.Zg,n,this)};this.Ud=function(a){if(Td(a,Pd)){var b=a.offsetX-this.c.L.offsetLeft,a=a.offsetY-this.c.L.offsetTop;this.Bk=b;this.Ck=this.c.height-
a-1;this.pb=b;this.ib=this.c.height-a-1;this.xc=j;1==this.Yc&&this.Bj(0)}};this.Wd=function(a){if(Td(a,Pd)){var b=a.offsetY-this.c.L.offsetTop;this.pb=a.offsetX-this.c.L.offsetLeft;this.ib=this.c.height-b-1;this.xc=n;1==this.Yc&&this.Bj(0);this.Lc=0}};this.Vd=function(a){if(this.c&&this.c.L){var b=a.offsetY-this.c.L.offsetTop,c=this.c.height-b-1-this.ib;this.pb=a.offsetX-this.c.L.offsetLeft;this.ib=this.c.height-b-1;1==this.Yc&&this.Bj(c)}};this.Zg=function(){this.ca==te&&Ee(this.c.ua,this.longitude,
this.latitude,this.elevation,0,-90,0)};this.Bj=function(a){var b=this.c.width-1-64-this.Gf-8,c=this.c.height-1-82-64-this.Wc+8,d=this.c.width-1-64-this.Gf-8,e=this.c.height-1-82-128-64-this.Wc+8,f=this.c.width-1-64-this.Gf-8,g=this.c.height-1-82-128-this.Lc-this.Wc+8,i=this.c.width-1-64-this.Gf,l=this.c.height-1-82-this.Wc,m=Math.abs(this.pb-i),o=Math.abs(this.ib-l),r=this.c.width-1-64-this.Gf,q=this.c.height-1-this.Wc,t=Math.abs(this.pb-r),t=t*t,v=Math.abs(this.ib-q),v=v*v;this.xc&&this.ca==De?(this.Lc-=
a,-40>this.Lc?this.Lc=-40:40<this.Lc&&(this.Lc=40)):this.xc&&this.ca==xe?(a=this.pb-i,l=this.ib-l,this.Vb=this.jb=180*Math.atan2(Math.abs(l),a)/Math.PI,0>l?this.jb=360-this.jb:this.Vb=360-this.Vb,this.jb+=90,this.Vb+=90,this.jb=this.rc(this.jb),this.Vb=this.rc(this.Vb)):this.xc&&this.ca==se?(a=this.pb-r,l=this.ib-q,this.Lb=180*Math.atan2(Math.abs(l),a)/Math.PI,0>l&&(this.Lb=360-this.Lb),this.Lb-=90,this.Lb=this.rc(this.Lb),this.Mg=this.rc(this.Lb-this.Hd)):this.xc&&this.ca==ue?(a=this.pb-r,l=this.ib-
q,this.Db=180*Math.atan2(Math.abs(l),a)/Math.PI,0>l&&(this.Db=360-this.Db),this.Db+=90,this.Db=this.rc(this.Db)):(this.ca=0,this.pb>b&&this.ib>c-16&&this.pb<b+16&&this.ib<c&&(this.ca=this.xc?ze:ye),this.pb>d&&this.ib>e-16&&this.pb<d+16&&this.ib<e&&(this.ca=this.xc?Be:Ae),this.pb>f&&this.ib>g-16&&this.pb<f+16&&this.ib<g&&(this.ca=this.xc?De:Ce),729>=m*m+o*o?this.xc?this.ca=xe:(this.ca=we,a=this.pb-i,l=this.ib-l,this.Vb=this.jb=180*Math.atan2(Math.abs(l),a)/Math.PI,0>l?this.jb=360-this.jb:this.Vb=360-
this.Vb,this.jb+=90,this.Vb+=90,this.jb=this.rc(this.jb),this.Vb=this.rc(this.Vb)):this.jb=0,625>=t+v?(this.ca=this.xc?ue:ve,a=this.pb-r,l=this.ib-q,this.Db=180*Math.atan2(Math.abs(l),a)/Math.PI,0>l&&(this.Db=360-this.Db),this.Db+=90,this.Db=this.rc(this.Db)):1600>=t+v&&(this.xc?(this.ca=se,a=this.pb-r,l=this.ib-q,this.Lb=180*Math.atan2(Math.abs(l),a)/Math.PI,0>l&&(this.Lb=360-this.Lb),this.Lb-=90,this.Lb=this.rc(this.Lb),this.Mg=this.rc(this.Lb-this.Hd),this.bj=this.Va):(this.ca=te,a=this.pb-r,l=
this.ib-q,this.Hd=180*Math.atan2(Math.abs(l),a)/Math.PI,0>l&&(this.Hd=360-this.Hd),this.Hd-=90,this.Hd-=this.Mg,this.Hd=this.rc(this.Hd))),this.yl=fa("kn"))}}var re=0,ye=1,ze=2,Ae=3,Be=4,Ce=5,De=6,we=7,xe=8,te=9,se=10,ve=11,ue=12;qe.prototype=new ne;function Fe(){this.name="ogAoeImage";this.type=ab;this.Ga=-1;this.P=n;this.options=k;this.Kf=-1;this.Mf=-180;this.Jf=-90;this.sg=180;this.rg=90;this.ac=n;this.l=k;this.tg=[];this.og=[]}Fe.prototype=new G;u=Fe.prototype;u.Ra=function(a){this.options=a;this.Mf=a.longitude0;this.Jf=a.latitude0;this.sg=a.longitude1;this.rg=a.latitude1;this.vo=a.url;a=this.parent.parent.c;new Q(a,j,256,256);this.l=new Q(a);this.l.parent=this;S(this.l,this.vo,Ge,He,j);this.Ga=Ie(this).rj(this)};u.ob=function(){Ie(this).Ij(this.Ga)};
function Ie(a){var b=k,a=a.parent.parent.c;a.e&&a.e.v&&(b=a.e.v.Tj);return b}u.qa=p();u.ra=p();
u.tb=function(){var a=this.parent.parent.c;if(this.ac!=n){var b=a.e.v.Fa.N.length,c,d,e,f,g=k;this.og=k;this.og=[];for(var i=0;i<b;i++)if(g=a.e.v.Fa.N[i],!(1>g.j.length)&&!g.dp&&(c=g.Mf,d=g.Jf,e=g.sg,f=g.rg,!(this.Mf>e|this.sg<c|this.Jf>f|this.rg<d)&&(this.og[g.j]=this.tg[g.j],!this.tg[g.j]))){var l=new P(g.c);l.da(g.B);var m=g.l,o=new Q(g.c,j,256,256),r=o;a.lf.push(r);r.mh();m.U(0,0,0,0,1,1,j,j,1);this.l.U(256*(this.Mf-c)/(e-c),256*(this.Jf-d)/(f-d),0,0,(this.sg-this.Mf)/this.l.width/((e-c)/256),
(this.rg-this.Jf)/this.l.height/((f-d)/256),j,j,1);Je(a);l.Tc(o);l.Ro=g.F[0];l.So=g.F[1];l.To=g.F[2];this.tg[g.j]=l;this.og[g.j]=l}}for(var q in this.og)a=this.og[q],b=new O,b.da(a.c.Ub),b.a[12]+=a.Ro,b.a[13]+=a.So,b.a[14]+=a.To,a.c.Rc(),a.c.Sc(b),a.ta(),a.c.Kd()};function Ge(a){a.parent.ac=j;a.K&&a.K(a.j,a,a.k);a.K=k;a.J=k;a.j=k;a.caller=k;a.k=k}function He(a){a.J&&a.J(a.j,a.caller,a.k);a.K=k;a.J=k;a.j=k;a.caller=k;a.k=k};function Ke(a){this.c=a;this.uh=[]}Ke.prototype.tb=function(){for(var a=0;a<this.uh.length;a++)this.uh[a].tb()};Ke.prototype.rj=function(a){this.uh.push(a);return this.uh.length-1};Ke.prototype.Ij=function(a){this.uh.splice(a,1)};function Le(a){this.c=a;this.Ua=[];this.Qe=new Me}Le.prototype.tb=function(a,b){var c=a.a[0],d=a.a[1],e=a.a[2],f=0,g=0,i=0;this.Qe.xi(b);for(var l=0;l<this.Ua.length;l++){var m=this.Ua[l];m.P||(this.Qe.wi(m.Ve,m.We,m.Xe,m.Ve+0.0010,m.We+0.0010,m.Xe+0.0010),f=m.Ve-c,g=m.We-d,i=m.Xe-e,f=f*f+g*g+i*i,g=m.$k*m.$k,m.Zk*m.Zk>f&&g<f&&m.ta())}};Le.prototype.bh=function(a,b){for(var c=0;c<this.Ua.length;c++)if(this.Ua[c].$g(a,b))return this.Ua[c];return k};function Ne(a){this.c=a;this.Xa=[]}Ne.prototype.tb=function(){for(var a=0;a<this.Xa.length;a++){var b=this.Xa[a];b.P||b.ta()}};Ne.prototype.sj=function(a){this.Xa.push(a)};Ne.prototype.Jj=function(a){for(var b=0;b<this.Xa.length;b++)if(this.Xa[b]==a){this.Xa.splice(b,1);break}};Ne.prototype.ah=function(a,b){for(var c=0;c<this.Xa.length;c++){var d=this.Xa[c].$g(a,b);if(d)return d}return k};function Oe(){}u=Oe.prototype;u.dh=function(a,b){this.Hj(a,b);b[0]=2*b[0]-1;b[1]=2*b[1]-1;b[2]=2*b[2]-1;b[3]=2*b[3]-1};u.Hj=function(a,b){for(var c=a.length,d=0,e=0,f=1,g=0;g<c;g++)switch(f/=2,a[g]){case "0":e+=f;break;case "1":d+=f,e+=f;case "2":break;case "3":d+=f;break;default:alert("Wrong quadKey: "+a)}b[0]=d;b[1]=e+f;b[2]=d+f;b[3]=e};
u.qc=function(a,b){b.x=0;b.y=0;b.zb=a.length;for(var c,d=b.zb;0<d;d--)switch(c=1<<d-1,a[b.zb-d]){case "1":b.x|=c;break;case "2":b.y|=c;break;case "3":b.x|=c,b.y|=c}};u.Il=function(a,b){var c={x:k,y:k,zb:k};this.qc(a,c);var d=4.007501668E7/Math.pow(2,c.zb);b[0]=-2.003750834E7+d*c.x;b[1]=2.003750834E7-d*(c.y+1);b[2]=-2.003750834E7+d*(c.x+1);b[3]=2.003750834E7-d*c.y};
u.Jl=function(a,b){var c=a.length,d=[],e=256*Math.pow(2,c);this.Hj(a,d);var f=256*d[0]*Math.pow(2,c),g=256*(1-d[1])*Math.pow(2,c),c=Math.min(Math.max(f,0),e-1)/e-0.5,i=0.5-Math.min(Math.max(g,0),e-1)/e,d=90-360*Math.atan(Math.exp(2*-i*Math.PI))/Math.PI,l=360*c,c=Math.min(Math.max(f,0),e-1)/e-0.5,i=0.5-Math.min(Math.max(g,0),e-1)/e,e=90-360*Math.atan(Math.exp(2*-i*Math.PI))/Math.PI;b[0]=d;b[1]=l;b[2]=e;b[3]=360*c};z("MercatorQuadtree",Oe);Oe.prototype.QuadKeyToMercatorCoord=Oe.prototype.dh;
Oe.prototype.QuadKeyToNormalizedCoord=Oe.prototype.Hj;Oe.prototype.QuadKeyToTileCoord=Oe.prototype.qc;Oe.prototype.QuadKeyToMercator=Oe.prototype.Il;Oe.prototype.QuadKeyToWGS84=Oe.prototype.Jl;var Pe={Gj:function(a){for(var b="",c=0;c<a.length;c++)0==c%2&&0<c&&c<a.length-4&&(b=b.concat("/")),b=b.concat(a[c]);return b}};z("GlobeUtils",Pe);z("GlobeUtils.MakeHierarchicalFilename",Pe.Gj);function Qe(){this.Ha=s(n);this.Oc=s(n);this.Mb=p();this.cc=s(0);this.bf=this.cf=-1;this.Nc=s(n)};function Re(){this.k=this.qb=k;this.la=new Oe;this.Ea=0;this.Ha=s(j);this.Oc=s(n);this.Mb=function(a,b,c,d,e,f){var g={};this.la.qc(b,g);g=this.qb[this.Ea]+"/"+g.zb+"/"+g.x+"/"+g.y+".png";a=new Q(a);a.j=b;a.k=c;a.K=d;a.J=e;a.caller=f;S(a,g,Se,Te,j);this.Ea++;this.Ea>=this.qb.length&&(this.Ea=0)};this.cc=s(18);this.Nc=function(a){return 19>a.length?j:n};this.Wa=fa("qb")}Re.prototype=new Qe;function Se(a){a.K(a.j,a,a.k);a.K=k;a.J=k;a.j=k;a.caller=k;a.k=k}
function Te(a){a.J(a.j,a.caller,a.k);a.K=k;a.J=k;a.j=k;a.caller=k;a.k=k};function Ue(){this.version=this.style=this.wd=this.k=this.Jb=k;this.cb=1;this.ea=k;this.la=new Oe;this.Ha=s(j);this.Oc=s(n);this.Mb=function(a,b,c,d,e,f){var g={};this.la.qc(b,g);g=this.Jb+"?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER="+this.k+"&STYLE=default&TILEMATRIXSET=EPSG:900913&TILEMATRIX=EPSG%3A900913:"+g.zb+"&TILEROW="+g.y+"&TILECOL="+g.x+"&FORMAT=image%2Fpng";a=new Q(a);a.j=b;a.k=c;a.K=d;a.J=e;a.caller=f;a.cb=this.cb;S(a,g,Ve,We,j)};this.cc=s(19);this.Nc=s(j);this.Wa=function(a,b,c,
d,e,f,g){this.Jb=a;this.k=b;this.wd=d;this.style=e;this.version=f;this.cb=g;this.ea=c;this.wd==k&&(this.wd="image/png");this.style==k&&(this.style="");this.version==k&&(this.version="1.0.0");this.ea==k&&(this.ea="EPSG%3A900913");"EPSG:900913"==this.ea&&(this.ea="EPSG%3A900913");"ESRI:102100"==this.ea&&(this.ea="ESRI%3A102100");"ESRI:102113"==this.ea&&(this.ea="ESRI%3A102113");"EPSG:3785"==this.ea&&(this.ea="EPSG%3A3785");"EPSG:3857"==this.ea&&(this.ea="EPSG%3A3857");"EPSG:4326"==this.ea&&(this.ea=
"EPSG%3A4326")}}Ue.prototype=new Qe;function Ve(a){a.K(a.j,a,a.k);a.K=k;a.J=k;a.j=k;a.caller=k;a.k=k}function We(a){a.J(a.j,a.caller,a.k);a.K=k;a.J=k;a.j=k;a.caller=k;a.k=k};function Xe(){this.p=this.y=this.x=0}function Me(){this.O=Array(6);this.O[0]=new Ye;this.O[1]=new Ye;this.O[2]=new Ye;this.O[3]=new Ye;this.O[4]=new Ye;this.O[5]=new Ye;this.Z=Array(8);this.Z[0]=new Xe;this.Z[1]=new Xe;this.Z[2]=new Xe;this.Z[3]=new Xe;this.Z[4]=new Xe;this.Z[5]=new Xe;this.Z[6]=new Xe;this.Z[7]=new Xe}function Ye(){this.Cd=this.Bd=this.Ad=this.Td=0}
Ye.prototype.Pc=function(){var a=Math.sqrt(this.Ad*this.Ad+this.Bd*this.Bd+this.Cd*this.Cd);this.Ad/=a;this.Bd/=a;this.Cd/=a;this.Td/=a};
Me.prototype.wi=function(a,b,c,d,e,f){this.Z[0].x=a;this.Z[0].y=b;this.Z[0].p=c;this.Z[1].x=d;this.Z[1].y=b;this.Z[1].p=c;this.Z[2].x=d;this.Z[2].y=e;this.Z[2].p=c;this.Z[3].x=a;this.Z[3].y=e;this.Z[3].p=c;this.Z[4].x=a;this.Z[4].y=b;this.Z[4].p=f;this.Z[5].x=a;this.Z[5].y=e;this.Z[5].p=f;this.Z[6].x=d;this.Z[6].y=e;this.Z[6].p=f;this.Z[7].x=d;this.Z[7].y=b;this.Z[7].p=f;for(a=0;6>a;a++){b=8;for(c=0;8>c;c++)0>this.O[a].Ad*this.Z[c].x+this.O[a].Bd*this.Z[c].y+this.O[a].Cd*this.Z[c].p+this.O[a].Td&&
--b;if(0==b)return n}return j};
Me.prototype.xi=function(a){this.Gb=a.a;this.Im=this.Gb[0];this.Mm=this.Gb[1];this.Qm=this.Gb[2];this.ug=this.Gb[3];this.Jm=this.Gb[4];this.Nm=this.Gb[5];this.Rm=this.Gb[6];this.vg=this.Gb[7];this.Km=this.Gb[8];this.Om=this.Gb[9];this.Sm=this.Gb[10];this.wg=this.Gb[11];this.Lm=this.Gb[12];this.Pm=this.Gb[13];this.Tm=this.Gb[14];this.xg=this.Gb[15];this.O[0].Ad=this.ug+this.Im;this.O[0].Bd=this.vg+this.Jm;this.O[0].Cd=this.wg+this.Km;this.O[0].Td=this.xg+this.Lm;this.O[0].Pc();this.O[1].Ad=this.ug-
this.Im;this.O[1].Bd=this.vg-this.Jm;this.O[1].Cd=this.wg-this.Km;this.O[1].Td=this.xg-this.Lm;this.O[1].Pc();this.O[2].Ad=this.ug-this.Mm;this.O[2].Bd=this.vg-this.Nm;this.O[2].Cd=this.wg-this.Om;this.O[2].Td=this.xg-this.Pm;this.O[2].Pc();this.O[3].Ad=this.ug+this.Mm;this.O[3].Bd=this.vg+this.Nm;this.O[3].Cd=this.wg+this.Om;this.O[3].Td=this.xg+this.Pm;this.O[3].Pc();this.O[4].Ad=this.ug+this.Qm;this.O[4].Bd=this.vg+this.Rm;this.O[4].Cd=this.wg+this.Sm;this.O[4].Td=this.xg+this.Tm;this.O[4].Pc();
this.O[5].Ad=this.ug-this.Qm;this.O[5].Bd=this.vg-this.Rm;this.O[5].Cd=this.wg-this.Sm;this.O[5].Td=this.xg-this.Tm;this.O[5].Pc()};z("ViewFrustum",Me);Me.prototype.TestBox=Me.prototype.wi;Me.prototype.Update=Me.prototype.xi;function Ze(){this.vh=this.wh=n;this.version=this.Ye=this.Vf=this.Bb=this.sb=k}
Ze.prototype.Sg=function(a){this.X=new XMLHttpRequest;this.X.open("GET",a,j);var b=this;this.X.onreadystatechange=function(){a:if(4==b.X.readyState)if(200==b.X.status){var a=b.X.responseText,d;try{d=dd(a)}catch(e){alert(e);break a}d.extent?(b.version=1,b.np=d.name,b.Bb=d.maxlod,b.xo=256,a=d.extent,b.sb=a,b.Qo=[b.Bb,a[0],a[1],a[2],a[3]],"image"==d.type?"png"==d.format?(b.Vf="image/png",b.Ye=".png"):"jpg"==d.format?(b.Vf="image/jpg",b.Ye=".jpg"):b.Vf="image/png":"elevation"==d.type&&(b.Ye=".json")):
(b.version=0,b.mp=d.layer,b.lp=d.copyright,b.hp=d.srs,b.sb=d.boundingbox,b.Bb=d.levelofdetail,b.gp=d.imagewidth,b.fp=d.imageheight,b.xo=d.tilesize,b.qp=d.tilelayout,b.Vf=d.tileformat,b.Qo=d.bounds,b.pp=d.center,"image/png"==b.Vf?b.Ye=".png":"image/jpg"==b.Vf?b.Ye=".jpg":"elevation/json"==b.Vf&&(b.Ye=".json"));b.wh=j}else Ec(I("owg.Datasetinfo"),"DATASET DOWNLOAD FAILED"),b.vh=j};this.X.send()};z("DatasetInfo",Ze);Ze.prototype.Download=Ze.prototype.Sg;function $e(){this.I=new Ze;this.k=this.Jb=k;this.la=new Oe;this.coords=Array(4);this.cb=1;this.Ha=function(){return this.I.wh};this.Oc=function(){return this.I.vh};this.Mb=function(a,b,c,d,e,f){if(this.Ha()){var g=this.Jb+"/"+this.k+"/"+Pe.Gj(b+this.I.Ye),a=new Q(a);a.j=b;a.k=c;a.K=d;a.J=e;a.caller=f;a.cb=this.cb;S(a,g,af,bf,j)}};this.cc=function(){return this.I.Bb?this.I.Bb:0};this.Nc=function(a){if(a.length>this.I.Bb)return n;this.la.dh(a,this.coords);var a=this.coords[0],b=this.coords[1],c=this.coords[2],
d=this.coords[3],e=this.I.sb[0],f=this.I.sb[1],g=this.I.sb[2],i=this.I.sb[3];return d>f||d>f||b<i||b<i||a>g||a>g||c<e||c<e?n:j};this.Wa=function(a,b,c){this.cb=c==k?1:c;this.Jb=a;this.k=b;this.I.Sg(a+"/"+b+".json")}}$e.prototype=new Qe;function af(a){a.K(a.j,a,a.k);a.K=k;a.J=k;a.j=k;a.caller=k;a.k=k}function bf(a){a.J(a.j,a.caller,a.k);a.K=k;a.J=k;a.j=k;a.caller=k;a.k=k}z("i3dImageLayer",$e);$e.prototype.Failed=$e.prototype.Oc;$e.prototype.Ready=$e.prototype.Ha;$e.prototype.RequestTile=$e.prototype.Mb;
$e.prototype.Setup=$e.prototype.Wa;function cf(){this.Ha=s(n);this.Oc=s(n);this.Mb=p();this.cc=s(0);this.Nc=s(n)};function df(){this.I=new Ze;this.k=this.Jb=k;this.la=new Oe;this.coords=Array(4);this.Ha=function(){return this.I.wh};this.Oc=function(){return this.I.vh};this.Mb=function(a,b,c,d,e,f){if(this.Ha()){var g=this.Jb+"/"+this.k+"_JSON/"+(Pe.Gj(b+".jso")+"n"),a=new P(a);a.j=b;a.k=c;a.K=d;a.J=e;a.caller=f;pd(a,g,ef,ff)}};this.cc=function(){return this.I.Bb?this.I.Bb:0};this.Nc=function(a){if(a.length>this.I.Bb)return n;this.la.dh(a,this.coords);var a=this.coords[0],b=this.coords[1],c=this.coords[2],d=this.coords[3],
e=this.I.sb[0],f=this.I.sb[1],g=this.I.sb[2],i=this.I.sb[3];return d>f||d>f||b<i||b<i||a>g||a>g||c<e||c<e?n:j};this.Wa=function(a,b){this.Jb=a;this.k=b;this.I.Sg(a+"/"+b+".json")}}df.prototype=new cf;function ef(a){a.K(a.j,a,a.k);a.K=k;a.J=k;a.j=k;a.caller=k;a.k=k}function ff(a){a.J(a.j,a.caller,a.k);a.K=k;a.J=k;a.j=k;a.caller=k;a.k=k};function gf(){this.version=this.style=this.wd=this.k=this.Jb=k;this.cb=1;this.ea=k;this.la=new Oe;this.Ha=s(j);this.Oc=s(n);this.Mb=function(a,b,c,d,e,f){-1==this.Jb.indexOf("?",this.Jb.length-1)&&(this.Jb+="?");var g=Array(4);"EPSG%3A4326"==this.ea?this.la.Jl(b,g):this.la.Il(b,g);g=g[0]+","+g[1]+","+g[2]+","+g[3];g=this.Jb+"service=WMS&request=GetMap&WIDTH=256&HEIGHT=256&TILED=TRUE&SRS="+this.ea+"&LAYERS="+this.k+"&STYLES="+this.style+"&FORMAT="+this.wd+"&VERSION="+this.version+"&BBOX="+g;a=new Q(a);
a.j=b;a.k=c;a.K=d;a.J=e;a.caller=f;"image/png"==this.wd&&(a.cb=this.cb);S(a,g,hf,jf,j)};this.cc=s(30);this.Nc=function(a){return 31>a.length?j:n};this.Wa=function(a,b,c,d,e,f,g){this.Jb=a;this.k=b;this.wd=d;this.style=e;this.version=f;this.cb=g;this.ea=c;this.wd==k&&(this.wd="image/png");this.style==k&&(this.style="");this.version==k&&(this.version="1.1.1");this.ea==k&&(this.ea="EPSG%3A900913");"EPSG:900913"==this.ea&&(this.ea="EPSG%3A900913");"ESRI:102100"==this.ea&&(this.ea="ESRI%3A102100");"ESRI:102113"==
this.ea&&(this.ea="ESRI%3A102113");"EPSG:3785"==this.ea&&(this.ea="EPSG%3A3785");"EPSG:3857"==this.ea&&(this.ea="EPSG%3A3857");"EPSG:4326"==this.ea&&(this.ea="EPSG%3A4326")}}gf.prototype=new Qe;function hf(a){a.K(a.j,a,a.k);a.K=k;a.J=k;a.j=k;a.caller=k;a.k=k}function jf(a){a.J(a.j,a.caller,a.k);a.K=k;a.J=k;a.j=k;a.caller=k;a.k=k};function kf(){this.k=this.qb=k;this.la=new Oe;this.Ea=0;this.Ha=s(j);this.Oc=s(n);this.Mb=function(a,b,c,d,e,f){var g={};this.la.qc(b,g);var i=Math.pow(2,g.zb),g=this.qb[this.Ea]+"/oym?f=m&ft=jpeg_sat_256&x="+(g.x-i/2)+"&y="+(i-g.y-i/2-1)+"&z="+(18-g.zb)+"&key=[KEY]",a=new Q(a);a.j=b;a.k=c;a.K=d;a.J=e;a.caller=f;S(a,g,lf,mf,j);this.Ea++;this.Ea>=this.qb.length&&(this.Ea=0)};this.cc=s(16);this.Nc=function(a){return 17>a.length?j:n};this.Wa=fa("qb")}Re.prototype=new Qe;
function lf(a){a.K(a.j,a,a.k);a.K=k;a.J=k;a.j=k;a.caller=k;a.k=k}function mf(a){a.J(a.j,a.caller,a.k);a.K=k;a.J=k;a.j=k;a.caller=k;a.k=k};function nf(){this.I=new Ze;this.k=this.Jb=k;this.la=new Oe;this.coords=Array(4);this.Ea=0;this.Ha=function(){return this.I.wh};this.Oc=function(){return this.I.vh};this.Mb=function(a,b,c,d,e,f){if(this.Ha()){var g={};this.la.qc(b,g);g=this.qb[this.Ea]+"/"+this.k+"/tiles/"+g.zb+"/"+g.x+"/"+g.y+".json";a=new P(a);a.j=b;a.k=c;a.K=d;a.J=e;a.caller=f;pd(a,g,of,pf);this.Ea++;this.Ea>=this.qb.length&&(this.Ea=0)}};this.cc=function(){return this.I.Bb?this.I.Bb:0};this.Nc=function(a){if(a.length>this.I.Bb)return n;
for(var b=a,c=a,d=0;d<this.I.Bb-a.length;d++)b+="0",c+="3";d={};this.la.qc(b,d);b=d.x;a=d.y;this.la.qc(c,d);var c=d.x,d=d.y,e=this.I.sb[0],f=this.I.sb[1],g=this.I.sb[3];return!(b>this.I.sb[2]||c<e||a>g||d<f)};this.Wa=function(a,b){this.qb=a;this.k=b;this.I.Sg(a[0]+"/"+b+"/layersettings.json")}}nf.prototype=new cf;function of(a){a.K(a.j,a,a.k);a.K=k;a.J=k;a.j=k;a.caller=k;a.k=k}function pf(a){a.J(a.j,a.caller,a.k);a.K=k;a.J=k;a.j=k;a.caller=k;a.k=k};function qf(){this.k=this.qb=k;this.la=new Oe;this.sub=this.Ea=0;this.Oo="Galile,Galil,Gali,Gal,Ga,G".split(",");this.Ha=s(j);this.Oc=s(n);this.Mb=function(a,b,c,d,e,f){var g={};this.la.qc(b,g);g=this.qb[this.Ea]+"/kh/v=101&x="+g.x+"&y="+g.y+"&z="+g.zb+"&s="+this.Oo[this.sub];this.sub++;5==this.sub&&(this.sub=0);a=new Q(a);a.j=b;a.k=c;a.K=d;a.J=e;a.caller=f;S(a,g,Se,Te,j);this.Ea++;this.Ea>=this.qb.length&&(this.Ea=0)};this.cc=s(19);this.Nc=function(a){return 20>a.length?j:n};this.Wa=fa("qb")}
qf.prototype=new Re;function rf(a,b){this.Of=a||-1;this.jo=b||n;this.Ue={};this.Na=0;this.cn=Math.round(0.75*this.Of);this.Qd={};this.Qd.hits=0;this.Qd.misses=0;sf(this,"Initialized cache with size "+a)}rf.prototype.getItem=function(a){var b=this.Ue[a];b!=k&&(tf(b)?(uf(this,a),b=k):b.Vi=(new Date).getTime());(b=b?b.value:k)?(this.Qd.hits++,sf(this,"Cache HIT for key "+a)):(this.Qd.misses++,sf(this,"Cache MISS for key "+a));return b};
rf.prototype.setItem=function(a,b,c){this.Ue[a]!=k&&uf(this,a);vf(this,new function(a,b,c){(a==k||""==a)&&ea(Error("key cannot be null or empty"));this.key=a;this.value=b;c==k&&(c={});c.Ni!=k&&(c.Ni=c.Ni.getTime());c.Xh==k&&(c.Xh=2);this.options=c;this.Vi=(new Date).getTime()}(a,b,c));sf(this,"Setting key "+a);if(0<this.Of&&this.Na>this.Of){var d=this;setTimeout(function(){d.Go.call(d)},0)}};rf.prototype.clear=function(){for(var a in this.Ue)uf(this,a);sf(this,"Cache cleared")};
rf.prototype.Go=function(){var a=[],b;for(b in this.Ue){var c=this.Ue[b];tf(c)?uf(this,b):a.push(c)}if(a.length>this.cn)for(a=a.sort(function(a,b){return a.options.Xh!=b.options.Xh?b.options.Xh-a.options.Xh:b.Vi-a.Vi});a.length>this.cn;)uf(this,a.pop().key);sf(this,"Purged cached")};function vf(a,b){a.Ue[b.key]=b;a.Na++}
function uf(a,b){var c=a.Ue[b];delete a.Ue[b];a.Na--;sf(a,"removed key "+b);c.options.eo!=k&&setTimeout(function(){c.options.eo.call(k,c.key,c.value)},0);c.value.s!=k&&setTimeout(function(){c.value.s()},0)}function tf(a){var b=(new Date).getTime(),c=n;a.options.Ni&&a.options.Ni<b&&(c=j);!c&&a.options.qo&&a.Vi+1E3*a.options.qo<b&&(c=j);return c}function sf(a,b){a.jo&&I("owg.Cache").info(b)};function wf(a,b,c){a=L(a)-0;b=Math.log(Math.tan(Math.PI/4+L(b)/2));a/=Math.PI;b/=Math.PI;c[0]=a;c[1]=b}function xf(a,b,c){a*=Math.PI;b*=Math.PI;b=Math.PI/2-2*Math.atan(Math.exp(-b));b=Nc(b);for(a=Nc(a/1+0);180<a;)a-=180;for(;-180>a;)a+=180;for(;90<b;)b-=180;for(;-90>b;)b+=180;c[0]=a;c[1]=b};function yf(a,b,c){this.c=a;this.j=b;this.la=c;this.l=k;this.Uc=n;this.B=k;this.sm=j;this.F=[];this.mb=Array(5);this.mb[0]=new N;this.mb[1]=new N;this.mb[2]=new N;this.mb[3]=new N;this.mb[4]=new N;this.Te=0;this.images=k;this.Wj=n;this.pg=0;this.yi=new N;this.Kb=new O;this.Mf=-180;this.Jf=-90;this.sg=180;this.rg=90;var d=Array(4),e=Array(2);this.la.dh(this.j,d);var a=Array(3),b=Array(3),c=Array(3),f,g,i=new T;f=d[0];g=d[1];xf(f,g,e);f=e[0];g=e[1];this.Mf=f;this.rg=g;i.m(f,g,0);i.V(a);f=d[2];g=d[1];
xf(f,g,e);f=e[0];g=e[1];i.m(f,g,0);i.V(b);f=d[2];g=d[3];xf(f,g,e);f=e[0];g=e[1];this.sg=f;this.Jf=g;i.m(f,g,0);i.V(c);d=new N;e=new N;d.m(b[0]-a[0],b[1]-a[1],b[2]-a[2]);e.m(c[0]-a[0],c[1]-a[1],c[2]-a[2]);Sc(this.yi,d,e);this.yi.Pc()}var zf=0;
function Af(a){if(0==a.Te&&0==a.pg){var b=0,c=0;if(a.images!==k)for(var d=0;d<a.images.length;d++)a.images[d]!=k&&(b++,c=d);0==b?(a.l=a.c.Ek,a.B===k&&Bf(a),a.B.Tc(a.l),a.Uc=j,a.images=k):1==b?(a.l=a.images[c],a.B===k&&Bf(a),a.B.Tc(a.l),a.Uc=j,a.images=k):(a.Wj=j,a.B===k&&Bf(a),a.Uc=j)}}function Cf(a,b,c){a=b.caller;a.images[c]=b;a.Te-=1;Af(a);zf--}function Df(a,b,c){0<=c?(b.images[c]=k,b.Te-=1):(b.images=k,b.Te=0);Af(b);zf--}
function Ef(a,b){var c=b.caller;c.B=b;c.B.zb=c.j.length;c.F=b.Ja;c.mb[0].m(b.aa[0],b.aa[1],b.aa[2]);c.mb[1].m(b.ya[0],b.aa[1],b.aa[2]);c.mb[2].m(b.ya[0],b.ya[1],b.aa[2]);c.mb[3].m(b.aa[0],b.ya[1],b.aa[2]);c.mb[4].m(0.5*(b.ya[0]-b.aa[0]),0.5*(b.ya[1]-b.aa[1]),0.5*(b.ya[2]-b.aa[2]));c.pg-=1;Af(c);zf--}function Ff(a,b){b.B=k;b.pg-=1;Af(b);zf--}yf.prototype.s=function(){this.l&&this.l.s();this.B&&this.B.s()};
function Bf(a){var b=Array(4),c=Array(2),d=Array(3);a.la.dh(a.j,b);var e=b[0],f=b[1],g=b[2],i=b[3],l;a.sm=n;a.B=new P(a.c);a.B.zb=a.j.length;3>a.j.length?(b=2,l=1E5):6>a.j.length?(b=9,l=1E5):(b=5,l=1E3);for(var m=[],o=[],i=(i-f)/(b-1),r=(g-e)/(b-1),q=1/(b-1),t,v,w,B=new T,A=0;A<b;A++)for(var C=0;C<b;C++)t=e+C*r,v=f+A*i,xf(t,v,c),B.m(c[0],c[1],0),B.V(d),t=d[0],v=d[1],w=d[2],0==C&&0==A&&(a.F=[t,v,w]),0==C&&0==A?a.mb[0].m(t,v,w):C==b-1&&0==A?a.mb[1].m(t,v,w):C==b-1&&A==b-1?a.mb[2].m(t,v,w):0==C&&A==
b-1?a.mb[3].m(t,v,w):C==(b-1)/2&&A==(b-1)/2&&a.mb[4].m(t,v,w),m.push(t-a.F[0]),m.push(v-a.F[1]),m.push(w-a.F[2]),m.push(C*q),m.push(1-A*q);C=0;A=b-1;w=-l;xf(e+C*r,f+A*i,c);B.m(c[0],c[1],w);B.V(d);t=d[0];v=d[1];w=d[2];m.push(t-a.F[0]);m.push(v-a.F[1]);m.push(w-a.F[2]);m.push(C*q);m.push(1-A*q);A=C=0;w=-l;xf(e+C*r,f+A*i,c);B.m(c[0],c[1],w);B.V(d);t=d[0];v=d[1];w=d[2];m.push(t-a.F[0]);m.push(v-a.F[1]);m.push(w-a.F[2]);m.push(C*q);m.push(1-A*q);C=b-1;A=0;w=-l;xf(e+C*r,f+A*i,c);B.m(c[0],c[1],w);B.V(d);
t=d[0];v=d[1];w=d[2];m.push(t-a.F[0]);m.push(v-a.F[1]);m.push(w-a.F[2]);m.push(C*q);m.push(1-A*q);C=b-1;A=b-1;w=-l;xf(e+C*r,f+A*i,c);B.m(c[0],c[1],w);B.V(d);t=d[0];v=d[1];w=d[2];m.push(t-a.F[0]);m.push(v-a.F[1]);m.push(w-a.F[2]);m.push(C*q);m.push(1-A*q);for(g=1;g<b-1;g++)C=0,A=b-1-g,t=e+C*r,v=f+A*i,w=-l,xf(t,v,c),B.m(c[0],c[1],w),B.V(d),t=d[0],v=d[1],w=d[2],m.push(t-a.F[0]),m.push(v-a.F[1]),m.push(w-a.F[2]),m.push(C*q),m.push(1-A*q);for(g=1;g<b-1;g++)C=g,A=0,t=e+C*r,v=f+A*i,w=-l,xf(t,v,c),B.m(c[0],
c[1],w),B.V(d),t=d[0],v=d[1],w=d[2],m.push(t-a.F[0]),m.push(v-a.F[1]),m.push(w-a.F[2]),m.push(C*q),m.push(1-A*q);for(g=1;g<b-1;g++)C=b-1,A=g,t=e+C*r,v=f+A*i,w=-l,xf(t,v,c),B.m(c[0],c[1],w),B.V(d),t=d[0],v=d[1],w=d[2],m.push(t-a.F[0]),m.push(v-a.F[1]),m.push(w-a.F[2]),m.push(C*q),m.push(1-A*q);for(g=1;g<b-1;g++)C=b-1-g,A=b-1,t=e+C*r,v=f+A*i,w=-l,xf(t,v,c),B.m(c[0],c[1],w),B.V(d),t=d[0],v=d[1],w=d[2],m.push(t-a.F[0]),m.push(v-a.F[1]),m.push(w-a.F[2]),m.push(C*q),m.push(1-A*q);for(c=0;c<b-1;c++)for(g=
0;g<b-1;g++)d=g+c*b,e=d+1,l=d+b,f=l+1,o.push(d),o.push(f),o.push(l),o.push(d),o.push(e),o.push(f);c=b*b;d=c+1;e=c+2;f=c+3;for(g=0;g<b-1;g++)l=(b-g-1)*b,i=(b-g-2)*b,q=0==g?c:b*b+3+g,r=g==b-2?d:b*b+4+g,o.push(l),o.push(i),o.push(r),o.push(l),o.push(r),o.push(q);for(g=0;g<b-1;g++)l=g,i=g+1,r=0==g?d:b*b+b+1+g,q=g==b-2?e:b*b+b+2+g,o.push(i),o.push(l),o.push(r),o.push(i),o.push(r),o.push(q);for(g=0;g<b-1;g++)l=(g+1)*b-1,i=(g+2)*b-1,q=0==g?e:b*b+2*b-1+g,r=g==b-2?f:b*b+2*b+g,o.push(i),o.push(l),o.push(q),
o.push(i),o.push(q),o.push(r);for(g=0;g<b-1;g++)l=b*b-1-g,i=l-1,q=0==g?f:b*b+3*b-3+g,r=g==b-2?c:b*b+3*b-2+g,o.push(i),o.push(l),o.push(q),o.push(i),o.push(q),o.push(r);id(a.B,m);ld(a.B,o,"TRIANGLES");a.B.Tc(a.l);a.B.Ja=a.F;qd(a.B)}
yf.prototype.tb=function(a){if(!(3>this.j.length)){if(a){if(this.Kb.da(this.c.Ub),this.Kb.a[12]+=this.F[0],this.Kb.a[13]+=this.F[1],this.Kb.a[14]+=this.F[2],this.c.Rc(),this.c.Sc(this.Kb),a=this.B,a.Ha){a.fa==k&&a.Le();a.b.bindBuffer(a.b.ARRAY_BUFFER,a.fa);a.b.bindBuffer(a.b.ELEMENT_ARRAY_BUFFER,a.Sb);a.na&&(a.c.Rc(),a.we.W(a.na,a.c.Ub),a.c.Sc(a.we));switch(a.mode){case "p":a.b.enableVertexAttribArray(0);a.b.vertexAttribPointer(0,3,a.b.FLOAT,n,12,0);md(a.c.$a,a.c.wa,a.mc);break;case "pnt":a.b.enableVertexAttribArray(0);
a.b.enableVertexAttribArray(1);a.b.enableVertexAttribArray(2);a.b.vertexAttribPointer(0,3,a.b.FLOAT,n,32,0);a.b.vertexAttribPointer(1,3,a.b.FLOAT,n,32,12);a.b.vertexAttribPointer(2,2,a.b.FLOAT,n,32,24);md(a.c.$a,a.c.wa,a.mc);break;case "pc":a.b.enableVertexAttribArray(0);a.b.enableVertexAttribArray(1);a.b.vertexAttribPointer(0,3,a.b.FLOAT,n,28,0);a.b.vertexAttribPointer(1,4,a.b.FLOAT,n,28,12);md(a.c.$a,a.c.wa,a.mc);break;case "pnc":a.b.enableVertexAttribArray(0);a.b.enableVertexAttribArray(1);a.b.enableVertexAttribArray(2);
a.b.vertexAttribPointer(0,3,a.b.FLOAT,n,40,0);a.b.vertexAttribPointer(1,3,a.b.FLOAT,n,40,12);a.b.vertexAttribPointer(2,4,a.b.FLOAT,n,40,24);od(a.c.$a,a.c.Lh,a.c.Nf,a.c.wa,a.mc);break;case "pt":a.b.enableVertexAttribArray(0);a.b.enableVertexAttribArray(1);a.b.vertexAttribPointer(0,3,a.b.FLOAT,n,20,0);a.b.vertexAttribPointer(1,2,a.b.FLOAT,n,20,12);md(a.c.$a,a.c.wa,a.mc);break;case "pnct":a.b.enableVertexAttribArray(0),a.b.enableVertexAttribArray(1),a.b.enableVertexAttribArray(2),a.b.enableVertexAttribArray(3),
a.b.vertexAttribPointer(0,3,a.b.FLOAT,n,48,0),a.b.vertexAttribPointer(1,3,a.b.FLOAT,n,48,12),a.b.vertexAttribPointer(2,4,a.b.FLOAT,n,48,24),a.b.vertexAttribPointer(3,2,a.b.FLOAT,n,48,40),md(a.c.$a,a.c.wa,a.mc)}switch(a.qe){case "TRIANGLES":a.b.drawElements(a.b.TRIANGLES,a.kb,a.b.UNSIGNED_SHORT,0);break;case "TRIANGLESTRIP":a.b.drawElements(a.b.TRIANGLE_STRIP,a.kb,a.b.UNSIGNED_SHORT,0)}a.b.disableVertexAttribArray(0);a.b.disableVertexAttribArray(1);a.b.disableVertexAttribArray(2);a.b.disableVertexAttribArray(3)}}else{if(this.Wj){this.Wj=
n;a=this.l=new Q(this.c,j,256,256);this.c.lf.push(a);a.mh();for(a=0;a<this.images.length;a++)this.images[a]!=k&&(1>this.images[a].cb?this.images[a].U(0,0,0,0,1,1,j,j,this.images[a].cb):this.images[a].U(0,0,0,0,1,1,j,j,1));Je(this.c);for(a=0;a<this.images.length;a++)this.images[a]!=k&&this.images[a].s();this.images=k;this.B.Tc(this.l)}this.Kb.da(this.c.Ub);this.Kb.a[12]+=this.F[0];this.Kb.a[13]+=this.F[1];this.Kb.a[14]+=this.F[2];this.c.Rc();this.c.Sc(this.Kb);this.c.e.v.Fa.Ok==Gf?this.B.mode="pt":
this.c.e.v.Fa.Ok==Hf&&(this.B.mode="pt_chroma");this.B.ta()}this.c.Kd()}};function If(a,b,c,d,e){this.c=a;this.va=b;this.wb=c;this.la=d;this.Di=new rf(e,n);this.Tk={};this.Tk.Vm=0}If.prototype.s=function(){this.la=this.wb=this.va=this.c=k;this.Di.clear();this.Di=k};If.prototype.Bl=function(){if(!this.va||0==this.va.length)return n;for(var a=0;a<this.va.length;a++)if(!this.va[a].Ha())return n;if(this.wb)for(a=0;a<this.wb.length;a++)if(!this.wb[a].Ha())return n;return j};
If.prototype.Yd=function(a){var b=this.Di.getItem(a);if(b==k){this.Tk.Vm++;var c=b=new yf(this.c,a,this.la),d=this.va,e=this.wb;if(3>c.j.length)Df(0,c,-1);else{if(0<d.length){c.Te=d.length;c.images=Array(c.Te);for(var f=0;f<d.length;f++){c.images[f]=k;var g=c.j.length,g=(g<=d[f].bf||-1==d[f].bf)&&(g>=d[f].cf||-1==d[f].cf);d[f].Nc(c.j)&&g?(d[f].Mb(c.c,c.j,f,Cf,Df,c),zf++):Df(0,c,f)}}e&&0<e.length&&8<c.j.length&&e[0].Nc(c.j)&&(c.pg=1,e[0].Mb(c.c,c.j,0,Ef,Ff,c),zf++)}this.Di.setItem(a,b)}return b};
If.prototype.cc=function(){var a=0,b=0;if(0<this.wb.length)for(var c=0;c<this.wb.length;c++)b=Math.max(b,this.wb[c].cc());for(c=0;c<this.va.length;c++)a=Math.max(a,this.va[c].cc());return 0<b?Math.min(b,a):a};z("GlobeCache",If);If.prototype.IsReady=If.prototype.Bl;If.prototype.RequestBlock=If.prototype.Yd;function Jf(){this.I=new Ze;this.k=k;this.la=new Oe;this.coords=Array(4);this.cb=1;this.Ea=0;this.Ha=function(){return this.I.wh};this.Oc=function(){return this.I.vh};this.Mb=function(a,b,c,d,e,f){if(this.Ha()){var g={};this.la.qc(b,g);g=this.qb[this.Ea]+"/"+this.k+"/tiles/"+g.zb+"/"+g.x+"/"+g.y+this.I.Ye;a=new Q(a);a.j=b;a.k=c;a.K=d;a.J=e;a.caller=f;a.cb=this.cb;S(a,g,Kf,Lf,j);this.Ea++;this.Ea>=this.qb.length&&(this.Ea=0)}};this.cc=function(){return this.I.Bb?this.I.Bb:0};this.Nc=function(a){if(a.length>
this.I.Bb)return n;for(var b=a,c=a,d=0;d<this.I.Bb-a.length;d++)b+="0",c+="3";d={};this.la.qc(b,d);b=d.x;a=d.y;this.la.qc(c,d);var c=d.x,d=d.y,e=this.I.sb[0],f=this.I.sb[1],g=this.I.sb[3];return!(b>this.I.sb[2]||c<e||a>g||d<f)};this.Wa=function(a,b,c){this.cb=c==k?1:c;this.qb=a;this.k=b;this.I.Sg(a[0]+"/"+b+"/layersettings.json")}}Jf.prototype=new Qe;function Kf(a){a.K(a.j,a,a.k);a.K=k;a.J=k;a.j=k;a.caller=k;a.k=k}function Lf(a){a.J(a.j,a.caller,a.k);a.K=k;a.J=k;a.j=k;a.caller=k;a.k=k}
z("owgImageLayer",Jf);Jf.prototype.Failed=Jf.prototype.Oc;Jf.prototype.Ready=Jf.prototype.Ha;Jf.prototype.RequestTile=Jf.prototype.Mb;Jf.prototype.Setup=Jf.prototype.Wa;function Mf(){this.cb=1;this.Mb=function(a,b,c,d,e,f){var g={};this.la.qc(b,g);g.y=Math.pow(2,g.zb)-1-g.y;g=this.qb[this.Ea]+"/"+g.zb+"/"+g.x+"/"+g.y+".png";a=new Q(a);a.j=b;a.k=c;a.K=d;a.J=e;a.caller=f;a.cb=this.cb;S(a,g,Se,Te,j)}}Mf.prototype=new Re;function Nf(a){this.c=a;this.va=[];this.wb=[];this.la=new Oe;this.co=1E3;this.gb=k;this.N=[];this.ym=0;this.Jh={};this.Jh.Gi=0;this.yh=k;this.zk=0;this.dn=1;this.Qe=new Me;this.pa=Array(3);this.yk=new O;this.Qf=new P(this.c);this.Wf=new P(this.c);this.Rf=[8/255,24/255,58/255];this.Xf=[1,1,1];this.Nk=1;this.Ok=Gf}u=Nf.prototype;u.s=function(){this.gb&&(this.gb.s(),this.gb=k);this.Qf&&(this.Qf.s(),this.Qf=k);this.Wf&&(this.Wf.s(),this.Wf=k)};
u.uj=function(a){var b=-1;if(y(a.service))if("i3d"==a.service){if(y(a.url)&&y(a.layer)&&0<a.url.length){var b=a.url[0],c=a.layer,d=new $e;y(a.minlod)&&(d.cf=a.minlod);y(a.maxlod)&&(d.bf=a.maxlod);d.Wa(b,c,a.transparency);b=this.va.length;this.va.push(d);Of(this)}}else"osm"==a.service?y(a.url)&&0<a.url.length&&(d=new Re,y(a.minlod)&&(d.cf=a.minlod),y(a.maxlod)&&(d.bf=a.maxlod),d.Wa(a.url),b=this.va.length,this.va.push(d),Of(this)):"tms"==a.service?y(a.url)&&0<a.url.length&&(d=new Mf,y(a.minlod)&&(d.cf=
a.minlod),y(a.maxlod)&&(d.bf=a.maxlod),d.Wa(a.url),b=this.va.length,this.va.push(d),Of(this)):"wmts"==a.service?y(a.url)&&0<a.url.length&&y(a.layer)&&0<a.layer.length&&(d=new Ue,y(a.format)&&(d.wd=a.format),y(a.style)&&(d.style=a.style),y(a.version)&&(d.version=a.version),d.Wa(a.url,a.layer,a.SRS,a.format,a.style,a.version,a.transparency),b=this.va.length,this.va.push(d),Of(this)):"wms"==a.service?y(a.url)&&0<a.url.length&&y(a.layer)&&0<a.layer.length&&(d=new gf,y(a.format)&&(d.wd=a.format),y(a.style)&&
(d.style=a.style),y(a.version)&&(d.version=a.version),d.Wa(a.url,a.layer,a.SRS,a.format,a.style,a.version,a.transparency),b=this.va.length,this.va.push(d),Of(this)):"owg"==a.service?y(a.url)&&0<a.url.length&&(c=a.layer,d=new Jf,y(a.minlod)&&(d.cf=a.minlod),y(a.maxlod)&&(d.bf=a.maxlod),d.Wa(a.url,c,a.transparency),b=this.va.length,this.va.push(d),Of(this)):"goo"==a.service?y(a.url)&&0<a.url.length&&(d=new qf,y(a.minlod)&&(d.cf=a.minlod),y(a.maxlod)&&(d.bf=a.maxlod),d.Wa(a.url),b=this.va.length,this.va.push(d),
Of(this)):"oym"==a.service&&y(a.url)&&0<a.url.length&&(d=new kf,y(a.minlod)&&(d.cf=a.minlod),y(a.maxlod)&&(d.bf=a.maxlod),d.Wa(a.url),b=this.va.length,this.va.push(d),Of(this));return b};u.tj=function(a){var b=-1;if("i3d"==a.service){if(a.url&&a.layer&&0<a.url.length){var b=a.layer,c=new df;c.Wa(a.url[0],b);b=this.wb.length;this.wb.push(c);Of(this)}}else if("owg"==a.service&&a.url&&a.layer&&0<a.url.length){var d=a.url,b=a.layer,c=new nf;c.Wa(d,b);b=this.wb.length;this.wb.push(c);Of(this)}return b};
u.Mj=function(a){0>a||a>=this.va.length||(this.va.splice(a,1),Of(this))};u.Kj=function(a){0>a||a>=this.wb.length||(this.wb.splice(a,1),Of(this))};function Of(a){a.gb&&(a.gb.s(),a.gb=k);a.gb=new If(a.c,a.va,a.wb,a.la,a.co)}
u.tb=function(a,b){this.gb.Tk.Vm=0;this.yk.da(b);this.Qe.xi(b);this.yh=a;if(this.gb&&this.gb.Bl()){this.zk=this.gb.cc();var c=this.gb.Yd("0"),d=this.gb.Yd("1"),e=this.gb.Yd("2"),f=this.gb.Yd("3");if(c.Uc&&d.Uc&&e.Uc&&f.Uc){this.N=[];this.N.push(c);this.N.push(d);this.N.push(e);this.N.push(f);for(this.Jh.Gi=0;this.Jh.Gi!=this.N.length;)a:{c=this.Jh.Gi;if(this.N[c].j.length!=this.zk&&this.N[c].Uc&&Pf(this,c)){var g=this.N[c].j,d=this.gb.Yd(g+"0"),e=this.gb.Yd(g+"1"),f=this.gb.Yd(g+"2"),g=this.gb.Yd(g+
"3");if(d.Uc&&e.Uc&&f.Uc&&g.Uc){this.N.splice(c,1);this.N.push(d);this.N.push(e);this.N.push(f);this.N.push(g);break a}}this.Jh.Gi++}for(c=0;c<this.N.length;)e=this.N[c],d=e.mb[4].a,e=e.yi.a,f=this.yh.a,this.pa[0]=f[0]-d[0],this.pa[1]=f[1]-d[1],this.pa[2]=f[2]-d[2],0.4<=(this.pa[0]*e[0]+this.pa[1]*e[1]+this.pa[2]*e[2])/Math.sqrt(this.pa[0]*this.pa[0]+this.pa[1]*this.pa[1]+this.pa[2]*this.pa[2])?this.N.splice(c,1):c++;for(c=0;c<this.N.length;c++)this.N[c].tb(n);d=[];e=[];for(c=0;c<this.N.length;c++){var f=
this.N[c].j,g=0,i=f.charAt(0);if("0"==i||"1"==i)g=1;if("2"==i||"3"==i)g=2;for(var l=1;l<f.length;l++){i=f.charAt(l);if(("0"==i||"1"==i)&&"2"==g){g=0;break}if(("2"==i||"3"==i)&&"1"==g){g=0;break}}1==g&&d.push(this.N[c]);2==g&&e.push(this.N[c])}3<d.length&&Qf(this,d);3<e.length&&Rf(this,e)}}};
function Pf(a,b){var c=j,d=a.N[b],e=d.j.length;if(e>a.zk)return n;if(3>e)return j;c=a.Qe.wi(d.B.aa[0],d.B.aa[1],d.B.aa[2],d.B.ya[0],d.B.ya[1],d.B.ya[2]);if(!c)return n;var f=d.mb[4].a,g=d.yi.a,e=a.yh.a;a.pa[0]=e[0]-f[0];a.pa[1]=e[1]-f[1];a.pa[2]=e[2]-f[2];f=Math.sqrt(a.pa[0]*a.pa[0]+a.pa[1]*a.pa[1]+a.pa[2]*a.pa[2]);0<f&&(a.pa[0]/=f,a.pa[1]/=f,a.pa[2]/=f);0.4<a.pa[0]*g[0]+a.pa[1]*g[1]+a.pa[2]*g[2]&&(c=n);if(!c)return n;for(var c=[0,0,0],g=0,f=1.0E20,i=d.B.D.length/d.B.T,l=0;l<i;l++)c[0]=e[0]-(d.B.D[5*
l]+d.F[0]),c[1]=e[1]-(d.B.D[5*l+1]+d.F[1]),c[2]=e[2]-(d.B.D[5*l+2]+d.F[2]),g=c[0]*c[0]+c[1]*c[1]+c[2]*c[2],g<f&&(f=g);e=Math.sqrt(f);c=a.dn;g=d.mb[0].ff();g.Qj(d.mb[1]);return 1<c*g.Ej()/e}
u.Xd=function(a,b,c){for(var b=this.c.gf(a,b,this.yk,j),d=[],e=a=0;e<this.N.length;e++){var f=this.N[e].B.aa,g=this.N[e].B.ya;this.N[e].B.zi.Wg(b.x,b.y,b.p,b.me,b.ne,b.oe,f[0],f[1],f[2],g[0],g[1],g[2])&&d.push(this.N[e])}f=1.0E20;c.hit=n;c.numhits=d.length;for(e=0;e<d.length;e++)if((g=d[e].B.Je(b.x,b.y,b.p,b.me,b.ne,b.oe))&&g.M<f)c.hit=j,f=g.M,a=d[e].sm?0:1;c.tmin=f;c.hit&&(c.x=b.x+f*b.me,c.y=b.y+f*b.ne,c.z=b.p+f*b.oe,b=new T(0,0,0),b.pc(c.x,c.y,c.z),c.lng=b.H[0],c.lat=b.H[1],c.elv=b.H[2],1==a&&(c.elv=
0))};u.gg=function(a,b,c,d){if(d)if(d={},this.Xd(a,b,d),d.hit)this.Nk=Math.sqrt(d.x*d.x+d.y*d.y+d.z*d.z);else return;var e=this.c.gf(a,b,this.yk,j);c.hit=n;var f=e.x,b=e.y,a=e.p,g=e.me,d=e.ne,e=e.oe,i=g*g+d*d+e*e,l=f*g+b*d+a*e,m=l*l-i*(f*f+b*b+a*a-this.Nk*this.Nk);0>=m||(i=(0-l-Math.sqrt(m))/i,f+=g*i,b+=d*i,a+=e*i,d=1/Math.sqrt(f*f+b*b+a*a),c.hit=j,c.x=f*d,c.y=b*d,c.z=a*d,a=new T(0,0,0),a.pc(c.x,c.y,c.z),c.lng=a.H[0],c.lat=a.H[1],c.elv=a.H[2])};
u.cg=function(a,b){var c={hasvalue:n,elevation:0,lod:-1},d=[0,0,0],e=[0,0,0],f=new T(a,b,0);f.V(e);f.m(a,b,-1);f.V(d);var g,i,f=d[0];g=d[1];i=d[2];for(var l=e[0]-d[0],m=e[1]-d[1],d=e[2]-d[2],e=Math.sqrt(l*l+m*m+d*d),l=l/e,m=m/e,d=d/e,e=[],o=0;o<this.N.length;o++){var r=this.N[o].B.aa,q=this.N[o].B.ya;this.N[o].B.zi.Wg(f,g,i,l,m,d,r[0],r[1],r[2],q[0],q[1],q[2])&&e.push(this.N[o])}r=1.0E20;for(o=0;o<e.length;o++)if((q=e[o].B.Je(f,g,i,l,m,d))&&q.M<r)c.hasvalue=j,c.lod=e[o].B.zb,r=q.M;c.hasvalue&&(c.x=
f+r*l,c.y=g+r*m,c.z=i+r*d,f=new T(0,0,0),f.pc(c.x,c.y,c.z),c.lng=f.H[0],c.lat=f.H[1],c.elevation=f.H[2]);return c};
function Qf(a,b){for(var c=0,d=0;d<b.length;d++)b[d].j.length>c&&(c=b[d].j.length);for(d=0;d<b.length;d++)for(b[d].Wb=b[d].j;b[d].Wb.length<c;)b[d].Wb+="0";b.sort(function(a,b){return parseInt(a.Wb,2)-parseInt(b.Wb,2)});for(var d=[0,0,0.7577840175609609],c=[d[0],d[1],d[2],a.Rf[0],a.Rf[1],a.Rf[2],1],e=[],d=0;d<b.length;d++)for(var f=2;0==b[d].B.D[f];)c.push(b[d].F[0]+b[d].B.D[f-2]),c.push(b[d].F[1]+b[d].B.D[f-1]),c.push(b[d].F[2]+b[d].B.D[f]),c.push(a.Rf[0]),c.push(a.Rf[1]),c.push(a.Rf[2]),c.push(1),
f+=5;for(d=0;d<c.length/7-2;d++)e.push(d);e.push(1);e.push(2);e.push(3);a.Qf.s();a.Qf=new P(a.c);a.Qf.oc({VertexSemantic:"pc",Vertices:c,IndexSemantic:"TRIANGLEFAN",Indices:e},k,k);a.Qf.ta()}
function Rf(a,b){for(var c=0,d=0;d<b.length;d++)b[d].j.length>c&&(c=b[d].j.length);for(d=0;d<b.length;d++){b[d].Wb=b[d].j;b[d].Wb=b[d].Wb.replace(/2/g,"0");for(b[d].Wb=b[d].Wb.replace(/3/g,"1");b[d].Wb.length<c;)b[d].Wb+="0"}b.sort(function(a,b){return parseInt(b.Wb,2)-parseInt(a.Wb,2)});for(var d=[0,0,-0.7577840175609609],c=[d[0],d[1],d[2],a.Xf[0],a.Xf[1],a.Xf[2],1],e=[],d=0;d<b.length;d++)for(var f=b[d].B.D.length,f=f-1;0==b[d].B.D[f];)c.push(b[d].F[0]+b[d].B.D[f-4]),c.push(b[d].F[1]+b[d].B.D[f-
3]),c.push(b[d].F[2]+b[d].B.D[f-2]),c.push(a.Xf[0]),c.push(a.Xf[1]),c.push(a.Xf[2]),c.push(1),f-=5;for(d=0;d<c.length/7-2;d++)e.push(d);e.push(1);a.Wf.s();a.Wf=new P(a.c);a.Wf.oc({VertexSemantic:"pc",Vertices:c,IndexSemantic:"TRIANGLEFAN",Indices:e},k,k);a.Wf.ta()}
u.Ng=function(){if(!this.yh)return NaN;var a=[],b=this.yh.a,c=new N;if(0==this.wb.length)return c=new T,c.pc(b[0],b[1],b[2]),c.H[2];c.m(-b[0],-b[1],-b[2]);for(var c=c.a,d=0;d<this.N.length;d++){var e=this.N[d].B.aa,f=this.N[d].B.ya;this.N[d].B.zi.Wg(b[0],b[1],b[2],c[0],c[1],c[2],e[0],e[1],e[2],f[0],f[1],f[2])&&a.push(this.N[d])}e=1.0E20;f=n;for(d=0;d<a.length;d++){var g=a[d].B.Je(b[0],b[1],b[2],c[0],c[1],c[2]);g&&g.M<e&&(f=j,e=g.M)}return f?(b=e*c[0],a=e*c[1],c=e*c[2],b=Math.sqrt(b*b+a*a+c*c)*Mc,
0>e&&(b=-b),this.ym=b):this.ym};u.ti=fa("Ok");var Gf=0,Hf=1;function Sf(a){this.c=a;this.ga=[]}
Sf.prototype.tb=function(){for(var a=0;a<this.ga.length;a++){var b=new O;b.da(this.c.Ub);b.a[12]+=this.ga[a].F[0];b.a[13]+=this.ga[a].F[1];b.a[14]+=this.ga[a].F[2];this.c.Rc();this.c.Sc(b);var b=this.ga[a],c=this.ga[a],d=this.c.b;d.colorMask(n,n,n,n);d.enable(d.CULL_FACE);d.enable(d.DEPTH_TEST);d.depthMask(n);d.depthFunc(d.GEQUAL);d.enable(d.STENCIL_TEST);d.stencilFunc(d.ALWAYS,0,0);d.stencilOp(d.KEEP,d.KEEP,d.INCR);d.cullFace(d.FRONT);for(var e=0;e<b.length;e++)b[e].ta();d.stencilOp(d.KEEP,d.KEEP,
d.DECR);d.cullFace(d.BACK);for(e=0;e<b.length;e++)b[e].ta();d.depthMask(j);d.colorMask(j,j,j,j);d.cullFace(d.FRONT);d.stencilFunc(d.NOTEQUAL,0,1);d.stencilOp(d.KEEP,d.KEEP,d.KEEP);d.enable(d.BLEND);d.depthMask(j);for(e=0;e<c.length;e++)c[e].ta();d.stencilFunc(d.NOTEQUAL,0,2);for(e=0;e<c.length;e++)c[e].ta();d.disable(d.BLEND);d.enable(d.DEPTH_TEST);d.enable(d.CULL_FACE);d.cullFace(d.BACK);d.depthFunc(d.LESS);d.disable(d.STENCIL_TEST);this.c.Kd()}};
Sf.prototype.ol=function(a){this.ga.push(a);return this.ga.length-1};Sf.prototype.ri=function(a){this.ga.splice(a,1)};function Tf(){this.name="ogGeometry";this.type=Oa;this.hb=[];this.tg=[];this.Ga=-1;this.P=n;this.re="";this.options=this.pd=this.le=k;this.Kf=-1;this.Xm=this.xe=k}Tf.prototype=new G;u=Tf.prototype;
u.Ra=function(a){this.options=a;a.url&&Uf(this,a.url);a.jsonobject&&this.oc(a.jsonobject);if("EarthPolyline"==a.type)this.Xm=Y(cb,this,this.options),this.Ga=Vf(this).Id(this.Xm.Oe);else if("solidcube"==a.type){y(a.srs)||(a.srs="EPSG:4326");y(a.position)||(a.position=[0,0,0]);y(a.color)||(a.color=[1,1,1]);var b=this.parent.parent.c,c=k;b.e&&b.e.v&&(c=b.e.v.Ef);if(c){var b=new P(b),d=a.position,e=a.length,f=a.color;"EPSG:4326"==a.srs?(sd(b,[0,0,0],[e,e,e],f),b.fh(d[0],d[1],d[2],0,0,0),this.Ga=c.Id([[b]])):
"cartesian"==a.srs&&(sd(b,d,[e,e,e],f),this.Ga=c.Id([[b]]))}}else if("solidgeosphere"==a.type&&(y(a.color)||(a.color=[1,1,1]),y(a.subdivisions)||(a.subdivisions=1),b=this.parent.parent.c,c=k,b.e&&b.e.v&&(c=b.e.v.Ef),c))b=new P(b),ud(b,a.color,a.subdivisions),this.Ga=c.Id([[b]])};u.ob=function(){Vf(this).Lj(this.Ga);if(this.xe!=k)H(this.xe);else{for(var a=0;a<this.hb.length;a++)H(this.hb[a]);this.ma=k}};function Vf(a){var b=k,a=a.parent.parent.c;a.e&&a.e.v&&(b=a.e.v.Ef);return b}
u.Ie=function(a,b,c,d,e,f){for(var g=0;g<this.hb.length;g++)this.hb[g].Ie(a,b,c,d,e,f)};u.ih=function(a,b,c,d){for(var e=0;e<this.hb.length;e++)this.hb[e].ih(a,b,c,d)};u.Eb=function(a,b,c){for(var d=0;d<this.hb.length;d++)this.hb[d].Eb(a,b,c)};u.nf=function(a,b,c){for(var d=0;d<this.hb.length;d++)this.hb[d].nf(a,b,c)};u.qa=function(){if(this.xe!=k)this.xe.qa();else for(var a=0;a<this.hb.length;a++)this.hb[a].qa()};u.ra=function(){if(this.xe!=k)this.xe.ra();else for(var a=0;a<this.hb.length;a++)this.hb[a].ra()};
u.mf=function(a,b,c,d){if(this.xe==k)for(var e=0;e<this.hb.length;e++)this.hb[e].mf(a,b,c,d)};u.Sj=function(){4==this.X.readyState&&(404==this.X.status?this.pd&&this.pd(this.id):this.oc(dd(this.X.responseText)))};
u.oc=function(a){if("pointcloud"==a.Type)this.options=a,this.xe=Y(bb,this,this.options),a=Vf(this),this.Ga=a.Id(this.xe.Dd);else{for(var b=0;b<a.length;b++){this.options.jsonobject=a[b];var c=Y(Pa,this,this.options);this.hb.push(c);this.tg.push(c.Fd)}this.le&&this.le(this.id);a=Vf(this);this.Ga=a.Id(this.tg)}};function Uf(a,b){b==k?alert("invalid json-url"):(a.re=b,a.X=new window.XMLHttpRequest,a.X.open("GET",a.re,j),a.X.onreadystatechange=function(){a.Sj()},a.X.send())};function Wf(a){this.c=a;this.ma=[];this.Qe=new Me}
Wf.prototype.tb=function(a,b){this.Qe.xi(b);for(var c=a.a[0],d=a.a[1],e=a.a[2],f=0;f<this.ma.length;f++)if(this.ma[f]instanceof yd){var g=this.ma[f];g.P||g.ta()}else if(this.ma[f]instanceof Xf)g=this.ma[f],g.P||g.ta();else for(var g=this.ma[f],i=0;i<g.length;i++)for(var l=g[i],m=0;m<l.length;m++){var o=l[m];if(!o.P){var r=o.aa[0]-c,q=o.aa[1]-d,t=o.aa[2]-e,r=r*r+q*q+t*t,q=o.Cn*o.Cn;this.Qe.wi(o.aa[0],o.aa[1],o.aa[2],o.ya[0],o.ya[1],o.ya[2])&&!(r>q)&&(this.c.b.enable(this.c.b.BLEND),this.c.b.depthFunc(this.c.b.LEQUAL),
this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA),o.ta(),this.c.b.disable(this.c.b.BLEND))}}};Wf.prototype.Id=function(a){this.ma.push(a);return this.ma.length-1};Wf.prototype.Lj=function(a){this.ma.splice(a,1)};
Wf.prototype.kf=function(a,b){for(var c=this.c.gf(a,b,this.c.wa,j),d=1E4,e=k,f=0;f<this.ma.length;f++)for(var g=this.ma[f],i=0;i<g.length;i++)for(var l=g[i],m=0;m<l.length;m++){var o=l[m];if(!o.P){o.Zl(c.x,c.y,c.p,c.me,c.ne,c.oe);var r=o.Je(c.x,c.y,c.p,c.me,c.ne,c.oe);r&&r.M<d&&(d=r.M,e=o)}}return e?e.Bo:-1};function Yf(a){this.Fa=k;this.Pb=new N;this.Xk=this.Tj=this.xh=this.Ef=this.Wh=k;this.Ci=a.rendertotexture;this.l=k;this.elevation=this.No=0;this.jm=n;this.Re=k;"custom"==a.type&&(this.jm=j);this.gd=p();this.hd=function(){if(this.Ci){var a=this.l;this.c.lf.push(a);a.mh();a=this.c.b;a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT|a.STENCIL_BUFFER_BIT);a.enable(a.DEPTH_TEST);a.disable(a.CULL_FACE)}if(this.Fa){if(this.Re){a=this.c;a.b.disable(a.b.DEPTH_TEST);this.Re.ta();a=this.c;
a.b.enable(a.b.DEPTH_TEST)}this.Fa.tb(this.Pb,this.c.wa)}this.Xk.tb(this.Pb,this.c.wa);this.Wh.tb(this.Pb,this.c.wa);this.Ef.tb(this.Pb,this.c.wa);this.xh.tb(this.Pb,this.c.wa);this.Tj.tb(this.Pb,this.c.wa);if(this.Ci){Je(this.c);if(this.No==0){if(y(this.l.Ya)&&this.l.Ya!==k)this.l.Ya.mode="pt";this.l.U(0,0,0,0,1,1,j,j,1)}}};this.jd=function(a){var c=a.hf();this.Pb.m(c.x,c.y,c.p);this.elevation=a.Od.elevation};this.Ce=function(){if(!this.jm){this.Re=new P(this.c);this.Ci?ud(this.Re,[1,0,1,0],3):ud(this.Re,
[0,0,0,1],2);this.Fa=new Nf(this.c)}this.Xk=new Sf(this.c);this.Wh=new Le(this.c);this.Ef=new Wf(this.c);this.xh=new Ne(this.c);this.Tj=new Ke(this.c)};this.Be=function(){if(this.Re){this.Re.s();this.Re=k}if(this.Fa){this.Fa.s();this.Fa=k}};this.yj=function(a,c){if(this.Ci)this.l==k?this.l=new Q(this.c,j,a,c,j):wd(this.l,a,c,j)};this.Fe=p()}Yf.prototype=new ne;function Zf(a){this.no=a;this.Am=U(this.no,Eb?"DOMMouseScroll":"mousewheel",this)}Ca(Zf,pe);var $f="mousewheel";
Zf.prototype.handleEvent=function(a){var b=0,c=0,d=0,a=a.pe;if("mousewheel"==a.type){c=1;if(Db||Fb&&(Ib||Rb("532.0")))c=40;d=Fb&&yb&&0!=-a.wheelDelta%c?-a.wheelDelta:-a.wheelDelta/c;y(a.wheelDeltaX)?(b=Fb&&yb&&0!=-a.wheelDeltaX%c?-a.wheelDeltaX:-a.wheelDeltaX/c,c=Fb&&yb&&0!=-a.wheelDeltaY%c?-a.wheelDeltaY:-a.wheelDeltaY/c):c=d}else d=a.detail,100<d?d=3:-100>d&&(d=-3),y(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;"number"==typeof this.Dm&&Math.min(Math.max(b,-this.Dm),this.Dm);"number"==typeof this.Em&&
(c=Math.min(Math.max(c,-this.Em),this.Em));b=new ag(d,a,0,c);try{this.dispatchEvent(b)}finally{b.Df()}};Zf.prototype.Nd=function(){Zf.Yf.Nd.call(this);X(this.Am);delete this.Am};function ag(a,b,c,d){b&&this.Pd(b,h);this.type=$f;this.detail=a;this.Cf=d}Ca(ag,Od);function bg(){this.ba=new O;this.nd=new N;this.nd.m(1,0,0);this.t=0;this.q=-0.03;this.Ma=0;this.o=7.616;this.n=45.9088;this.g=17E3;this.uc=this.tc=this.de=this.ee=0;this.qf=this.md=this.ph=this.oh=this.eb=1;this.Ca=this.Da=0;this.Ob=n;this.ka=this.ja=0;this.wc=new N;this.wf=this.vf=0;this.ae=this.Nb=n;this.r=Array(3);this.Xb=new T(0,0,0);this.Dc=new O;this.ue=new O;this.yd=new O;this.Tb=new O;this.ba=new O;this.Ab=new O;this.te=new O;this.Tb.ef();this.La=100;this.oa=k;this.vd=this.ud=this.Bc=this.Ac=
this.zc=this.td=this.sd=0;this.Xg=fa("ae");this.gd=function(){this.c.jh(this.ba)};this.hd=p();this.jd=function(a){a.Yc=0;this.Xb.m(this.o,this.n,this.g);this.Xb.V(this.r);this.nd.m(this.r[0],this.r[1],this.r[2]);this.ue.kd(this.r[0],this.r[1],this.r[2]);this.yd.Sd(this.o,this.n);this.Dc.Og(this.t,this.q,this.Ma);this.Ab.W(this.ue,this.yd);this.te.W(this.Ab,this.Dc);this.Ab.W(this.te,this.Tb);this.ba.dg(this.Ab);a.Ii=this.t;a.Aa(this.r[0],this.r[1],this.r[2]);$c(a,this.o,this.n,this.g);this.oa&&(this.oa.gc=
this.o,this.oa.fc=this.n,this.oa.dc=this.g,this.oa.pitch=57.29577951308232*this.q,this.oa.Va=57.29577951308232*this.t,this.oa.kc=57.29577951308232*this.Ma)};this.Ce=p();this.Be=p();this.fg=function(){X(this.sd);X(this.td);X(this.zc);X(this.Ac);X(this.Bc);X(this.ud);X(this.vd)};this.Fe=function(a){this.sd=U(window,Id,this.De,n,this);this.td=U(window,Jd,this.Ee,n,this);this.zc=U(a,Fd,this.Ud,n,this);this.Bc=U(a,Gd,this.Wd,n,this);this.Ac=U(a,Hd,this.Vd,n,this);a=new Zf(a);this.vd=U(a,$f,this.jf,n,this)};
this.jf=function(a){0<a.Cf?0<this.Ca?this.Da=this.Ca=0:this.Da+=0.05:0<this.Da?this.Ca=this.Da=0:this.Ca+=0.05};this.De=function(a){81==a.keyCode?this.uc=this.eb*this.qf:65==a.keyCode?this.uc=-this.eb*this.qf:83==a.keyCode?this.tc=0.5*this.md:88==a.keyCode&&(this.tc=-0.5*this.md)};this.Ee=function(a){81==a.keyCode?this.uc=0:65==a.keyCode?this.uc=0:83==a.keyCode?this.tc=0:88==a.keyCode&&(this.tc=0)};this.Ud=function(a){Td(a,Pd)&&(this.wc.m(0,0,0),this.vf=a.offsetX,this.wf=a.offsetY,this.Nb=j);this.ja=
a.offsetX;this.ka=a.offsetY;if(Td(a,Qd))return n};this.Wd=function(a){Td(a,Pd)&&(this.Nb=n);this.ja=a.offsetX;this.ka=a.offsetY;this.ee=this.de=0;if(Td(a,Qd))return n};this.Vd=function(a){this.ja=a.offsetX;this.ka=a.offsetY;if(this.Nb){var b=(this.vf-a.offsetX)/this.c.width,c=(this.wf-a.offsetY)/this.c.height,b=b*b,c=c*c;this.wc.m(a.offsetX-this.vf,this.c.height-1-a.offsetY-(this.c.height-1-this.wf),0);this.wc.Pc();var a=this.wc.a[0],d=this.wc.a[1],e=0,f=0;0<a?e=1:0>a&&(e=-1);0<d?f=1:0>d&&(f=-1);
this.de=this.eb*this.oh*c*f;this.ee=this.ph*b*e}};this.Ge=function(a){var b=this.tc*a/500,c=this.ee*a/500,d=this.uc*a,e=0,e=0,f=this.g/5E5*(this.g/5E5);10<f?f=10:0.0010>f&&(f=0.0010);var g=f*this.de*a/250;if(0<this.Da){var i=0.5*this.md*a/1E3;this.q+=i;this.Da-=i;0>this.Da&&(this.q+=this.Da,this.Da=0);this.Ob=j}0<this.Ca&&(i=0.5*this.md*a/1E3,this.q-=i,this.Ca-=i,0>this.Ca&&(this.q-=this.Ca,this.Ca=0),this.Ob=j);b&&(this.q+=b,this.Ob=j);c&&(this.t+=c,this.t>2*Math.PI&&(this.t-=2*Math.PI),0>this.t&&
(this.t=2*Math.PI-this.t),this.Ob=j);this.Ob&&(e=this.c.Ng(),isNaN(e)&&(e=this.La));d&&(a=1E3*d*f,this.g+=a,e+=a,7E6<this.g&&(this.g=7E6));if(g){a=0.017453292519943295*this.n;d=Math.sin(a);f=Math.cos(a);c=this.t;b=0.017453292519943295*this.o;d=Jc/Math.sqrt(1-Kc*d*d);f=Jc/(d/(1+Lc*f*f))*g*Math.cos(c);i=Jc/d*g*Math.sin(c)/Math.cos(a);g=Jc/d*g*Math.sin(c)*Math.tan(a)+c;this.o=57.29577951308232*(i+b);this.n=57.29577951308232*(f+a);for(this.t=g;180<this.o;)this.o-=360;for(;-180>this.o;)this.o+=360;for(;90<
this.n;)this.n=180-this.n;for(;-90>this.n;)this.n=-180-this.n;this.Ob=j}e<this.La&&this.Ob&&(this.g+=this.La-e);this.oa&&(this.oa.gc=this.o,this.oa.fc=this.n,this.oa.dc=this.g,this.oa.pitch=57.29577951308232*this.q,this.oa.Va=57.29577951308232*this.t,this.oa.kc=57.29577951308232*this.Ma)}}bg.prototype=new ne;u=bg.prototype;u.Aa=function(a,b,c){this.o=a;this.n=b;this.g=c};u.hf=function(){return{longitude:this.o,latitude:this.n,elevation:this.g}};u.Eb=function(a,b,c){this.t=a;this.q=b;this.Ma=c};
u.hh=p();u.Vg=function(){return{Va:this.t,pitch:this.q,kc:this.Ma}};function cg(){this.ba=new O;this.ae=this.ub=n;this.nd=new N;this.nd.m(1,0,0);this.t=0;this.q=-1.5707963267948966;this.Ma=0;this.o=7.77442050946391;this.n=47.472720418012834;this.g=75E5;this.vb=dg;this.uc=this.tc=this.de=this.ee=this.tf=this.uf=this.sf=this.rf=this.f=0;this.qf=this.md=this.ph=this.oh=this.eb=1;this.Ca=this.Da=0;new O;this.ka=this.ja=0;this.wc=new N;this.pf=this.be=this.Nb=n;this.r=Array(3);this.Xb=new T(0,0,0);this.Dc=new O;this.ue=new O;this.yd=new O;this.Tb=new O;this.ba=new O;this.Ab=
new O;this.te=new O;this.Tb.ef();this.ce=n;this.th=this.sh=this.rh=0;this.qh=1;this.sc=n;this.ia={};this.ha={};this.of=new O;this.nh=new O;this.$d=new O;new O;new O;this.La=50;this.ve=1E7;this.za=Uc;this.sa=0;this.rd=n;this.Za=[0,0];this.fb=0;this.fe=this.Sa=n;this.vd=this.ud=this.Bc=this.Ac=this.zc=this.td=this.sd=0;this.Xg=function(a){a||(this.ub=n);this.ae=a};this.gd=function(){this.c.jh(this.ba)};this.hd=p();this.jd=function(a){1==Mc?(this.Hb=1,this.Fb=1E4):(this.Hb=1.0E-5,this.Fb=10);this.za=
a.za;this.sa=a.sa;a.rd=this.rd;a.Za[0]=this.Za[0];a.Za[1]=this.Za[1];a.Yc=1;this.ub=this.ae?j:0!=a.Dk?j:n;if(this.vb==eg&&!this.ub&&!this.c.ua.ec&&(this.be&&(this.be=n,this.Vj(this.ja,this.ka)),this.Nb&&this.pf))this.pf=n,this.Uj(this.ja,this.ka);this.Xb.m(this.o,this.n,this.g);this.Xb.V(this.r);this.nd.m(this.r[0],this.r[1],this.r[2]);this.ue.kd(this.r[0],this.r[1],this.r[2]);this.yd.Sd(this.o,this.n);this.ce?(this.Dc.bg(this.rh,this.sh,this.th,this.qh),this.Tb.vj()):this.Dc.Og(this.t,this.q,this.Ma);
this.Ab.W(this.yd,this.Dc);this.ba.W(this.Ab,this.Tb);this.ba.Ke();this.Vk=new N(this.r[0],this.r[1],this.r[2]);var b=this.ba.Qa(this.Vk);this.ba.a[12]=-b.a[0];this.ba.a[13]=-b.a[1];this.ba.a[14]=-b.a[2];a.Ii=this.t;a.Aa(this.r[0],this.r[1],this.r[2]);$c(a,this.o,this.n,this.g)};this.Ce=p();this.Be=p();this.fg=function(){X(this.sd);X(this.td);X(this.zc);X(this.Ac);X(this.Bc);X(this.ud);X(this.vd)};this.Fe=function(a){this.sd=U(window,Id,this.De,n,this);this.td=U(window,Jd,this.Ee,n,this);this.zc=
U(a,Fd,this.Ud,n,this);this.Ac=U(a,Hd,this.Vd,n,this);this.Bc=U(a,Gd,this.Wd,n,this);this.ud=U(a,Ed,this.Zg,n,this);a=new Zf(a);this.vd=U(a,$f,this.jf,n,this)};this.ld=function(){var a=dg;(this.f&fg)==gg&&(0==(this.f&hg)?a=eg:(this.f&hg)==ig?a=jg:(this.f&hg)==kg&&(a=lg));(this.f&fg)==mg&&(a=lg);if(a!=this.vb&&(this.vb==lg&&(this.t=this.uf+45*Math.PI*this.eb*(this.ja-this.rf)/(180*this.c.height),this.q=this.tf+45*Math.PI*this.eb*(this.sf-this.ka)/(180*this.c.height)),this.vb=a,this.vb==lg))this.rf=
this.ja,this.sf=this.ka,this.uf=this.t,this.tf=this.q;this.vb==lg&&(this.t=this.uf+45*Math.PI*this.eb*(this.ja-this.rf)/(180*this.c.height),this.q=this.tf+45*Math.PI*this.eb*(this.sf-this.ka)/(180*this.c.height))};this.jf=function(a){if(this.ub||this.c.ua.ec)this.fb=0;else{if(this.vb==dg)if(0==(this.f&hg)){var b={},c,d;0<this.fb?(c=this.Za[0],d=this.Za[1]):(c=this.ja,d=this.ka);this.c.Xd(c,d,b);if(b.hit){this.Za=[c,d];this.fb=500;this.Xb.m(this.o,this.n,this.g);this.Xb.V(this.r);c=this.r[0]-b.x;d=
this.r[1]-b.y;b=this.r[2]-b.z;0<a.Cf?(c*=0.2,d*=0.2,b*=0.2):(c*=-0.2,d*=-0.2,b*=-0.2);var e=new T(0,0,0);e.pc(this.r[0]+c,this.r[1]+d,this.r[2]+b);this.o=e.H[0];this.n=e.H[1];this.fe?e.H[2]>this.g&&(this.g=e.H[2]):this.g=e.H[2];this.Sa=j;this.g<this.La?(this.g=this.La,this.Sa=j):this.g>this.ve&&(this.g=this.ve,this.Sa=j)}}else(this.f&hg)==ig&&(this.q+=5*a.Cf*Math.PI*this.eb/180);return this.Y(a)}};this.De=function(a){if(!this.ub&&!this.c.ua.ec){66==a.keyCode&&(this.ce=n);if(16==a.keyCode)return this.f|=
ig,this.Y(a);if(17==a.keyCode)return this.f|=kg,this.Y(a);if(37==a.keyCode||65==a.keyCode)return this.f|=ng,this.Y(a);if(38==a.keyCode||87==a.keyCode)return this.f|=og,this.Y(a);if(39==a.keyCode||68==a.keyCode)return this.f|=pg,this.Y(a);if(40==a.keyCode||83==a.keyCode)return this.f|=qg,this.Y(a);this.ld();return j}};this.Ee=function(a){if(16==a.keyCode)return this.f&=~ig,this.Y(a);if(17==a.keyCode)return this.f&=~kg,this.Y(a);if(37==a.keyCode||65==a.keyCode)return this.f&=~ng,this.Y(a);if(38==a.keyCode||
87==a.keyCode)return this.f&=~og,this.Y(a);if(39==a.keyCode||68==a.keyCode)return this.f&=~pg,this.Y(a);if(40==a.keyCode||83==a.keyCode)return this.f&=~qg,this.Y(a);this.ld();return j};this.Zg=function(a){if(!this.ub&&!this.c.ua.ec){var b={};this.c.Xd(this.ja,this.ka,b);if(b.hit){this.c.gh(2E3);var c=this.g;1E6<c?Ee(this.c.ua,b.lng,b.lat,1E6,h,h,h):25E4<c?Ee(this.c.ua,b.lng,b.lat,25E4,h,h,h):5E4<c?Ee(this.c.ua,b.lng,b.lat,5E4,h,h,h):(c=b.elv+5E3,Ee(this.c.ua,b.lng,b.lat,c,0,-90,0));this.Za=[this.ja,
this.ka];this.fb=2500}return this.Y(a)}};this.Ud=function(a){if(this.c&&this.c.L&&!this.ub&&!this.c.ua.ec){this.ja=a.offsetX-this.c.L.offsetLeft;this.ka=a.offsetY-this.c.L.offsetTop;if(Td(a,Pd))this.f|=gg,document.body.style.cursor="move",this.be=j;else{if(Td(a,Qd))return n;Td(a,Rd)&&(this.f|=mg)}this.ld();return this.Y(a)}};this.Wd=function(a){if(this.c&&this.c.L){this.Nb=j;this.ja=a.offsetX-this.c.L.offsetLeft;this.ka=a.offsetY-this.c.L.offsetTop;if(Td(a,Pd))this.f&=~gg,this.sc=n,document.body.style.cursor=
"default",this.be=n;else{if(Td(a,Qd))return n;Td(a,Rd)&&(this.f&=~mg)}this.ld();return this.Y(a)}};this.Vd=function(a){if(this.c&&this.c.L&&!this.ub&&!this.c.ua.ec)return this.Nb=this.vb==eg,this.pf=j,this.ja=a.offsetX-this.c.L.offsetLeft,this.ka=a.offsetY-this.c.L.offsetTop,this.ld(),this.Y(a)};this.Ge=function(a){if(this.za==Vc){var b=this.sa*this.g/5E3;this.fe||(this.g-=a*b);this.g<this.La&&(this.g=this.La);this.Sa=j}else this.za==Wc?(b=this.sa*this.g/5E3,this.g+=a*b,this.g>this.ve&&(this.g=this.ve),
this.Sa=j):this.za==Yc?this.t=this.sa:this.za==Zc&&(b=Math.sin(this.sa),this.q+=a/5E3*-Math.cos(this.sa),this.t+=a/5E3*b,this.q<-Math.PI/2?this.q=-Math.PI/2:0<this.q&&(this.q=0));0<this.fb&&(this.rd=j,this.fb-=a,0>=this.fb&&(this.fb=0,this.rd=n));if((this.f&rg||this.za==Xc)&&0==(this.f&hg)){b=0;this.f&og&&(b+=1);this.f&qg&&(b-=1);var c=0;this.f&ng&&(c-=1);this.f&pg&&(c+=1);var d;d=this.za==Xc?Math.PI*this.sa/180:Math.atan2(c,b);b=this.g/5E5;10<b?b=10:0.0010>b&&(b=0.0010);var a=b*a/5E4,b=Math.PI*this.n/
180,e=Math.sin(b),c=Math.cos(b),f=this.t+d;d=Math.PI*this.o/180;var g=Jc/Math.sqrt(1-Kc*e*e),e=Jc/g*a*Math.sin(f)/Math.cos(b),a=Jc/(g/(1+Lc*c*c))*a*Math.cos(f)+b;this.o=180*(e+d)/Math.PI;this.n=180*a/Math.PI}for(;180<this.o;)this.o-=180;for(;-180>this.o;)this.o+=180;for(;90<this.n;)this.n-=180;for(;-90>this.n;)this.n+=180;this.Sa&&(this.Sa=n,a=this.c.cg(this.o,this.n),a.hasvalue?(this.g-this.La<a.elevation&&(this.g=a.elevation+this.La,this.Sa=j),this.fe=n):5E3>this.g&&(this.Sa=this.fe=j))};this.Eb=
function(a,b,c){this.ce=n;this.Tb.ef();this.t=a;this.q=b;this.Ma=c};this.hh=function(a,b,c,d){this.ce=j;this.rh=a;this.sh=b;this.th=c;this.qh=d;var e=a,a=b,b=e,e=a*b+c*d;if(0.499<e)this.t=2*Math.atan2(a,d),this.q=Math.PI/2,this.Ma=0;else if(-0.499>e)this.t=-2*Math.atan2(a,d),this.q=-Math.PI/2,this.Ma=0;else{var f=c*c;this.t=Math.atan2(2*b*d-2*a*c,1-2*b*b-2*f);this.q=Math.asin(2*e);this.Ma=Math.atan2(2*a*d-2*b*c,1-2*a*a-2*f)}};this.Vj=function(a,b){this.of.da(this.$d);var c={};this.c.gg(a,b,c,j);c.hit?
(this.ia.x=c.x,this.ia.y=c.y,this.ia.p=c.z,this.sc=j):this.sc=n};this.Uj=function(a,b){if(this.sc){var c={};this.c.gg(a,b,c,n);if(c.hit)if(this.ha.x=c.x,this.ha.y=c.y,this.ha.p=c.z,this.sc=j,this.ha.x==this.ia.x&&this.ha.y==this.ia.y&&this.ha.p==this.ia.p)this.$d.da(this.of);else{var d=this.ia.x*this.ha.x+this.ia.y*this.ha.y+this.ia.p*this.ha.p,c=Math.sqrt(0.5*(1-d)),d=Math.sqrt(0.5*(1+d)),e,f,g;e=this.ia.y*this.ha.p-this.ia.p*this.ha.y;f=this.ha.x*this.ia.p-this.ia.x*this.ha.p;g=this.ia.x*this.ha.y-
this.ia.y*this.ha.x;c/=Math.sqrt(e*e+f*f+g*g);this.nh.bg(e*c,f*c,g*c,d);this.$d.W(this.of,this.nh);c=[];(new T(this.o,this.n,this.g)).V(c);c=this.$d.Qa(new N(c[0],c[1],c[2]));d=new T(0,0,0);d.pc(c.a[0],c.a[1],c.a[2]);this.o=d.H[0];this.n=d.H[1];this.Sa=j}else this.sc=n}};this.Y=function(a){a=a?a:window.event;a.stopPropagation&&a.stopPropagation();a.preventDefault&&a.preventDefault();a.cancelBubble=j;a.cancel=j;return a.returnValue=n};this.Ql=fa("La")}Ca(cg,bg);
var gg=1,mg=4,fg=7,ng=16,og=32,pg=64,qg=128,rg=240,ig=256,kg=512,hg=768,dg=0,eg=1,lg=2,jg=3;function sg(){this.zd=new O;this.Hb=1.0E-5;this.Fb=10;this.Pe=45;this.gd=function(){this.c.Vl(this.zd)};this.hd=p();this.jd=function(a){this.zd.Hl(this.Pe,this.c.width/this.c.height,this.Hb,this.Fb);a.eg[a.eg.length-1].da(this.zd)};this.Ce=p();this.Be=p();this.Fe=p()}sg.prototype=new ne;function tg(a){this.ba=new O;this.ae=this.ub=n;this.nd=new N;this.nd.m(1,0,0);this.t=0;this.q=-1.5707963267948966;this.Ma=0;this.o=7.77442050946391;this.n=47.472720418012834;this.g=75E5;this.vb=ug;this.uc=this.tc=this.de=this.ee=this.tf=this.uf=this.sf=this.rf=this.f=0;this.qf=this.md=this.ph=this.oh=this.eb=1;this.Ca=this.Da=0;new O;this.ka=this.ja=0;this.wc=new N;this.pf=this.be=this.Nb=n;this.r=Array(3);this.Xb=new T(0,0,0);this.Dc=new O;this.ue=new O;this.yd=new O;this.Tb=new O;this.ba=new O;
this.Ab=new O;this.te=new O;this.Tb.ef();this.ce=n;this.th=this.sh=this.rh=0;this.qh=1;this.sc=n;this.ia={};this.ha={};this.of=new O;this.nh=new O;this.$d=new O;new O;new O;this.La=50;this.ve=1E7;this.za=Uc;this.sa=0;this.rd=n;this.Za=[0,0];this.fb=0;this.fe=this.Sa=n;this.Pe=this.Fb=this.Hb=-1;if(y(a)&&(y(a.Near)&&(this.Hb=a.Near),y(a.Far)&&(this.Fb=a.Far),y(a.Fov)))this.Pe=a.Fov;this.vd=this.ud=this.Bc=this.Ac=this.zc=this.td=this.sd=0;this.Hb=1.0E-7;this.Fb=1.2;this.Xg=function(a){a||(this.ub=
n);this.ae=a};this.gd=function(){this.c.jh(this.ba)};this.hd=p();this.jd=function(a){1==Mc?(this.Hb=1,this.Fb=1E4):3E3>this.g?(this.Hb=1.0E-7,this.Fb=1):(this.Hb=1.0E-5,this.Fb=10);0<=this.Pe&&(this.c.e.hc.Pe=this.Pe);0<=this.Hb&&(this.c.e.hc.Hb=this.Hb);0<=this.Fb&&(this.c.e.hc.Fb=this.Fb);this.za=a.za;this.sa=a.sa;a.rd=this.rd;a.Za[0]=this.Za[0];a.Za[1]=this.Za[1];a.Yc=1;this.ub=this.ae?j:0!=a.Dk?j:n;if(this.vb==vg&&!this.ub&&!this.c.ua.ec&&(this.be&&(this.be=n,this.Vj(this.ja,this.ka)),this.Nb&&
this.pf))this.pf=n,this.Uj(this.ja,this.ka);this.Xb.m(this.o,this.n,this.g);this.Xb.V(this.r);this.nd.m(this.r[0],this.r[1],this.r[2]);this.ue.kd(this.r[0],this.r[1],this.r[2]);this.yd.Sd(this.o,this.n);this.ce?(this.Dc.bg(this.rh,this.sh,this.th,this.qh),this.Tb.vj()):this.Dc.Og(this.t,this.q,this.Ma);this.Ab.da(this.yd);this.te.W(this.Ab,this.Dc);this.Ab.W(this.te,this.Tb);this.ba.da(this.Ab);this.ba.Ke();this.Vk=new N(this.r[0],this.r[1],this.r[2]);var c=this.ba.Qa(this.Vk);this.ba.a[12]=-c.a[0];
this.ba.a[13]=-c.a[1];this.ba.a[14]=-c.a[2];a.Ii=this.t;a.Aa(this.r[0],this.r[1],this.r[2]);$c(a,this.o,this.n,this.g)};this.Ce=p();this.Be=p();this.fg=function(){X(this.sd);X(this.td);X(this.zc);X(this.Ac);X(this.Bc);X(this.ud);X(this.vd)};this.Fe=function(a){this.sd=U(window,Id,this.De,n,this);this.td=U(window,Jd,this.Ee,n,this);this.zc=U(a,Fd,this.Ud,n,this);this.Ac=U(a,Hd,this.Vd,n,this);this.Bc=U(a,Gd,this.Wd,n,this);this.ud=U(a,Ed,this.Zg,n,this);a=new Zf(a);this.vd=U(a,$f,this.jf,n,this)};
this.ld=function(){var a=ug;(this.f&wg)==xg&&(0==(this.f&yg)?a=vg:(this.f&yg)==zg?a=Ag:(this.f&yg)==Bg&&(a=Cg));(this.f&wg)==Dg&&(a=Cg);if(a!=this.vb&&(this.vb==Cg&&(this.t=this.uf+45*Math.PI*this.eb*(this.ja-this.rf)/(180*this.c.height),this.q=this.tf+45*Math.PI*this.eb*(this.sf-this.ka)/(180*this.c.height)),this.vb=a,this.vb==Cg))this.rf=this.ja,this.sf=this.ka,this.uf=this.t,this.tf=this.q;this.vb==Cg&&(this.t=this.uf+45*Math.PI*this.eb*(this.ja-this.rf)/(180*this.c.height),this.q=this.tf+45*Math.PI*
this.eb*(this.sf-this.ka)/(180*this.c.height))};this.jf=function(a){if(this.ub||this.c.ua.ec)this.fb=0;else{if(this.vb==ug)if(0==(this.f&yg)){var c={},d,e;0<this.fb?(d=this.Za[0],e=this.Za[1]):(d=this.ja,e=this.ka);this.c.Xd(d,e,c);if(c.hit){this.Za=[d,e];this.fb=500;this.Xb.m(this.o,this.n,this.g);this.Xb.V(this.r);d=this.r[0]-c.x;e=this.r[1]-c.y;c=this.r[2]-c.z;0<a.Cf?(d*=0.2,e*=0.2,c*=0.2):(d*=-0.2,e*=-0.2,c*=-0.2);var f=new T(0,0,0);f.pc(this.r[0]+d,this.r[1]+e,this.r[2]+c);this.o=f.H[0];this.n=
f.H[1];this.fe?f.H[2]>this.g&&(this.g=f.H[2]):this.g=f.H[2];this.Sa=j;this.g<this.La?(this.g=this.La,this.Sa=j):this.g>this.ve&&(this.g=this.ve,this.Sa=j)}}else(this.f&yg)==zg&&(this.q+=5*a.Cf*Math.PI*this.eb/180);return this.Y(a)}};this.De=function(a){if(!this.ub&&!this.c.ua.ec){66==a.keyCode&&(this.ce=n);if(16==a.keyCode)return this.f|=zg,this.Y(a);if(17==a.keyCode)return this.f|=Bg,this.Y(a);if(37==a.keyCode||65==a.keyCode)return this.f|=Eg,this.Y(a);if(38==a.keyCode||87==a.keyCode)return this.f|=
Fg,this.Y(a);if(39==a.keyCode||68==a.keyCode)return this.f|=Gg,this.Y(a);if(40==a.keyCode||83==a.keyCode)return this.f|=Hg,this.Y(a);this.ld();return j}};this.Ee=function(a){if(16==a.keyCode)return this.f&=~zg,this.Y(a);if(17==a.keyCode)return this.f&=~Bg,this.Y(a);if(37==a.keyCode||65==a.keyCode)return this.f&=~Eg,this.Y(a);if(38==a.keyCode||87==a.keyCode)return this.f&=~Fg,this.Y(a);if(39==a.keyCode||68==a.keyCode)return this.f&=~Gg,this.Y(a);if(40==a.keyCode||83==a.keyCode)return this.f&=~Hg,this.Y(a);
this.ld();return j};this.Zg=function(a){if(!this.ub&&!this.c.ua.ec){var c={};this.c.Xd(this.ja,this.ka,c);if(c.hit){this.c.gh(2E3);var d=this.g;1E6<d?Ee(this.c.ua,c.lng,c.lat,1E6,h,h,h):25E4<d?Ee(this.c.ua,c.lng,c.lat,25E4,h,h,h):5E4<d?Ee(this.c.ua,c.lng,c.lat,5E4,h,h,h):(d=c.elv+5E3,Ee(this.c.ua,c.lng,c.lat,d,0,-90,0));this.Za=[this.ja,this.ka];this.fb=2500}return this.Y(a)}};this.Ud=function(a){if(this.c&&this.c.L&&!this.ub&&!this.c.ua.ec){this.ja=a.offsetX-this.c.L.offsetLeft;this.ka=a.offsetY-
this.c.L.offsetTop;if(Td(a,Pd))this.f|=xg,document.body.style.cursor="move",this.be=j;else{if(Td(a,Qd))return n;Td(a,Rd)&&(this.f|=Dg)}this.ld();return this.Y(a)}};this.Wd=function(a){if(this.c&&this.c.L){this.Nb=j;this.ja=a.offsetX-this.c.L.offsetLeft;this.ka=a.offsetY-this.c.L.offsetTop;if(Td(a,Pd))this.f&=~xg,this.sc=n,document.body.style.cursor="default",this.be=n;else{if(Td(a,Qd))return n;Td(a,Rd)&&(this.f&=~Dg)}this.ld();return this.Y(a)}};this.Vd=function(a){if(this.c&&this.c.L&&!this.ub&&
!this.c.ua.ec)return this.Nb=this.vb==vg,this.pf=j,this.ja=a.offsetX-this.c.L.offsetLeft,this.ka=a.offsetY-this.c.L.offsetTop,this.ld(),this.Y(a)};this.Ge=function(a){if(this.za==Vc){var c=this.sa*this.g/5E3;this.fe||(this.g-=a*c);this.g<this.La&&(this.g=this.La);this.Sa=j}else this.za==Wc?(c=this.sa*this.g/5E3,this.g+=a*c,this.g>this.ve&&(this.g=this.ve),this.Sa=j):this.za==Yc?this.t=this.sa:this.za==Zc&&(c=Math.sin(this.sa),this.q+=a/5E3*-Math.cos(this.sa),this.t+=a/5E3*c,this.q<-Math.PI/2?this.q=
-Math.PI/2:0<this.q&&(this.q=0));0<this.fb&&(this.rd=j,this.fb-=a,0>=this.fb&&(this.fb=0,this.rd=n));if((this.f&Ig||this.za==Xc)&&0==(this.f&yg)){c=0;this.f&Fg&&(c+=1);this.f&Hg&&(c-=1);var d=0;this.f&Eg&&(d-=1);this.f&Gg&&(d+=1);var e;e=this.za==Xc?Math.PI*this.sa/180:Math.atan2(d,c);c=this.g/5E5;10<c?c=10:0.0010>c&&(c=0.0010);var a=c*a/5E4,c=Math.PI*this.n/180,f=Math.sin(c),d=Math.cos(c),g=this.t+e;e=Math.PI*this.o/180;var i=Jc/Math.sqrt(1-Kc*f*f),f=Jc/i*a*Math.sin(g)/Math.cos(c),a=0.05*Jc/(i/(1+
Lc*d*d))*a*Math.cos(g)+c;this.o=180*(0.05*f+e)/Math.PI;this.n=180*a/Math.PI}for(;180<this.o;)this.o-=180;for(;-180>this.o;)this.o+=180;for(;90<this.n;)this.n-=180;for(;-90>this.n;)this.n+=180;this.Sa&&(this.Sa=n,a=this.c.cg(this.o,this.n),a.hasvalue?(this.g-this.La<a.elevation&&(this.g=a.elevation+this.La,this.Sa=j),this.fe=n):5E3>this.g&&(this.Sa=this.fe=j))};this.Eb=function(a,c,d){this.ce=n;this.Tb.ef();this.t=a;this.q=c;this.Ma=d};this.hh=function(a,c,d,e){this.ce=j;this.rh=a;this.sh=c;this.th=
d;this.qh=e;var f=a,a=c,c=f,f=a*c+d*e;if(0.499<f)this.t=2*Math.atan2(a,e),this.q=Math.PI/2,this.Ma=0;else if(-0.499>f)this.t=-2*Math.atan2(a,e),this.q=-Math.PI/2,this.Ma=0;else{var g=d*d;this.t=Math.atan2(2*c*e-2*a*d,1-2*c*c-2*g);this.q=Math.asin(2*f);this.Ma=Math.atan2(2*a*e-2*c*d,1-2*a*a-2*g)}};this.Vj=function(a,c){this.of.da(this.$d);var d={};this.c.gg(a,c,d,j);d.hit?(this.ia.x=d.x,this.ia.y=d.y,this.ia.p=d.z,this.sc=j):this.sc=n};this.Uj=function(a,c){if(this.sc){var d={};this.c.gg(a,c,d,n);
if(d.hit)if(this.ha.x=d.x,this.ha.y=d.y,this.ha.p=d.z,this.sc=j,this.ha.x==this.ia.x&&this.ha.y==this.ia.y&&this.ha.p==this.ia.p)this.$d.da(this.of);else{var e=this.ia.x*this.ha.x+this.ia.y*this.ha.y+this.ia.p*this.ha.p,d=Math.sqrt(0.5*(1-e)),e=Math.sqrt(0.5*(1+e)),f,g,i;f=this.ia.y*this.ha.p-this.ia.p*this.ha.y;g=this.ha.x*this.ia.p-this.ia.x*this.ha.p;i=this.ia.x*this.ha.y-this.ia.y*this.ha.x;d/=Math.sqrt(f*f+g*g+i*i);this.nh.bg(f*d,g*d,i*d,e);this.$d.W(this.of,this.nh);d=[];(new T(this.o,this.n,
this.g)).V(d);d=this.$d.Qa(new N(d[0],d[1],d[2]));e=new T(0,0,0);e.pc(d.a[0],d.a[1],d.a[2]);this.o=e.H[0];this.n=e.H[1];this.Sa=j}else this.sc=n}};this.Y=function(a){a=a?a:window.event;a.stopPropagation&&a.stopPropagation();a.preventDefault&&a.preventDefault();a.cancelBubble=j;a.cancel=j;return a.returnValue=n};this.Ql=fa("La")}Ca(tg,bg);var xg=1,Dg=4,wg=7,Eg=16,Fg=32,Gg=64,Hg=128,Ig=240,zg=256,Bg=512,yg=768,ug=0,vg=1,Cg=2,Ag=3;function Jg(a){this.ba=new O;this.nd=new N;this.nd.m(1,0,0);this.t=0;this.q=-0.03;this.Ma=0;this.o=7.616;this.n=45.9088;this.g=17E3;this.uc=this.tc=this.de=this.ee=0;this.qf=this.md=this.ph=this.oh=this.eb=1;this.Ca=this.Da=0;this.Ob=n;this.ka=this.ja=0;this.wc=new N;this.wf=this.vf=0;this.ae=this.Nb=n;this.r=Array(3);this.Xb=new T(0,0,0);this.Dc=new O;this.ue=new O;this.yd=new O;this.Tb=new O;this.ba=new O;this.Ab=new O;this.te=new O;this.Tb.ef();this.La=100;this.oa=k;this.Hb=1.0E-6;this.Fb=15;this.Pe=
45;this.vd=this.ud=this.Bc=this.Ac=this.zc=this.td=this.sd=0;this.Ai=this.Bi=n;this.Ae=[];y(a.ElevationSteps)&&(this.Ae=a.ElevationSteps);y(a.Near)&&(this.Hb=a.Near);y(a.Far)&&(this.Fb=a.Far);y(a.Fov)&&(this.Pe=a.Fov);this.Dl=0;this.Cl=7E6;this.nc=[];y(a.BoundingRect)&&(this.nc=a.BoundingRect);y(a.BoundingPolygon)&&(this.nc=[]);this.Xg=fa("ae");this.gd=function(){this.c.jh(this.ba)};this.hd=p();this.jd=function(a){a.Yc=0;this.Xb.m(this.o,this.n,this.g);this.Xb.V(this.r);this.nd.m(this.r[0],this.r[1],
this.r[2]);this.ue.kd(this.r[0],this.r[1],this.r[2]);this.yd.Sd(this.o,this.n);this.Dc.Og(this.t,this.q,this.Ma);this.Ab.W(this.ue,this.yd);this.te.W(this.Ab,this.Dc);this.Ab.W(this.te,this.Tb);this.ba.dg(this.Ab);a.Ii=this.t;a.Aa(this.r[0],this.r[1],this.r[2]);$c(a,this.o,this.n,this.g);if(this.oa){this.oa.gc=this.o;this.oa.fc=this.n;this.oa.dc=this.g;this.oa.pitch=this.q*57.29577951308232;this.oa.Va=this.t*57.29577951308232;this.oa.kc=this.Ma*57.29577951308232}this.c.e.hc.Hb=this.Hb;this.c.e.hc.Fb=
this.Fb};this.Ce=p();this.Be=p();this.fg=function(){X(this.sd);X(this.td);X(this.zc);X(this.Ac);X(this.Bc);X(this.ud);X(this.vd)};this.Fe=function(a){this.sd=U(window,Id,this.De,n,this);this.td=U(window,Jd,this.Ee,n,this);this.zc=U(a,Fd,this.Ud,n,this);this.Bc=U(a,Gd,this.Wd,n,this);this.Ac=U(a,Hd,this.Vd,n,this);a=new Zf(a);this.vd=U(a,$f,this.jf,n,this)};this.jf=function(a){if(a.Cf>0)if(this.Ca>0)this.Da=this.Ca=0;else this.Da=this.Da+0.05;else if(this.Da>0)this.Ca=this.Da=0;else this.Ca=this.Ca+
0.05};this.De=function(a){if(a.keyCode==81){this.uc=this.eb*this.qf;this.Bi=j}else if(a.keyCode==65){this.uc=-this.eb*this.qf;this.Ai=j}else if(a.keyCode==83)this.tc=0.5*this.md;else if(a.keyCode==88)this.tc=-0.5*this.md};this.Ee=function(a){if(a.keyCode==81){this.uc=0;this.Bi=n}else if(a.keyCode==65){this.uc=0;this.Ai=n}else if(a.keyCode==83)this.tc=0;else if(a.keyCode==88)this.tc=0};this.Ud=function(a){if(Td(a,Pd)){this.wc.m(0,0,0);this.vf=a.offsetX;this.wf=a.offsetY;this.Nb=j}this.ja=a.offsetX;
this.ka=a.offsetY;if(Td(a,Qd))return n};this.Wd=function(a){if(Td(a,Pd))this.Nb=n;this.ja=a.offsetX;this.ka=a.offsetY;this.ee=this.de=0;if(Td(a,Qd))return n};this.Vd=function(a){this.ja=a.offsetX;this.ka=a.offsetY;if(this.Nb){var c=(this.vf-a.offsetX)/this.c.width,d=(this.wf-a.offsetY)/this.c.height,c=c*c,d=d*d;this.wc.m(a.offsetX-this.vf,this.c.height-1-a.offsetY-(this.c.height-1-this.wf),0);this.wc.Pc();var a=this.wc.a[0],e=this.wc.a[1],f=0,g=0;a>0?f=1:a<0&&(f=-1);e>0?g=1:e<0&&(g=-1);this.de=this.eb*
this.oh*d*g;this.ee=this.ph*c*f}};this.Ge=function(a){var c=this.tc*a/500,d=this.ee*a/500,e=this.uc*a,f=0,f=0,g=this.g/5E5*(this.g/5E5);g>10?g=10:g<0.0010&&(g=0.0010);var i=g*this.de*a/250;if(this.Da>0){var l=0.5*this.md*a/1E3;this.q=this.q+l;this.Da=this.Da-l;if(this.Da<0){this.q=this.q+this.Da;this.Da=0}this.Ob=j}if(this.Ca>0){l=0.5*this.md*a/1E3;this.q=this.q-l;this.Ca=this.Ca-l;if(this.Ca<0){this.q=this.q-this.Ca;this.Ca=0}this.Ob=j}if(c){this.q=this.q+c;this.Ob=j}if(d){this.t=this.t+d;if(this.t>
2*Math.PI)this.t=this.t-2*Math.PI;if(this.t<0)this.t=2*Math.PI-this.t;this.Ob=j}if(this.Ob){f=this.c.Ng();if(isNaN(f))f=this.La}if(e){if(this.Ae.length==0){a=1E3*e*g;this.g=this.g+a;f=f+a}else if(this.Bi){this.Bi=n;for(a=0;a<this.Ae.length;a++)if(this.Ae[a]>this.g){this.g=this.Ae[a];break}}else if(this.Ai){this.Ai=n;for(a=this.Ae.length-1;a>=0;a--)if(this.Ae[a]<this.g){this.g=this.Ae[a];break}}if(this.g>this.Cl)this.g=this.Cl;else if(this.g<this.Dl)this.g=this.Dl}if(i){a=this.n*0.017453292519943295;
e=Math.sin(a);g=Math.cos(a);d=this.t;c=this.o*0.017453292519943295;e=Jc/Math.sqrt(1-Kc*e*e);g=Jc/(e/(1+Lc*g*g))*i*Math.cos(d);l=Jc/e*i*Math.sin(d)/Math.cos(a);i=Jc/e*i*Math.sin(d)*Math.tan(a)+d;this.o=57.29577951308232*(l+c);this.n=57.29577951308232*(g+a);for(this.t=i;this.o>180;)this.o=this.o-360;for(;this.o<-180;)this.o=this.o+360;for(;this.n>90;)this.n=180-this.n;for(;this.n<-90;)this.n=-180-this.n;this.Ob=j}if(f<this.La&&this.Ob)this.g=this.g+(this.La-f);if(this.nc.length==2&&this.nc[0].length==
2&&this.nc[1].length==2){if(this.nc[0][0]>this.o)this.o=this.nc[0][0];if(this.nc[1][0]<this.o)this.o=this.nc[1][0];if(this.nc[0][1]>this.n)this.n=this.nc[0][1];if(this.nc[1][1]<this.n)this.n=this.nc[1][1]}if(this.oa){this.oa.gc=this.o;this.oa.fc=this.n;this.oa.dc=this.g;this.oa.pitch=this.q*57.29577951308232;this.oa.Va=this.t*57.29577951308232;this.oa.kc=this.Ma*57.29577951308232}}}Ca(Jg,bg);function Kg(a,b){this.c=a;this.Q=new cg;this.Q.c=a;oe(this.Q);this.hc=new sg;this.v=new Yf(b);y(b.shownavigation)||(b.shownavigation=j);b.shownavigation&&(this.ic=new qe);this.hc.c=a;oe(this.hc);this.v.c=a;oe(this.v);this.ic&&(this.ic.c=a,oe(this.ic));this.Rd=new Tc;this.Ub=new O;this.ba=new O;this.wo=new O}Kg.prototype.tb=function(){this.Q.gd();this.Q.hd();this.hc.gd();this.hc.hd();this.v.gd();this.v.hd();this.ic&&(this.ic.gd(),this.ic.hd())};
Kg.prototype.s=function(){this.Q&&(this.Q.Qc(),this.Q=k);this.hc&&(this.hc.Qc(),this.hc=k);this.v&&(this.v.Qc(),this.v=k);this.ic&&(this.ic.Qc(),this.ic=k)};
Kg.prototype.Oj=function(a){var b,c,d,e,f,g;y(a.type)&&("globe"==a.type?(this.Q.Qc(),this.Q=new cg,this.Q.c=this.c):"fly"==a.type?(this.Q.Qc(),this.Q=new bg,this.Q.c=this.c):"constrained"==a.type?(this.Q.Qc(),this.Q=new Jg(a),this.Q.c=this.c):"dynamic"==a.type&&(this.Q.Qc(),this.Q=new tg(a),this.Q.c=this.c),b=this.Q.o,c=this.Q.n,d=this.Q.g,e=this.Q.t,f=this.Q.q,g=this.Q.Ma,y(a.Longitude)&&(b=a.Longitude),y(a.Latitude)&&(c=a.Latitude),y(a.Elevation)&&(d=a.Elevation),y(a.Yaw)&&(e=L(a.Yaw)),y(a.Pitch)&&
(f=L(a.Pitch)),y(a.Roll)&&(g=L(a.Roll)),this.Q.Aa(b,c,d),this.Q.Eb(e,f,g),oe(this.Q))};function Lg(a){this.b=a;this.Pd=n;this.rk=this.jl=this.Ic=this.pk=this.hl=this.bd=this.ok=this.gl=this.ad=this.ik=this.al=this.Zc=this.mk=this.el=this.Gc=this.qk=this.il=this.Hc=this.lk=this.dl=this.Ib=this.kk=this.cl=this.$c=this.nk=this.fl=this.Yb=this.jk=this.bl=this.Ed=k}function md(a,b,c){a.Ed&&(a.b.useProgram(a.Ed),a.b.uniformMatrix4fv(a.b.getUniformLocation(a.Ed,"matMVP"),n,b.Ba()),a.b.uniform4fv(a.b.getUniformLocation(a.Ed,"uColor"),c.Ba()))}
function nd(a,b,c){a.$c&&(a.b.useProgram(a.$c),a.b.uniformMatrix4fv(a.b.getUniformLocation(a.$c,"matMVP"),n,b.Ba()),a.b.uniform4fv(a.b.getUniformLocation(a.$c,"uColor"),c.Ba()))}
function od(a,b,c,d,e){if(a.Ib){var f=new cd(0.1,0.1,0.1,0);a.b.useProgram(a.Ib);a.b.uniformMatrix4fv(a.b.getUniformLocation(a.Ib,"matMVP"),n,d.Ba());a.b.uniformMatrix4fv(a.b.getUniformLocation(a.Ib,"matNormal"),n,b.Ba());a.b.uniformMatrix4fv(a.b.getUniformLocation(a.Ib,"matModelView"),n,c.Ba());a.b.uniform4fv(a.b.getUniformLocation(a.Ib,"uAmbientColor"),f.Ba());a.b.uniform4fv(a.b.getUniformLocation(a.Ib,"uColor"),e.Ba())}}
function Mg(a){a.Pd=j;a.bl=Ng(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n}\n");a.jk=Ng(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform vec4 uColor;\n\nvoid main()\n{\n   gl_FragColor = uColor;\n}");a.bl&&a.jk&&(a.Ed=a.b.createProgram(),a.b.attachShader(a.Ed,a.bl),a.b.attachShader(a.Ed,a.jk),a.b.bindAttribLocation(a.Ed,0,"aPosition"),a.b.linkProgram(a.Ed),!a.b.getProgramParameter(a.Ed,
a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert("Shader Link: "+a.b.getProgramInfoLog(a.Ed)));a.fl=Ng(a,a.b.VERTEX_SHADER,"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 matModelView;\nuniform mat4 matProjection;\nuniform mat4 matNormal;\n\nvarying vec2 vTexCoord;\nvarying vec3 vNormal;\nvarying vec4 vPosition;\n\nvoid main(void)\n{\nvPosition = matModelView * vec4(aPosition, 1.0);\ngl_Position = matProjection * vPosition;\nvTexCoord = aTexCoord;\nvNormal = (matNormal * vec4(aNormal,1.0)).xyz;\n}\n");
a.nk=Ng(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nvarying vec3 vNormal;\nvarying vec4 vPosition;\nuniform sampler2D uTexture;\nvoid main(void)\n{\nvec3 L = normalize(-vPosition.xyz);\nfloat lamb = 2.0*max(dot(normalize(vNormal), L), 0.0);\nvec3 diff = vec3(1.0,0.0,0.0) * lamb;\ngl_FragColor = vec4(diff.xyz, 1.0);\n}\n");a.fl&&a.nk&&(a.Yb=a.b.createProgram(),a.b.attachShader(a.Yb,a.fl),a.b.attachShader(a.Yb,a.nk),a.b.bindAttribLocation(a.Yb,0,"aPosition"),
a.b.bindAttribLocation(a.Yb,1,"aNormal"),a.b.bindAttribLocation(a.Yb,2,"aTexCoord"),a.b.linkProgram(a.Yb),!a.b.getProgramParameter(a.Yb,a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert(a.b.getProgramInfoLog(a.Yb)));a.cl=Ng(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec4 aColor;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition, 1.0);\n   vColor = aColor;\n   gl_PointSize = 1.0;}\n");a.kk=Ng(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nuniform vec4 uColor;\nvoid main()\n{\n   gl_FragColor = vColor * uColor;\n}\n\n");
a.cl&&a.kk&&(a.$c=a.b.createProgram(),a.b.attachShader(a.$c,a.cl),a.b.attachShader(a.$c,a.kk),a.b.bindAttribLocation(a.$c,0,"aPosition"),a.b.bindAttribLocation(a.$c,1,"aColor"),a.b.linkProgram(a.$c),!a.b.getProgramParameter(a.$c,a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert(a.b.getProgramInfoLog(a.$c)));a.il=Ng(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");
a.qk=Ng(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   gl_FragColor = texture2D(uTexture, vTexCoord)*uColor;\n}\n\n");a.il&&a.qk&&(a.Hc=a.b.createProgram(),a.b.attachShader(a.Hc,a.il),a.b.attachShader(a.Hc,a.qk),a.b.bindAttribLocation(a.Hc,0,"aPosition"),a.b.bindAttribLocation(a.Hc,1,"aTexCoord"),a.b.linkProgram(a.Hc),!a.b.getProgramParameter(a.Hc,a.b.LINK_STATUS)&&!a.b.isContextLost()&&
alert(a.b.getProgramInfoLog(a.Hc)));a.el=Ng(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\nattribute vec4 aColor;\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n   vNormal = aNormal;\n   vColor = aColor;\n}\n");a.mk=Ng(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec4 vColor;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   gl_FragColor = vColor * texture2D(uTexture, vTexCoord);\n}\n\n");
a.el&&a.mk&&(a.Gc=a.b.createProgram(),a.b.attachShader(a.Gc,a.el),a.b.attachShader(a.Gc,a.mk),a.b.bindAttribLocation(a.Gc,0,"aPosition"),a.b.bindAttribLocation(a.Gc,1,"aNormal"),a.b.bindAttribLocation(a.Gc,2,"aTexCoord"),a.b.bindAttribLocation(a.Gc,3,"aColor"),a.b.linkProgram(a.Gc),!a.b.getProgramParameter(a.Gc,a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert(a.b.getProgramInfoLog(a.Gc)));a.al=Ng(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");
a.ik=Ng(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\n\nuniform vec4 uColor;\nvoid main()\n{\n   gl_FragColor = uColor*texture2D(uTexture, vTexCoord);\n}\n\n");a.al&&a.ik&&(a.Zc=a.b.createProgram(),a.b.attachShader(a.Zc,a.al),a.b.attachShader(a.Zc,a.ik),a.b.bindAttribLocation(a.Zc,0,"aPosition"),a.b.bindAttribLocation(a.Zc,1,"aTexCoord"),a.b.linkProgram(a.Zc),!a.b.getProgramParameter(a.Zc,a.b.LINK_STATUS)&&!a.b.isContextLost()&&
alert("font shader: "+a.b.getProgramInfoLog(a.Zc)));a.gl=Ng(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");a.ok=Ng(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\n\nuniform vec4 uColor;\nvoid main()\n{\n   if(texture2D(uTexture, vTexCoord)[3]<0.1){discard;}\n gl_FragColor = uColor*texture2D(uTexture, vTexCoord);\n}\n\n");
a.gl&&a.ok&&(a.ad=a.b.createProgram(),a.b.attachShader(a.ad,a.gl),a.b.attachShader(a.ad,a.ok),a.b.bindAttribLocation(a.ad,0,"aPosition"),a.b.bindAttribLocation(a.ad,1,"aTexCoord"),a.b.linkProgram(a.ad),!a.b.getProgramParameter(a.ad,a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert("poi shader: "+a.b.getProgramInfoLog(a.ad)));a.hl=Ng(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nuniform mat4 matInvMVP;\nattribute vec3 aPosition;\nattribute vec4 aColor;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition, 1.0);\n   vColor = aColor;\n   gl_PointSize=4.0; \n}\n");
a.pk=Ng(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_FragColor = vColor;\n}\n\n");a.hl&&a.pk&&(a.bd=a.b.createProgram(),a.b.attachShader(a.bd,a.hl),a.b.attachShader(a.bd,a.pk),a.b.bindAttribLocation(a.bd,0,"aPosition"),a.b.bindAttribLocation(a.bd,1,"aColor"),a.b.linkProgram(a.bd),!a.b.getProgramParameter(a.bd,a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert(a.b.getProgramInfoLog(a.bd)));a.jl=Ng(a,a.b.VERTEX_SHADER,"uniform mat4 matM;uniform mat4 matMVP;\nvarying float w_val;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{gl_Position = matMVP * vec4(aPosition,1.0);\nvec4 xyz = matM * vec4(aPosition,1.0);\nfloat x = xyz.x*8388607.0;\nfloat y = xyz.y*8388607.0;\nfloat z = xyz.z*8388607.0;\nfloat sq, lat, sinlat, coslat, sinlat2, Rn, elevation;\nsq = sqrt(x*x+y*y);\n lat = atan(z,sq);\n      for (int i=0;i<2;i++)\n{\nsinlat = sin(lat);\ncoslat = cos(lat);\nsinlat2 = sinlat*sinlat;\nRn = 6378137.0 / sqrt(1.0-0.0066943799*sinlat2);\n   elevation = sq / coslat - Rn;\nlat = atan(z/sq, 1.0-(Rn*0.0066943799)/(Rn+elevation));\n}\nw_val = 1.0-clamp(abs(elevation)/4000.0,0.0,1.0); vTexCoord = aTexCoord;\n}\n");
a.rk=Ng(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying float w_val;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   float depth = w_val;\nfloat depth2 = depth*depth;\nvec4 rgb;\n if (depth < 0.5) { rgb.g = 1.6*depth2+1.2*depth; } else { rgb.g = 3.2*depth2-6.8*depth+3.6; rgb.b = depth2*-4.8+9.2*depth-3.4; }\nrgb.a=1.0;\ndepth = depth/0.9;\ndepth2 = depth2/0.81;\nrgb.r = -2.14*depth2*depth2 -1.07*depth2*depth + 0.133*depth2 +0.0667*depth +1.0;\ngl_FragColor = texture2D(uTexture, vTexCoord)*rgb;\n\n}\n\n");
a.jl&&a.rk&&(a.Ic=a.b.createProgram(),a.b.attachShader(a.Ic,a.jl),a.b.attachShader(a.Ic,a.rk),a.b.bindAttribLocation(a.Ic,0,"aPosition"),a.b.bindAttribLocation(a.Ic,1,"aTexCoord"),a.b.linkProgram(a.Ic),!a.b.getProgramParameter(a.Ic,a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert(a.b.getProgramInfoLog(a.Ic)));a.dl=Ng(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec3 aNormal;attribute vec4 aColor;\nvarying vec4 vColor;\n\nuniform mat4 matNormal;\nuniform mat4 matModelView;\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;varying vec3 vNormal;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition, 1.0);\n   vPosition = matModelView * vec4(aPosition, 1.0);\n   vNormal = normalize((matNormal * vec4(aNormal,1.0)).xyz);   vColor = aColor;\n}\n");
a.lk=Ng(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform vec4 uAmbientColor;\nuniform vec4 uColor;\nvarying vec4 vColor;\nvarying vec3 vNormal;\nvarying vec4 vPosition;\nvoid main()\n{\n   vec3 L = normalize(-vPosition.xyz);\n   float lamb1 = dot(normalize(vNormal), L);\n   float lamb2 = dot(normalize(vNormal), -L);\n   vec4 diff1 = clamp(vec4(vColor.xyz * lamb1,1.0),0.0,1.0);\n   vec4 diff2 = clamp(vec4(vColor.xyz * lamb2,1.0),0.0,1.0);\n   gl_FragColor = diff1+diff2;\n}\n");
a.dl&&a.lk&&(a.Ib=a.b.createProgram(),a.b.attachShader(a.Ib,a.dl),a.b.attachShader(a.Ib,a.lk),a.b.bindAttribLocation(a.Ib,0,"aPosition"),a.b.bindAttribLocation(a.Ib,1,"aNormal"),a.b.bindAttribLocation(a.Ib,2,"aColor"),a.b.linkProgram(a.Ib),!a.b.getProgramParameter(a.Ib,a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert(a.b.getProgramInfoLog(a.Ib)))}
function Ng(a,b,c){var d=a.b.createShader(b);if(!d)return k;a.b.shaderSource(d,c);a.b.compileShader(d);return!a.b.getShaderParameter(d,a.b.COMPILE_STATUS)&&!a.b.isContextLost()?(b==a.b.VERTEX_SHADER?alert("Vertex Shader "+a.b.getShaderInfoLog(d)):b==a.b.FRAGMENT_SHADER?alert("Fragment Shader "+a.b.getShaderInfoLog(d)):alert("Unknown Shader "+a.b.getShaderInfoLog(d)),k):d};function Og(a){this.c=a;this.oj=[];this.bc=[]}z("TextureManager",Og);Og.prototype.tl=function(a,b,c,d){var e=this.oj[a];e?(this.bc[a]+=1,b(e)):(e=new Q(this.c),S(e,a,b,c,d),this.bc[a]=1,this.oj[a]=e);return e};Og.prototype.CreateTexture=Og.prototype.tl;Og.prototype.vl=function(a){this.bc[a]-=1;0==this.bc[a]&&(this.oj[a].s(),delete this.oj[a],delete this.bc[a])};Og.prototype.DestroyTexture=Og.prototype.vl;var Pg=[14,28,14,14,14,14,14,14,14,96,0,14,14,0,14,14,14,14,14,14,14,14,14,14,14,14,14,14,0,0,0,0,8,8,10,16,16,25,19,5,9,9,11,16,8,9,8,8,16,16,16,16,16,16,16,16,16,16,8,8,16,16,16,16,28,19,19,20,20,19,17,22,20,8,14,19,16,23,20,22,19,22,20,19,16,20,19,28,19,18,17,8,8,8,14,16,9,15,16,14,16,15,7,16,16,6,6,14,6,24,16,15,16,16,9,14,8,16,13,19,13,13,14,9,6,9,16,8,16,0,6,16,9,28,16,16,9,29,19,9,28,0,17,0,0,6,6,9,9,10,16,28,8,28,14,9,26,0,14,19,8,8,16,16,16,16,6,16,9,21,10,16,16,9,21,15,11,15,9,9,9,16,15,
9,9,9,10,16,23,23,23,17,19,19,19,19,19,19,28,20,19,19,19,19,8,8,8,8,20,20,22,22,22,22,22,16,22,20,20,20,20,19,19,17,16,16,16,16,16,16,25,14,16,16,16,16,8,8,8,8,16,16,16,16,16,16,16,15,17,16,16,16,16,14,16,14];
function Qg(a){this.c=a;this.b=a.b;var b=0,c=0;this.Qi=new P(this.c);for(var a=[],d=[],e=0;16>e;e++)for(var f=0;16>f;f++){var b=0.0625*e,g=0.0625*f;a.push(0,31,0,g,b+0.001953125);a.push(0,0,0,g,b+0.0625);a.push(31,0,0,g+0.0625,b+0.0625);a.push(31,31,0,g+0.0625,b+0.001953125);b=4*c;d.push(b,b+1,b+2,b,b+2,b+3);c++}c=this.Qi;0==a.length%5&&(c.D=new Float32Array(a),c.mode="font",c.T=5);ld(this.Qi,d,"TRIANGLES");a=new Q(this.c);S(a,vd+"font.png");this.Qi.Tc(a);new O}
Qg.prototype.ze=function(a,b,c,d,e){d==k&&(d=1);this.c.Rc();this.c.Pj();this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);for(var f=new O,g=0,i=0,l=0;l<a.length;l++)g=a.charCodeAt(l),i+=Pg[g]/2*d,f.Zd(d,d,1),f.Gl(f,b+i,c,0),this.c.Sc(f),this.Qi.ta(j,6,12*g,e),i+=Pg[g]/2*d;this.c.Kd();this.c.b.disable(this.c.b.BLEND)};Qg.prototype.xl=function(a){for(var b=0,c=0;c<a.length;c++)b+=Pg[a.charCodeAt(c)];return b};
Qg.prototype.Rn=s(32);z("Font",Qg);Qg.prototype.DrawText=Qg.prototype.ze;Qg.prototype.GetStringHeight=Qg.prototype.Rn;Qg.prototype.GetStringWidth=Qg.prototype.xl;function Rg(a){this.c=a;this.b=a.b;this.Sf=n;this.Yk=this.Fc=this.A=k;this.C=this.w=0}
Rg.prototype.Rg=function(a,b){this.Zf=document.createElement("canvas");this.R=this.Zf.getContext("2d");this.ab=new Q(this.c);this.ab.l=this.b.createTexture();this.text=a;this.R.save();this.R.font=b.fontString;this.R.textAlign="left";this.R.textBaseline="top";this.R.lineWidth=b.lineWidth;this.R.strokeStyle=b.strokeStyle;var c=this.R.measureText(this.text),c=Math.round(c.width);this.R.restore();this.w=c+2*parseInt(b.lineWidth,10)+Math.abs(b.shadowOffsetX)+Math.abs(b.shadowOffsetY)+b.shadowBlur;this.C=
parseInt(b.fontString,10)+2*parseInt(b.lineWidth,10)+Math.abs(b.shadowOffsetY)+b.shadowBlur;this.ed=Oc(this.w);this.dd=Oc(this.C);this.ab.width=this.ed;this.ab.height=this.dd;this.R.canvas.width=this.ed;this.R.canvas.height=this.dd;this.R.fillStyle=b.backgroundColor;this.R.fillRect(0,0,this.w,this.C);this.R.shadowOffsetX=b.shadowOffsetX;this.R.shadowOffsetY=b.shadowOffsetY;this.R.shadowBlur=b.shadowBlur;this.R.shadowColor=b.shadowColor;this.R.fillStyle=b.fontColor;this.R.font=b.fontString;this.R.textAlign=
"left";this.R.textBaseline="middle";this.R.lineWidth=b.lineWidth;this.R.strokeStyle=b.strokeStyle;this.R.strokeText(a,b.lineWidth,this.C/2);this.R.fillText(a,b.lineWidth,this.C/2);this.lh();this.A=new P(this.c);this.A.Tc(this.ab);c=[];c.push(-this.w/2,this.C/2,0,0,0);c.push(-this.w/2,-this.C/2,0,0,1/this.dd*this.C);c.push(this.w/2,-this.C/2,0,1/this.ed*this.w,1/this.dd*this.C);c.push(this.w/2,this.C/2,0,1/this.ed*this.w,0);kd(this.A,c);ld(this.A,[0,1,2,0,2,3],"TRIANGLES");this.A.w=this.w;this.A.C=
this.C;return this.A};
Rg.prototype.Pg=function(a,b){this.Zf=document.createElement("canvas");this.R=this.Zf.getContext("2d");this.ab=new Q(this.c);this.ab.l=this.b.createTexture();Sg(this,a,b);this.A=new P(this.c);this.A.Tc(this.ab);var c=[];c.push(-this.w/2,this.C/2,0,0,0);c.push(-this.w/2,-this.C/2,0,0,1/this.dd*this.C);c.push(this.w/2,-this.C/2,0,1/this.ed*this.w,1/this.dd*this.C);c.push(this.w/2,this.C/2,0,1/this.ed*this.w,0);kd(this.A,c);ld(this.A,[0,1,2,0,2,3],"TRIANGLES");this.A.aa=[-this.w/2,-this.C/2,0];this.A.ya=
[this.w/2,this.C/2,0];this.A.w=this.w;this.A.C=this.C;return this.A};
function Sg(a,b,c){a.w=c.iconWidth+2*c.border+Math.abs(c.shadowOffsetX)+Math.abs(c.shadowOffsetY)+c.shadowBlur;a.C=c.iconHeight+2*c.border+Math.abs(c.shadowOffsetX)+Math.abs(c.shadowOffsetY)+c.shadowBlur;a.ed=Oc(a.w);a.dd=Oc(a.C);a.ab.width=a.ed;a.ab.height=a.dd;a.R.canvas.width=a.ed;a.R.canvas.height=a.dd;a.R.fillStyle=c.backgroundColor;a.R.fillRect(0,0,a.w,a.C);a.R.shadowOffsetX=c.shadowOffsetX;a.R.shadowOffsetY=c.shadowOffsetY;a.R.shadowBlur=c.shadowBlur;a.R.shadowColor=c.shadowColor;var d=new Image;
d.crossOrigin="anonymous";d.onload=function(){a.R.drawImage(d,c.border,c.border,c.iconWidth,c.iconHeight);a.lh()};d.src=b}
Rg.prototype.lh=function(){this.b.enable(this.b.TEXTURE_2D);this.b.bindTexture(this.b.TEXTURE_2D,this.ab.l);this.b.pixelStorei(this.b.UNPACK_FLIP_Y_WEBGL,0);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.c.b.RGBA,this.b.UNSIGNED_BYTE,this.Zf);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,
this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.bindTexture(this.b.TEXTURE_2D,k);this.ab.ac=j};Rg.prototype.s=function(){this.A&&(this.A.s(),this.A=k);this.Fc&&(this.Fc.s(),this.Fc=k);this.Yk&&(this.Yk.s(),this.Yk=k);this.ab&&(this.ab.s(),this.ab=k);this.Zf&&(document.removeChild(this.Zf),this.Zf=k)};function Tg(a){this.c=a;this.b=a.b;this.dc=this.gc=this.fc=0;this.Sf=n;this.bb=this.Oa=this.Fc=k;this.scale=20;this.text=this.qg="";this.zh=new Rg(a);this.Sh=this.Vh=0;this.$m=this.an=1;this.Zm=0;this.Ym=1;this.$k=0;this.Zk=Infinity;this.Kk=new cd(1,1,1,1);this.Ti={iconWidth:64,iconHeight:64,border:0,backgroundColor:"rgba(255, 255, 255, 0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0)"};this.ai={id:1,fontString:"48px bold Arial",backgroundColor:"rgba(0,0,0,0)",fontColor:"rgba(255,255,255,1.0)",
lineWidth:8,strokeStyle:"rgba(0,0,0,1.0)",fontSize:48,shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 1.0)"};this.Fi=n;this.Hk=0;this.Ik=1;this.Jk=0}u=Tg.prototype;u.Yn=function(a,b,c,d){this.qg=c?c:"";b&&(this.ai=b);this.text=a;d&&(this.Ti=d);c&&(this.Oa=this.zh.Pg(this.qg,this.Ti));this.zh=new Rg(this.c);a&&(this.bb=this.zh.Rg(a,this.ai))};
u.Aa=function(a,b,c,d){this.Oa&&this.bb?(this.Vh=this.Oa.w+this.bb.w,this.Sh=this.Oa.C):this.Oa?(this.Vh=this.Oa.w,this.Sh=this.Oa.C):this.bb&&(this.Vh=this.bb.w,this.Sh=this.bb.C);var e=this.Oa?this.Oa.w:0,f=this.Fi?-this.Hk*e/2:-this.Hk*this.Vh/2;if(this.Oa){var g=this.Vh-e,g=this.Fi?0:-g/2;this.Oa.eh(a,b,c,(g+f)*K*this.scale,this.Ik*(this.Sh/2)*K*this.scale,this.Jk*K*this.scale)}this.bb&&(g=this.Fi?e/2+this.bb.w/2:e/2,this.bb.eh(a,b,c,(g+f)*K*this.scale,this.Ik*(this.Sh/2)*K*this.scale,this.Jk*
K*this.scale));this.Ve=a;this.We=b;this.Xe=c;if(d!=k){this.Sf=j;var d=this.zh,e=this.an,f=this.$m,g=this.Zm,i=this.Ym;d.Fc=new P(d.c);var l=[];l.push(a,b,c,e,f,g,i);l.push(0,0,0,e,f,g,i);gd(d.Fc,l);ld(d.Fc,[0,1],"LINES");this.Fc=d.Fc}};
u.ta=function(){this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);this.Sf&&this.Fc.ta();this.Oa&&rd(this.Oa);this.bb&&rd(this.bb);this.c.Rc();var a=new O;a.Zd(K*this.scale,K*this.scale,1);this.c.Sc(a);this.Oa&&this.Oa.ta(n,0,0,k,this.Kk);this.bb&&this.bb.ta(n,0,0,k,this.Kk);this.c.Kd();this.c.b.disable(this.c.b.BLEND)};function Ug(a){a.Sf?a.Aa(a.Ve,a.We,a.Xe,0):a.Aa(a.Ve,a.We,a.Xe,k)}
u.ui=function(a){this.scale=a;Ug(this)};u.$g=function(a,b){var c=n,d=n;if(this.Oa)var e=this.c.gf(a,b,this.c.wa,j),c=this.Oa.Je(e.x,e.y,e.p,e.me,e.ne,e.oe);this.bb&&(e=this.c.gf(a,b,this.c.wa,j),d=this.bb.Je(e.x,e.y,e.p,e.me,e.ne,e.oe));return c||d};u.s=function(){this.zh=k;this.dc=this.gc=this.fc=0;this.Oa&&this.Oa.s();this.bb&&this.bb.s();this.Fc&&this.Fc.s();this.Sf=n;this.Fc=k;this.scale=0};z("Poi",Tg);Tg.prototype.Draw=Tg.prototype.ta;Tg.prototype.SetContent=Tg.prototype.Yn;
Tg.prototype.SetPosition=Tg.prototype.Aa;Tg.prototype.SetSize=Tg.prototype.ui;Tg.prototype.Destroy=Tg.prototype.s;function Vg(a){this.c=a;this.Th=[];this.bc=[];this.jg=k;this.Uh=[];this.Uf=[]}u=Vg.prototype;u.sl=function(a,b,c,d){var e=new Tg(this.c);b&&(e.ai=b);e.text=a;d&&(e.Ti=d);c&&(e.qg=c,e.Oa=this.Pg(c,e.Ti));a&&(e.bb=this.Rg(a,e.ai));return e};u.ul=function(a){a.Oa&&Wg(this,a.qg);a.bb&&Xg(this,a.text,a.ai)};u.Pg=function(a,b){var c=this.Th[a];if(c){this.bc[a]+=1;var d=new P(this.c);d.da(c);d.w=c.w;d.C=c.C;this.Th[a]=d}else this.jg=new Rg(this.c),d=this.jg.Pg(a,b),this.bc[a]=1,this.Th[a]=d,this.jg=k;return d};
function Wg(a,b){a.bc[b]-=1;0==a.bc[b]&&(a.Th[b].l.s(),delete a.Th[b],delete a.bc[b])}u.Rg=function(a,b){var c=this.Uh[a+b.id];if(c){this.Uf[a+b.id]+=1;var d=new P(this.c);d.da(c);d.w=c.w;d.C=c.C;this.Uh[a+b.id]=d}else this.jg=new Rg(this.c),d=this.jg.Rg(a,b),this.Uf[a+b.id]=1,this.Uh[a+b.id]=d,this.jg=k;return d};function Xg(a,b,c){a.Uf[b+c.id]-=1;0==a.Uf[b+c.id]&&(a.Uh[b+c.id].l.s(),delete a.Uh[b+c.id],delete a.Uf[b+c.id])}
u.ql=function(a,b,c){a.Oa=this.Pg(b,c);a.Aa(a.Ve,a.We,a.Xe,k);Wg(this,a.qg);a.qg=b};u.rl=function(a,b,c){a.bb=this.Rg(b,c);a.Aa(a.Ve,a.We,a.Xe,k);Xg(this,a.text,c);a.text=b};z("PoiManager",Vg);Vg.prototype.CreatePoi=Vg.prototype.sl;Vg.prototype.DestroyPoi=Vg.prototype.ul;Vg.prototype.ChangePoiIcon=Vg.prototype.ql;Vg.prototype.ChangePoiText=Vg.prototype.rl;var Yg=new Date,Zg=new Date,$g=[],ah=0,bh=k,ch=k;function dh(){for(var a=0;a<$g.length;a++){var b=$g[a];b.bm&&(0<b.kl&&0<b.uk?(b.L.width=window.innerWidth-b.kl,b.L.height=window.innerHeight-b.uk):(b.L.width=window.innerWidth,b.L.height=window.innerHeight));b.b.isContextLost()||eh(b,b.L.width,b.L.height)}}
function Z(){this.Me=this.qd=this.je=this.ke=this.ie=k;this.Pd=n;this.height=this.width=0;this.bm=n;this.$a=this.L=this.b=k;this.$j=0.670588;this.Zj=0.921569;this.Xj=this.Yj=1;this.Dn=this.En=this.Gn=this.Fn=0;this.ji=this.ii=20;this.Ub=new O;this.ba=new O;this.zd=new O;this.Nf=new O;this.wa=new O;this.Lh=new O;this.lf=[];this.ig=new Tc;this.An=[];this.Bn=[];$g[ah]=this;ah++;this.Ek=this.e=this.Bg=k;this.df=1;this.ua=this.nj=this.zg=k;this.uk=this.kl=0}
function fh(a){function b(b){var c=a.parentNode;c&&(c.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+b+"</div></div></td></tr></table>")}if(!window.WebGLRenderingContext)return b('This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>'),k;var c=gh(a);return c===k?(b('It doesn\'t appear your browser supports WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>'),
k):c}function gh(a){for(var b=["webgl","experimental-webgl","webkit-3d","moz-webgl"],c=k,d=0;d<b.length;++d){try{c=a.getContext(b[d],{antialias:n})}catch(e){}if(c)break}return c}u=Z.prototype;
u.zl=function(a,b){var c=document.getElementById(a);if(this.b=fh(c)){this.L=c;c.addEventListener("webglcontextlost",function(a){a.preventDefault()},n);c.addEventListener("webglcontextrestored",function(){window.location.reload()},n);b&&(this.ji=this.ii=0,c.width=window.innerWidth-this.ii,c.height=window.innerHeight-this.ji,this.bm=j);for(var d=["webgl","experimental-webgl","moz-webgl","webkit-3d"],e=0;d.length>e;e++)try{if(this.b=c.getContext(d[e]))break}catch(f){}this.b?(eh(this,this.L.width,this.L.height),
this.b.clearColor(0,0,0,1),this.b.enable(this.b.DEPTH_TEST),this.b.frontFace(this.b.CCW),this.b.cullFace(this.b.BACK),this.$a=new Lg(this.b),Mg(this.$a),this.Bg=new Qg(this),this.Ek=new Q(this),S(this.Ek,vd+"nodata.png"),this.zg=new Vg(this),this.nj=new Og(this),this.ua=new hh(this),this.ie&&this.ie(this),Zg=new Date,"undefined"!=typeof window&&window.gn(ih,this.L),this.L.oncontextmenu=function(a){a.preventDefault();a.stopPropagation();return n},U(window,"resize",dh,n,this),U(window,"unload",this.Qc,
n,this)):alert("Can't find webgl context. It seems your browser is not compatible! For example, you can get the latest Firefox or Chrome")}};
u.Qc=function(){this.ie&&(this.ie=k);this.Ld&&(X(this.Ld),this.Ld=k);this.Md&&(X(this.Md),this.Md=k);this.qd&&(X(this.qd),this.qd=k);this.ke&&(this.ke=k);this.je&&(this.je=k);bh&&(X(bh),ch=k);ch&&(X(ch),ch=k);this.e&&(this.e.s(),this.e=k);this.b.clearColor(0,0,0,0);this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT);this.$a=this.L=this.b=k;this.An=[];this.Bn=[];this.nj=this.zg=this.e=this.Bg=k;$d(window,"resize",k,n,this);ah=0;$g=[]};
u.Ml=function(a,b,c,d){0<=a&&1>=a&&0<=b&&1>=b&&0<=c&&1>=c&&0<=d&&1>=d&&(this.$j=a,this.Zj=b,this.Yj=c,this.Xj=d)};u.Qn=function(){return{kp:this.$j,bp:this.Zj,Xo:this.Yj,Wo:this.Xj}};u.wj=function(){var a=this.b;a?(a.clearColor(this.$j,this.Zj,this.Yj,this.Xj),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)):jh("Warning: no gl context!!")};u.Yl=function(a,b,c,d){this.b&&(this.Fn=a,this.Gn=b,this.En=c,this.Dn=d,this.b.viewport(a,b,c,d))};u.Sn=function(){return{x:this.Fn,y:this.Gn,sp:this.En,cp:this.Dn}};
u.Vl=function(a){this.zd.da(a);kh(this)};u.jh=function(a){this.ba.da(a);kh(this)};u.Sc=function(a){this.Ub.da(a);kh(this)};function kh(a){a.Nf.W(a.ba,a.Ub);a.wa.W(a.zd,a.Nf);a.Lh.dg(a.Nf);a.Lh.Ke()}u.Un=function(a){var b=new Q(this);S(b,a);this.Bn.push(b);return b};u.Tn=function(a){var b=new P(this);pd(b,a);this.An.push(b);return b};u.Rc=function(){var a=this.ig,b=this.ba,c=new O;c.da(b);a.mi.push(c);a=this.ig;b=this.Ub;c=new O;c.da(b);a.li.push(c);a=this.ig;b=this.zd;c=new O;c.da(b);a.eg.push(c)};
u.Kd=function(){this.Ub.da(this.ig.li.pop());this.ba.da(this.ig.mi.pop());this.zd.da(this.ig.eg.pop());kh(this)};u.Pj=function(){var a=this.b.getParameter(this.b.VIEWPORT),b=a[2]-a[0],a=a[3]-a[1];this.Ub.ki();this.ba.ki();this.zd.Fl(0,b,0,a);kh(this)};
u.Qg=function(a){0==this.df?(a.type="custom",this.e=new Kg(this,a),this.e.v.yj(this.width,this.height)):1==this.df?(a.type="ellipsoid",this.e=new Kg(this,a),this.e.v.yj(this.width,this.height)):2==this.df?Ec(I("owg.engine3d"),"** WARNING: not implemented"):3==this.df&&Ec(I("owg.engine3d"),"** WARNING: not implemented")};u.ze=function(a,b,c,d,e){this.Bg&&this.Bg.ze(a,b,c,d,e)};u.Aj=function(a){var b=Array(2);b[0]=0;b[1]=0;this.Bg&&(b[0]=this.Bg.xl(a),b[1]=32);return b};
u.gf=function(a,b,c,d){var e=new O;e.dg(c);var f=this.height-b-1,b=2*(a-0)/this.width-1,c=2*(f-0)/this.height-1,a=2*(a-0)/this.width-1,f=2*(f-0)/this.height-1,g=new N;g.m(b,c,-1);b=e.Qa(g);c=new N;c.m(a,f,1);c=e.Qa(c);e=c.a[0]-b.a[0];a=c.a[1]-b.a[1];c=c.a[2]-b.a[2];d&&(d=Math.sqrt(e*e+a*a+c*c),e/=d,a/=d,c/=d);d=b.a;b={};b.x=d[0];b.y=d[1];b.p=d[2];b.me=e;b.ne=a;b.oe=c;return b};
"undefined"!=typeof window&&(window.gn=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,30)});
function ih(){Yg=new Date;var a=Yg.valueOf()-Zg.valueOf();Zg=Yg;for(var b=0;b<$g.length;b++){var c=$g[b];if(!c.b.isContextLost()){if(c.e){var d=c.e,e=a;d.Q.Ge(e);d.hc.Ge(e);d.v.Ge(e);d.ic&&d.ic.Ge(e)}c.ke&&c.ke(a,c);c.Yl(0,0,c.width,c.height);c.wj();if(c.e){var d=c.e,e=d.Rd,f=d.Ub,g=new O;g.da(f);e.li.push(g);e=d.Rd;f=d.ba;g=new O;g.da(f);e.mi.push(g);e=d.Rd;f=d.wo;g=new O;g.da(f);e.eg.push(g);d.Q.jd(d.Rd);d.hc.jd(d.Rd);d.v.jd(d.Rd);d.ic&&d.ic.jd(d.Rd);d.Rd.li.pop();d.Rd.mi.pop();d.Rd.eg.pop();c.e.tb()}d=
c.b.getError();d!=c.b.NO_ERROR&&d!=c.b.Vo&&jh("WebGL Error: "+d);c.je&&c.je(c);typeof window!="undefined"&&window.gn(ih,c.L)}}}function eh(a,b,c){a.width=b;a.height=c;a.Me&&a.Me(b,c,a);a.e&&a.e.v.yj(b,c)}u=Z.prototype;u.Nl=fa("ie");u.vi=fa("ke");u.Wl=fa("je");u.Rl=function(a){if(this.Ld){X(this.Ld);this.Ld=k}if(a)this.Ld=U(this.L,Fd,function(b){a(b.button,b.clientX-this.ii/2,b.clientY-this.ji/2,this)},n,this)};
u.Tl=function(a){if(this.Md){X(this.Md);this.Md=k}if(a)this.Md=U(this.L,Gd,function(b){a(b.button,b.clientX-this.ii/2,b.clientY-this.ji/2,this)},n,this)};u.Sl=function(a){if(this.Bf){X(this.Bf);this.Bf=k}if(a)this.Bf=U(this.L,Hd,function(b){a(b.clientX-this.ii/2,b.clientY-this.ji/2,this)},n,this)};u.Ul=function(a){if(this.qd){X(this.qd);this.qd=k}if(a){var b=new Zf(this.L);this.qd=U(b,Hd,function(b){b.preventDefault();a(b.Cf,this)},n,this)}};u.Xl=fa("Me");
u.Ol=function(a){if(bh){X(bh);bh=k}a&&(bh=U(window,Id,function(b){a(b.keyCode,this)},n,this))};u.Pl=function(a){if(ch){X(ch);ch=k}a&&(ch=U(window,Jd,function(b){a(b.keyCode,this)},n,this))};u.Xd=function(a,b,c){this.e&&this.e.v&&this.e.v.Fa&&this.e.v.Fa.Xd(a,b,c)};u.gg=function(a,b,c,d){this.e&&this.e.v&&this.e.v.Fa&&this.e.v.Fa.gg(a,b,c,d)};u.bh=function(a,b){return this.e&&this.e.v&&this.e.v.Wh?this.e.v.Wh.bh(a,b):k};u.kf=function(a,b){return this.e&&this.e.v&&this.e.v.Ef?this.e.v.Ef.kf(a,b):-1};
u.ah=function(a,b){return this.e&&this.e.v&&this.e.v.xh?this.e.v.xh.ah(a,b):-1};u.Ng=function(){return this.e&&this.e.v&&this.e.v.Fa?this.e.v.Fa.Ng():0};u.Jn=function(){return this.e?this.e.Q.hf().elevation:0};u.cg=function(a,b){return this.e&&this.e.v&&this.e.v.Fa?this.e.v.Fa.cg(a,b):!this.e.v.Fa?{hasvalue:j,elevation:0,lod:0}:{hasvalue:n,elevation:0,lod:-1}};u.zj=function(a,b,c,d,e,f,g){this.ua.zj(a,b,c,d,e,f,g)};u.gh=function(a){this.ua.gh(a)};u.kh=function(){this.ua.kh()};
function Je(a){if(a.lf.length<1)lh("Fatal error with render target stack. PushRenderTarget/PopRenderTarget do not correspond.");else{var b=a.lf.pop(),c=a.lf.length;c>0?a.lf[c-1].mh():b.$l()}}z("engine3d",Z);Z.prototype.AltitudeAboveEllipsoid=Z.prototype.Jn;Z.prototype.AltitudeAboveGround=Z.prototype.Ng;Z.prototype.Clear=Z.prototype.wj;Z.prototype.CreateScene=Z.prototype.Qg;Z.prototype.DrawText=Z.prototype.ze;Z.prototype.GetClearColor=Z.prototype.Qn;Z.prototype.GetDirectionMousePos=Z.prototype.gf;
Z.prototype.GetViewport=Z.prototype.Sn;Z.prototype.InitEngine=Z.prototype.zl;Z.prototype.LoadMesh=Z.prototype.Tn;Z.prototype.LoadTexture=Z.prototype.Un;Z.prototype.PickGlobe=Z.prototype.Xd;Z.prototype.PopMatrices=Z.prototype.Kd;Z.prototype.PushMatrices=Z.prototype.Rc;Z.prototype.SetClearColor=Z.prototype.Ml;Z.prototype.SetInitCallback=Z.prototype.Nl;Z.prototype.SetKeyDownCallback=Z.prototype.Ol;Z.prototype.SetKeyUpCallback=Z.prototype.Pl;Z.prototype.SetModelMatrix=Z.prototype.Sc;
Z.prototype.SetMouseDownCallback=Z.prototype.Rl;Z.prototype.SetMouseMoveCallback=Z.prototype.Sl;Z.prototype.SetMouseUpCallback=Z.prototype.Tl;Z.prototype.SetMouseWheelCallback=Z.prototype.Ul;Z.prototype.SetOrtho2D=Z.prototype.Pj;Z.prototype.SetProjectionMatrix=Z.prototype.Vl;Z.prototype.SetRenderCallback=Z.prototype.Wl;Z.prototype.SetResizeCallback=Z.prototype.Xl;Z.prototype.SetTimerCallback=Z.prototype.vi;Z.prototype.SetViewMatrix=Z.prototype.jh;Z.prototype.SetViewport=Z.prototype.Yl;
Z.prototype.GetElevationAt=Z.prototype.cg;Z.prototype.OnDestroy=Z.prototype.Qc;function mh(a){a=a.jc;a.ie&&a.ie(a.id)}function nh(a,b){var c=b.jc;c.ke&&c.ke(c.id,a)}function oh(a){a=a.jc;a.je&&a.je(a.id)}function ph(a,b,c,d){d=d.jc;d.Ld&&d.Ld(d.id,a,b,c)}function qh(a,b,c,d){d=d.jc;d.Md&&d.Md(d.id,a,b,c)}function rh(a,b,c){c=c.jc;c.Bf&&c.Bf(c.id,a,b)}function sh(a,b){var c=b.jc;c.qd&&c.qd(c.id,a)}function th(a,b,c){c=c.jc;c.Me&&c.Me(c.id,a,b)}function uh(a,b){var c=b.jc;c.ak&&c.ak(c.id,a)}function vh(a,b){var c=b.jc;c.bk&&c.bk(c.id,a)}
function wh(a){var b=a.jc;b.zf&&b.zf(a.jc.id)}function xh(a){var b=a.jc;b.Af&&b.Af(a.jc.id)}function yh(){this.name="ogContext";this.type=D;this.rm=n;this.e=this.c=k;this.fontcolor=new cd(1,1,1,1);this.Af=this.zf=this.ie=this.ke=this.je=this.Me=this.bk=this.ak=this.Bf=this.qd=this.Md=this.Ld=k}yh.prototype=new G;
yh.prototype.Ra=function(a){this.ie=a.cbfInit;this.Me=a.cbfResize;a.fullscreen&&(this.rm=j);this.c=new Z;this.c.jc=this;a.canvas?this.c.zl(a.canvas,this.rm):Ec(I("owg.ogContext"),"**ERROR: auto creating canvas is not supported yet!");this.c.Nl(mh);this.c.vi(nh);this.c.Wl(oh);this.c.Rl(ph);this.c.Tl(qh);this.c.Sl(rh);this.c.Ul(sh);this.c.Xl(th);this.c.Ol(uh);this.c.Pl(vh);this.c.ua.zf=wh;this.c.ua.Af=xh};yh.prototype.ze=function(a,b,c){this.c&&this.c.ze(a,b,c,1,this.fontcolor)};
yh.prototype.Aj=function(a){return this.c?this.c.Aj(a):k};yh.prototype.ob=function(){this.c.Qc();this.c=k};function zh(){this.name="ogWorld";this.type=Da}zh.prototype=new G;zh.prototype.Ra=function(a){if(a==k)Ec(I("owg.ogTexture"),"** ERROR: no options for texture creation!");else if(a.scenetype){var b=this.parent,c=this.parent.parent.c,b={rendertotexture:b.fn,shownavigation:b.Pk};a.scenetype==eb?(c.df=1,c.Qg(b),c.e&&(c.e.Lg=this)):a.scenetype==fb?(c.df=2,c.Qg(b),c.e&&(c.e.Lg=this)):a.scenetype==gb?(c.df=3,c.Qg(b),c.e&&(c.e.Lg=this)):a.scenetype==hb&&(c.df=0,c.Qg(b),c.e&&(c.e.Lg=this))}};
zh.prototype.ti=function(a){var b=this.parent.parent.c.e.v.Fa;switch(a){case 0:b.ti(Gf);break;case 1:b.ti(Hf)}};function Ah(){this.name="ogScene";this.type=E;this.xf=this.Lg=k;this.Ei=[];this.lc=eb;this.Pk=this.fn=j}Ah.prototype=new G;u=Ah.prototype;u.Ra=function(a){if(a==k)Ec(I("owg.ogScene"),"** ERROR: no options for scene creation!");else if(y(a.type)&&(this.lc=a.type),y(a.rendertotexture)&&(this.fn=a.rendertotexture),y(a.shownavigation))this.Pk=a.shownavigation};u.$g=function(a,b){var c={};this.parent.c.Xd(a,b,c);var d=Array(4);d[0]=c.hit;d[1]=c.lng;d[2]=c.lat;d[3]=c.elv;d[4]=c.x;d[5]=c.y;d[6]=c.z;return d};
u.bh=function(a,b){var c=this.parent.c.bh(a,b);return c?c.Co.id:-1};u.kf=function(a,b){return this.parent.c.kf(a,b)};u.ah=function(a,b){return this.parent.c.ah(a,b)};function Bh(a,b){var c=F(b);if(c&&c.type==Sa){var d=Qc(c);d.Aa(c.gc,c.fc,c.dc);d.Eb(L(c.Va),L(c.pitch),L(c.kc));d.oa=c}a.xf=c}u.Oj=function(a,b){var c=this.parent.c;if(0==a)b.type="globe";else if(1==a)b.type="fly";else if(2==a)b.type="constrained";else if(3==a)b.type="dynamic";else return;c.e.Oj(b)};u.yl=function(a){this.parent.c.e.ic.yl(a)};function Ch(){this.name="ogPOI";this.type=Xa;this.P=n;this.k=this.xa=k}Ch.prototype=new G;
Ch.prototype.Ra=function(a){var b="",c=40,d=k;a.text&&(b=a.text);if(a.position){var e=a.position,f=[];(new T(e[0],e[1],e[2])).V(f)}a.size&&(c=a.size);a.icon&&(d=a.icon);a.textstyle&&(this.ag=a.textstyle);a.iconstyle&&(this.Hf=a.iconstyle);this.xa=this.parent.parent.c.zg.sl(b,this.ag,d,this.Hf);this.xa.P=n;a.flagpoleColor&&(b=this.xa,d=a.flagpoleColor,b.an=d[0],b.$m=d[1],b.Zm=d[2],b.Ym=d[3]);a.flagpole==j?this.xa.Aa(f[0],f[1],f[2],0):this.xa.Aa(f[0],f[1],f[2],k);this.xa.ui(c);a.centerOnIcon==j&&(c=
this.xa,c.Fi=j,Ug(c));a.pivotPoint&&(c=a.pivotPoint,f=this.xa,b=c[1],d=c[2],f.Hk=c[0],f.Ik=b,f.Jk=d,Ug(f));this.xa.Co=this;(c=Dh(this))&&c.Ua.push(this.xa);a.visibilityRange&&(c=this.xa,a=a.visibilityRange,c.$k=1E3*a[0]*K,c.Zk=1E3*a[1]*K)};Ch.prototype.ob=function(){var a=this.parent.parent,b=Dh(this);if(b)for(var c=this.xa,d=0;d<b.Ua.length;d++)if(b.Ua[d]==c){b.Ua.splice(d,1);break}a.c.zg.ul(this.xa)};Ch.prototype.qa=function(){this.P=j;this.xa.P=j};
Ch.prototype.ra=function(){this.P=n;this.xa.P=n};function Dh(a){var b=k,a=a.parent.parent.c;a.e&&a.e.v&&(b=a.e.v.Wh);return b};function Eh(){this.name="ogPOILayer";this.type=Ha;this.P=n;this.Ua=[];this.Hf=this.ag=k;this.lo={fontString:"48px Arial",backgroundColor:"rgba(0, 0, 0, 0)",fontColor:"rgba(255, 255, 255, 1.0)",lineWidth:3,strokeStyle:"rgba(0, 0, 0, 1.0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.0)"};this.ko={iconWidth:64,iconHeight:64,border:0,backgroundColor:"rgba(0, 0, 0, 0.0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(255, 0, 0, 0)"}}Eh.prototype=new G;
function Fh(a){a.font&&a.fontSize&&(a.fontString=a.fontSize+"px "+a.font);if(a.backgroundColor){var b=a.backgroundColor;a.backgroundColor="rgba("+255*b[0]+","+255*b[1]+","+255*b[2]+","+b[3]+")"}a.fontColor&&(b=a.fontColor,a.fontColor="rgba("+255*b[0]+","+255*b[1]+","+255*b[2]+","+b[3]+")");a.strokeColor&&(b=a.strokeColor,a.strokeStyle="rgba("+255*b[0]+","+255*b[1]+","+255*b[2]+","+b[3]+")");a.shadowColor&&(b=a.shadowColor,a.shadowColor="rgba("+255*b[0]+","+255*b[1]+","+255*b[2]+","+b[3]+")");a.width&&
(a.iconWidth=a.width);a.height&&(a.iconHeight=a.height)}Eh.prototype.Ra=function(a){a.textstyle?(Fh(a.textstyle),this.ag=a.textstyle):this.ag=this.lo;a.iconstyle?(Fh(a.iconstyle),this.Hf=a.iconstyle):this.Hf=this.ko};Eh.prototype.ob=function(){for(var a=0;a<this.Ua.length;a++)H(this.Ua[a])};Eh.prototype.qa=function(){this.P=j;for(var a=0;a<this.Ua.length;a++)this.Ua[a].qa()};Eh.prototype.ra=function(){this.P=n;for(var a=0;a<this.Ua.length;a++)this.Ua[a].ra()};function Gh(){this.name="ogElevationLayer";this.type=Fa;this.Lf=-1}Gh.prototype=new G;Gh.prototype.Ug=function(){var a=k,b=this.parent.parent.parent.c;b.e&&b.e.v&&(a=b.e.v.Fa);return a};Gh.prototype.tj=function(a){var b=this.Ug();b&&(this.Lf=b.tj(a))};Gh.prototype.Kj=function(){var a=this.Ug();a&&-1!=this.Lf&&a.Kj(this.Lf)};Gh.prototype.Ra=function(a){this.tj(a)};function hh(a){this.c=a;this.b=a.b;this.Pf=k;this.xm=this.ec=n;this.ni=[];this.oi=[];this.pi=[];this.qi=[];this.wn=2E3;this.to=new T;this.Af=this.zf=k}function Hh(a,b,c,d){var e=a.Pf.hf(),f=[e.longitude,e.latitude,e.elevation],g=[b,c,d];a.Ah=Jc*Math.acos(Math.sin(L(f[1]))*Math.sin(L(g[1]))+Math.cos(L(f[1]))*Math.cos(L(g[1]))*Math.cos(L(g[0]-f[0])));isNaN(a.Ah)&&(a.Ah=0);e=[e.longitude,e.latitude,e.elevation+a.Ah/4];b=[b,c,d+a.Ah/4];a.ni=f;a.oi=e;a.pi=b;a.qi=g;a.xm=j}
function Ee(a,b,c,d,e,f,g){a.Pf=a.c.e.Q;var i=a.Pf.Vg();a.Sk=i.Va;a.Qk=i.pitch;a.Rk=i.kc;e!=k&&f!=k&&g!=k?(a.pn=L(e),a.nn=L(f),a.on=L(g)):(a.pn=a.Sk,a.nn=a.Qk,a.on=a.Rk);a.ng=a.pn-a.Sk;Math.abs(a.ng)>Math.PI&&(a.ng=0<a.ng?a.ng-2*Math.PI:a.ng+2*Math.PI);a.lg=a.nn-a.Qk;Math.abs(a.lg)>Math.PI&&(a.lg=0<a.lg?a.lg-2*Math.PI:a.lg+2*Math.PI);a.mg=a.on-a.Rk;Math.abs(a.mg)>Math.PI&&(a.mg=0<a.mg?a.mg-2*Math.PI:a.mg+2*Math.PI);Hh(a,b,c,d);a.zf&&a.zf(a.c);a.c.vi(function(b){if(a.xm){a.Ak=a.Ak+b;b=a.Ak/a.wn;a.M=
0.5*Math.sin(Math.PI*b-Math.PI/2)+0.5;if(b>1){a.M=1;a.kh()}var b=Math.pow(1-a.M,3)*a.ni[0]+3*a.M*Math.pow(1-a.M,2)*a.oi[0]+3*a.M*a.M*(1-a.M)*a.pi[0]+Math.pow(a.M,3)*a.qi[0],c=Math.pow(1-a.M,3)*a.ni[1]+3*a.M*Math.pow(1-a.M,2)*a.oi[1]+3*a.M*a.M*(1-a.M)*a.pi[1]+Math.pow(a.M,3)*a.qi[1],d=Math.pow(1-a.M,3)*a.ni[2]+3*a.M*Math.pow(1-a.M,2)*a.oi[2]+3*a.M*a.M*(1-a.M)*a.pi[2]+Math.pow(a.M,3)*a.qi[2];a.to.pc(b,c,d);a.Pf.Aa(b,c,d);a.Pf.Eb(a.Sk+a.M*a.ng,a.Qk+a.M*a.lg,a.Rk+a.M*a.mg);a.M==1&&a.kh()}});a.M=0;a.Ak=
0;a.ec=j}hh.prototype.kh=function(){this.c.vi(k);this.ec=n;this.Af&&this.Af(this.c)};
hh.prototype.zj=function(a,b,c,d,e,f,g){this.Pf=this.c.e.Q;var d=d*K,i=new T(a,b,c),l=[];i.V(l);var m=new O;m.Sd(a,b);a=new O;a.kd(l[0],l[1],l[2]);l=new O;l.W(a,m);m={};e!=k&&f!=k&&g!=k?(m.Va=L(e),m.pitch=L(f),m.kc=L(g)):m=this.Pf.Vg();a=m.pitch-Math.PI/2;d=new N(d*Math.sin(a)*Math.cos(m.Va),d*Math.sin(a)*Math.sin(m.Va),d*Math.cos(a));d=l.Qa(d).a;i.pc(d[0],d[1],d[2]);d=i.H[1];l=i.H[0];i=i.H[2];i>c?Ee(this,l,d,i,e,f,g):Ee(this,l,d,-i,m.Va,-Nc(m.pitch),m.kc)};hh.prototype.gh=fa("wn");function Xf(a,b){this.c=a;this.b=a.b;this.na=this.Sb=this.fa=this.S=this.D=k;this.we=new O;this.Lk=[];this.options=b;this.Cc=new cd;this.Cc.m(1,1,1,1)}
Xf.prototype.si=function(a){this.Lk=a;var b=0,c=[],d=[];if(this.options.segmentation)for(var e=0;e<a.length-1;e++){var f=[];wf(a[e][0],a[e][1],f);f[2]=a[e][2];var g=[];wf(a[e+1][0],a[e+1][1],g);g[2]=a[e+1][2];for(var g=[g[0]-f[0],g[1]-f[1],g[2]-g[2]],i=0;i<this.options.segmentation+1;i++){var l=f[2]+g[2]*i/this.options.segmentation,m=[];xf(f[0]+g[0]*i/this.options.segmentation,f[1]+g[1]*i/this.options.segmentation,m);m[2]=l;l=new T(m[0],m[1],m[2]);m=[];l.V(m);c.push(m[0]);c.push(m[1]);c.push(m[2]);
c.push(this.options.color[0]);c.push(this.options.color[1]);c.push(this.options.color[2]);c.push(this.options.color[3]);d.push(b);d.push(b+1);b+=1}}else for(e=0;e<a.length;e++)l=new T(a[e][0],a[e][1],a[e][2]),m=[],l.V(m),c.push(m[0]),c.push(m[1]),c.push(m[2]),c.push(this.options.color[0]),c.push(this.options.color[1]),c.push(this.options.color[2]),c.push(this.options.color[3]),d.push(e),d.push(e+1);d.pop();d.pop();this.Oh=e*this.options.segmentation;this.D=new Float32Array(c);this.S=new Uint16Array(d);
this.kb=d.length;this.Le()};Xf.prototype.s=function(){this.fa&&(this.b.deleteBuffer(this.fa),this.fa=k);this.Sb&&(this.b.deleteBuffer(this.Sb),this.fa=k);this.fa=this.ye=k};
Xf.prototype.ta=function(){this.Lk!=k&&(this.fa||this.Le(),this.b.bindBuffer(this.b.ARRAY_BUFFER,this.fa),this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.Sb),this.b.enableVertexAttribArray(0),this.b.enableVertexAttribArray(1),this.b.vertexAttribPointer(0,3,this.b.FLOAT,n,28,0),this.b.vertexAttribPointer(1,4,this.b.FLOAT,n,28,12),nd(this.c.$a,this.c.wa,this.Cc),this.b.lineWidth(this.options.linewidth),this.b.enable(this.b.POLYGON_OFFSET_FILL),this.b.polygonOffset(1,1E3),this.b.drawElements(this.b.LINES,
this.kb,this.b.UNSIGNED_SHORT,0),this.b.disable(this.b.POLYGON_OFFSET_FILL),this.b.disableVertexAttribArray(0),this.b.disableVertexAttribArray(1),this.b.lineWidth(1))};Xf.prototype.Le=function(){this.fa=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,this.fa);this.b.bufferData(this.b.ARRAY_BUFFER,this.D,this.b.STATIC_DRAW);this.Sb=this.b.createBuffer();this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.Sb);this.b.bufferData(this.b.ELEMENT_ARRAY_BUFFER,this.S,this.b.STATIC_DRAW)};function Ih(){this.name="ogEarthPolylineObject";this.type=cb;this.options=this.Oe=k}Ih.prototype=new G;u=Ih.prototype;u.Ra=function(a){this.options=a;this.Oe=new Xf(this.parent.parent.parent.c,a);this.Oe.si(a.coords)};u.ob=function(){this.Oe&&(this.Oe.s(),this.Oe=k,this.status=3)};u.qa=function(){this.Oe.P=j};u.Ie=p();u.ra=function(){this.Oe.P=n};function Jh(a){this.c=a;this.b=a.b;this.dc=this.gc=this.fc=0;this.canvas=k;this.C=this.w=0;this.R=this.A=k;this.Wm=-1}u=Jh.prototype;
u.lh=function(){this.b.enable(this.b.TEXTURE_2D);this.b.bindTexture(this.b.TEXTURE_2D,this.ab.l);this.b.pixelStorei(this.b.UNPACK_FLIP_Y_WEBGL,0);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.c.b.RGBA,this.b.UNSIGNED_BYTE,this.canvas);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,
this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.bindTexture(this.b.TEXTURE_2D,k);this.ab.ac=j};u.Aa=function(a,b,c){var d=[];(new T(a,b,c)).V(d);this.A.eh(d[0],d[1],d[2],0,0,0)};u.ta=function(){this.scale=20;this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);this.A&&rd(this.A);this.c.Rc();var a=new O;a.Zd(K*this.scale,K*this.scale,1);this.c.Sc(a);this.A&&this.A.ta(n,0,0,k,k);this.c.Kd();this.c.b.disable(this.c.b.BLEND)};
u.ui=fa("scale");u.$g=function(a,b){if(this.A)var c=this.c.gf(a,b,this.c.wa,j),d=this.A.Je(c.x,c.y,c.p,c.me,c.ne,c.oe);if(d){var e=c=0,f=d.Mc,g=d.Gd,i=1-f-g;0==d.xn?(c=f*-this.w/2+g*this.w/2+i*-this.w/2/(f+g+i)+this.w/2,e=f*this.C/2+g*this.C/2+i*-this.C/2/(f+g+i)+this.C/2):1==d.xn&&(c=f*this.w/2+g*this.w/2+i*-this.w/2/(f+g+i)+this.w/2,e=f*this.C/2+g*-this.C/2+i*-this.C/2/(f+g+i)+this.C/2);c/=this.w;e/=this.C;d={};d.id=this.Wm;d.x=c;d.y=e;return d}return k};u.s=function(){this.A&&(this.A.s(),this.ab.s())};function Kh(){this.name="ogBillboard";this.type=Ya;this.status=jb;this.k=-1;this.P=n}Kh.prototype=new G;u=Kh.prototype;
u.Ra=function(a){if(a==k)Ec(I("owg.ogBillboard"),"** ERROR: no options for billboard creation!");else if(this.parent==k)Ec(I("owg.ogBillboard"),"** ERROR: no parent!");else if(this.parent.type!=E)Ec(I("owg.ogBillboard"),"** ERROR: parent is not scene!");else if(a.canvas){this.Vc=new Jh(this.parent.parent.c);this.Vc.Wm=this.id;var b=this.Vc,c=a.canvas;b.canvas=c;switch(c.constructor.toString()){case "[object HTMLCanvasElement]":b.R=b.canvas.getContext("2d");b.w=b.R.canvas.width;b.C=b.R.canvas.height;
break;case "[object HTMLVideoElement]":b.w=c.videoWidth,b.C=c.videoHeight}b.ab=new Q(b.c);b.ab.l=b.b.createTexture();b.A=new P(b.c);b.A.Tc(b.ab);b.ed=b.w;b.dd=b.C;c=[];c.push(-b.w/2,b.C/2,0,0,0);c.push(-b.w/2,-b.C/2,0,0,1/b.dd*b.C);c.push(b.w/2,-b.C/2,0,1/b.ed*b.w,1/b.dd*b.C);c.push(b.w/2,b.C/2,0,1/b.ed*b.w,0);kd(b.A,c);ld(b.A,[0,1,2,0,2,3],"TRIANGLES");b.A.aa=[-b.w/2,-b.C/2,0];b.A.ya=[b.w/2,b.C/2,0];b.A.w=b.w;b.A.C=b.C;b.lh();a=a.position;this.Vc.Aa(a[0],a[1],a[2]);Lh(this).sj(this.Vc)}};
u.ob=function(){this.Vc&&(Lh(this).Jj(this.Vc),this.Vc.s(),this.status=3)};u.ta=function(){this.Vc.ta()};function Lh(a){var b=k,a=a.parent.parent.c;a.e&&a.e.v&&(b=a.e.v.xh);return b}u.qa=function(){this.P=j;this.Vc.P=j};u.ra=function(){this.P=n;this.Vc.P=n};function Mh(){this.name="ogMeshObject";this.type=Pa;this.lb=[];this.Fd=[]}Mh.prototype=new G;u=Mh.prototype;u.Ra=function(a){this.options=a;if(this.options.jsonobject)for(var a=this.options.jsonobject,b=0;b<a.length;b++){this.options.jsonobject=a[b];var c=Y(Qa,this,this.options);this.lb.push(c);this.Fd.push(c.A)}};u.ob=function(){for(var a=0;a<this.lb.length;a++)H(this.lb[a]);this.Fd=this.lb=k};u.qa=function(){for(var a=0;a<this.lb.length;a++)this.lb[a].qa()};
u.mf=function(a,b,c,d){for(var e=0;e<this.lb.length;e++)this.lb[e].mf(a,b,c,d)};u.Ie=function(a,b,c,d,e,f){for(var g=0;g<this.lb.length;g++)this.lb[g].Ie(a,b,c,d,e,f)};u.ih=function(a,b,c,d){for(var e=0;e<this.lb.length;e++)this.lb[e].ih(a,b,c,d)};u.nf=function(a,b,c){for(var d=0;d<this.lb.length;d++)this.lb[d].nf(a,b,c)};u.Eb=function(a,b,c){for(var d=0;d<this.lb.length;d++)this.lb[d].Eb(a,b,c)};u.ra=function(){for(var a=0;a<this.lb.length;a++)this.lb[a].ra()};function Nh(){this.en=Ba()}var Oh=new Nh;Nh.prototype.set=fa("en");Nh.prototype.reset=function(){this.set(Ba())};Nh.prototype.get=ga("en");function Ph(a){this.Mk=a||"";this.Mo=Oh}Ph.prototype.Io=j;Ph.prototype.Ko=j;Ph.prototype.Jo=j;Ph.prototype.jn=n;function Qh(a){return 10>a?"0"+a:""+a}function Rh(a,b){var c=(a.rn-b)/1E3,d=c.toFixed(3),e=0;if(1>c)e=2;else for(;100>c;)e++,c*=10;for(;0<e--;)d=" "+d;return d}function Sh(a){Ph.call(this,a)}Ca(Sh,Ph);Sh.prototype.jn=j;function Th(a){this.Of=a||100;this.yf=[]}u=Th.prototype;u.Mh=0;u.add=function(a){this.yf[this.Mh]=a;this.Mh=(this.Mh+1)%this.Of};u.get=function(a){a=Uh(this,a);return this.yf[a]};u.set=function(a,b){a=Uh(this,a);this.yf[a]=b};u.Ff=function(){return this.yf.length};u.clear=function(){this.Mh=this.yf.length=0};u.sk=function(){for(var a=this.Ff(),b=[],c=this.Ff()-this.Ff();c<a;c++)b[c]=this.get(c);return b};u.Ri=function(){for(var a=[],b=this.Ff(),c=0;c<b;c++)a[c]=c;return a};
function Uh(a,b){b>=a.yf.length&&ea(Error("Out of bounds exception"));return a.yf.length<a.Of?b:(a.Mh+Number(b))%a.Of};function Vh(a,b){this.Se=a||"";this.Mk=b||"";this.yg=[];this.aj=new Th(Wh);this.Fo=Aa(this.bo,this);this.so=new Sh(this.Mk);this.ro={};if(j!=this.vm){this.vm=j;Hc();var c=Gc,d=this.Fo;c.Hh||(c.Hh=[]);c.Hh.push(d)}this.Mi="1"==Xh(this.Se,"enabled");x.setInterval(Aa(this.Ho,this),7500)}var Wh=500;u=Vh.prototype;u.Hn="LOGGING";u.oo=n;u.nb=k;u.ll=n;u.vm=n;u.cm=k;u.wk=Ba();u.Pd=function(){this.Mi&&Yh(this)};function Zh(a,b){a.Mi=b;a.Mi&&Yh(a);$h(a,"enabled",b?"1":"0")}
function ai(a){return!!a.nb&&!a.nb.closed}u.fo=function(){this.aj.clear();ai(this)&&this.nl()};
u.bo=function(a){if(!this.ro[a.Bm]){var b=this.so,c;switch(a.xd.value){case vc.value:c="dbg-sh";break;case wc.value:c="dbg-sev";break;case xc.value:c="dbg-w";break;case yc.value:c="dbg-i";break;default:c="dbg-f"}var d=[];d.push(b.Mk," ");if(b.Io){var e=new Date(a.rn);d.push("[",Qh(e.getFullYear()-2E3)+Qh(e.getMonth()+1)+Qh(e.getDate())+" "+Qh(e.getHours())+":"+Qh(e.getMinutes())+":"+Qh(e.getSeconds())+"."+Qh(Math.floor(e.getMilliseconds()/10)),"] ")}b.Ko&&d.push("[",tb(Rh(a,b.Mo.get())),"s] ");b.Jo&&
d.push("[",nb(a.Bm),"] ");d.push('<span class="',c,'">',mb(tb(nb(a.Hm))));b.jn&&a.hk&&d.push("<br>",mb(tb(a.gk||"")));d.push("</span><br>");b=d.join("");this.Mi?(Yh(this),this.aj.add(b),bi(this,b)):this.aj.add(b);this.oo&&a.xd.value>=wc.value&&Zh(this,j)}};function bi(a,b){a.yg.push(b);x.clearTimeout(a.cm);750<Ba()-a.wk?a.ml():a.cm=x.setTimeout(Aa(a.ml,a),250)}
u.ml=function(){this.wk=Ba();if(ai(this)){var a=this.nb.document.body,a=a&&100>=a.scrollHeight-(a.scrollTop+a.clientHeight);this.nb.document.write(this.yg.join(""));this.yg.length=0;a&&this.nb.scrollTo(0,1E6)}};function ci(a){for(var b=a.aj.sk(),c=0;c<b.length;c++)bi(a,b[c])}
function Yh(a){if(!ai(a)&&!a.ll){var b=Xh(a.Se,"dbg","0,0,800,500").split(","),c=Number(b[0]),d=Number(b[1]),e=Number(b[2]),b=Number(b[3]);a.ll=j;a.nb=window.open("",Db?a.Se.replace(/[\s\-\.\,]/g,"_"):a.Se,"width="+e+",height="+b+",toolbar=no,resizable=yes,scrollbars=yes,left="+c+",top="+d+",status=no,screenx="+c+",screeny="+d);!a.nb&&!a.Lo&&(alert("Logger popup was blocked"),a.Lo=j);a.ll=n;a.nb&&a.nl()}}u.Si=s("*{font:normal 14px monospace;}.dbg-sev{color:#F00}.dbg-w{color:#E92}.dbg-sh{background-color:#fd4;font-weight:bold;color:#000}.dbg-i{color:#666}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}");
u.nl=function(){ai(this)||(this.nb.document.open(),bi(this,"<style>"+this.Si()+'</style><hr><div class="dbg-ev" style="text-align:center">'+this.Hn+"<br><small>Logger: "+this.Se+"</small></div><hr>"),ci(this))};function $h(a,b,c){b+=a.Se;document.cookie=b+"="+encodeURIComponent(c)+";path=/;expires="+(new Date(Ba()+2592E6)).toUTCString()}
function Xh(a,b,c){var a=b+a,b=""+document.cookie,d=b.indexOf(a+"=");return-1!=d?(c=b.indexOf(";",d),decodeURIComponent(b.substring(d+a.length+1,-1==c?b.length:c))):c||""}u.Ho=function(){ai(this)&&$h(this,"dbg",(this.nb.screenX||this.nb.screenLeft||0)+","+(this.nb.screenY||this.nb.screenTop||0)+","+(this.nb.outerWidth||800)+","+(this.nb.outerHeight||500))};function di(a,b){var c;c=a.className;c=na(c)&&c.match(/\S+/g)||[];for(var d=fc(arguments,1),e=c.length+d.length,f=c,g=0;g<d.length;g++)0<=bc(f,d[g])||f.push(d[g]);a.className=c.join(" ");return c.length==e};var ei=!Db||Tb();!Eb&&!Db||Db&&Tb()||Eb&&Rb("1.9.1");Db&&Rb("9");function fi(a,b){Ub(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in gi?a.setAttribute(gi[d],b):0==d.lastIndexOf("aria-",0)?a.setAttribute(d,b):a[d]=b})}var gi={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};
function hi(a,b,c){function d(c){c&&b.appendChild(na(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];ma(f)&&!(pa(f)&&0<f.nodeType)?cc(ii(f)?ec(f):f,d):d(f)}}function ii(a){if(a&&"number"==typeof a.length){if(pa(a))return"function"==typeof a.item||"string"==typeof a.item;if(oa(a))return"function"==typeof a.item}return n}function ji(a){this.Bh=a||x.document||document}function ki(a,b){return na(b)?a.Bh.getElementById(b):b}
ji.prototype.kg=function(a,b,c){var d=this.Bh,e=arguments,f=e[0],g=e[1];if(!ei&&g&&(g.name||g.type)){f=["<",f];g.name&&f.push(' name="',nb(g.name),'"');if(g.type){f.push(' type="',nb(g.type),'"');var i={};Xb(i,g);g=i;delete g.type}f.push(">");f=f.join("")}f=d.createElement(f);g&&(na(g)?f.className=g:la(g)?di.apply(k,[f].concat(g)):fi(f,g));2<e.length&&hi(d,f,e);return f};ji.prototype.createElement=function(a){return this.Bh.createElement(a)};ji.prototype.createTextNode=function(a){return this.Bh.createTextNode(a)};
ji.prototype.appendChild=function(a,b){a.appendChild(b)};function li(a,b){if(mi){var c=ni(),d;for(d in c){var e=d.replace("fancywindow.sel.",""),e=I(e),f=e.xd,g=window.localStorage.getItem(d).toString();(!f||f.toString()!=g)&&e.$h(Cc(g))}}Vh.call(this,a,b)}Ca(li,Vh);var mi;a:{try{mi=!!window.localStorage.getItem;break a}catch(oi){}mi=n}u=li.prototype;
u.ml=function(){this.wk=Ba();if(ai(this)){for(var a=ki(this.yc,"log"),b=100>=a.scrollHeight-(a.scrollTop+a.offsetHeight),c=0;c<this.yg.length;c++){var d=this.yc.kg("div","logmsg");d.innerHTML=this.yg[c];a.appendChild(d)}this.yg.length=0;this.hn();b&&(a.scrollTop=a.scrollHeight)}};
u.nl=function(){if(ai(this)){var a=this.nb.document;a.open();a.write('<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd"><html><head><title>Logging: '+this.Se+"</title><style>"+this.Si()+'</style></head><body><div id="log" style="overflow:auto"></div><div id="head"><p><b>Logging: '+this.Se+"</b></p><p>"+this.Hn+'</p><span id="clearbutton">clear</span><span id="exitbutton">exit</span><span id="openbutton">options</span></div><div id="options"><big><b>Options:</b></big><div id="optionsarea"></div><span id="closebutton">save and close</span></div></body></html>');
a.close();(Db?a.body:this.nb).onresize=Aa(this.hn,this);this.yc=new ji(a);ki(this.yc,"openbutton").onclick=Aa(this.Do,this);ki(this.yc,"closebutton").onclick=Aa(this.ho,this);ki(this.yc,"clearbutton").onclick=Aa(this.fo,this);ki(this.yc,"exitbutton").onclick=Aa(this.po,this);ci(this)}};
u.Do=function(){var a=ki(this.yc,"optionsarea");a.innerHTML="";for(var b=pi(),c=this.yc,d=0;d<b.length;d++){var e=I(b[d]),e=c.kg("div",{},qi(this,"sel"+b[d],e.xd?e.xd.name:"INHERIT"),c.kg("span",{},b[d]||"(root)"));a.appendChild(e)}ki(this.yc,"options").style.display="block";return n};
function qi(a,b,c){for(var a=a.yc,b=a.kg("select",{id:b}),d=0;d<Ac.length;d++){var e=Ac[d],f=a.kg("option",{},e.name);c==e.name&&(f.selected=j);b.appendChild(f)}b.appendChild(a.kg("option",{selected:"INHERIT"==c},"INHERIT"));return b}
u.ho=function(){ki(this.yc,"options").style.display="none";for(var a=pi(),b=this.yc,c=0;c<a.length;c++){var d=I(a[c]),e=ki(b,"sel"+a[c]),e=e.options[e.selectedIndex].text;"INHERIT"==e?d.$h(k):d.$h(Cc(e))}if(mi){a=pi();b=ni();for(c=0;c<a.length;c++)d="fancywindow.sel."+a[c],e=I(a[c]).xd,d in b?e?window.localStorage.getItem(d)!=e.name&&window.localStorage.setItem(d,e.name):window.localStorage.removeItem(d):e&&window.localStorage.setItem(d,e.name)}return n};
u.hn=function(){var a=this.yc,b=ki(a,"log"),c=ki(a,"head");b.style.top=c.offsetHeight+"px";b.style.height=a.Bh.body.offsetHeight-c.offsetHeight-(Db?4:0)+"px"};u.po=function(){Zh(this,n);this.nb&&this.nb.close()};u.Si=function(){return li.Yf.Si.call(this)+"html,body{height:100%;width:100%;margin:0px;padding:0px;background-color:#FFF;overflow:hidden}*{}.logmsg{border-bottom:1px solid #CCC;padding:2px;font:90% monospace}#head{position:absolute;width:100%;font:x-small arial;border-bottom:2px solid #999;background-color:#EEE;}#head p{margin:0px 5px;}#log{position:absolute;width:100%;background-color:#FFF;}#options{position:absolute;right:0px;width:50%;height:100%;border-left:1px solid #999;background-color:#DDD;display:none;padding-left: 5px;font:normal small arial;overflow:auto;}#openbutton,#closebutton{text-decoration:underline;color:#00F;cursor:pointer;position:absolute;top:0px;right:5px;font:x-small arial;}#clearbutton{text-decoration:underline;color:#00F;cursor:pointer;position:absolute;top:0px;right:80px;font:x-small arial;}#exitbutton{text-decoration:underline;color:#00F;cursor:pointer;position:absolute;top:0px;right:50px;font:x-small arial;}select{font:x-small arial;margin-right:10px;}hr{border:0;height:5px;background-color:#8c8;color:#8c8;}"};
function ni(){for(var a={},b=0,c=window.localStorage.length;b<c;b++){var d=window.localStorage.key(b);d!=k&&0==d.lastIndexOf("fancywindow.sel.",0)&&(a[d]=j)}return a}function pi(){var a=Vb(Fc);a.sort();return a};function ri(a){this.y=this.x=k;this.index=-1;0==arguments.length?this.y=this.x=0:2==arguments.length?(this.x=arguments[0],this.y=arguments[1]):3==arguments.length?(this.x=arguments[0],this.y=arguments[1],this.index=arguments[2]):alert("Invalid poly2tri.Point constructor call!");this.Dh=[]}u=ri.prototype;u.set=function(a,b){this.x=a;this.y=b};u.add=function(a){this.x+=a.x;this.y+=a.y};u.sub=function(a){this.x-=a.x;this.y-=a.y};u.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};
u.i=function(a){return this.x==a.x&&this.y==a.y};function si(a,b){return a.y==b.y?a.x-b.x:a.y-b.y}
function ti(a){this.Cb=this.Ta=k;2==arguments.length?arguments[0].y>arguments[1].y?(this.Cb=arguments[0],this.Ta=arguments[1]):arguments[0].y==arguments[1].y?arguments[0].x>arguments[1].x?(this.Cb=arguments[0],this.Ta=arguments[1]):arguments[0].x==arguments[1].x?alert("Invalid poly2tri.edge constructor call: repeated points!"):(this.Ta=arguments[0],this.Cb=arguments[1]):(this.Ta=arguments[0],this.Cb=arguments[1]):alert("Invalid poly2tri.Edge constructor call!");this.Cb.Dh.push(this)}
function ui(a,b,c){this.d=[k,k,k];this.Pa=[k,k,k];this.tm=n;this.Ia=[n,n,n];this.Ka=[n,n,n];3==arguments.length&&(this.d[0]=a,this.d[1]=b,this.d[2]=c)}u=ui.prototype;u.Jd=function(a){return this.d[a]};u.xj=function(a,b){for(var c=j,d=0;d<arguments.length;++d)c=c&&(arguments[d].i(this.d[0])||arguments[d].i(this.d[1])||arguments[d].i(this.d[2]));return c};u.Al=function(){0!=arguments.length&&(this.tm=arguments[0]);return this.tm};
u.fd=function(a){var b;if(3==arguments.length){var c=arguments[0],d=arguments[1];b=arguments[2];c.i(this.d[2])&&d.i(this.d[1])||c.i(this.d[1])&&d.i(this.d[2])?this.Pa[0]=b:c.i(this.d[0])&&d.i(this.d[2])||c.i(this.d[2])&&d.i(this.d[0])?this.Pa[1]=b:c.i(this.d[0])&&d.i(this.d[1])||c.i(this.d[1])&&d.i(this.d[0])?this.Pa[2]=b:alert("Invalid poly2tri.Triangle.MarkNeighbor call (1)!")}else 1==arguments.length?(b=arguments[0],b.xj(this.d[1],this.d[2])?(this.Pa[0]=b,b.fd(this.d[1],this.d[2],this)):b.xj(this.d[0],
this.d[2])?(this.Pa[1]=b,b.fd(this.d[0],this.d[2],this)):b.xj(this.d[0],this.d[1])&&(this.Pa[2]=b,b.fd(this.d[0],this.d[1],this))):alert("Invalid poly2tri.Triangle.MarkNeighbor call! (2)")};function vi(a){a.Pa[0]=k;a.Pa[1]=k;a.Pa[2]=k}function wi(a){a.Ka[0]=n;a.Ka[1]=n;a.Ka[2]=n}function xi(a,b){return b.i(a.d[0])?a.d[2]:b.i(a.d[1])?a.d[0]:b.i(a.d[2])?a.d[1]:k}function yi(a,b){return b.i(a.d[0])?a.d[1]:b.i(a.d[1])?a.d[2]:b.i(a.d[2])?a.d[0]:k}
function zi(a,b){return b.i(a.d[0])?a.Pa[1]:b.i(a.d[1])?a.Pa[2]:a.Pa[0]}function Ai(a,b){return b.i(a.d[0])?a.Pa[2]:b.i(a.d[1])?a.Pa[0]:a.Pa[1]}function Bi(a,b){return b.i(a.d[0])?a.Ia[1]:b.i(a.d[1])?a.Ia[2]:a.Ia[0]}function Ci(a,b){return b.i(a.d[0])?a.Ia[2]:b.i(a.d[1])?a.Ia[0]:a.Ia[1]}function Di(a,b,c){b.i(a.d[0])?a.Ia[1]=c:b.i(a.d[1])?a.Ia[2]=c:a.Ia[0]=c}function Ei(a,b,c){b.i(a.d[0])?a.Ia[2]=c:b.i(a.d[1])?a.Ia[0]=c:a.Ia[1]=c}
function Fi(a,b){return b.i(a.d[0])?a.Ka[1]:b.i(a.d[1])?a.Ka[2]:a.Ka[0]}function Gi(a,b){return b.i(a.d[0])?a.Ka[2]:b.i(a.d[1])?a.Ka[0]:a.Ka[1]}function Hi(a,b,c){b.i(a.d[0])?a.Ka[1]=c:b.i(a.d[1])?a.Ka[2]=c:a.Ka[0]=c}function Ii(a,b,c){b.i(a.d[0])?a.Ka[2]=c:b.i(a.d[1])?a.Ka[0]=c:a.Ka[1]=c}function Ji(a,b){return b.i(a.d[0])?a.Pa[0]:b.i(a.d[1])?a.Pa[1]:a.Pa[2]}
u.Dj=function(a){if(1==arguments.length)this.Dj(this.d[0],arguments[0]);else if(2==arguments.length){var b=arguments[0],c=arguments[1];b.i(this.d[0])?(this.d[1]=this.d[0],this.d[0]=this.d[2],this.d[2]=c):b.i(this.d[1])?(this.d[2]=this.d[1],this.d[1]=this.d[0],this.d[0]=c):b.i(this.d[2])?(this.d[0]=this.d[2],this.d[2]=this.d[1],this.d[1]=c):alert("Invalid poly2tri.Triangle.Legalize call!")}else alert("Invalid poly2tri.Triangle.Legalize call!")};
function Ki(a,b,c){if(b.i(a.d[0])){if(c.i(a.d[1]))return 2;if(c.i(a.d[2]))return 1}else if(b.i(a.d[1])){if(c.i(a.d[2]))return 0;if(c.i(a.d[0]))return 2}else if(b.i(a.d[2])){if(c.i(a.d[0]))return 1;if(c.i(a.d[1]))return 0}return-1}
u.Yg=function(a){if(1==arguments.length)"number"==typeof arguments[0]?this.Ia[arguments[0]]=j:this.Yg(arguments[0].Ta,arguments[0].Cb);else if(2==arguments.length){var b=arguments[0],c=arguments[1];if(c.i(this.d[0])&&b.i(this.d[1])||c.i(this.d[1])&&b.i(this.d[0]))this.Ia[2]=j;else if(c.i(this.d[0])&&b.i(this.d[2])||c.i(this.d[2])&&b.i(this.d[0]))this.Ia[1]=j;else if(c.i(this.d[1])&&b.i(this.d[2])||c.i(this.d[2])&&b.i(this.d[1]))this.Ia[0]=j}else alert("Invalid poly2tri.Triangle.MarkConstrainedEdge call!")};
var Li=3*Math.PI/4,Mi=Math.PI/2;function Ni(a,b,c){a=(a.x-c.x)*(b.y-c.y)-(a.y-c.y)*(b.x-c.x);return-1.0E-16<a&&1.0E-16>a?0:0<a?-1:1}function Oi(a,b,c,d){var e=d.x,d=d.y,f=a.x-e,a=a.y-d;return 1.0E-16>=f*(b.y-d)-(b.x-e)*a?n:1.0E-16>=(c.x-e)*a-f*(c.y-d)?n:j}
function Pi(a){this.G=this.next=this.af=this.h=k;this.value=0;1==arguments.length?(this.h=arguments[0],this.value=this.h.x):2==arguments.length?(this.h=arguments[0],this.af=arguments[1],this.value=this.h.x):alert("Invalid poly2tri.Node constructor call!")}function Qi(a,b){this.Ih=a;this.Uk=b;this.Zh=a}Qi.prototype.head=ga("Ih");Qi.prototype.Fj=function(a){var b=this.Zh;if(a<b.value)for(;(b=b.G)!=k;){if(a>=b.value)return this.Zh=b}else for(;(b=b.next)!=k;)if(a<b.value)return this.Zh=b.G;return k};
function Ri(){this.Jc=this.od=this.se=k;this.width=0;this.xk=n}Ri.prototype.wj=function(){this.Jc=this.od=this.se=k;this.width=0;this.xk=n};function Si(){this.Ia=k;this.right=n}function Ti(a){this.yn=[];this.Xc=[];this.d=a;this.Dh=[];this.Uk=this.Ih=this.Gh=k;this.$=new Ri;this.Ch=new Si;Ui(this,this.d)}Ti.prototype.head=ga("Ih");function Ui(a,b){for(var c=0;c<b.length;++c)a.Dh.push(new ti(b[c],b[(c+1)%b.length]))}Ti.prototype.Jd=function(a){return this.d[a]};Ti.prototype.Fj=function(a){return this.Gh.Fj(a.x)};
function Vi(a,b){for(var c=0;3>c;++c)if(b.Pa[c]==k){var d;a:{d=a.Gh;var e=xi(b,b.Jd(c)),f=e.x,g=d.Zh,i=g.h.x;if(f==i)if(e.i(g.G.h))g=g.G;else if(e.i(g.next.h))g=g.next;else{if(!e.i(g.h)){alert("Invalid poly2tri.AdvancingFront.LocatePoint call!");d=k;break a}}else if(f<i)for(;(g=g.G)!=k&&!e.i(g.h););else for(;(g=g.next)!=k&&!e.i(g.h););g!=k&&(d.Zh=g);d=g}d!=k&&(d.af=b)}}function Wi(a,b){if(b!=k&&!b.Al()){b.Al(j);a.yn.push(b);for(var c=0;3>c;++c)b.Ia[c]||Wi(a,b.Pa[c])}}
function Xi(a){var b;if(3==arguments.length){b=arguments[0];var c=arguments[1],d=arguments[2];b.Ch.Ia=c;b.Ch.right=c.Ta.x>c.Cb.x;if(!Yi(d.af,c.Ta,c.Cb)){var e=b;if(e.Ch.right)for(var f=d;f.next.h.x<c.Ta.x;)-1==Ni(c.Cb,f.next.h,c.Ta)?Zi(e,c,f):f=f.next;else for(f=d;f.G.h.x>c.Ta.x;)1==Ni(c.Cb,f.G.h,c.Ta)?$i(e,c,f):f=f.G;Xi(b,c.Ta,c.Cb,d.af,c.Cb)}}else if(5==arguments.length){if(b=arguments[0],c=arguments[1],d=arguments[2],e=arguments[3],f=arguments[4],!Yi(e,c,d)){var g=yi(e,f),g=Ni(d,g,c);if(0==g)alert("poly2tri.sweep.EdgeEvent: Collinear not supported!");
else{var i=xi(e,f),i=Ni(d,i,c);0==i?alert("poly2tri.sweep.EdgeEvent: Collinear not supported!"):g==i?(e=1==g?Ai(e,f):zi(e,f),Xi(b,c,d,e,f)):aj(b,c,d,e,f)}}}else alert("Invalid poly2tri.sweep.EdgeEvent call!")}function Yi(a,b,c){var d=Ki(a,b,c);return-1!=d?(a.Yg(d),a=a.Pa[d],a!=k&&a.Yg(b,c),j):n}function bj(a,b){var c=new ui(b.G.h,b.h,b.next.h);c.fd(b.G.af);c.fd(b.af);a.Xc.push(c);b.G.next=b.next;b.next.G=b.G;cj(a,c)||Vi(a,c)}
function dj(a){var b=a.next.h.x-a.h.x,c=a.next.h.y-a.h.y,d=a.G.h.x-a.h.x,a=a.G.h.y-a.h.y;return Math.atan2(b*a-c*d,b*d+c*a)}
function cj(a,b){for(var c=0;3>c;++c)if(!b.Ka[c]){var d=b.Pa[c];if(d!=k){var e=b.Jd(c),f=xi(d,xi(b,e)),g=f.i(d.d[0])?0:f.i(d.d[1])?1:f.i(d.d[2])?2:-1;if(d.Ia[g]||d.Ka[g])b.Ia[c]=d.Ia[g];else{var i;var l=yi(b,e),m=xi(b,e);i=e.x-f.x;var o=e.y-f.y,r=l.x-f.x,l=l.y-f.y,q=i*l-r*o;if(0>=q)i=n;else{var t=m.x-f.x,m=m.y-f.y,v=t*o-i*m;i=0>=v?n:0<(i*i+o*o)*(r*m-t*l)+(r*r+l*l)*v+(t*t+m*m)*q}if(i)return b.Ka[c]=j,d.Ka[g]=j,ej(b,e,d,f),(e=!cj(a,b))&&Vi(a,b),(e=!cj(a,d))&&Vi(a,d),b.Ka[c]=n,d.Ka[g]=n,j}}}return n}
function ej(a,b,c,d){var e,f,g,i;e=Ai(a,b);f=zi(a,b);g=Ai(c,d);i=zi(c,d);var l,m,o,r;l=Ci(a,b);m=Bi(a,b);o=Ci(c,d);r=Bi(c,d);var q,t,v,w;q=Gi(a,b);t=Fi(a,b);v=Gi(c,d);w=Fi(c,d);a.Dj(b,d);c.Dj(d,b);Ii(c,b,q);Hi(a,b,t);Ii(a,d,v);Hi(c,d,w);Ei(c,b,l);Di(a,b,m);Ei(a,d,o);Di(c,d,r);vi(a);vi(c);e&&c.fd(e);f&&a.fd(f);g&&a.fd(g);i&&c.fd(i);a.fd(c)}
function fj(a,b){if(!(a.$.width>(a.$.xk?a.$.se.h.y-b.h.y:a.$.Jc.h.y-b.h.y))){bj(a,b);var c;if(!(b.G==a.$.se&&b.next==a.$.Jc)){if(b.G==a.$.se){c=Ni(b.h,b.next.h,b.next.next.h);if(1==c)return;b=b.next}else if(b.next==a.$.Jc){c=Ni(b.h,b.G.h,b.G.G.h);if(-1==c)return;b=b.G}else b=b.G.h.y<b.next.h.y?b.G:b.next;fj(a,b)}}}function Zi(a,b,c){c.h.x<b.Ta.x&&(-1==Ni(c.h,c.next.h,c.next.next.h)?gj(a,b,c):(hj(a,b,c),Zi(a,b,c)))}
function gj(a,b,c){bj(a,c.next);c.next.h!=b.Ta&&-1==Ni(b.Cb,c.next.h,b.Ta)&&-1==Ni(c.h,c.next.h,c.next.next.h)&&gj(a,b,c)}function hj(a,b,c){-1==Ni(c.next.h,c.next.next.h,c.next.next.next.h)?gj(a,b,c.next):-1==Ni(b.Cb,c.next.next.h,b.Ta)&&hj(a,b,c.next)}function $i(a,b,c){c.h.x>b.Ta.x&&(1==Ni(c.h,c.G.h,c.G.G.h)?ij(a,b,c):(jj(a,b,c),$i(a,b,c)))}function jj(a,b,c){1==Ni(c.G.h,c.G.G.h,c.G.G.G.h)?ij(a,b,c.G):1==Ni(b.Cb,c.G.G.h,b.Ta)&&jj(a,b,c.G)}
function ij(a,b,c){bj(a,c.G);c.G.h!=b.Ta&&1==Ni(b.Cb,c.G.h,b.Ta)&&1==Ni(c.h,c.G.h,c.G.G.h)&&ij(a,b,c)}
function aj(a,b,c,d,e){var f=Ji(d,e);if(f==k)alert("[BUG:FIXME] FLIP failed due to missing triangle!");else{var g=xi(f,xi(d,e));Oi(e,yi(d,e),xi(d,e),g)?(ej(d,e,f,g),Vi(a,d),Vi(a,f),e==c&&g==b?c==a.Ch.Ia.Cb&&b==a.Ch.Ia.Ta&&(d.Yg(b,c),f.Yg(b,c),cj(a,d),cj(a,f)):(-1==Ni(c,g,b)?(g=Ki(f,e,g),f.Ka[g]=j,cj(a,f),wi(f)):(g=Ki(d,e,g),d.Ka[g]=j,cj(a,d),wi(d),d=f),aj(a,b,c,d,e))):(g=kj(b,c,f,g),lj(a,b,c,d,f,g),Xi(a,b,c,d,e))}}
function kj(a,b,c,d){a=Ni(b,d,a);if(1==a)return yi(c,d);if(-1==a)return xi(c,d);alert("[Unsupported] poly2tri.sweep.NextFlipPoint: opposing point on constrained edge!")}function lj(a,b,c,d,e,f){var g=Ji(e,f);g==k?alert("[BUG:FIXME] FLIP failed due to missing triangle"):(e=xi(g,xi(e,f)),Oi(c,yi(d,c),xi(d,c),e)?aj(a,c,e,g,e):(e=kj(b,c,g,e),lj(a,b,c,d,g,e)))};function mj(){this.name="ogGeometry";this.type=Oa;this.re="";this.options=this.pd=this.le=k;this.Fd=[];this.Fd.F=[0,0,0];this.Kf=this.Ga=-1;this.color=[1,1,1,1];this.Cc=[1,1,1,1];this.zm=10;this.Gm=-1E3;this.Fm=9E3}mj.prototype=new G;u=mj.prototype;u.Ra=function(a){a.dynamic?this.oc(a.data):y(a.url)&&"GeoJSON"==a.type&&nj(this,a.url)};u.ob=function(){oj(this).ri(this.Ga)};function oj(a){var b=k,a=a.parent.parent.c;a.e&&a.e.v&&(b=a.e.v.Xk);return b}u.qa=p();u.ra=p();
u.Sj=function(){4==this.X.readyState&&(404==this.X.status?this.pd&&this.pd(this.id):this.oc(dd(this.X.responseText)))};
function pj(a,b,c,d){var e={Rh:n,Ah:0,Ec:[0,0,0],Eo:[0,0,0]},b=[b[0]-a[0],b[1]-a[1],b[2]-a[2]],d=[d[0]-c[0],d[1]-c[1],d[2]-c[2]],f=[a[0]-c[0],a[1]-c[1],a[2]-c[2]],g=b[0]*b[0]+b[1]*b[1]+b[2]*b[2],i=b[0]*d[0]+b[1]*d[1]+b[2]*d[2],l=d[0]*d[0]+d[1]*d[1]+d[2]*d[2],m=b[0]*f[0]+b[1]*f[1]+b[2]*f[2],o=d[0]*f[0]+d[1]*f[1]+d[2]*f[2],r=g*l-i*i;1.0E-14>r?(e.Rh=j,f=0,g=i>l?m/i:o/l):(f=(i*o-l*m)/r,g=(g*o-i*m)/r);e.Ec=[a[0]+f*b[0],a[1]+f*b[1],a[2]+f*b[2]];e.Eo=[c[0]+g*d[0],c[1]+g*d[1],c[2]+g*d[2]];return e}
function qj(a,b,c,d,e,f,g,i,l,m,o){m.push(b[0]);m.push(b[1]);m.push(b[2]);b=a;a++;m.push(f[0]);m.push(f[1]);m.push(f[2]);f=a;a++;m.push(e[0]);m.push(e[1]);m.push(e[2]);e=a;a++;m.push(l[0]);m.push(l[1]);m.push(l[2]);l=a;a++;m.push(c[0]);m.push(c[1]);m.push(c[2]);c=a;a++;m.push(g[0]);m.push(g[1]);m.push(g[2]);g=a;a++;m.push(d[0]);m.push(d[1]);m.push(d[2]);d=a;a++;m.push(i[0]);m.push(i[1]);m.push(i[2]);i=a;a++;o.push(c);o.push(g);o.push(d);o.push(g);o.push(i);o.push(d);o.push(b);o.push(e);o.push(f);
o.push(f);o.push(e);o.push(l);o.push(b);o.push(f);o.push(c);o.push(f);o.push(g);o.push(c);o.push(e);o.push(d);o.push(i);o.push(l);o.push(e);o.push(i);o.push(b);o.push(c);o.push(e);o.push(c);o.push(d);o.push(e);o.push(f);o.push(i);o.push(g);o.push(f);o.push(l);o.push(i);return a}
function rj(a,b,c){var d={VertexSemantic:"",Vertices:k,IndexSemantic:"",Indices:k,VertexSemantic:"p",IndexSemantic:"TRIANGLES"};d.Vertices=b;d.Indices=c;b=new P(a.parent.parent.c);b.oc(d,k,k,b);4==a.color.length?b.mc.m(a.color[0],a.color[1],a.color[2],a.color[3]):3==a.color.length&&b.mc.m(a.color[0],a.color[1],a.color[2],1);return b}
u.oc=function(a){jh("CreateFromJSONObject");var b=n;if("FeatureCollection"==a.type&&(jh("[GeoJSON Parser] type = FeatureCollection"),y(a.features)))for(var a=a.features,c=a.length,d=0;d<c;d++)if(y(a[d].type)&&"Feature"==a[d].type&&y(a[d].properties)&&y(a[d].geometry)){var e=a[d].properties,f=a[d].geometry;y(e.color)&&(this.color=e.color);y(e.highlightcolor)&&(this.Cc=e.highlightcolor);y(e.linewidth)&&(this.zm=e.linewidth);y(e.minelv)&&(this.Gm=e.minelv);y(e.maxelv)&&(this.Fm=e.maxelv);if(y(f.type))if(e=
f.type,"LineString"==e)y(f.coordinates&&la(f.coordinates))&&(b=sj(this,f.coordinates));else if("MultiLineString"==e){if(y(f.coordinates&&la(f.coordinates))){f=f.coordinates;for(e=0;e<f.length;e++)sj(this,f[e])&&(b=j)}}else if("Polygon"==e){if(y(f.coordinates&&la(f.coordinates))){var b=f.coordinates,e=0,g=[],f=[],i=[];new T;var l=b.length;if(0==l)b=n;else{if(1<=l){for(var m=0;m<l;m++)if(0==m)for(var o=0;o<b[m].length;o++)g.push(new ri(b[m][o][0],b[m][o][1],e)),i.push([b[m][o][0],b[m][o][1]]),e++;else{for(var r=
[],o=0;o<b[m].length;o++)r.push(new ri(b[m][o][0],b[m][o][1]),e),i.push([b[m][o][0],b[m][o][1]]),e++;f.push(r)}b=new Ti(g);e=h;for(e in f)for(l in g=b,i=f[e],Ui(g,i),l=h,i)g.d.push(i[l]);e=f=b;g=e.d[0].x;i=e.d[0].x;m=e.d[0].y;l=e.d[0].y;o=h;for(o in e.d)if(r=e.d[o],r.x>g&&(g=r.x),r.x<i&&(i=r.x),r.y>m&&(m=r.y),r.y<l)l=r.y;m=0.3*(m-l);e.Ih=new ri(g+0.3*(g-i),l-m);e.Uk=new ri(i-m,l-m);e.d.sort(si);e=f;l=i=g=h;l=new ui(e.d[0],e.Uk,e.Ih);e.Xc.push(l);g=new Pi(l.Jd(1),l);i=new Pi(l.Jd(0),l);l=new Pi(l.Jd(2));
e.Gh=new Qi(g,l);g.next=i;i.next=l;i.G=g;l.G=i;e=f;for(g=1;g<e.d.length;++g){var i=e.Jd(g),l=e,m=i,o=l.Fj(m),r=l,q=m,t=o,v=new ui(q,t.h,t.next.h);v.fd(t.af);r.Xc.push(v);q=new Pi(q);q.next=t.next;q.G=t;t.next.G=q;t.next=q;cj(r,v)||Vi(r,v);r=q;m.x<=o.h.x+1.0E-16&&bj(l,o);m=r;o=m.next;for(t=h;o.next!=k;){t=dj(o);if(t>Mi||t<-Mi)break;bj(l,o);o=o.next}for(o=m.G;o.G!=k;){t=dj(o);if(t>Mi||t<-Mi)break;bj(l,o);o=o.G}if(m.next!=k&&m.next.next!=k&&(t=Math.atan2(m.h.y-m.next.next.h.y,m.h.x-m.next.next.h.x),
t<Li)){l.$.se=-1==Ni(m.h,m.next.h,m.next.next.h)?m.next.next:m.next;for(l.$.od=l.$.se;l.$.od.next!=k&&l.$.od.h.y>=l.$.od.next.h.y;)l.$.od=l.$.od.next;if(l.$.od!=l.$.se){for(l.$.Jc=l.$.od;l.$.Jc.next!=k&&l.$.Jc.h.y<l.$.Jc.next.h.y;)l.$.Jc=l.$.Jc.next;l.$.Jc!=l.$.od&&(l.$.width=l.$.Jc.h.x-l.$.se.h.x,l.$.xk=l.$.se.h.y>l.$.Jc.h.y,fj(l,l.$.od))}}l=r;for(m=0;m<i.Dh.length;++m)Xi(e,i.Dh[m],l)}e=f.Gh.head().next.af;for(g=f.Gh.head().next.h;!Bi(e,g);)e=Ai(e,g);Wi(f,e);b=b.yn;f=[];for(e=0;e<b.length;e++)g=
b[e].Jd(1).index,i=b[e].Jd(2).index,f.push(b[e].Jd(0).index),f.push(g),f.push(i)}b=j}}}else"MultiPolygon"==e?lh("MultiPolygon is not yet supported"):"Point"==e?lh("Point is not yet supported"):"MultiPoint"==e&&lh("MultiPoint is not yet supported")}b&&(this.Ga=oj(this).ol(this.Fd))};function tj(a,b){for(var c=0;c<a.length;c+=3)a[c+0]-=b[0],a[c+1]-=b[1],a[c+2]-=b[2]}
function nj(a,b){b==k?alert("invalid json-url"):(a.re=b,a.X=new window.XMLHttpRequest,a.X.open("GET",a.re,j),a.X.onreadystatechange=function(){a.Sj()},a.X.send())}
function sj(a,b){var c=new T,d=[0,0,0],e=[0,0,0],f=[],g=b.length;if(1<g)for(var i=0;i<g;i++){var l=b[i][0],m=b[i][1];c.m(l,m,a.Fm);c.V(d);c.m(l,m,a.Gm);c.V(e);f.push([d[0],d[1],d[2]]);f.push([e[0],e[1],e[2]])}else return n;g=f.length;for(l=e=d=c=0;l<f.length;l++)c+=f[l][0]/g,d+=f[l][1]/g,e+=f[l][2]/g;a.Fd.F[0]=c;a.Fd.F[1]=d;a.Fd.F[2]=e;var g=[],l=[],o=0.5*a.zm*K,m=0,r,q,t,v,w,B,A,C,R,ja,V,W,M,$,aa,ba,wa,xa,ya;if(4==f.length){i=f[0];r=f[1];q=f[2];t=f[3];var J=q[0]-i[0],ca=q[1]-i[1],ua=q[2]-i[2],da=
r[0]-i[0],qa=r[1]-i[1],ia=r[2]-i[2],f=ca*ia-ua*qa;M=ua*da-J*ia;m=J*qa-ca*da;J=o/Math.sqrt(f*f+M*M+m*m);f*=J;M*=J;m*=J;B=[i[0]+f,i[1]+M,i[2]+m];A=[r[0]+f,r[1]+M,r[2]+m];C=[q[0]+f,q[1]+M,q[2]+m];R=[t[0]+f,t[1]+M,t[2]+m];ja=[i[0]-f,i[1]-M,i[2]-m];V=[r[0]-f,r[1]-M,r[2]-m];W=[q[0]-f,q[1]-M,q[2]-m];M=[t[0]-f,t[1]-M,t[2]-m];qj(0,B,ja,W,C,A,V,M,R,l,g);tj(l,[c,d,e]);a.Fd.push(rj(a,l,g))}else if(6<=f.length){i=f[0];r=f[1];q=f[2];t=f[3];v=f[4];w=f[5];J=q[0]-i[0];ca=q[1]-i[1];ua=q[2]-i[2];da=r[0]-i[0];qa=r[1]-
i[1];ia=r[2]-i[2];$=ca*ia-ua*qa;aa=ua*da-J*ia;ba=J*qa-ca*da;J=o/Math.sqrt($*$+aa*aa+ba*ba);$*=J;aa*=J;ba*=J;B=[i[0]+$,i[1]+aa,i[2]+ba];A=[r[0]+$,r[1]+aa,r[2]+ba];ja=[i[0]-$,i[1]-aa,i[2]-ba];V=[r[0]-$,r[1]-aa,r[2]-ba];for(i=4;i<f.length;i+=2)v=f[i],w=f[i+1],J=v[0]-q[0],ca=v[1]-q[1],ua=v[2]-q[2],da=t[0]-q[0],qa=t[1]-q[1],ia=t[2]-q[2],wa=ca*ia-ua*qa,xa=ua*da-J*ia,ya=J*qa-ca*da,J=o/Math.sqrt(wa*wa+xa*xa+ya*ya),wa*=J,xa*=J,ya*=J,da=t[0]-r[0],qa=t[1]-r[1],ia=t[2]-r[2],R=Math.sqrt(da*da+qa*qa+ia*ia),da/=
R,qa/=R,ia/=R,J=t[0]-w[0],ca=t[1]-w[1],ua=t[2]-w[2],R=Math.sqrt(J*J+ca*ca+ua*ua),J/=R,ca/=R,W=[w[0]+wa,w[1]+xa,w[2]+ya],r=[w[0]-wa,w[1]-xa,w[2]-ya],M=[v[0]+wa,v[1]+xa,v[2]+ya],C=[v[0]-wa,v[1]-xa,v[2]-ya],R=pj([A[0],A[1],A[2]],[A[0]+da,A[1]+qa,A[2]+ia],[W[0],W[1],W[2]],[W[0]+J,W[1]+ca,W[2]+ia]),W=pj([V[0],V[1],V[2]],[V[0]+da,V[1]+qa,V[2]+ia],[r[0],r[1],W[2]],[r[0]+J,r[1]+ca,r[2]+ia]),r=pj([B[0],B[1],B[2]],[B[0]+da,B[1]+qa,B[2]+ia],[M[0],M[1],M[2]],[M[0]+J,M[1]+ca,M[2]+ia]),J=pj([ja[0],ja[1],ja[2]],
[ja[0]+da,ja[1]+qa,ja[2]+ia],[C[0],C[1],C[2]],[C[0]+J,C[1]+ca,C[2]+ia]),!R.Rh&&!W.Rh&&!r.Rh&&!J.Rh?(R=[R.Ec[0],R.Ec[1],R.Ec[2]],M=[W.Ec[0],W.Ec[1],W.Ec[2]],C=[r.Ec[0],r.Ec[1],r.Ec[2]],W=[J.Ec[0],J.Ec[1],J.Ec[2]]):(R=[t[0]+$,t[1]+aa,t[2]+ba],M=[t[0]-$,t[1]-aa,t[2]-ba],C=[q[0]+$,q[1]+aa,q[2]+ba],W=[q[0]-$,q[1]-aa,q[2]-ba]),m=qj(m,B,ja,W,C,A,V,M,R,l,g),$=wa,aa=xa,ba=ya,r=t,q=v,t=w,A=R,V=M,B=C,ja=W;f=[w[0]+$,w[1]+aa,w[2]+ba];o=[w[0]-$,w[1]-aa,w[2]-ba];i=[v[0]+$,v[1]+aa,v[2]+ba];q=[v[0]-$,v[1]-aa,v[2]-
ba];qj(m,C,W,q,i,R,M,o,f,l,g);tj(l,[c,d,e]);a.Fd.push(rj(a,l,g))}else return n;return j};function uj(){this.name="ogAoeImageLayer";this.type=$a;this.P=n;this.xb=[]}uj.prototype=new G;u=uj.prototype;u.Ra=p();u.ob=function(){for(var a=0;a<this.xb.length;a++){for(var b=a;b<this.xb.length;b++)this.xb[a].Ga-=1;H(this.xb[a])}};u.qa=function(){this.P=j;for(var a=0;a<this.xb.length;a++)this.xb[a].qa()};u.ra=function(){this.P=n;for(var a=0;a<this.xb.length;a++)this.xb[a].ra()};u.rj=function(a){this.xb.push(a);a.Kf=this.id};
u.Ij=function(a){for(var b=0;b<this.xb.length;b++)if(this.xb[b]==a){for(var c=b+1;c<this.xb.length;c++)this.xb[c].Ga-=1;H(this.xb[b]);this.xb.splice(b,1)}};function vj(){this.name="ogVectorLayer";this.type=Ka;this.P=n;this.ga=[]}vj.prototype=new G;u=vj.prototype;u.Ra=p();function wj(a,b){var c=Y(Ra,a.parent.parent,b);a.ga.push(c);c.rp=a;return c}u.ri=function(a){for(var b=0;b<this.ga.length;b++)this.ga[b]==a&&(H(this.ga[b]),this.ga.splice(b,1))};u.ob=function(){xj(this)};u.qa=function(){this.P=j;for(var a=0;a<this.ga.length;a++)this.ga[a].qa()};u.ra=function(){this.P=n;for(var a=0;a<this.ga.length;a++)this.ga[a].ra()};
function xj(a){for(var b=0;b<a.ga.length;b++){for(var c=b;c<a.ga.length;c++)a.ga[b].Ga-=1;H(a.ga[b])}}u.ol=function(a){this.ga.push(a);a.Kf=this.id};u.ri=function(a){for(var b=0;b<this.ga.length;b++)if(this.ga[b]==a){for(var c=b+1;c<this.ga.length;c++)this.ga[c].Ga-=1;H(this.ga[b]);this.ga.splice(b,1)}};function yj(){this.name="ogImageLayer";this.type=Ea;this.Lf=-1}yj.prototype=new G;yj.prototype.Ug=function(){var a=k,b=this.parent.parent.parent.c;b.e&&b.e.v&&(a=b.e.v.Fa);return a};yj.prototype.uj=function(a){var b=this.Ug();b&&(this.Lf=b.uj(a))};yj.prototype.Mj=function(){var a=this.Ug();a&&-1!=this.Lf&&a.Mj(this.Lf)};yj.prototype.Ra=function(a){this.uj(a)};function zj(){this.name="ogBillboardLayer";this.type=Za;this.P=n;this.Xa=[]}zj.prototype=new G;u=zj.prototype;u.Ra=p();u.ob=function(){for(var a=0;a<this.Xa.length;a++)H(this.Xa[a])};u.qa=function(){this.P=j;for(var a=0;a<this.Xa.length;a++)this.Xa[a].qa()};u.ra=function(){this.P=n;for(var a=0;a<this.Xa.length;a++)this.Xa[a].ra()};u.Jj=function(a){for(var b=0;b<this.Xa.length;b++)this.Xa[b]==a&&(H(this.Xa[b]),this.Xa.splice(b,1))};u.sj=function(a){this.Xa.push(a)};function Aj(){this.name="ogPointSpriteObject";this.type=bb;this.ye=this.options=this.Dd=k;this.Yi=this.Li=0}Aj.prototype=new G;u=Aj.prototype;u.Ra=function(a){this.options=a;this.Dd=new yd(this.parent.parent.parent.c);a.Vertices&&this.Dd.si(a.Vertices);a.PointUrl&&(Bj(this,a.PointUrl),this.Ao=a.NumberOfPoints,this.Dd.pj=this.Ao);this.Dd.fh(a.Center[0],a.Center[1],a.Center[2])};u.ob=function(){this.Dd&&(this.Dd.s(),this.Dd=k,this.status=3)};u.qa=function(){this.Dd.P=j};u.Ie=p();
u.ra=function(){this.Dd.P=n};function Bj(a,b){b==k?alert("invalid xyzurl"):(a.Uo=b,a.X=new window.XMLHttpRequest,a.X.open("GET",a.Uo,j),a.X.onreadystatechange=function(){4==a.X.readyState&&(404==a.X.status?alert("xyz-file not found..."):Cj(a))},a.X.onprogress=function(){Cj(a)},a.X.send(),a.Li=0,a.Yi=0)}
function Cj(a){var b=a.X.responseText;a.Li=b.lastIndexOf("\n");for(var b=b.substr(a.Yi,a.Li-a.Yi-1),c=[],b=b.split(","),d=0;d<b.length;d++){var e=parseFloat(b[d]);isNaN(e)||c.push(e)}a.Dd.si(c);a.Yi=a.Li};function Dj(){this.name="ogGeometryLayer";this.type=Ia;this.P=n;this.ma=[]}Dj.prototype=new G;u=Dj.prototype;u.Ra=p();u.ob=function(){for(var a=0;a<this.ma.length;a++){for(var b=a;b<this.ma.length;b++)this.ma[a].Ga-=1;H(this.ma[a])}};u.qa=function(){this.P=j;for(var a=0;a<this.ma.length;a++)this.ma[a].qa()};u.ra=function(){this.P=n;for(var a=0;a<this.ma.length;a++)this.ma[a].ra()};u.Id=function(a){this.ma.push(a);a.Kf=this.id};
u.Lj=function(a){for(var b=0;b<this.ma.length;b++)if(this.ma[b]==a){for(var c=b+1;c<this.ma.length;c++)this.ma[c].Ga-=1;H(this.ma[b]);this.ma.splice(b,1)}};function Ej(){this.name="ogSurface";this.type=Qa;this.elevation=this.latitude=this.longitude=0;this.status=jb;this.A=k;this.elevation=this.latitude=this.longitude=0}Ej.prototype=new G;u=Ej.prototype;u.Ie=function(a,b,c,d,e,f){this.longitude=a;this.latitude=b;this.elevation=c;this.A.fh(a,b,c,d,e,f)};
u.ih=function(a,b,c,d){this.longitude=a;this.latitude=b;this.elevation=c;var e=this.A;e.gc=a;e.fc=b;e.dc=c;var f=new T(a,b,c),c=Array(3);f.V(c);f=new O;f.Sd(a,b);a=Array(16);b=f.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;c=new O;c.He(a);a=new O;a.He([1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1]);a.Ke();b=new O;b.bg(d[0],d[1],d[2],d[3]);b.Ke();f=new O;f.W(a,b);d=new O;d.W(a,f);b=new O;b.He([0,
-1,0,0,1,0,0,0,0,0,1,0,0,0,0,1]);b.Ke();a=new O;a.W(b,d);d=new O;d.W(c,a);c=new O;c.Zd(K,K,K);a=new O;a.W(d,c);e.na=a;qd(e)};u.Eb=function(a,b,c){this.A.Eb(a,b,c)};u.nf=function(a,b,c){this.A.nf(a,b,c)};
u.Ra=function(a){if(a==k)Ec(I("owg.ogTexture"),"** ERROR: no options for surface creation!");else if(this.parent==k)Ec(I("owg.ogTexture"),"** ERROR: no parent!");else if(this.parent.type!=Pa)Ec(I("owg.ogTexture"),"** ERROR: parent is not scene!");else{if(a.jsonobject){this.A=new P(this.parent.parent.parent.parent.c);this.A.P=n;this.A.Bo=this.id;var b=this;this.A.oc(a.jsonobject,function(){0!=b.longitude&&0!=b.latitude&&b.Ie(b.longitude,b.latitude,b.elevation);b.status=ib;b.K&&b.K(b.id)},function(){b.status=
3;b.J&&b.J(b.id)});this.re=a.url;this.A.Cn=a.jsonobject.VisibilityDistance?a.jsonobject.VisibilityDistance*K:5E4*K}this.longitude=a.jsonobject.Center[0];this.latitude=a.jsonobject.Center[1];this.elevation=a.jsonobject.Center[2]}};u.ob=function(){this.A&&(this.A.s(),this.A=k,this.status=3)};u.ra=function(){this.A&&(this.A.P=n)};u.qa=function(){this.A&&(this.A.P=j)};u.mf=function(a,b,c,d){this.A&&this.A.mf(a,b,c,d)};var Fj=-1;function Y(a,b,c){var d=k;a==D?d=new yh:a==E?d=new Ah:a==Da?d=new zh:a==Ea?d=new yj:a==Fa?d=new Gh:a!=Ga&&(a==Ha?d=new Eh:a==Ia?d=new Dj:a!=Ja&&a!=La&&(a==Ma?d=new Ic:a==Xa?d=new Ch:a!=Na&&(a==Oa?d=new Tf:a==Pa?d=new Mh:a==Qa?d=new Ej:a==Sa?d=new Pc:a!=Ta&&a!=Ua&&a!=Va&&a!=Wa&&(a==Ya?d=new Kh:a==Za?d=new zj:a==$a?d=new uj:a==ab?d=new Fe:a==bb?d=new Aj:a==cb?d=new Ih:a==Ka?d=new vj:a==Ra&&(d=new mj)))));d!=k&&(Fj++,d.id=Fj,d.parent=b,kb.push(d),d.Ra(c));return d}z("_CreateObject",Y);
z("ogGetObjectType",function(a){return(a=F(a))?a.type:db});z("ogGetObjectName",function(a){return(a=F(a))?a.name:""});z("ogGetObjectPosition",function(a){var a=F(a),b={};if(a)switch(a.type){case Oa:b={};y(a.options.jsonobject)&&y(a.options.jsonobject.Center)&&(b.longitude=a.options.jsonobject.Center[0],b.latitude=a.options.jsonobject.Center[1],b.elevation=a.options.jsonobject.Center[2]);break;case Xa:var c=new T;c.pc(a.xa.Ve,a.xa.We,a.xa.Xe);b={};b.longitude=c.H[0];b.latitude=c.H[1];b.elevation=c.H[2]}return b});
z("ogGetNumObjects",function(){return kb.length});z("ogGetObjectAt",function(a){a=0>a||a>kb.length-1?k:kb[a];return a==k?-1:a.id});z("ogGetParentObject",function(a){return(a=F(a))&&a.parent?a.parent.id:-1});z("ogSetObjectName",function(a,b){var c=F(a);c&&(c.name=b)});z("ogGetObjectByName",function(a){a:{for(var b=0;b<kb.length;b++)if(kb[b].name==a){a=kb[b];break a}a=k}return a?a.id:-1});z("ogGetObjectStatus",function(a){return(a=F(a))?a.status:3});
z("ogOnLoad",function(a,b){var c=F(a);c&&(c.status==ib?b(a):c.K=b)});z("ogOnFailure",function(a,b){var c=F(a);c&&(3==c.status?b(a):c.J=b)});function Gj(a,b,c,d){a.cbfInit=b;a.cbfExit=c;a.cbfResize=d;a=Y(D,k,a);return a!=k?a.id:-1}z("ogCreateContext",Gj);z("ogCreateContextFromCanvas",function(a,b,c,d,e){var f={};f.fullscreen=b?j:n;f.canvas=a;return Gj(f,c,d,e)});z("ogDestroyContext",function(a){(a=F(a))&&a.type==D&&H(a)});z("ogGetGL",function(a){return(a=F(a))&&a.type==D?a.c.b:k});
z("ogGetWidth",function(a){return(a=F(a))&&a.type==D?a.c?a.c.width:0:0});z("ogGetHeight",function(a){return(a=F(a))&&a.type==D?a.c?a.c.height:0:0});z("ogGetScene",function(a){return(a=F(a))&&a.type==D&&a.e?a.e.id:-1});z("ogSetBackgroundColor",function(a,b,c,d,e){(a=F(a))&&a.type==D&&a.c&&a.c.Ml(b,c,d,e)});z("ogSetTextColor",function(a,b,c,d){(a=F(a))&&a.type==D&&a.fontcolor.m(b,c,d,1)});z("ogDrawText",function(a,b,c,d){(a=F(a))&&a.type==D&&a.ze(b,c,d)});
z("ogGetTextSize",function(a,b){var c=F(a);if(c&&c.type==D&&(c=c.Aj(b)))return c;c=Array(2);c[0]=0;c[1]=0;return c});z("ogSetMouseDownFunction",function(a,b){var c=F(a);c&&c.type==D&&(c.Ld=b)});z("ogSetMouseUpFunction",function(a,b){var c=F(a);c&&c.type==D&&(c.Md=b)});z("ogSetMouseMoveFunction",function(a,b){var c=F(a);c&&c.type==D&&(c.Bf=b)});z("ogSetMouseWheelFunction",function(a,b){var c=F(a);c&&c.type==D&&(c.qd=b)});z("ogSetKeyDownFunction",function(a,b){var c=F(a);c&&c.type==D&&(c.ak=b)});
z("ogSetKeyUpFunction",function(a,b){var c=F(a);c&&c.type==D&&(c.bk=b)});z("ogSetResizeFunction",function(a,b){var c=F(a);c&&c.type==D&&(c.Me=b)});z("ogSetRenderFunction",function(a,b){var c=F(a);c&&c.type==D&&(c.je=b)});z("ogSetTimerFunction",function(a,b){var c=F(a);c&&c.type==D&&(c.ke=b)});z("ogSetRenderGeometryFunction",function(a,b){var c=F(a);c&&c.type==D&&(c.$o=b)});z("ogSetBeginRenderFunction",function(a,b){var c=F(a);c&&c.type==D&&(c.Yo=b)});
z("ogSetEndRenderFunction",function(a,b){var c=F(a);c&&c.type==D&&(c.Zo=b)});z("ogSetFlyToStartedFunction",function(a,b){var c=F(a);c&&c.type==D&&(c.zf=b)});z("ogSetInPositionFunction",function(a,b){var c=F(a);c&&c.type==D&&(c.Af=b)});z("ogSetNumRenderPasses",function(a,b){var c=F(a);c&&c.type==D&&(c.ip=b)});z("ogExec",p());z("ogSetArtworkDirectory",function(a){vd=a});
function Hj(a,b,c){y(c)||(c={});if((a=F(a))&&a.type==D){c.type=b;if(b==eb||b==gb||b==fb||b==hb)return b==hb?Mc=K=1:(K=1.1920930376163766E-7,Mc=8388607),b=Y(E,a,c),a.e=b,b.id;Ec(I("owg.og"),"** WARNING: wrong scene type");return-1}Ec(I("owg.og"),"** WARNING: context is not valid");return-1}z("ogCreateScene",Hj);z("ogGetContext",function(a){if((a=F(a))&&a.type==E)if(a=a.parent)return a.id;return-1});z("ogGetWorld",function(a){if((a=F(a))&&a.type==E)if(a=a.Lg)return a.id;return-1});
z("ogPickGlobe",function(a,b,c){return(a=F(a))&&a.type==E&&a.lc==eb?a.$g(b,c):[n,0,0,0,0,0,0]});z("ogToCartesian",function(a,b,c,d){if((a=F(a))&&a.type==E&&(a.lc==eb||a.lc==hb)){var e=[];(new T(b,c,d)).V(e)}return e||k});z("ogToWGS84",function(a,b,c,d){if((a=F(a))&&a.type==E&&a.lc==eb){var e=new T;e.pc(b,c,d);e=[e.H[0],e.H[1],e.H[2]]}return e||k});z("ogCreateCamera",Ij);function Ij(a){if((a=F(a))&&a.type==E){var b=Y(Sa,a,k);a.Ei.push(b);return b.id}return-1}z("ogCreateCamera",Ij);
z("ogDestroyCamera",function(a){(a=F(a))&&a.type==Sa&&H(a)});z("ogSetPosition",function(a,b,c,d){(a=F(a))&&a.type==Sa&&a.Aa(b,c,d)});function Jj(a){return(a=F(a))&&a.type==E?(a=a.xf,Rc(a),a.hf()):k}z("ogGetPosition",Jj);function Kj(a,b,c,d){return(a=F(a))&&a.type==Sa?(360<b&&(b-=360),0>b&&(b=360+b),a.Eb(b,c,d)):k}z("ogSetOrientation",Kj);z("ogSetOrientationFromQuaternion",function(a,b,c,d,e){return(a=F(a))&&a.type==Sa?a.hh(b,c,d,e):k});
function Lj(a){return(a=F(a))&&a.type==E?(a=a.xf,Rc(a),a.Vg()):k}z("ogGetOrientation",Lj);function Mj(a){return(a=F(a))&&a.type==E?a.xf.id:-1}z("ogGetActiveCamera",Mj);z("ogSetActiveCamera",function(a){(a=F(a))&&a.type==Sa&&Bh(a.parent,a.id)});z("ogGetNumCameras",function(a){if((a=F(a))&&a.type==E)return a.Ei.length});z("ogGetCameraAt",function(a,b){var c=F(a);return c&&c.type==E?c.Ei[b].id:-1});
z("ogLookAt",function(a,b,c,d){var e=Mj(a);Rc(F(e));var f=Jj(a),g=[];(new T(f.longitude,f.latitude,f.elevation)).V(g);var i=new N(g[0],g[1],g[2]),l=[];(new T(b,c,d)).V(l);b=(new N(l[0],l[1],l[2])).ff();b.Qj(i);i=new O;i.Sd(f.longitude,f.latitude);f=new O;f.kd(g[0],g[1],g[2]);g=new O;g.W(f,i);g.Ke();g=g.Qa(b);g.Pc();g=g.a;f=g[0];i=g[1];b=g[2];g=57.29577951308232*Math.acos(f/Math.sqrt(1-b*b));0>i&&0<f&&(g=360-g);0>i&&0>f&&(g=360-g);f=-(90-57.29577951308232*Math.acos(b));-0.9>b&&(g=180+g,f=-f);a=Lj(a);
Kj(e,g,f,a.roll)});z("ogSetNavigationMode",function(a,b,c){y(c)||(c={});(a=F(a))&&a.type==E&&a.Oj(b,c)});function Nj(a){if((a=F(a))&&a.type==E){var b={};b.scenetype=a.lc;b.shownavigation=a.Pk;b=Y(Da,a,b);a.Lg=b;var c=Y(Sa,a,k);Rc(c);Bh(a,c.id);a.Ei.push(c);return b.id}return-1}z("ogCreateWorld",Nj);z("ogCreateGlobe",function(a){a=Hj(a,eb);return Nj(a)});z("ogSetNorthpoleColor",function(a,b,c,d){if((a=F(a))&&a.type==Da)a.parent.parent.c.e.v.Fa.Rf=[b,c,d]});
z("ogSetSouthpoleColor",function(a,b,c,d){if((a=F(a))&&a.type==Da)a.parent.parent.c.e.v.Fa.Xf=[b,c,d]});z("ogSetRenderQuality",function(a,b){var c=F(a);c&&c.type==Da&&(c=c.parent.parent.c.e.v.Fa,0<b&&3>=b&&(c.dn=b))});z("ogSetRenderEffect",function(a,b,c){(a=F(a))&&a.type==Da&&a.ti(b,c)});z("ogGetElevationAt",function(a,b,c){var d={hasvalue:n,elevation:0,lod:0};(a=F(a))&&a.type==Da&&(d=a.parent.parent.c.cg(b,c));return d});
z("ogLoadTextureAsync",function(a,b){var c=F(a);if(c&&c.type==E){var d={};d.url=b;return Y(Ma,c,d).id}return-1});z("ogDestroyTexture",function(a){(a=F(a))&&a.type==Ma&&H(a)});z("ogBlitTexture",function(a,b,c,d){(a=F(a))&&a.type==Ma&&a.U(b,c,d)});z("ogAddImageLayer",function(a,b){var c=F(a);return c&&c.type==Da?Y(Ea,c,b).id:-1});z("ogRemoveImageLayer",function(a){if((a=F(a))&&a.type==Ea)a.Mj(),H(a)});z("ogAddElevationLayer",function(a,b){var c=F(a);return c&&c.type==Da?Y(Fa,c,b).id:-1});
z("ogRemoveElevationLayer",function(a){if((a=F(a))&&a.type==Fa)a.Kj(),H(a)});z("ogCreatePOILayer",function(a,b,c,d){var e={};e.name=b;e.textstyle=c;e.iconstyle=d;return(a=F(a))&&a.type==Da?Y(Ha,a,e).id:-1});z("ogRemovePOILayer",function(a){(a=F(a))&&a.type==Ha&&H(a)});z("ogHidePOILayer",function(a){(a=F(a))&&a.type==Ha&&a.qa()});z("ogShowPOILayer",function(a){(a=F(a))&&a.type==Ha&&a.ra()});z("ogAddVectorLayer",function(a,b){var c=F(a);return c&&c.type==Da?Y(Ka,c,b).id:-1});
z("ogRemoveVectorLayer",function(a){if((a=F(a))&&a.type==Ka)xj(a),H(a)});z("ogLoadVectorAsync",function(a,b){var c=F(a);return c&&c.type==Ka?wj(c,{url:b,dynamic:n,type:"GeoJSON"}).id:-1});z("ogDestroyVector",function(a){if((a=F(a))&&a.type==Ra)if(a.k){var b=a.k;b&&b.type==Ka&&b.ri(a)}else H(a);return-1});z("ogAddGeoJSON",function(a,b){var c=F(a);return c&&c.type==Ka?wj(c,{dynamic:j,type:"GeoJSON",data:b}).id:-1});
z("ogCreatePOI",function(a,b){var c=F(a);if(c&&c.type==Ha){b.textstyle=c.ag;b.iconstyle=c.Hf;var d=Y(Xa,c.parent.parent,b);c.Ua.push(d);d.jp=c;c=d.id}else c=-1;return c});z("ogDestroyPOI",function(a){if((a=F(a))&&a.type==Xa)if(a.k){var b=a.k;if(b&&b.type==Ha)for(var c=0;c<b.Ua.length;c++)b.Ua[c]==a&&(H(b.Ua[c]),b.Ua.splice(c,1))}else H(a);return-1});z("ogChangePOIText",function(a,b){var c=F(a);if(c&&c.type==Xa){var d=c.parent.parent;c.ag&&d.c.zg.rl(c.xa,b,c.ag)}});
z("ogChangePOIIcon",function(a,b){var c=F(a);if(c&&c.type==Xa){var d=c.parent.parent;c.Hf&&d.c.zg.ql(c.xa,b,c.Hf)}});z("ogChangePOISize",function(a,b){var c=F(a);c&&c.type==Xa&&c.xa.ui(b)});z("ogChangePOIPositionWGS84",function(a,b,c,d){if((a=F(a))&&a.type==Xa){var e=[];(new T(b,c,d)).V(e);b=e[0];c=e[1];e=e[2];a.xa.Sf?a.xa.Aa(b,c,e,0):a.xa.Aa(b,c,e,k)}});z("ogChangePOIPosition",function(a,b,c,d){(a=F(a))&&a.type==Xa&&(a.xa.Sf?a.xa.Aa(b,c,d,0):a.xa.Aa(b,c,d,k))});
z("ogHidePOI",function(a){(a=F(a))&&a.type==Xa&&a.qa()});z("ogShowPOI",function(a){(a=F(a))&&a.type==Xa&&a.ra()});z("ogSetPOIActiveColor",function(a,b,c,d,e){if((a=F(a))&&a.type==Xa)a.xa.Kk=new cd(b,c,d,e)});z("ogPickPOI",function(a,b,c){return(a=F(a))&&a.type==E&&a.lc==eb?a.bh(b,c):-1});z("ogCreateGeometryLayer",function(a,b){var c={};c.name=b;var d=F(a);return d&&d.type==Da?Y(Ia,d,c).id:-1});z("ogCreateAoeImageLayer",function(a,b){var c={};c.name=b;var d=F(a);return d&&d.type==Da?Y($a,d,c).id:-1});
z("ogCreateAoeImage",function(a,b){var c=F(a);if(c&&c.type==$a){var d=Y(ab,c.parent.parent,b);c.rj(d);return d.id}return-1});z("ogDestroyAoeImage",function(a){if((a=F(a))&&a.type==ab){var b=F(a.Kf);b&&b.type==$a&&b.Ij(a)}return-1});z("ogHideGeometryLayer",function(a){(a=F(a))&&a.type==Ia&&a.qa()});z("ogShowGeometryLayer",function(a){(a=F(a))&&a.type==Ia&&a.ra()});z("ogRemoveGeometryLayer",function(a){(a=F(a))&&a.type==Ia&&H(a);return-1});
z("ogCreateGeometry",function(a,b){var c={};y(b.type)?c=b:c.jsonobject=b;var d=F(a);return d&&d.type==Ia?(c=Y(Oa,d.parent.parent,c),d.Id(c),c.id):-1});z("ogLoadGeometryAsync",function(a,b){var c={};c.url=b;var d=F(a);return d&&d.type==Ia?(c=Y(Oa,d.parent.parent,c),d.Id(c),c.id):-1});z("ogDestroyGeometry",function(a){if((a=F(a))&&a.type==Oa){var b=F(a.Kf);b&&b.type==Ia&&b.Lj(a)}return-1});z("ogSetGeometryPositionWGS84",function(a,b,c,d,e,f,g){return(a=F(a))&&a.type==Oa?a.Ie(b,c,d,e,f,g):-1});
z("ogSetGeometryOrientation",function(a,b,c,d){return(a=F(a))&&a.type==Oa?a.Eb(b,c,d):-1});z("ogSetGeometryPositionWGS84Quat",function(a,b,c,d,e){return(a=F(a))&&a.type==Oa?a.ih(b,c,d,e):-1});z("ogSetGeometryScale",function(a,b,c,d){(a=F(a))&&a.type==Oa&&a.nf(b,c,d)});z("ogGetNumMeshes",function(a){return(a=F(a))&&a.type==Oa?a.hb.length:-1});z("ogGetMeshAt",function(a,b){var c=F(a);return c&&c.type==Oa?c.hb[b].id:-1});z("ogHideGeometry",function(a){(a=F(a))&&a.type==Oa&&a.qa()});
z("ogShowGeometry",function(a){(a=F(a))&&a.type==Oa&&a.ra()});z("ogHighlightGeometry",function(a,b,c,d,e){(a=F(a))&&a.type==Oa&&a.mf(b,c,d,e)});z("ogPickGeometry",function(a,b,c){if((a=F(a))&&a.type==E&&a.lc==eb)if(b=a.kf(b,c),b=F(b))return b.parent.parent.id;return-1});z("ogCreatePolylineWGS84",function(a,b,c){return(a=F(a))&&a.type==Ia?(c.coords=b,c.type="EarthPolyline",b=Y(Oa,a.parent.parent,c),a.Id(b),b.id):-1});z("ogGetSurfaceAt",function(a,b){var c=F(a);return c&&c.type==Pa?c.lb[b].id:-1});
z("ogHideMesh",function(a){(a=F(a))&&a.type==Pa&&a.qa()});z("ogShowMesh",function(a){(a=F(a))&&a.type==Pa&&a.ra()});z("ogPickMesh",function(a,b,c){if((a=F(a))&&a.type==E&&a.lc==eb)if(b=a.kf(b,c),b=F(b))return b.parent.id;return-1});z("ogHideSurface",function(a){(a=F(a))&&a.type==Qa&&a.qa()});z("ogShowSurface",function(a){(a=F(a))&&a.type==Qa&&a.ra()});z("ogPickSurface",function(a,b,c){return(a=F(a))&&a.type==E&&a.lc==eb?a.kf(b,c):-1});
z("ogCreateBillboardLayer",function(a,b){var c={};c.name=b;var d=F(a);return d&&d.type==Da?Y(Za,d,c).id:-1});z("ogRemoveBillboardLayer",function(a){(a=F(a))&&a.type==Za&&H(a)});z("ogHideBillboardLayer",function(a){(a=F(a))&&a.type==Za&&a.qa()});z("ogShowBillboardLayer",function(a){(a=F(a))&&a.type==Za&&a.ra()});z("ogCreateBillboardFromCanvas",function(a,b,c,d,e){if((a=F(a))&&a.type==Za){var f={};f.canvas=b;f.position=[c,d,e];b=Y(Ya,a.parent.parent,f);a.sj(b);b.k=a.id;return b.id}return-1});
z("ogDestroyBillboard",function(a){if((a=F(a))&&a.type==Ya)if(a.k){var b=F(a.k);b&&b.type==Za&&b.Jj(a)}else H(a);return-1});z("ogHideBillboard",function(a){(a=F(a))&&a.type==Ya&&a.qa();return-1});z("ogShowBillboard",function(a){(a=F(a))&&a.type==Ya&&a.ra();return-1});z("ogPickBillboard",function(a,b,c){return(a=F(a))&&a.type==E&&a.lc==eb?a.ah(b,c):-1});z("ogUpdateBillboard",function(a,b){var c=F(a);c&&c.type==Ya?(c.Vc.canvas=b,c.Vc.lh(),c=h):c=-1;return c});
z("ogFlyTo",function(a,b,c,d,e,f,g){(a=F(a).parent.c)&&Ee(a.ua,b,c,d,e,f,g)});z("ogFlyToLookAtPosition",function(a,b,c,d,e,f,g,i){(a=F(a).parent.c)&&a.zj(b,c,d,e,f,g,i)});z("ogSetFlightDuration",function(a,b){var c=F(a).parent.c;c&&c.gh(b)});z("ogStopFlyTo",function(a){(a=F(a).parent.c)&&a.kh()});z("ogLockNavigation",function(a){(a=F(a).parent.c)&&a.e.Q.Xg(j)});z("ogUnlockNavigation",function(a){(a=F(a).parent.c)&&a.e.Q.Xg(n)});
z("ogSetCanvasSizeOffset",function(a,b,c){a=F(a).parent.c;a.kl=b;a.uk=c;dh()});z("ogDebug",function(){var a=new li;Zh(a,j);a.Pd()});z("ogWarning",function(a){Ec(I("warning"),a)});function lh(a){I("error").log(wc,a,h)}z("ogError",lh);function jh(a){I("message").info(a)}z("ogLog",jh);
z("ogWorldToWindow",function(a,b,c,d){var e;if((a=F(a))&&a.type==E&&(a.lc==eb||a.lc==hb))e=a.parent.c,a=new O,a.W(e.zd,e.Nf),b=new N(b,c,d),d=a.Qa(b),b=d.a[0],c=-d.a[1],d=d.a[2],b=Math.floor(0.5*(b+1)*e.width+0.5),c=Math.floor(0.5*(c+1)*e.height-1+0.5),e=[b,c,0.5*(d+1)];return e||k});z("ogCalcDistanceWGS84",function(a,b,c,d){a=Jc*Math.acos(Math.sin(L(b))*Math.sin(L(d))+Math.cos(L(b))*Math.cos(L(d))*Math.cos(L(c-a)));isNaN(a)&&(a=0);return a});
z("ogSetMinAltitude",function(a,b){var c=F(a);c&&c.type==E&&c.lc==eb&&c.parent.c.e.Q.Ql(b)});z("ogNavKeyDown",function(a,b){var c=F(a);c&&c.parent.c.e.Q.De({keyCode:b,stopPropagation:p(),preventDefault:p(),cancelBubble:n,cancel:n,returnValue:n})});z("ogNavKeyUp",function(a,b){var c=F(a);c&&c.parent.c.e.Q.Ee({keyCode:b,stopPropagation:p(),preventDefault:p(),cancelBubble:n,cancel:n,returnValue:n})});
