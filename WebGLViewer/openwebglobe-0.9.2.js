function h(a){throw a;}var i=void 0,l=null;function n(){return function(){}}function p(a){return function(b){this[a]=b}}function aa(a){return function(){return this[a]}}function t(a){return function(){return a}}var u,w=this;function ba(a){for(var a=a.split("."),b=w,c;c=a.shift();)if(b[c]!=l)b=b[c];else return l;return b}function ca(){}
function da(a){var b=typeof a;if(b=="object")if(a){if(a instanceof Array)return"array";else if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if(c=="[object Window]")return"object";if(c=="[object Array]"||typeof a.length=="number"&&typeof a.splice!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("splice"))return"array";if(c=="[object Function]"||typeof a.call!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if(b=="function"&&typeof a.call=="undefined")return"object";return b}function ea(a){var b=da(a);return b=="array"||b=="object"&&typeof a.length=="number"}function fa(a){return typeof a=="string"}function ga(a){return da(a)=="function"}function ha(a){a=da(a);return a=="object"||a=="array"||a=="function"}function ia(a){return a[ja]||(a[ja]=++ka)}var ja="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36),ka=0;function la(a){return a.call.apply(a.bind,arguments)}
function ma(a,b){var c=b||w;if(arguments.length>2){var d=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(b,d);return a.apply(c,b)}}else return function(){return a.apply(c,arguments)}}function na(){na=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?la:ma;return na.apply(l,arguments)}var oa=Date.now||function(){return+new Date};
function x(a,b){var c=a.split("."),d=w;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&b!==i?d[e]=b:d=d[e]?d[e]:d[e]={}}function pa(a,b){function c(){}c.prototype=b.prototype;a.ce=b.prototype;a.prototype=new c;a.prototype.constructor=a};var z=0,A=1,B=2,qa=3,ra=4,sa=5,ta=6,ua=7,va=8,wa=9,xa=10,ya=11,za=12,Aa=13,Ba=14,Ca=15,Da=16,Ea=17,Fa=18,Ga=19,C=20,Ha=21,Ia=22,Ja=65533,Ka=65534,La=23,Ma=65535;x("OG_OBJECT_CONTEXT",z);x("OG_OBJECT_SCENE",A);x("OG_OBJECT_WORLD",B);x("OG_OBJECT_IMAGELAYER",qa);x("OG_OBJECT_ELEVATIONLAYER",ra);x("OG_OBJECT_WAYPOINTLAYER",sa);x("OG_OBJECT_GEOMETRYLAYER",ua);x("OG_OBJECT_VOXELLAYER",va);x("OG_OBJECT_IMAGE",wa);x("OG_OBJECT_TEXTURE",xa);x("OG_OBJECT_PIXELBUFFER",ya);x("OG_OBJECT_GEOMETRY",za);
x("OG_OBJECT_MESH",Aa);x("OG_OBJECT_SURFACE",Ba);x("OG_OBJECT_CAMERA",Ca);x("OG_OBJECT_TEXT",Da);x("OG_OBJECT_BINARYDATA",Ea);x("OG_OBJECT_LIGHT",Fa);x("OG_OBJECT_NAVIGATIONCONTROLLER",Ga);x("OG_OBJECT_POI",C);x("OG_OBJECT_BILLBOARD",Ha);x("OG_OBJECT_BILLBOARDLAYER",Ia);x("OG_OBJECT_AOEIMAGELAYER",Ja);x("OG_OBJECT_AOEIMAGE",Ka);x("OG_OBJECT_INVALID",Ma);x("OG_RENDEREFFECT_RGB",0);x("OG_RENDEREFFECT_CHROMADEPTH",1);var D=1,Na=2,Oa=3,Pa=4;x("OG_SCENE_3D_ELLIPSOID_WGS84",D);
x("OG_SCENE_3D_FLAT_CARTESIAN",Na);x("OG_SCENE_2D_SCREEN",Oa);x("OG_SCENE_CUSTOM",Pa);var Qa=1,Ra=2;x("OG_OBJECT_READY",Qa);x("OG_OBJECT_BUSY",Ra);x("OG_OBJECT_FAILED",3);var E=[];function F(a){if(a==-1)return l;for(var b=0;b<E.length;b++)if(E[b].id==a)return E[b];return l}function G(){this.parent=l;this.name="ogObject";this.type=Ma;this.id=-1;this.status=Qa;this.F=this.G=l}G.prototype.Ra=n();function H(a){for(var a=a.id,b=0;b<E.length;b++)if(E[b].id==a){E[b].Ra();E.splice(b,1);break}}G.prototype.va=n();function Sa(a,b){for(var c in a)b.call(i,a[c],c,a)}function Ta(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}var Ua=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];function Va(a){for(var b,c,d=1;d<arguments.length;d++){c=arguments[d];for(b in c)a[b]=c[b];for(var e=0;e<Ua.length;e++)b=Ua[e],Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b])}};function Wa(a){this.stack=Error().stack||"";if(a)this.message=String(a)}pa(Wa,Error);Wa.prototype.name="CustomError";function Xa(a){for(var b=1;b<arguments.length;b++)var c=String(arguments[b]).replace(/\$/g,"$$$$"),a=a.replace(/\%s/,c);return a}function Ya(a,b){return a.replace(/(\r\n|\r|\n)/g,b?"<br />":"<br>")}function Za(a){if(!$a.test(a))return a;a.indexOf("&")!=-1&&(a=a.replace(ab,"&amp;"));a.indexOf("<")!=-1&&(a=a.replace(bb,"&lt;"));a.indexOf(">")!=-1&&(a=a.replace(cb,"&gt;"));a.indexOf('"')!=-1&&(a=a.replace(db,"&quot;"));return a}var ab=/&/g,bb=/</g,cb=/>/g,db=/\"/g,$a=/[&<>\"]/;
function eb(a){return Ya(a.replace(/  /g," &#160;"),i)}
function fb(a,b){for(var c=0,d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=String(b).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),f=Math.max(d.length,e.length),g=0;c==0&&g<f;g++){var j=d[g]||"",k=e[g]||"",m=RegExp("(\\d*)(\\D*)","g"),q=RegExp("(\\d*)(\\D*)","g");do{var r=m.exec(j)||["","",""],o=q.exec(k)||["","",""];if(r[0].length==0&&o[0].length==0)break;c=gb(r[1].length==0?0:parseInt(r[1],10),o[1].length==0?0:parseInt(o[1],10))||gb(r[2].length==0,o[2].length==0)||gb(r[2],o[2])}while(c==
0)}return c}function gb(a,b){if(a<b)return-1;else if(a>b)return 1;return 0};function hb(a,b){b.unshift(a);Wa.call(this,Xa.apply(l,b));b.shift();this.vo=a}pa(hb,Wa);hb.prototype.name="AssertionError";function ib(a){h(new hb("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1)))};var jb=Array.prototype,kb=jb.indexOf?function(a,b,c){return jb.indexOf.call(a,b,c)}:function(a,b,c){c=c==l?0:c<0?Math.max(0,a.length+c):c;if(fa(a)){if(!fa(b)||b.length!=1)return-1;return a.indexOf(b,c)}for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},lb=jb.forEach?function(a,b,c){jb.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=fa(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)};function mb(){return jb.concat.apply(jb,arguments)}
function nb(a){if(da(a)=="array")return mb(a);else{for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}}function ob(a,b,c){return arguments.length<=2?jb.slice.call(a,b):jb.slice.call(a,b,c)};var pb="StopIteration"in w?w.StopIteration:Error("StopIteration");function qb(){}qb.prototype.next=function(){h(pb)};qb.prototype.ai=function(){return this};function rb(a){if(a instanceof qb)return a;if(typeof a.ai=="function")return a.ai(!1);if(ea(a)){var b=0,c=new qb;c.next=function(){for(;;)if(b>=a.length&&h(pb),b in a)return a[b++];else b++};return c}h(Error("Not implemented"))}
function sb(a,b){if(ea(a))try{lb(a,b,i)}catch(c){c!==pb&&h(c)}else{a=rb(a);try{for(;;)b.call(i,a.next(),i,a)}catch(d){d!==pb&&h(d)}}};function tb(a){this.jd={};this.Ma=[];var b=arguments.length;if(b>1){b%2&&h(Error("Uneven number of arguments"));for(var c=0;c<b;c+=2)this.set(arguments[c],arguments[c+1])}else if(a){if(a instanceof tb)b=a.eh(),c=a.Mi();else{var b=Ta(a),d=[],e=0;for(c in a)d[e++]=a[c];c=d}for(d=0;d<b.length;d++)this.set(b[d],c[d])}}u=tb.prototype;u.oa=0;u.Bh=0;u.ve=aa("oa");u.Mi=function(){ub(this);for(var a=[],b=0;b<this.Ma.length;b++)a.push(this.jd[this.Ma[b]]);return a};u.eh=function(){ub(this);return this.Ma.concat()};
u.clear=function(){this.jd={};this.Bh=this.oa=this.Ma.length=0};function ub(a){if(a.oa!=a.Ma.length){for(var b=0,c=0;b<a.Ma.length;){var d=a.Ma[b];Object.prototype.hasOwnProperty.call(a.jd,d)&&(a.Ma[c++]=d);b++}a.Ma.length=c}if(a.oa!=a.Ma.length){for(var e={},c=b=0;b<a.Ma.length;)d=a.Ma[b],Object.prototype.hasOwnProperty.call(e,d)||(a.Ma[c++]=d,e[d]=1),b++;a.Ma.length=c}}u.get=function(a,b){if(Object.prototype.hasOwnProperty.call(this.jd,a))return this.jd[a];return b};
u.set=function(a,b){Object.prototype.hasOwnProperty.call(this.jd,a)||(this.oa++,this.Ma.push(a),this.Bh++);this.jd[a]=b};u.ai=function(a){ub(this);var b=0,c=this.Ma,d=this.jd,e=this.Bh,f=this,g=new qb;g.next=function(){for(;;){e!=f.Bh&&h(Error("The map has changed since the iterator was created"));b>=c.length&&h(pb);var g=c[b++];return a?g:d[g]}};return g};function vb(a){return wb(a||arguments.callee.caller,[])}
function wb(a,b){var c=[];if(kb(b,a)>=0)c.push("[...circular reference...]");else if(a&&b.length<50){c.push(xb(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){e>0&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=xb(f))?f:"[fn]";break;default:f=typeof f}f.length>40&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(wb(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function xb(a){a=String(a);if(!yb[a]){var b=/function ([^\(]+)/.exec(a);yb[a]=b?b[1]:"[Anonymous]"}return yb[a]}var yb={};function zb(a,b,c,d,e){this.reset(a,b,c,d,e)}zb.prototype.Dn=0;zb.prototype.Bi=l;zb.prototype.Ai=l;var Ab=0;zb.prototype.reset=function(a,b,c,d,e){this.Dn=typeof e=="number"?e:Ab++;this.Ml=d||oa();this.Lc=a;this.cl=b;this.Yk=c;delete this.Bi;delete this.Ai};zb.prototype.sh=p("Lc");function Bb(a){this.qn=a}Bb.prototype.ph=l;Bb.prototype.Lc=l;Bb.prototype.ti=l;Bb.prototype.Df=l;function Cb(a,b){this.name=a;this.value=b}Cb.prototype.toString=aa("name");var Db=new Cb("SHOUT",1200),Eb=new Cb("SEVERE",1E3),Fb=new Cb("WARNING",900),Gb=new Cb("INFO",800),Hb=new Cb("CONFIG",700),Ib=[new Cb("OFF",Infinity),Db,Eb,Fb,Gb,Hb,new Cb("FINE",500),new Cb("FINER",400),new Cb("FINEST",300),new Cb("ALL",0)],Jb=l;
function Kb(a){if(!Jb){Jb={};for(var b=0,c;c=Ib[b];b++)Jb[c.value]=c,Jb[c.name]=c}return Jb[a]||l}u=Bb.prototype;u.getParent=aa("ph");u.sh=p("Lc");function Lb(a){if(a.Lc)return a.Lc;if(a.ph)return Lb(a.ph);ib("Root logger has no level set.");return l}u.log=function(a,b,c){if(a.value>=Lb(this).value){a=this.jn(a,b,c);this.Xk("log:"+a.cl);for(b=this;b;){var c=b,d=a;if(c.Df)for(var e=0,f=i;f=c.Df[e];e++)f(d);b=b.getParent()}}};
u.jn=function(a,b,c){var d=new zb(a,String(b),this.qn);if(c){d.Bi=c;var e;var f=arguments.callee.caller;try{var g;var j=ba("window.location.href");if(fa(c))g={message:c,name:"Unknown error",lineNumber:"Not available",fileName:j,stack:"Not available"};else{var k,m,q=!1;try{k=c.lineNumber||c.so||"Not available"}catch(r){k="Not available",q=!0}try{m=c.fileName||c.filename||c.sourceURL||j}catch(o){m="Not available",q=!0}g=q||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,lineNumber:k,
fileName:m,stack:c.stack||"Not available"}:c}e="Message: "+Za(g.message)+'\nUrl: <a href="view-source:'+g.fileName+'" target="_new">'+g.fileName+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+Za(g.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+Za(vb(f)+"-> ")}catch(s){e="Exception trying to expose exception! You win, we lose. "+s}d.Ai=e}return d};function I(a,b){a.log(Fb,b,i)}u.info=function(a,b){this.log(Gb,a,b)};u.Xk=function(a){w.console&&w.console.markTimeline&&w.console.markTimeline(a)};
var Mb={},Nb=l;function Ob(){Nb||(Nb=new Bb(""),Mb[""]=Nb,Nb.sh(Hb))}function K(a){Ob();var b;if(!(b=Mb[a])){b=new Bb(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=K(a.substr(0,c));if(!c.ti)c.ti={};c.ti[d]=b;b.ph=c;Mb[a]=b}return b};function Pb(){this.name="ogTexture";this.type=xa;this.f=l;this.Kl="";this.status=Ra}Pb.prototype=new G;
Pb.prototype.va=function(a){if(a==l)I(K("owg.ogTexture"),"** ERROR: no options for texture creation!");else if(this.parent==l)I(K("owg.ogTexture"),"** ERROR: no parent!");else if(this.parent.type!=A)I(K("owg.ogTexture"),"** ERROR: parent is not scene!");else if(a.url){var b=this;this.f=this.parent.parent.c.vh.Rj(a.url,function(){b.status=Qa;b.G&&b.G(b.id)},function(){b.status=3;b.F&&b.F(b.id)},!1);this.Kl=a.url}};
Pb.prototype.Ra=function(){if(this.f)this.parent.parent.c.vh.Tj(this.Kl),this.f=l,this.status=3};Pb.prototype.A=function(a,b,c){this.status==Qa&&this.f&&(c!=l?this.f.A(a,b,c.z,c.angle,c.scalex,c.scaley,c.blend,c.invtexcoord,c.alpha):this.f.A(a,b))};var Qb=6378137,Rb=0.006694379990197,Sb=0.006739496742,L=1.1920930376163766E-7;function M(a){return a*0.017453292519943295}function Tb(a){return a*57.29577951308232}function Ub(a){for(var b=1;a>b;)b*=2;return b};function Vb(){this.name="ogCamera";this.type=Ca;this.Kb=this.pitch=this.ua=this.gc=this.jc=this.kc=0}Vb.prototype=new G;u=Vb.prototype;u.Ra=function(){this.Kb=this.pitch=this.ua=this.gc=this.jc=this.kc=0};u.ea=function(a,b,c){this.kc=a;this.jc=b;this.gc=c;this.parent.Bd==this&&Wb(this).ea(a,b,c)};u.td=function(){var a={};a.longitude=this.kc;a.latitude=this.jc;a.elevation=this.gc;return a};u.ie=function(a,b,c){this.ua=a;this.pitch=b;this.Kb=c;this==this.parent.Bd&&Wb(this).ie(M(a),M(b),M(c))};
u.bf=function(){var a={};a.yaw=this.ua;a.pitch=this.pitch;a.roll=this.Kb;return a};u.Bg=function(a,b,c,d){this==this.parent.Bd&&Wb(this).Bg(a,b,c,d)};function Wb(a){var b=l,a=a.parent.parent.c;if(a.d&&a.d.Nc)b=a.d.Nc;return b}function Xb(a){var b=Wb(a),c=b.td(),b=b.bf();a.kc=c.longitude;a.jc=c.latitude;a.gc=c.elevation;a.ua=Tb(b.ua);a.pitch=Tb(b.pitch);a.Kb=Tb(b.Kb)};function N(a,b,c){a=a||0;b=b||0;c=c||0;this.a=[a,b,c];this.nb=new Float32Array([a,b,c])}u=N.prototype;u.q=function(a,b,c){this.a[0]=a;this.a[1]=b;this.a[2]=c};u.Ha=function(){this.nb[0]=this.a[0];this.nb[1]=this.a[1];this.nb[2]=this.a[2];return this.nb};u.af=aa("a");u.We=function(){var a=new N;a.q(this.a[0],this.a[1],this.a[2]);return a};u.cm=function(a){this.a[0]+=a.a[0];this.a[1]+=a.a[1];this.a[2]+=a.a[2];return this};u.$h=function(a){this.a[0]-=a.a[0];this.a[1]-=a.a[1];this.a[2]-=a.a[2];return this};
u.um=function(a,b){this.a[0]=a.a[0]-b.a[0];this.a[1]=a.a[1]-b.a[1];this.a[2]=a.a[2]-b.a[2]};u.fm=function(a){var b=this.a[0],c=this.a[1],d=this.a[2],e=a.a[0],f=a.a[1],a=a.a[2];this.a[0]=c*a-f*d;this.a[1]=d*e-a*b;this.a[2]=b*f-e*c;return this};function Yb(a,b,c){var d=b.a[0],e=b.a[1],b=b.a[2],f=c.a[0],g=c.a[1],c=c.a[2];a.a[0]=e*c-g*b;a.a[1]=b*f-c*d;a.a[2]=d*g-f*e}u.gm=function(a){return this.a[0]*a.a[0]+this.a[1]*a.a[1]+this.a[2]*a.a[2]};
u.Oh=function(){var a=this.a[0];a*=a;var b=this.a[1];b*=b;var c=this.a[2];c*=c;return Math.sqrt(a+b+c)};u.tm=function(){var a=this.a[0];a*=a;var b=this.a[1];b*=b;var c=this.a[2];c*=c;return a+b+c};u.Pb=function(){var a=this.Oh();a!=0&&(this.a[0]/=a,this.a[1]/=a,this.a[2]/=a);return this};u.qm=function(){this.a[0]=-this.a[0];this.a[1]=-this.a[1];this.a[2]=-this.a[2];return this};u.je=function(){return"["+this.a[0]+","+this.a[1]+","+this.a[2]+"]"};x("Cross",Yb);x("vec3",N);N.prototype.Add=N.prototype.cm;
N.prototype.Cross=N.prototype.fm;N.prototype.Dot=N.prototype.gm;N.prototype.Get=N.prototype.af;N.prototype.Length=N.prototype.Oh;N.prototype.Neg=N.prototype.qm;N.prototype.Normalize=N.prototype.Pb;N.prototype.Set=N.prototype.q;N.prototype.SquaredLength=N.prototype.tm;N.prototype.Subtract=N.prototype.um;N.prototype.Sub=N.prototype.$h;N.prototype.ToString=N.prototype.je;function O(){this.a=Array(16);this.qg();this.nb=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}u=O.prototype;u.Uc=function(a){if(a.length==16)for(var b=0;b<16;b++)this.a[b]=a[b]};u.Ha=function(){for(var a=0;a<16;a++)this.nb[a]=this.a[a];return this.nb};u.af=aa("a");u.We=function(){for(var a=new O,b=0;b<16;b++)a.a[b]=this.a[b];return a};u.R=function(a){for(var b=0;b<16;b++)this.a[b]=a.a[b]};
u.qg=function(){this.a[0]=1;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=1;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=1;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};u.vm=function(){this.a[0]=0;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=0;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
u.Bc=function(a,b,c){this.a[0]=1;this.a[4]=0;this.a[8]=0;this.a[12]=a;this.a[1]=0;this.a[5]=1;this.a[9]=0;this.a[13]=b;this.a[2]=0;this.a[6]=0;this.a[10]=1;this.a[14]=c;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};u.ak=function(a,b,c,d){a.a[12]=b;a.a[13]=c;a.a[14]=d};u.Tc=function(a,b,c){this.a[0]=a;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=b;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=c;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1;return!0};
u.Xh=function(a){var b=Math.sin(a),a=Math.cos(a);this.a[0]=1;this.a[1]=0;this.a[2]=0;this.a[3]=0;this.a[4]=0;this.a[5]=a;this.a[6]=b;this.a[7]=0;this.a[8]=0;this.a[9]=-b;this.a[10]=a;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};u.dk=function(a){var b=Math.sin(a),a=Math.cos(a);this.a[0]=a;this.a[1]=0;this.a[2]=-b;this.a[3]=0;this.a[4]=0;this.a[5]=1;this.a[6]=0;this.a[7]=0;this.a[8]=b;this.a[9]=0;this.a[10]=a;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};
u.ek=function(a){var b=Math.sin(a),a=Math.cos(a);this.a[0]=a;this.a[1]=b;this.a[2]=0;this.a[3]=0;this.a[4]=-b;this.a[5]=a;this.a[6]=0;this.a[7]=0;this.a[8]=0;this.a[9]=0;this.a[10]=1;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};
u.pm=function(a,b,c,d,e,f,g,j,k){var m,q,r,o,d=a-d,e=b-e,f=c-f;o=1/Math.sqrt(d*d+e*e+f*f);d*=o;e*=o;f*=o;m=j*f-k*e;k=k*d-g*f;g=g*e-j*d;(o=Math.sqrt(m*m+k*k+g*g))?(o=1/o,m*=o,k*=o,g*=o):g=k=m=0;j=e*g-f*k;q=f*m-d*g;r=d*k-e*m;(o=Math.sqrt(j*j+q*q+r*r))?(o=1/o,j*=o,q*=o,r*=o):r=q=j=0;this.a[0]=m;this.a[4]=k;this.a[8]=g;this.a[12]=-(m*a+k*b+g*c);this.a[1]=j;this.a[5]=q;this.a[9]=r;this.a[13]=-(j*a+q*b+r*c);this.a[2]=d;this.a[6]=e;this.a[10]=f;this.a[14]=-(d*a+e*b+f*c);this.a[3]=0;this.a[7]=0;this.a[11]=
0;this.a[15]=1};
u.S=function(a,b){var c=a.a[0],d=a.a[1],e=a.a[2],f=a.a[3],g=a.a[4],j=a.a[5],k=a.a[6],m=a.a[7],q=a.a[8],r=a.a[9],o=a.a[10],s=a.a[11],v=a.a[12],y=a.a[13],J=a.a[14],$b=a.a[15],ac=b.a[0],bc=b.a[1],cc=b.a[2],dc=b.a[3],ec=b.a[4],fc=b.a[5],gc=b.a[6],hc=b.a[7],ic=b.a[8],jc=b.a[9],kc=b.a[10],lc=b.a[11],mc=b.a[12],nc=b.a[13],oc=b.a[14],pc=b.a[15];this.a[0]=ac*c+bc*g+cc*q+dc*v;this.a[1]=ac*d+bc*j+cc*r+dc*y;this.a[2]=ac*e+bc*k+cc*o+dc*J;this.a[3]=ac*f+bc*m+cc*s+dc*$b;this.a[4]=ec*c+fc*g+gc*q+hc*v;this.a[5]=ec*
d+fc*j+gc*r+hc*y;this.a[6]=ec*e+fc*k+gc*o+hc*J;this.a[7]=ec*f+fc*m+gc*s+hc*$b;this.a[8]=ic*c+jc*g+kc*q+lc*v;this.a[9]=ic*d+jc*j+kc*r+lc*y;this.a[10]=ic*e+jc*k+kc*o+lc*J;this.a[11]=ic*f+jc*m+kc*s+lc*$b;this.a[12]=mc*c+nc*g+oc*q+pc*v;this.a[13]=mc*d+nc*j+oc*r+pc*y;this.a[14]=mc*e+nc*k+oc*o+pc*J;this.a[15]=mc*f+nc*m+oc*s+pc*$b};u.ke=function(){for(var a=this.We(),b=0;b<4;b++)for(var c=0;c<4;c++)this.a[4*b+c]=a.a[4*c+b]};
u.Ba=function(a){var b=new N;b.a[0]=this.a[0]*a.a[0]+this.a[4]*a.a[1]+this.a[8]*a.a[2]+this.a[12];b.a[1]=this.a[1]*a.a[0]+this.a[5]*a.a[1]+this.a[9]*a.a[2]+this.a[13];b.a[2]=this.a[2]*a.a[0]+this.a[6]*a.a[1]+this.a[10]*a.a[2]+this.a[14];a=this.a[3]*a.a[0]+this.a[7]*a.a[1]+this.a[11]*a.a[2]+this.a[15];b.a[0]/=a;b.a[1]/=a;b.a[2]/=a;return b};
u.jm=function(a,b,c,d,e,f){var g=b-a,j=d-c,k=f-e;this.a[0]=e*2/g;this.a[4]=0;this.a[8]=(b+a)/g;this.a[12]=0;this.a[1]=0;this.a[5]=e*2/j;this.a[9]=(d+c)/j;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=-(f+e)/k;this.a[14]=-(f*e*2)/k;this.a[3]=0;this.a[7]=0;this.a[11]=-1;this.a[15]=0};
u.bk=function(a,b,c,d){a=1/Math.tan(a*Math.PI/360);this.a[0]=a/b;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=a;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=(d+c)/(c-d);this.a[14]=2*d*c/(c-d);this.a[3]=0;this.a[7]=0;this.a[11]=-1;this.a[15]=0};
u.Zj=function(a,b,c,d,e,f){var g=b-a,j=d-c,k=f-e;this.a[0]=2/g;this.a[1]=0;this.a[2]=0;this.a[3]=0;this.a[4]=0;this.a[5]=2/j;this.a[6]=0;this.a[7]=0;this.a[8]=0;this.a[9]=0;this.a[10]=-2/k;this.a[11]=0;this.a[12]=-(a+b)/g;this.a[13]=-(d+c)/j;this.a[14]=-(f+e)/k;this.a[15]=1};u.$j=function(a,b,c,d){this.Zj(a,b,c,d,-1,1)};
u.qd=function(a,b){var c=a*0.017453292519943295,d=b*0.017453292519943295,e=Math.sin(d),f=Math.sin(c),d=Math.cos(d),c=Math.cos(c);this.a[0]=-e*c;this.a[4]=-f;this.a[8]=-d*c;this.a[12]=0;this.a[1]=-e*f;this.a[5]=c;this.a[9]=-d*f;this.a[13]=0;this.a[2]=d;this.a[6]=0;this.a[10]=-e;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
u.em=function(a,b){var c=a*0.017453292519943295,d=b*0.017453292519943295,e=Math.sin(d),f=Math.sin(c),d=Math.cos(d),c=Math.cos(c);this.a[0]=-f;this.a[4]=c;this.a[8]=0;this.a[12]=0;this.a[1]=-e*c;this.a[5]=-e*f;this.a[9]=-d;this.a[13]=0;this.a[2]=d*c;this.a[6]=d*f;this.a[10]=e;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
u.Lj=function(a,b){var c=a*0.017453292519943295,d=b*0.017453292519943295,e=Math.sin(d),f=Math.sin(c),d=Math.cos(d),c=Math.cos(c);this.a[0]=-f;this.a[4]=-e*c;this.a[8]=d*c;this.a[12]=0;this.a[1]=c;this.a[5]=-e*f;this.a[9]=d*f;this.a[13]=0;this.a[2]=0;this.a[6]=d;this.a[10]=e;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
u.Hh=function(a,b,c){var d=Math.cos(b),e=Math.cos(c),f=Math.cos(a),b=Math.sin(b),c=Math.sin(c),a=Math.sin(a);this.a[0]=d*f;this.a[4]=-e*a+c*b*f;this.a[8]=c*a+e*b*f;this.a[12]=0;this.a[1]=d*a;this.a[5]=e*f+c*b*a;this.a[9]=-c*f+e*b*a;this.a[13]=0;this.a[2]=-b;this.a[6]=c*d;this.a[10]=e*d;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
u.hm=function(a){var b=this.a[0],c=this.a[4],d=this.a[1],e=this.a[5],f=this.a[2],g=this.a[6],j=this.a[10];Math.abs(b)<1.0E-6&&Math.abs(d)<1.0E-6?(a.pitch=-Math.PI/2,a.roll=0,a.yaw=Math.atan2(c,e)):(a.pitch=Math.atan2(-f,Math.sqrt(b*b+d*d)),a.roll=Math.atan2(d,b),a.yaw=Math.atan2(g,j))};
u.mg=function(){this.a[0]=0;this.a[4]=0;this.a[8]=-1;this.a[12]=0;this.a[1]=1;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=-1;this.a[10]=0;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};u.Mj=function(){this.a[0]=0;this.a[4]=1;this.a[8]=0;this.a[12]=0;this.a[1]=1;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=-1;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
u.im=function(a){var b=a[0],c=a[1],d=a[2],a=a[3],e=a*a,f=b*b,g=c*c,j=d*d;this.a[0]=e+f-g-j;this.a[4]=2*(b*c-a*d);this.a[8]=2*(b*d+a*c);this.a[12]=0;this.a[1]=2*(b*c+a*d);this.a[5]=e-f+g-j;this.a[9]=2*(c*d-a*b);this.a[13]=0;this.a[2]=2*(b*d-a*c);this.a[6]=2*(c*d+a*b);this.a[10]=e-f-g+j;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
u.ng=function(a,b,c,d){var e=a*a,f=b*b,g=c*c,j=a*b,k=a*c,m=b*c;a*=d;b*=d;c*=d;this.a[0]=1-2*f-2*g;this.a[4]=2*j+2*c;this.a[8]=2*k-2*b;this.a[12]=0;this.a[1]=2*j-2*c;this.a[5]=1-2*e-2*g;this.a[9]=2*m+2*a;this.a[13]=0;this.a[2]=2*k+2*b;this.a[6]=2*m-2*a;this.a[10]=1-2*e-2*f;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
u.rm=function(){var a=this.a[0],b=this.a[4],c=this.a[8],d=this.a[1],e=this.a[5],f=this.a[9],g=this.a[2],j=this.a[6],k=this.a[10],m=a+e+k;m>0?(m=Math.sqrt(m+1)*2,a=0.25*m,e=(j-f)/m,k=(c-g)/m,b=(d-b)/m):a>e&a>k?(m=Math.sqrt(1+a-e-k)*2,a=(j-f)/m,e=0.25*m,k=(b+d)/m,b=(c+g)/m):e>k?(m=Math.sqrt(1+e-a-k)*2,a=(c-g)/m,e=(b+d)/m,k=0.25*m,b=(f+j)/m):(m=Math.sqrt(1+k-a-e)*2,a=(d-b)/m,e=(c+g)/m,k=(f+j)/m,b=0.25*m);return[e,k,b,a]};
u.fe=function(a){var b=a.a[0],c=a.a[1],d=a.a[2],e=a.a[3],f=a.a[4],g=a.a[5],j=a.a[6],k=a.a[7],m=a.a[8],q=a.a[9],r=a.a[10],o=a.a[11],s=a.a[12],v=a.a[13],y=a.a[14],a=a.a[15],J=1/(b*g*r*a+b*j*o*v+b*k*q*y+c*f*o*y+c*j*m*a+c*k*r*s+d*f*q*a+d*g*o*s+d*k*m*v+e*f*r*v+e*g*m*y+e*j*q*s-b*g*o*y-b*j*q*a-b*k*r*v-c*f*r*a-c*j*o*s-c*k*m*y-d*f*o*v-d*g*m*a-d*k*q*s-e*f*q*y-e*g*r*s-e*j*m*v);this.a[0]=(g*r*a+j*o*v+k*q*y-g*o*y-j*q*a-k*r*v)*J;this.a[4]=(f*o*y+j*m*a+k*r*s-f*r*a-j*o*s-k*m*y)*J;this.a[8]=(f*q*a+g*o*s+k*m*v-f*o*
v-g*m*a-k*q*s)*J;this.a[12]=(f*r*v+g*m*y+j*q*s-f*q*y-g*r*s-j*m*v)*J;this.a[1]=(c*o*y+d*q*a+e*r*v-c*r*a-d*o*v-e*q*y)*J;this.a[5]=(b*r*a+d*o*s+e*m*y-b*o*y-d*m*a-e*r*s)*J;this.a[9]=(b*o*v+c*m*a+e*q*s-b*q*a-c*o*s-e*m*v)*J;this.a[13]=(b*q*y+c*r*s+d*m*v-b*r*v-c*m*y-d*q*s)*J;this.a[2]=(c*j*a+d*k*v+e*g*y-c*k*y-d*g*a-e*j*v)*J;this.a[6]=(b*k*y+d*f*a+e*j*s-b*j*a-d*k*s-e*f*y)*J;this.a[10]=(b*g*a+c*k*s+e*f*v-b*k*v-c*f*a-e*g*s)*J;this.a[14]=(b*j*v+c*f*y+d*g*s-b*g*y-c*j*s-d*f*v)*J;this.a[3]=(c*k*r+d*g*o+e*j*q-c*
j*o-d*k*q-e*g*r)*J;this.a[7]=(b*j*o+d*k*m+e*f*r-b*k*r-d*f*o-e*j*m)*J;this.a[11]=(b*k*q+c*f*o+e*g*m-b*g*o-c*k*m-e*f*q)*J;this.a[15]=(b*g*r+c*j*m+d*f*q-b*j*q-c*f*r-d*g*m)*J};u.je=function(){return"[ "+this.a[0]+" "+this.a[4]+" "+this.a[8]+" "+this.a[12]+"\n  "+this.a[1]+" "+this.a[5]+" "+this.a[9]+" "+this.a[13]+"\n  "+this.a[2]+" "+this.a[6]+" "+this.a[10]+" "+this.a[14]+"\n  "+this.a[3]+" "+this.a[7]+" "+this.a[11]+" "+this.a[15]+" ]"};x("mat4",O);O.prototype.CalcBodyFrame=O.prototype.Hh;
O.prototype.CalcNavigationFrame=O.prototype.qd;O.prototype.Cami3d=O.prototype.mg;O.prototype.CopyFrom=O.prototype.R;O.prototype.Copy=O.prototype.We;O.prototype.Frustum=O.prototype.jm;O.prototype.Get=O.prototype.af;O.prototype.Identity=O.prototype.qg;O.prototype.Inverse=O.prototype.fe;O.prototype.LookAt=O.prototype.pm;O.prototype.Multiply=O.prototype.S;O.prototype.MultiplyVec3=O.prototype.Ba;O.prototype.Ortho2D=O.prototype.$j;O.prototype.Ortho=O.prototype.Zj;O.prototype.OverwriteTranslation=O.prototype.ak;
O.prototype.Perspective=O.prototype.bk;O.prototype.RotationX=O.prototype.Xh;O.prototype.RotationY=O.prototype.dk;O.prototype.RotationZ=O.prototype.ek;O.prototype.Scale=O.prototype.Tc;O.prototype.SetFromArray=O.prototype.Uc;O.prototype.ToString=O.prototype.je;O.prototype.Translation=O.prototype.Bc;O.prototype.Transpose=O.prototype.ke;O.prototype.Zero=O.prototype.vm;O.prototype.CalcNavigationFrame2=O.prototype.em;O.prototype.CalcNavigationFrameZUp=O.prototype.Lj;O.prototype.ExtractEulerAngles=O.prototype.hm;
O.prototype.CamViewFrustum=O.prototype.Mj;O.prototype.FromQuaternion=O.prototype.im;O.prototype.FromQuaternionComponents=O.prototype.ng;O.prototype.Rot2Quat=O.prototype.rm;function Zb(){this.sg=[];this.rg=[];this.ge=[];this.gb={};this.gb.x=0;this.gb.y=0;this.gb.e=0;this.Db={};this.Db.longitude=0;this.Db.latitude=0;this.Db.elevation=0;this.te=!1;this.Rb=[0,0];this.nc=-1;this.ql=0;this.Fa=qc;this.sa=0}var qc=0,rc=1,sc=2,tc=3,uc=4,vc=5;Zb.prototype.ea=function(a,b,c){this.gb.x=a;this.gb.y=b;this.gb.e=c};Zb.prototype.td=aa("gb");function wc(){this.result={};this.result.p=0;this.result.Ob=0;this.result.vc=0;this.Ua={};this.Ua.x=0;this.Ua.y=0;this.Ua.e=0;this.Va={};this.Va.x=0;this.Va.y=0;this.Va.e=0;this.ya={};this.ya.x=0;this.ya.y=0;this.ya.e=0;this.ab={};this.ab.x=0;this.ab.y=0;this.ab.e=0;this.bb={};this.bb.x=0;this.bb.y=0;this.hh=this.bd=this.bb.e=0;this.Uj=2.220446049250313E-16}
wc.prototype.Nh=function(a,b,c,d,e,f,g,j,k,m,q,r,o,s,v){this.Ua.x=m-g;this.Ua.y=q-j;this.Ua.e=r-k;this.Va.x=o-g;this.Va.y=s-j;this.Va.e=v-k;this.ab.x=e*this.Va.e-f*this.Va.y;this.ab.y=f*this.Va.x-d*this.Va.e;this.ab.e=d*this.Va.y-e*this.Va.x;this.bd=this.Ua.x*this.ab.x+this.Ua.y*this.ab.y+this.Ua.e*this.ab.e;this.ya.x=a-g;this.ya.y=b-j;this.ya.e=c-k;this.hh=1/this.bd;this.bb.x=this.ya.y*this.Ua.e-this.ya.e*this.Ua.y;this.bb.y=this.ya.e*this.Ua.x-this.ya.x*this.Ua.e;this.bb.e=this.ya.x*this.Ua.y-this.ya.y*
this.Ua.x;if(this.bd>this.Uj){this.result.Ob=this.ya.x*this.ab.x+this.ya.y*this.ab.y+this.ya.e*this.ab.e;if(this.result.Ob<0||this.result.Ob>this.bd)return l;this.result.vc=d*this.bb.x+e*this.bb.y+f*this.bb.e;if(this.result.vc<0||this.result.Ob+this.result.vc>this.bd)return l}else if(this.bd<-this.Uj){this.result.Ob=this.ya.x*this.ab.x+this.ya.y*this.ab.y+this.ya.e*this.ab.e;if(this.result.Ob>0||this.result.Ob<this.bd)return l;this.result.vc=d*this.bb.x+e*this.bb.y+f*this.bb.e;if(this.result.vc>0||
this.result.Ob+this.result.vc<this.bd)return l}else return l;this.result.p=this.Va.x*this.bb.x+this.Va.y*this.bb.y+this.Va.e*this.bb.e;this.result.Ob*=this.hh;this.result.vc*=this.hh;this.result.p*=this.hh;return this.result};x("TriangleIntersector",wc);wc.prototype.IntersectTriangle=wc.prototype.Nh;function xc(){this.bg=this.cg=this.$f=this.ag=0;this.ah=1;this.result={od:0,nd:0}}
xc.prototype.cf=function(a,b,c,d,e,f,g,j,k,m,q,r){this.ah=1;d>=0?(this.result.od=(g-a)/d,this.result.nd=(m-a)/d):(this.result.od=(m-a)/d,this.result.nd=(g-a)/d);e>=0?(this.ag=(j-b)/e,this.$f=(q-b)/e):(this.ag=(q-b)/e,this.$f=(j-b)/e);if(this.result.od>this.$f||this.ag>this.result.nd)this.ah=-1;if(this.ag>this.result.od)this.result.od=this.ag;if(this.$f<this.result.nd)this.result.nd=this.$f;f>=0?(this.cg=(k-c)/f,this.bg=(r-c)/f):(this.cg=(r-c)/f,this.bg=(k-c)/f);if(this.result.od>this.bg||this.cg>
this.result.nd)this.ah=-1;if(this.cg>this.result.od)this.result.od=this.cg;if(this.bg<this.result.nd)this.result.nd=this.bg;return this.ah>0?this.result:l};x("AABB",xc);xc.prototype.HitBox=xc.prototype.cf;function P(a,b,c,d){a=a||0;b=b||0;c=c||0;d=d||0;this.a=[a,b,c,d];this.nb=new Float32Array([a,b,c,d])}P.prototype.q=function(a,b,c,d){this.a[0]=a;this.a[1]=b;this.a[2]=c;this.a[3]=d};P.prototype.Ha=function(){this.nb[0]=this.a[0];this.nb[1]=this.a[1];this.nb[2]=this.a[2];this.nb[3]=this.a[3];return this.nb};P.prototype.af=aa("a");P.prototype.je=function(){return"["+this.a[0]+","+this.a[1]+","+this.a[2]+","+this.a[3]+"]"};x("vec4",P);P.prototype.Get=P.prototype.af;P.prototype.Set=P.prototype.q;function yc(a){var a=String(a),b;b=/^\s*$/.test(a)?!1:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,""));if(b)try{return eval("("+a+")")}catch(c){}h(Error("Invalid JSON string: "+a))};function Q(a){this.c=a;this.b=a.b;this.m=this.f=this.dd=this.qa=l;this.mode="";this.pc=this.Me=0;this.gd=this.C=l;this.ia=!1;this.Ek=this.ye=this.O=l;this.Kk=new P;this.Kk.q(1,1,1,1);this.Lk=new P;this.Lk.q(1,1,1,1);this.Rk=new wc;this.wi=this.ca=this.U=this.D=l;this.Og=new xc;this.ba=l;this.Nf=this.w=0;this.n={};this.Ec=Array(3);this.Dc=Array(3);this.He=new O;this.kh=!1;this.Eb=-1}function zc(a,b){if(b.length%3==0)a.m=new Float32Array(b),a.mode="p",a.w=3}
function Ac(a,b){if(b.length%8==0)a.m=new Float32Array(b),a.mode="pnt",a.w=8}function Bc(a,b){if(b.length%7==0)a.m=new Float32Array(b),a.mode="pc",a.w=7}function Cc(a,b){if(b.length%5==0)a.m=new Float32Array(b),a.mode="pt",a.w=5}function Dc(a,b){if(b.length%12==0)a.m=new Float32Array(b),a.mode="pnct",a.w=12}function Ec(a,b){if(b.length%5==0)a.m=new Float32Array(b),a.mode="poi",a.w=5}
function Fc(a,b,c){a.C=new Uint16Array(b);a.gd=c;a.pc=b.length;a.ia=!0;var d=0;if(a.wi)d=a.wi;switch(c){case "TRIANGLES":a.Nf=(b.length-d)/3;break;case "TRIANGLESTRIP":a.Nf=b.length-d-3+1}}u=Q.prototype;u.zb=p("f");
u.Hg=function(){this.qa=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,this.qa);this.b.bufferData(this.b.ARRAY_BUFFER,this.m,this.b.STATIC_DRAW);this.dd=this.b.createBuffer();this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.dd);this.b.bufferData(this.b.ELEMENT_ARRAY_BUFFER,this.C,this.b.STATIC_DRAW)};
u.J=function(){if(this.qa)this.b.deleteBuffer(this.qa),this.qa=l;if(this.dd)this.b.deleteBuffer(this.dd),this.dd=l;this.kh?this.f.J():this.f=l;this.m=l;this.mode="";this.pc=this.Me=0;this.gd=this.C=l};
u.ha=function(a,b,c,d,e){if(this.ia){b=b||0;c=c||0;this.qa==l&&this.Hg();this.b.bindBuffer(this.b.ARRAY_BUFFER,this.qa);this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.dd);this.ba&&(this.c.yc(),this.He.S(this.ba,this.c.Fb),this.c.Ac(this.He));switch(this.mode){case "p":this.b.enableVertexAttribArray(0);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,32,0);break;case "pnt":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.enableVertexAttribArray(2);this.b.vertexAttribPointer(0,
3,this.b.FLOAT,!1,32,0);this.b.vertexAttribPointer(1,3,this.b.FLOAT,!1,32,12);this.b.vertexAttribPointer(2,2,this.b.FLOAT,!1,32,24);var d=this.c.Yb,e=this.c.Si,f=this.c.lh,g=this.c.lc;d.$a&&(d.b.useProgram(d.$a),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.$a,"matModelView"),!1,f.Ha()),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.$a,"matProjection"),!1,g.Ha()),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.$a,"matNormal"),!1,e.Ha()),d.b.uniform1i(d.b.getUniformLocation(d.$a,"uTexture"),0));break;
case "pc":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,28,0);this.b.vertexAttribPointer(1,4,this.b.FLOAT,!1,28,12);d=this.c.Yb;e=this.c.wa;d.Ub&&(d.b.useProgram(d.Ub),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Ub,"matMVP"),!1,e.Ha()));break;case "pt":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,!1,20,12);d=
this.c.Yb;e=this.c.wa;d.Jb&&(d.b.useProgram(d.Jb),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Jb,"matMVP"),!1,e.Ha()),d.b.uniform1i(d.b.getUniformLocation(d.Jb,"uTexture"),0));break;case "pnct":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.enableVertexAttribArray(2);this.b.enableVertexAttribArray(3);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,48,0);this.b.vertexAttribPointer(1,3,this.b.FLOAT,!1,48,12);this.b.vertexAttribPointer(2,4,this.b.FLOAT,!1,48,24);this.b.vertexAttribPointer(3,
2,this.b.FLOAT,!1,48,40);d=this.c.Yb;e=this.c.wa;d.tb&&(d.b.useProgram(d.tb),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.tb,"matMVP"),!1,e.Ha()));break;case "font":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,!1,20,12);if(d==l)d=this.Kk;e=this.c.Yb;f=this.c.wa;e.Gb&&(e.b.useProgram(e.Gb),e.b.uniformMatrix4fv(e.b.getUniformLocation(e.Gb,"matMVP"),!1,f.Ha()),e.b.uniform4fv(e.b.getUniformLocation(e.Gb,
"uColor"),d.Ha()));break;case "poi":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,!1,20,12);if(e==l)e=this.Lk;d=this.c.Yb;f=this.c.wa;d.Hb&&(d.b.useProgram(d.Hb),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Hb,"matMVP"),!1,f.Ha()),d.b.uniform4fv(d.b.getUniformLocation(d.Hb,"uColor"),e.Ha()));break;case "pt_chroma":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);
this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,!1,20,12);d=this.c.Yb;e=this.c.wa;f=this.c.Fb;d.ub&&(d.b.useProgram(d.ub),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.ub,"matM"),!1,f.Ha()),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.ub,"matMVP"),!1,e.Ha()),d.b.uniform1i(d.b.getUniformLocation(d.ub,"uTexture"),0));break;default:alert("unknown surface mode!!")}if(this.f)d=this.f,d.cb&&(d.b.activeTexture(d.b.TEXTURE0),d.b.bindTexture(d.b.TEXTURE_2D,
d.f));switch(this.gd){case "TRIANGLES":a?this.b.drawElements(this.b.TRIANGLES,b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLES,this.pc,this.b.UNSIGNED_SHORT,0);break;case "TRIANGLESTRIP":a?this.b.drawElements(this.b.TRIANGLE_STRIP,b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLE_STRIP,this.pc,this.b.UNSIGNED_SHORT,0);break;case "LINES":this.b.drawElements(this.b.LINES,this.pc,this.b.UNSIGNED_SHORT,0);break;case "POINTS":this.b.drawElements(this.b.POINTS,this.pc,this.b.UNSIGNED_SHORT,
0);break;case "TRIANGLEFAN":a?this.b.drawElements(this.b.TRIANGLE_FAN,b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLE_FAN,this.pc,this.b.UNSIGNED_SHORT,0);break;default:alert("unknown indexsemantic")}this.ba&&this.c.xc();if(this.f)a=this.f,a.cb&&a.b.bindTexture(a.b.TEXTURE_2D,l);this.b.disableVertexAttribArray(0);this.b.disableVertexAttribArray(1);this.b.disableVertexAttribArray(2);this.b.disableVertexAttribArray(3)}};
u.rd=function(a,b,c,d){d||(d=this);if(c)this.Xc=c;if(b)this.ad=b;if(a.BoundingBox)d.D=a.BoundingBox[0],d.U=a.BoundingBox[1];if(a.Offset)d.ca=a.Offset;if(a.CurtainIndex)d.wi=a.CurtainIndex;switch(a.VertexSemantic){case "p":d.Me=a.Vertices.length/3;zc(d,a.Vertices);d.mode="p";break;case "pnt":d.Me=a.Vertices.length/8;Ac(d,a.Vertices);d.mode="pnt";break;case "pc":d.Me=a.Vertices.length/7;d.mode="pc";Bc(d,a.Vertices);break;case "pt":d.Me=a.Vertices.length/5;d.mode="pt";Cc(d,a.Vertices);break;case "pnct":d.Me=
a.Vertices.length/12;d.mode="p";Dc(d,a.Vertices);break;default:alert("unknown surface mode!!")}Fc(d,a.Indices,a.IndexSemantic);if(a.DiffuseMap)d.f=new R(d.c),S(d.f,a.DiffuseMap,function(){var a=d;a.cb=!0;a.ad&&a.ad(a)},function(){var a=d;I(K("owg.Mesh"),"Downloading Error: Texture not found...");a.Xc&&a.Xc(a)},!0),d.kh=!0;a.Center&&d.zg(a.Center[0],a.Center[1],a.Center[2]);d.pc=a.Indices.length;if(!d.kh)d.cb=!0;d.Ek&&d.Ek();d.ad&&!d.kh&&d.ad(d)};
function Gc(a,b,c,d){b==l?alert("invalid json-url"):(a.ye=b,a.O=new window.XMLHttpRequest,a.O.open("GET",a.ye,!0),a.ad=c,a.Xc=d,a.O.onreadystatechange=function(){if(a.O.readyState==4)if(a.O.status==404)a.Xc&&a.Xc(a);else{var b=yc(a.O.responseText);a.rd(b,l,l,a)}},a.O.send())}
u.Vc=function(a,b,c,d,e,f){var g=!1,j,k,m,q;k=j=0;m=1.0E20;for(var r=0;r<this.Nf;r++){var o;o=r;switch(this.gd){case "TRIANGLES":this.n.dg=this.m[this.C[o*3]*this.w];this.n.eg=this.m[this.C[o*3]*this.w+1];this.n.fg=this.m[this.C[o*3]*this.w+2];this.n.gg=this.m[this.C[o*3+1]*this.w];this.n.hg=this.m[this.C[o*3+1]*this.w+1];this.n.ig=this.m[this.C[o*3+1]*this.w+2];this.n.yh=this.m[this.C[o*3+2]*this.w];this.n.zh=this.m[this.C[o*3+2]*this.w+1];this.n.Ah=this.m[this.C[o*3+2]*this.w+2];break;case "TRIANGLESTRIP":o%
2==0?(this.n.dg=this.m[this.C[o]*this.w],this.n.eg=this.m[this.C[o]*this.w+1],this.n.fg=this.m[this.C[o]*this.w+2],this.n.gg=this.m[this.C[o+1]*this.w],this.n.hg=this.m[this.C[o+1]*this.w+1],this.n.ig=this.m[this.C[o+1]*this.w+2]):(this.n.dg=this.m[this.C[o+1]*this.w],this.n.eg=this.m[this.C[o+1]*this.w+1],this.n.fg=this.m[this.C[o+1]*this.w+2],this.n.gg=this.m[this.C[o]*this.w],this.n.hg=this.m[this.C[o]*this.w+1],this.n.ig=this.m[this.C[o]*this.w+2]);this.n.yh=this.m[this.C[o+2]*this.w];this.n.zh=
this.m[this.C[o+2]*this.w+1];this.n.Ah=this.m[this.C[o+2]*this.w+2];break;default:I(K("owg.Surface"),"This indexsemantic is not supported for function: Surface.ReadTriangleFromBuffer() ")}this.ca&&(this.n.dg+=this.ca[0],this.n.eg+=this.ca[1],this.n.fg+=this.ca[2],this.n.gg+=this.ca[0],this.n.hg+=this.ca[1],this.n.ig+=this.ca[2],this.n.yh+=this.ca[0],this.n.zh+=this.ca[1],this.n.Ah+=this.ca[2]);o=this.C[o]==this.C[o+1]||this.C[o]==this.C[o+2]||this.C[o+1]==this.C[o+2]?!1:!0;if(o){if(this.ba){o=new O;
o.R(this.He);var s=new N;s.q(this.n.dg,this.n.eg,this.n.fg);var v=new N;v.q(this.n.gg,this.n.hg,this.n.ig);var y=new N;y.q(this.n.yh,this.n.zh,this.n.Ah);s=o.Ba(s);v=o.Ba(v);o=o.Ba(y);o=this.Rk.Nh(a,b,c,d,e,f,s.a[0],s.a[1],s.a[2],v.a[0],v.a[1],v.a[2],o.a[0],o.a[1],o.a[2])}else o=this.Rk.Nh(a,b,c,d,e,f,this.n.dg,this.n.eg,this.n.fg,this.n.gg,this.n.hg,this.n.ig,this.n.yh,this.n.zh,this.n.Ah);if(o&&(g=!0,o.p<m&&o.p>0))m=o.p,j=o.Ob,k=o.vc,q=r}}if(g)return a={},a.p=m,a.Ob=j,a.vc=k,a.Sl=q,a;return l};
function Hc(a){for(var b=1.0E20,c=1.0E20,d=1.0E20,e=-1.0E20,f=-1.0E20,g=-1.0E20,j,k,m,q=0;q<a.m.length;q++)j=a.m[q*a.w],k=a.m[q*a.w+1],m=a.m[q*a.w+2],j>e&&(e=j),k>f&&(f=k),m>g&&(g=m),j<b&&(b=j),k<c&&(c=k),m<d&&(d=m);a.ba&&(q=new N(b,c,d),m=new N(e,c,d),j=new N(e,f,d),d=new N(b,f,d),k=new N(b,c,g),c=new N(b,f,g),e=new N(e,f,g),g=new N(b,f,g),b=a.ba.Ba(q),f=a.ba.Ba(m),j=a.ba.Ba(j),d=a.ba.Ba(d),k=a.ba.Ba(k),c=a.ba.Ba(c),m=a.ba.Ba(e),q=a.ba.Ba(g),e=[b.a[0],f.a[0],j.a[0],d.a[0],k.a[0],c.a[0],m.a[0],q.a[0]],
g=[b.a[1],f.a[1],j.a[1],d.a[1],k.a[1],c.a[1],m.a[1],q.a[1]],j=[b.a[2],f.a[2],j.a[2],d.a[2],k.a[2],c.a[2],m.a[2],q.a[2]],e.sort(),g.sort(),j.sort(),b=e[0],e=e[e.length-1],c=g[0],f=g[g.length-1],d=j[0],g=j[j.length-1]);a.ca&&(b+=a.ca[0],c+=a.ca[1],d+=a.ca[2],e+=a.ca[0],f+=a.ca[1],g+=a.ca[2]);if(a.D===l)a.D=Array(3);if(a.U===l)a.U=Array(3);a.D[0]=b;a.D[1]=c;a.D[2]=d;a.U[0]=e;a.U[1]=f;a.U[2]=g}u.rk=function(a,b,c,d,e,f){return this.Og.cf(a,b,c,d,e,f,this.D[0],this.D[1],this.D[2],this.U[0],this.U[1],this.U[2])};
u.lf=function(a,b,c,d,e,f){var g=this.c.Na.a,j=new O;this.Ec[0]=a;this.Ec[1]=b;this.Ec[2]=c;this.Dc[0]=d||0;this.Dc[1]=e||0;this.Dc[2]=f||0;j.Uc([g[0],g[4],g[8],0,g[1],g[5],g[9],0,g[2],g[6],g[10],0,this.Ec[0],this.Ec[1],this.Ec[2],1]);a=new O;a.Bc(this.Dc[0],this.Dc[1],this.Dc[2]);b=new O;b.S(j,a);this.ba=b};function Ic(a){a.lf(a.Ec[0],a.Ec[1],a.Ec[2],a.Dc[0],a.Dc[1],a.Dc[2])}
u.zg=function(a,b,c,d,e,f){var g=new T(a,b,c),c=Array(3);g.ja(c);(new O).Bc(c[0],c[1],c[2]);g=new O;g.qd(a,b);a=Array(16);b=g.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;b=new O;b.Uc(a);a=new O;a.Tc(L,L,L);c=new O;c.S(b,a);b=new O;g=new O;a=new O;d?b.Xh(e*Math.PI/180):b.Xh(-1.57079633);e&&g.dk(d*Math.PI/180+1.57079633);f&&a.ek(f*Math.PI/180);d=new O;d.S(b,g);e=new O;e.S(d,a);
d=new O;d.S(c,e);this.ba=d;Hc(this)};u.R=function(a){this.zb(a.f);this.m=a.m;this.mode=a.mode;this.w=a.w;this.C=a.C;this.gd=a.gd;this.pc=a.pc;this.ia=a.ia;this.Nf=a.Nf;this.qa=a.qa;this.dd=a.dd;this.ba=a.ba;this.gd=a.gd};x("Surface",Q);Q.prototype.Draw=Q.prototype.ha;Q.prototype.CopyFrom=Q.prototype.R;Q.prototype.SetAsBillboard=Q.prototype.lf;Q.prototype.SetTexture=Q.prototype.zb;Q.prototype.TestBoundingBoxIntersection=Q.prototype.rk;Q.prototype.TestRayIntersection=Q.prototype.Vc;var U="art/";
function R(a,b,c,d){this.c=a;this.b=a.b;this.f=l;this.$g=this.cb=!1;this.fb=l;this.height=this.width=0;this.Bo=l;this.Tl=!1;if(b){this.Xb=this.b.createFramebuffer();this.b.bindFramebuffer(this.b.FRAMEBUFFER,this.Xb);this.Xb.width=c||0;this.Xb.height=d||0;this.f=this.b.createTexture();this.b.bindTexture(this.b.TEXTURE_2D,this.f);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,
this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.Xb.width,this.Xb.height,0,this.b.RGBA,this.b.UNSIGNED_BYTE,l);this.b.bindRenderbuffer(this.b.RENDERBUFFER,this.b.createRenderbuffer());this.b.framebufferTexture2D(this.b.FRAMEBUFFER,this.b.COLOR_ATTACHMENT0,this.b.TEXTURE_2D,this.f,0);this.b.bindTexture(this.b.TEXTURE_2D,l);this.b.bindRenderbuffer(this.b.RENDERBUFFER,
l);this.b.bindFramebuffer(this.b.FRAMEBUFFER,l);this.Tl=this.cb=!0;if(c)this.width=c;if(d)this.height=d}}
function S(a,b,c,d,e){a.f=a.b.createTexture();a.en=e;var f=a.f,g=a.b;a.f.fd=new Image;a.f.fd.crossOrigin="anonymous";a.f.fd.onload=function(){g.bindTexture(g.TEXTURE_2D,f);a.en&&g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,!0);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,f.fd);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,
g.CLAMP_TO_EDGE);g.bindTexture(g.TEXTURE_2D,l);a.width=f.fd.width;a.height=f.fd.height;c!=l&&c(a);a.cb=!0};a.f.fd.onerror=function(){I(K("owg.Texture"),"***FAILED DOWNLOADING: "+b);this.$g=!0;d&&d(a)};a.f.fd.src=b}u=R.prototype;
u.A=function(a,b,c,d,e,f,g,j,k,m){c=c||0;d=d||0;e=e||1;f=f||1;g=g||!1;j=j||!1;k=k||1;if(this.cb){var q=this.width,r=this.height,o=this.width/2,s=this.height/2;this.c.yc();this.c.Yh();var d=M(d),v=new O;d>0?v.Uc([Math.cos(d)*e,Math.sin(d)*f,0,0,-Math.sin(d)*e,Math.cos(d)*f,0,0,0,0,1,0,-Math.cos(d)*e*o+Math.sin(d)*e*s+e*o+a,-Math.cos(d)*f*s-Math.sin(d)*f*o+f*s+b,c,1]):(v.Bc(a,b,c),a=new O,a.Tc(e,f,1),v.S(v,a));this.c.Ac(v);if(this.fb===l)this.fb=new Q(this.c),j?Ec(this.fb,[0,0,0,0,0,q,0,0,1,0,q,r,0,
1,1,0,r,0,0,1]):Ec(this.fb,[0,0,0,0,1,q,0,0,1,1,q,r,0,1,0,0,r,0,0,0]),Fc(this.fb,[0,1,2,0,2,3],"TRIANGLES"),this.fb.zb(this);g?(this.c.b.enable(this.c.b.BLEND),this.c.b.disable(this.c.b.DEPTH_TEST),this.c.b.depthFunc(this.c.b.LEQUAL),this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA)):this.c.b.disable(this.c.b.BLEND);k<1&&(this.c.b.blendColor(0,0,0,k),this.c.b.blendFunc(this.c.b.CONSTANT_ALPHA,this.c.b.ONE_MINUS_CONSTANT_ALPHA));this.fb.ha(l,l,l,l,m);g&&(this.c.b.disable(this.c.b.BLEND),
this.c.b.enable(this.c.b.DEPTH_TEST));this.c.xc()}};u.J=function(){this.f.fd=l;this.c.b.deleteTexture(this.f);this.f=l;this.$g=this.cb=!1;if(this.fb)this.fb.J(),this.fb=l;if(this.Xb)this.c.b.deleteFramebuffer(this.Xb),this.Xb=l};u.Jh=function(){this.Tl&&(this.b.bindFramebuffer(this.b.FRAMEBUFFER,this.Xb),this.b.viewport(0,0,this.Xb.width,this.Xb.height),this.b.clearColor(0,0,0,1),this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT))};
u.Ih=function(){this.b.bindTexture(this.b.TEXTURE_2D,l);this.b.bindFramebuffer(this.b.FRAMEBUFFER,l);this.b.viewport(0,0,this.c.width,this.c.height)};u.R=function(a){this.f=a.f;this.cb=a.cb;this.$g=a.$g;this.height=this.width=this.fb=a.fb};x("Texture",R);R.prototype.CopyFrom=R.prototype.R;R.prototype.Blit=R.prototype.A;R.prototype.EnableRenderToTexture=R.prototype.Jh;R.prototype.DisableRenderToTexture=R.prototype.Ih;function T(a,b,c){this.t=new Float32Array([a,b,c])}T.prototype.q=function(a,b,c){this.t[0]=a;this.t[1]=b;this.t[2]=c};T.prototype.ja=function(a){var b=Math.sin(M(this.t[1])),c=Math.cos(M(this.t[1])),d=Math.sin(M(this.t[0])),e=Qb/Math.sqrt(1-Rb*b*b);a[0]=(e+this.t[2])*c*Math.cos(M(this.t[0]));a[1]=(e+this.t[2])*c*d;a[2]=(0.993305620011365*e+this.t[2])*b;a[0]*=L;a[1]*=L;a[2]*=L};
T.prototype.ac=function(a,b,c){var d=Math.atan2(b,a),e=Math.atan2(c,Math.sqrt(a*a+b*b)),f=0,g=0,j=0,g=0;a*=8388607;b*=8388607;c*=8388607;for(var k=0;k<10;k++)g=Math.sin(e),g*=g,j=Math.cos(e),g=Qb/Math.sqrt(1-Rb*g),f=Math.sqrt(a*a+b*b)/j-g,e=Math.atan2(c/Math.sqrt(a*a+b*b),1-g*Rb/(g+f));this.t[0]=Tb(d);this.t[1]=Tb(e);this.t[2]=f};T.prototype.je=function(){return" Longitude: "+this.t[0].toPrecision(17)+" Latitude: "+this.t[1].toPrecision(17)+" Elevation: "+this.t[2].toPrecision(17)};x("GeoCoord",T);
T.prototype.FromCartesian=T.prototype.ac;T.prototype.ToCartesian=T.prototype.ja;T.prototype.ToString=T.prototype.je;function Jc(a){this.c=a;this.b=a.b;this.ba=this.qa=this.ld=l;this.He=new O;this.zo=[];this.xh=this.$i=this.ca=0}function Kc(a,b){a.$i+=b.length/7;if(a.xh==0)a.xh=a.$i*70;a.ld=l;a.ld=new Float32Array(b);a.Hg()}Jc.prototype.J=function(){if(this.qa)this.b.deleteBuffer(this.qa),this.qa=l;this.qa=this.ld=l};
Jc.prototype.zg=function(a,b,c){var d=new T(a,b,c),c=Array(3);d.ja(c);(new O).Bc(c[0],c[1],c[2]);d=new O;d.Lj(a,b);a=Array(16);b=d.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;b=new O;b.Uc(a);a=new O;a.Tc(L,L,L);c=new O;c.S(b,a);a=new O;b=new O;b.S(c,a);this.ba=b};
Jc.prototype.ha=function(){if(this.ld!=l){this.qa||this.Hg();this.ba&&(this.c.yc(),this.He.S(this.ba,this.c.Fb),this.c.Ac(this.He));this.b.bindBuffer(this.b.ARRAY_BUFFER,this.qa);this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,28,0);this.b.vertexAttribPointer(1,4,this.b.FLOAT,!1,28,12);var a=new O;a.fe(this.c.wa);var b=this.c.Yb,c=this.c.wa;b.Ib&&(b.b.useProgram(b.Ib),b.b.uniformMatrix4fv(b.b.getUniformLocation(b.Ib,"matMVP"),!1,c.Ha()),
b.b.uniformMatrix4fv(b.b.getUniformLocation(b.Ib,"matInvMVP"),!1,a.Ha()));this.b.drawArrays(this.b.POINTS,0,this.$i);this.b.disableVertexAttribArray(0);this.b.disableVertexAttribArray(1);this.ba&&this.c.xc()}};
Jc.prototype.Hg=function(){this.qa===l?(this.qa=this.b.createBuffer(),this.b.bindBuffer(this.b.ARRAY_BUFFER,this.qa),this.b.bufferData(this.b.ARRAY_BUFFER,this.xh,this.b.STATIC_DRAW),this.b.bufferSubData(this.b.ARRAY_BUFFER,0,this.ld)):(this.b.bindBuffer(this.b.ARRAY_BUFFER,this.qa),this.b.bufferSubData(this.b.ARRAY_BUFFER,this.ca,this.ld));this.ca+=this.ld.length*4};var Lc,Mc,Nc,Oc,Pc;function Qc(){return w.navigator?w.navigator.userAgent:l}Oc=Nc=Mc=Lc=!1;var Rc;if(Rc=Qc()){var Sc=w.navigator;Lc=Rc.indexOf("Opera")==0;Mc=!Lc&&Rc.indexOf("MSIE")!=-1;Nc=!Lc&&Rc.indexOf("WebKit")!=-1;Oc=!Lc&&!Nc&&Sc.product=="Gecko"}var Tc=Lc,Uc=Mc,Vc=Oc,Wc=Nc,Xc,Yc=w.navigator;Xc=Yc&&Yc.platform||"";Pc=Xc.indexOf("Mac")!=-1;var Zc=Xc.indexOf("Win")!=-1,$c;
a:{var ad="",bd;if(Tc&&w.opera)var cd=w.opera.version,ad=typeof cd=="function"?cd():cd;else if(Vc?bd=/rv\:([^\);]+)(\)|;)/:Uc?bd=/MSIE\s+([^\);]+)(\)|;)/:Wc&&(bd=/WebKit\/(\S+)/),bd)var dd=bd.exec(Qc()),ad=dd?dd[1]:"";if(Uc){var ed,fd=w.document;ed=fd?fd.documentMode:i;if(ed>parseFloat(ad)){$c=String(ed);break a}}$c=ad}var gd={};function hd(a){return gd[a]||(gd[a]=fb($c,a)>=0)};var id;var jd="dblclick",kd="mousedown",ld="mouseup",md="mousemove",nd="keydown",od="keyup";var pd=!Uc||hd("9"),qd=Uc&&!hd("8");function rd(){sd&&(td[ia(this)]=this)}var sd=!1,td={};rd.prototype.Nk=!1;rd.prototype.Af=function(){if(!this.Nk&&(this.Nk=!0,this.fc(),sd)){var a=ia(this);td.hasOwnProperty(a)||h(Error(this+" did not call the goog.Disposable base constructor or was disposed of after a clearUndisposedObjects call"));delete td[a]}};rd.prototype.fc=n();function ud(a,b){rd.call(this);this.type=a;this.currentTarget=this.target=b}pa(ud,rd);u=ud.prototype;u.fc=function(){delete this.type;delete this.target;delete this.currentTarget};u.$d=!1;u.Uf=!0;u.stopPropagation=function(){this.$d=!0};u.preventDefault=function(){this.Uf=!1};var vd=new Function("a","return a");function wd(a,b){a&&this.ic(a,b)}pa(wd,ud);var xd=0,yd=1,zd=2,Ad=[1,4,2];u=wd.prototype;u.target=l;u.relatedTarget=l;u.offsetX=0;u.offsetY=0;u.clientX=0;u.clientY=0;u.screenX=0;u.screenY=0;u.button=0;u.keyCode=0;u.charCode=0;u.ctrlKey=!1;u.altKey=!1;u.shiftKey=!1;u.metaKey=!1;u.xn=!1;u.Kc=l;
u.ic=function(a,b){var c=this.type=a.type;ud.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(Vc)try{vd(d.nodeName)}catch(e){d=l}}else if(c=="mouseover")d=a.fromElement;else if(c=="mouseout")d=a.toElement;this.relatedTarget=d;this.offsetX=a.offsetX!==i?a.offsetX:a.layerX;this.offsetY=a.offsetY!==i?a.offsetY:a.layerY;this.clientX=a.clientX!==i?a.clientX:a.pageX;this.clientY=a.clientY!==i?a.clientY:a.pageY;this.screenX=a.screenX||0;this.screenY=a.screenY||
0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||(c=="keypress"?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.xn=Pc?a.metaKey:a.ctrlKey;this.state=a.state;this.Kc=a;delete this.Uf;delete this.$d};function Bd(a,b){return pd?a.Kc.button==b:a.type=="click"?b==xd:!!(a.Kc.button&Ad[b])}
u.stopPropagation=function(){wd.ce.stopPropagation.call(this);this.Kc.stopPropagation?this.Kc.stopPropagation():this.Kc.cancelBubble=!0};u.preventDefault=function(){wd.ce.preventDefault.call(this);var a=this.Kc;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,qd)try{if(a.ctrlKey||a.keyCode>=112&&a.keyCode<=123)a.keyCode=-1}catch(b){}};u.fc=function(){wd.ce.fc.call(this);this.relatedTarget=this.currentTarget=this.target=this.Kc=l};function Cd(){}var Dd=0;u=Cd.prototype;u.key=0;u.Pe=!1;u.Dk=!1;u.ic=function(a,b,c,d,e,f){ga(a)?this.Tk=!0:a&&a.handleEvent&&ga(a.handleEvent)?this.Tk=!1:h(Error("Invalid listener argument"));this.If=a;this.xl=b;this.src=c;this.type=d;this.capture=!!e;this.Ni=f;this.Dk=!1;this.key=++Dd;this.Pe=!1};u.handleEvent=function(a){if(this.Tk)return this.If.call(this.Ni||this.src,a);return this.If.handleEvent.call(this.If,a)};var Ed,Fd=(Ed="ScriptEngine"in w&&w.ScriptEngine()=="JScript")?w.ScriptEngineMajorVersion()+"."+w.ScriptEngineMinorVersion()+"."+w.ScriptEngineBuildVersion():"0";function Gd(a,b){rd.call(this);this.Zk=b;this.Kd=[];a>this.Zk&&h(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var c=0;c<a;c++)this.Kd.push(this.wf())}pa(Gd,rd);u=Gd.prototype;u.Id=l;u.Mk=l;u.getObject=function(){if(this.Kd.length)return this.Kd.pop();return this.wf()};function Hd(a,b){a.Kd.length<a.Zk?a.Kd.push(b):a.xi(b)}u.wf=function(){return this.Id?this.Id():{}};u.xi=function(a){if(this.Mk)this.Mk(a);else if(ha(a))if(ga(a.Af))a.Af();else for(var b in a)delete a[b]};
u.fc=function(){Gd.ce.fc.call(this);for(var a=this.Kd;a.length;)this.xi(a.pop());delete this.Kd};var Id,Jd,Kd,Ld,Md,Nd,Od,Pd,Qd,Rd,Sd;
(function(){function a(){return{oa:0,Wb:0}}function b(){return[]}function c(){function a(b){return g.call(a.src,a.key,b)}return a}function d(){return new Cd}function e(){return new wd}var f=Ed&&!(fb(Fd,"5.7")>=0),g;Nd=function(a){g=a};if(f){Id=function(){return j.getObject()};Jd=function(a){Hd(j,a)};Kd=function(){return k.getObject()};Ld=function(a){Hd(k,a)};Md=function(){return m.getObject()};Od=function(){Hd(m,c())};Pd=function(){return q.getObject()};Qd=function(a){Hd(q,a)};Rd=function(){return r.getObject()};
Sd=function(a){Hd(r,a)};var j=new Gd(0,600);j.Id=a;var k=new Gd(0,600);k.Id=b;var m=new Gd(0,600);m.Id=c;var q=new Gd(0,600);q.Id=d;var r=new Gd(0,600);r.Id=e}else Id=a,Jd=ca,Kd=b,Ld=ca,Md=c,Od=ca,Pd=d,Qd=ca,Rd=e,Sd=ca})();var Td={},V={},Ud={},Vd={};
function W(a,b,c,d,e){if(b)if(da(b)=="array"){for(var f=0;f<b.length;f++)W(a,b[f],c,d,e);return l}else{var d=!!d,g=V;b in g||(g[b]=Id());g=g[b];d in g||(g[d]=Id(),g.oa++);var g=g[d],j=ia(a),k;g.Wb++;if(g[j]){k=g[j];for(f=0;f<k.length;f++)if(g=k[f],g.If==c&&g.Ni==e){if(g.Pe)break;return k[f].key}}else k=g[j]=Kd(),g.oa++;f=Md();f.src=a;g=Pd();g.ic(c,f,a,b,d,e);c=g.key;f.key=c;k.push(g);Td[c]=g;Ud[j]||(Ud[j]=Kd());Ud[j].push(g);a.addEventListener?(a==w||!a.Jk)&&a.addEventListener(b,f,d):a.attachEvent(Wd(b),
f);return c}else h(Error("Invalid event type"))}function Xd(a,b,c,d,e){if(da(b)=="array")for(var f=0;f<b.length;f++)Xd(a,b[f],c,d,e);else{d=!!d;a:{f=V;if(b in f&&(f=f[b],d in f&&(f=f[d],a=ia(a),f[a]))){a=f[a];break a}a=l}if(a)for(f=0;f<a.length;f++)if(a[f].If==c&&a[f].capture==d&&a[f].Ni==e){Yd(a[f].key);break}}}
function Yd(a){if(Td[a]){var b=Td[a];if(!b.Pe){var c=b.src,d=b.type,e=b.xl,f=b.capture;c.removeEventListener?(c==w||!c.Jk)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(Wd(d),e);c=ia(c);e=V[d][f][c];if(Ud[c]){var g=Ud[c],j=kb(g,b);j>=0&&jb.splice.call(g,j,1);g.length==0&&delete Ud[c]}b.Pe=!0;e.rl=!0;Zd(d,f,c,e);delete Td[a]}}}
function Zd(a,b,c,d){if(!d.jh&&d.rl){for(var e=0,f=0;e<d.length;e++)if(d[e].Pe){var g=d[e].xl;g.src=l;Od(g);Qd(d[e])}else e!=f&&(d[f]=d[e]),f++;d.length=f;d.rl=!1;f==0&&(Ld(d),delete V[a][b][c],V[a][b].oa--,V[a][b].oa==0&&(Jd(V[a][b]),delete V[a][b],V[a].oa--),V[a].oa==0&&(Jd(V[a]),delete V[a]))}}
function $d(a){var b,c=0,d=b==l;b=!!b;if(a==l)Sa(Ud,function(a){for(var e=a.length-1;e>=0;e--){var f=a[e];if(d||b==f.capture)Yd(f.key),c++}});else if(a=ia(a),Ud[a])for(var a=Ud[a],e=a.length-1;e>=0;e--){var f=a[e];if(d||b==f.capture)Yd(f.key),c++}}function Wd(a){if(a in Vd)return Vd[a];return Vd[a]="on"+a}
function ae(a,b,c,d,e){var f=1,b=ia(b);if(a[b]){a.Wb--;a=a[b];a.jh?a.jh++:a.jh=1;try{for(var g=a.length,j=0;j<g;j++){var k=a[j];k&&!k.Pe&&(f&=be(k,e)!==!1)}}finally{a.jh--,Zd(c,d,b,a)}}return Boolean(f)}function be(a,b){var c=a.handleEvent(b);a.Dk&&Yd(a.key);return c}
Nd(function(a,b){if(!Td[a])return!0;var c=Td[a],d=c.type,e=V;if(!(d in e))return!0;var e=e[d],f,g;id===i&&(id=Uc&&!w.addEventListener);if(id){f=b||ba("window.event");var j=!0 in e,k=!1 in e;if(j){if(f.keyCode<0||f.returnValue!=i)return!0;a:{var m=!1;if(f.keyCode==0)try{f.keyCode=-1;break a}catch(q){m=!0}if(m||f.returnValue==i)f.returnValue=!0}}m=Rd();m.ic(f,this);f=!0;try{if(j){for(var r=Kd(),o=m.currentTarget;o;o=o.parentNode)r.push(o);g=e[!0];g.Wb=g.oa;for(var s=r.length-1;!m.$d&&s>=0&&g.Wb;s--)m.currentTarget=
r[s],f&=ae(g,r[s],d,!0,m);if(k){g=e[!1];g.Wb=g.oa;for(s=0;!m.$d&&s<r.length&&g.Wb;s++)m.currentTarget=r[s],f&=ae(g,r[s],d,!1,m)}}else f=be(c,m)}finally{if(r)r.length=0,Ld(r);m.Af();Sd(m)}return f}d=new wd(b,this);try{f=be(c,d)}finally{d.Af()}return f});function ce(){this.Cf=[];this.aj=new tb;this.Ol=this.Pl=this.Ql=this.Fl=0;this.uc=new tb;this.Fk=this.Nl=0;this.rn=1;this.yi=new Gd(0,4E3);this.yi.wf=function(){return new de};this.Gl=new Gd(0,50);this.Gl.wf=function(){return new ee};var a=this;this.Pi=new Gd(0,2E3);this.Pi.wf=function(){return String(a.rn++)};this.Pi.xi=n();this.$m=3}function ee(){this.vj=this.Ll=this.count=0}
ee.prototype.toString=function(){var a=[];a.push(this.type," ",this.count," (",Math.round(this.Ll*10)/10," ms)");this.vj&&a.push(" [VarAlloc = ",this.vj,"]");return a.join("")};function de(){}function fe(a,b,c,d){var e=[];c==-1?e.push("    "):e.push(ge(a.Ok-c));e.push(" ",he(a.Ok-b));a.zi==0?e.push(" Start        "):a.zi==1?(e.push(" Done "),e.push(ge(a.Eo-a.startTime)," ms ")):e.push(" Comment      ");e.push(d,a);a.Ln>0&&e.push("[VarAlloc ",a.Ln,"] ");return e.join("")}
de.prototype.toString=function(){return this.type==l?this.Vm:"["+this.type+"] "+this.Vm};ce.prototype.reset=function(a){this.$m=a;for(a=0;a<this.Cf.length;a++){var b=this.yi.id;b&&Hd(this.Pi,b);Hd(this.yi,this.Cf[a])}this.Cf.length=0;this.aj.clear();this.Fl=oa();this.Fk=this.Nl=this.Ol=this.Pl=this.Ql=0;b=this.uc.eh();for(a=0;a<b.length;a++){var c=this.uc.get(b[a]);c.count=0;c.Ll=0;c.vj=0;Hd(this.Gl,c)}this.uc.clear()};
ce.prototype.toString=function(){for(var a=[],b=-1,c=[],d=0;d<this.Cf.length;d++){var e=this.Cf[d];e.zi==1&&c.pop();a.push(" ",fe(e,this.Fl,b,c.join("")));b=e.Ok;a.push("\n");e.zi==0&&c.push("|  ")}if(this.aj.ve()!=0){var f=oa();a.push(" Unstopped timers:\n");sb(this.aj,function(b){a.push("  ",b," (",f-b.startTime," ms, started at ",he(b.startTime),")\n")})}b=this.uc.eh();for(d=0;d<b.length;d++)c=this.uc.get(b[d]),c.count>1&&a.push(" TOTAL ",c,"\n");a.push("Total tracers created ",this.Nl,"\n","Total comments created ",
this.Fk,"\n","Overhead start: ",this.Ql," ms\n","Overhead end: ",this.Pl," ms\n","Overhead comment: ",this.Ol," ms\n");return a.join("")};ce.prototype.Xk=function(a){w.console&&w.console.markTimeline&&w.console.markTimeline(a)};function ge(a){var a=Math.round(a),b="";a<1E3&&(b=" ");a<100&&(b="  ");a<10&&(b="   ");return b+a}function he(a){a=Math.round(a);return String(100+a/1E3%60).substring(1,3)+"."+String(1E3+a%1E3).substring(1,4)}new ce;new Gd(0,100);var ie=0;function je(){this.Sn=ie;ie++;this.kb=n();this.lb=n();this.jb=n();this.ud=n();this.he=n();this.vd=n();this.wc=n();this.Tn=this.c=l;this.Go=[]}function ke(a){a.vd(a.c.L);a.ud()};function le(){rd.call(this)}pa(le,rd);u=le.prototype;u.Jk=!0;u.bj=l;u.addEventListener=function(a,b,c,d){W(this,a,b,c,d)};u.removeEventListener=function(a,b,c,d){Xd(this,a,b,c,d)};
u.dispatchEvent=function(a){var b=a.type||a,c=V;if(b in c){if(fa(a))a=new ud(a,this);else if(a instanceof ud)a.target=a.target||this;else{var d=a,a=new ud(b,this);Va(a,d)}var d=1,e,c=c[b],b=!0 in c,f;if(b){e=[];for(f=this;f;f=f.bj)e.push(f);f=c[!0];f.Wb=f.oa;for(var g=e.length-1;!a.$d&&g>=0&&f.Wb;g--)a.currentTarget=e[g],d&=ae(f,e[g],a.type,!0,a)&&a.Uf!=!1}if(!1 in c)if(f=c[!1],f.Wb=f.oa,b)for(g=0;!a.$d&&g<e.length&&f.Wb;g++)a.currentTarget=e[g],d&=ae(f,e[g],a.type,!1,a)&&a.Uf!=!1;else for(e=this;!a.$d&&
e&&f.Wb;e=e.bj)a.currentTarget=e,d&=ae(f,e,a.type,!1,a)&&a.Uf!=!1;a=Boolean(d)}else a=!0;return a};u.fc=function(){le.ce.fc.call(this);$d(this);this.bj=l};function me(){this.kj=this.uj=this.sj=this.tj=this.rj=this.pj=this.qj=this.oj=this.mj=this.nj=this.lj=this.Wf=this.Xf=this.Se=this.Vf=this.vi=this.ui=this.to=l;this.Wi=this.Vi=0;this.ob=!1;this.elevation=this.latitude=this.longitude=this.ua=0;this.nc=-1;this.ra=this.xa=0;this.I=ne;this.we=0;this.Sb=48;this.Lb=this.uh=this.Pc=this.ib=this.Ue=this.eb=this.qb=this.Da=0;this.Ak=!1;this.Ik=this.Hk=0;this.Qk=new P(0.7,0.9,1,1);this.jb=n();this.mb=function(a){for(;a>360;)a-=360;for(;a<0;)a+=360;return a};
this.kb=function(){if(this.nc==0)this.ob&&(this.vi.A(this.Vi-64,this.Wi-64,0,this.ua,1,1,!0,!1),this.ui.A(this.Vi-64,this.Wi-64,0,0,1,1,!0,!1)),this.c.Rc("Current position: ("+this.longitude.toFixed(6)+", "+this.latitude.toFixed(6)+","+this.elevation.toFixed(2)+")",0,0,0.5);else if(this.nc==1){this.Ak&&this.kj.A(this.Hk-16,this.Ik-16,0,0,1,1,!0,!1,0.75);var a=this.c.width-1-64-this.we,b=this.c.height-1-this.Sb,c=this.mb(this.Ue+this.uh);this.I==oe?this.Wf.A(a-64,b-64,0,c,1,1,!0,!1,1,this.Qk):this.I==
pe?this.Wf.A(a-64,b-64,0,c,1,1,!0,!1,1,this.Qk):this.Wf.A(a-64,b-64,0,c,1,1,!0,!1);this.I==qe?(this.Xf.A(a-32,b-32,0,0,1,1,!0,!1),this.Se.A(a-32,b-32,0,this.eb,1,1,!0,!1,0.5)):this.I==re?(this.Xf.A(a-32,b-32,0,0,1,1,!0,!1),this.Se.A(a-32,b-32,0,this.eb,1,1,!0,!1,0.5)):this.Xf.A(a-32,b-32,0,0,1,1,!0,!1);b=this.c.height-1-82-this.Sb;this.I==se?(this.Vf.A(a-32,b-32,0,0,1,1,!0),this.Se.A(a-32,b-32,0,this.Da,1,1,!0,!1,0.5)):this.I==te?(this.Vf.A(a-32,b-32,0,0,1,1,!0),this.Se.A(a-32,b-32,0,this.Da,1,1,
!0,!1,0.5)):this.Vf.A(a-32,b-32,0,0,1,1,!0,!1);b=this.c.height-1-82-128-this.Sb;this.uj.A(a-8,b-64,0,0,1,1,!0,!1);b=this.c.height-1-82-64-this.Sb;this.I==ue?this.qj.A(a-16,b-16,0,0,1,1,!0,!1):this.I==ve?this.pj.A(a-16,b-16,0,0,1,1,!0,!1):this.oj.A(a-16,b-16,0,0,1,1,!0,!1);b=this.c.height-1-82-128-64-this.Sb;this.I==we?this.nj.A(a-16,b-16,0,0,1,1,!0,!1):this.I==xe?this.mj.A(a-16,b-16,0,0,1,1,!0,!1):this.lj.A(a-16,b-16,0,0,1,1,!0,!1);b=this.c.height-1-82-128-this.Lb-this.Sb;this.I==ye?this.tj.A(a-16,
b-16,0,0,1,1,!0,!1):this.I==ze?this.sj.A(a-16,b-16,0,0,1,1,!0,!1):this.rj.A(a-16,b-16,0,0,1,1,!0,!1)}};this.lb=function(a){this.nc=a.nc;this.ua=a.Gk*57.29577951308232;this.longitude=a.Db.longitude;this.latitude=a.Db.latitude;this.elevation=a.Db.elevation;this.Ak=a.te;this.Hk=a.Rb[0];this.Ik=this.c.height-a.Rb[1]-1;if(this.I!=oe)this.uh=this.ua,this.Ue=0;if(this.I==ve)a.Fa=rc,a.sa=1;else if(this.I==xe)a.Fa=sc,a.sa=1;else if(this.I==ze)if(this.Lb>0)a.Fa=sc,a.sa=Math.sqrt(this.Lb)/4;else{if(this.Lb<
0)a.sa=Math.sqrt(-this.Lb)/4,a.Fa=rc}else this.I==te?(a.Fa=tc,a.sa=this.qb):this.I==oe?(a.Fa=uc,a.sa=this.uh+this.Ue,a.sa=this.mb(a.sa),a.sa*=Math.PI/180):this.I==qe?(a.Fa=vc,a.sa=Math.PI*this.eb/180):a.Fa=qc;a.ql=this.I==ne?0:1};this.ud=function(){this.ui=new R(this.c);S(this.ui,U+"flightnavigation/cmpbg.png");this.vi=new R(this.c);S(this.vi,U+"flightnavigation/cmpr.png");this.Vf=new R(this.c);S(this.Vf,U+"globenavigation/MoveWheel.png");this.Xf=new R(this.c);S(this.Xf,U+"globenavigation/YawPitchWheel.png");
this.Wf=new R(this.c);S(this.Wf,U+"globenavigation/yaw_pitch_adjust.png");this.Se=new R(this.c);S(this.Se,U+"globenavigation/movewheel_marker.png",l,l,!0);this.lj=new R(this.c);S(this.lj,U+"globenavigation/minus.png");this.nj=new R(this.c);S(this.nj,U+"globenavigation/minus_over.png");this.mj=new R(this.c);S(this.mj,U+"globenavigation/minus_clicked.png");this.oj=new R(this.c);S(this.oj,U+"globenavigation/plus.png");this.qj=new R(this.c);S(this.qj,U+"globenavigation/plus_over.png");this.pj=new R(this.c);
S(this.pj,U+"globenavigation/plus_clicked.png");this.rj=new R(this.c);S(this.rj,U+"globenavigation/slider.png");this.tj=new R(this.c);S(this.tj,U+"globenavigation/slider_over.png");this.sj=new R(this.c);S(this.sj,U+"globenavigation/slider_clicked.png");this.uj=new R(this.c);S(this.uj,U+"globenavigation/slider_rail.png");this.kj=new R(this.c);S(this.kj,U+"globenavigation/crosshair.png")};this.he=n();this.vd=function(a){W(a,kd,this.df,!1,this);W(a,ld,this.ff,!1,this);W(a,md,this.ef,!1,this);W(a,jd,
this.Sh,!1,this)};this.df=function(a){if(Bd(a,xd)){var b=a.offsetX-this.c.L.offsetLeft,a=a.offsetY-this.c.L.offsetTop;this.Vi=b;this.Wi=this.c.height-a-1;this.xa=b;this.ra=this.c.height-a-1;this.ob=!0;this.nc==1&&this.Mh(0)}};this.ff=function(a){if(Bd(a,xd)){var b=a.offsetY-this.c.L.offsetTop;this.xa=a.offsetX-this.c.L.offsetLeft;this.ra=this.c.height-b-1;this.ob=!1;this.nc==1&&this.Mh(0);this.Lb=0}};this.ef=function(a){var b=a.offsetY-this.c.L.offsetTop,c=this.c.height-b-1-this.ra;this.xa=a.offsetX-
this.c.L.offsetLeft;this.ra=this.c.height-b-1;this.nc==1&&this.Mh(c)};this.Sh=function(){this.I==pe&&Ae(this.c.Ka,this.longitude,this.latitude,this.elevation,0,-90,0)};this.Mh=function(a){var b=this.c.width-1-64-this.we-8,c=this.c.height-1-82-64-this.Sb+8,d=this.c.width-1-64-this.we-8,e=this.c.height-1-82-128-64-this.Sb+8,f=this.c.width-1-64-this.we-8,g=this.c.height-1-82-128-this.Lb-this.Sb+8,j=this.c.width-1-64-this.we,k=this.c.height-1-82-this.Sb,m=Math.abs(this.xa-j);m*=m;var q=Math.abs(this.ra-
k);q*=q;var r=this.c.width-1-64-this.we,o=this.c.height-1-this.Sb,s=Math.abs(this.xa-r);s*=s;var v=Math.abs(this.ra-o);v*=v;if(this.ob&&this.I==ze)if(this.Lb-=a,this.Lb<-40)this.Lb=-40;else{if(this.Lb>40)this.Lb=40}else if(this.ob&&this.I==te)a=this.xa-j,k=this.ra-k,this.qb=this.Da=180*Math.atan2(Math.abs(k),a)/Math.PI,k<0?this.Da=360-this.Da:this.qb=360-this.qb,this.Da+=90,this.qb+=90,this.Da=this.mb(this.Da),this.qb=this.mb(this.qb);else if(this.ob&&this.I==oe){a=this.xa-r;k=this.ra-o;this.ib=180*
Math.atan2(Math.abs(k),a)/Math.PI;if(k<0)this.ib=360-this.ib;this.ib-=90;this.ib=this.mb(this.ib);this.Ue=this.mb(this.ib-this.Pc)}else if(this.ob&&this.I==qe){a=this.xa-r;k=this.ra-o;this.eb=180*Math.atan2(Math.abs(k),a)/Math.PI;if(k<0)this.eb=360-this.eb;this.eb+=90;this.eb=this.mb(this.eb)}else{this.I=0;if(this.xa>b&&this.ra>c-16&&this.xa<b+16&&this.ra<c)this.I=this.ob?ve:ue;if(this.xa>d&&this.ra>e-16&&this.xa<d+16&&this.ra<e)this.I=this.ob?xe:we;if(this.xa>f&&this.ra>g-16&&this.xa<f+16&&this.ra<
g)this.I=this.ob?ze:ye;m+q<=729?this.ob?this.I=te:(this.I=se,a=this.xa-j,k=this.ra-k,this.qb=this.Da=180*Math.atan2(Math.abs(k),a)/Math.PI,k<0?this.Da=360-this.Da:this.qb=360-this.qb,this.Da+=90,this.qb+=90,this.Da=this.mb(this.Da),this.qb=this.mb(this.qb)):this.Da=0;if(s+v<=625){this.I=this.ob?qe:re;a=this.xa-r;k=this.ra-o;this.eb=180*Math.atan2(Math.abs(k),a)/Math.PI;if(k<0)this.eb=360-this.eb;this.eb+=90;this.eb=this.mb(this.eb)}else if(s+v<=1600)if(this.ob){this.I=oe;a=this.xa-r;k=this.ra-o;this.ib=
180*Math.atan2(Math.abs(k),a)/Math.PI;if(k<0)this.ib=360-this.ib;this.ib-=90;this.ib=this.mb(this.ib);this.Ue=this.mb(this.ib-this.Pc);this.uh=this.ua}else{this.I=pe;a=this.xa-r;k=this.ra-o;this.Pc=180*Math.atan2(Math.abs(k),a)/Math.PI;if(k<0)this.Pc=360-this.Pc;this.Pc-=90;this.Pc-=this.Ue;this.Pc=this.mb(this.Pc)}}}}var ne=0,ue=1,ve=2,we=3,xe=4,ye=5,ze=6,se=7,te=8,pe=9,oe=10,re=11,qe=12;me.prototype=new je;function Be(){this.name="ogAoeImage";this.type=Ka;this.hc=-1;this.H=!1;this.options=l;this.Gf=-1;this.Pd=-180;this.Nd=-90;this.Ae=180;this.ze=90;this.ro="";this.cb=!1;this.f=this.mn=l;this.Ce=[];this.ue=[]}Be.prototype=new G;u=Be.prototype;u.va=function(a){this.options=a;this.Pd=a.longitude0;this.Nd=a.latitude0;this.Ae=a.longitude1;this.ze=a.latitude1;this.kn=a.url;a=this.parent.parent.c;this.mn=new R(a,!0,256,256);this.f=new R(a);this.f.parent=this;S(this.f,this.kn,Ce,De,!0);this.hc=Ee(this).Dh(this)};
u.Ra=function(){Ee(this).Uh(this.hc)};function Ee(a){var b=l,a=a.parent.parent.c;if(a.d&&a.d.K)b=a.d.K.li;return b}u.X=n();u.Y=n();
u.Pa=function(){var a=this.parent.parent.c;if(this.cb!=!1){var b=a.d.K.La.r.length,c,d,e,f,g=l;this.ue=l;this.ue=[];for(var j=0;j<b;j++)if(g=a.d.K.La.r[j],!(g.g.length<1)&&!g.qo&&(c=g.Pd,d=g.Nd,e=g.Ae,f=g.ze,!(this.Pd>e|this.Ae<c|this.Nd>f|this.ze<d)&&(this.ue[g.g]=this.Ce[g.g],!this.Ce[g.g]))){var k=new Q(g.c);k.R(g.k);var m=g.f,q=new R(g.c,!0,256,256);q.Jh();m.A(0,0,0,0,1,1,!0,!0,1);this.f.A((this.Pd-c)*256/(e-c),(this.Nd-d)*256/(f-d),0,0,(this.Ae-this.Pd)/this.f.width/((e-c)/256),(this.ze-this.Nd)/
this.f.height/((f-d)/256),!0,!0,1);q.Ih();k.zb(q);k.Nn=g.ma[0];k.On=g.ma[1];k.Pn=g.ma[2];this.Ce[g.g]=k;this.ue[g.g]=k}}for(var r in this.ue)a=this.ue[r],b=new O,b.R(a.c.Fb),b.a[12]+=a.Nn,b.a[13]+=a.On,b.a[14]+=a.Pn,a.c.yc(),a.c.Ac(b),a.ha(),a.c.xc()};function Ce(a){a.parent.cb=!0;a.G&&a.G(a.g,a,a.i);a.G=l;a.F=l;a.g=l;a.caller=l;a.i=l}function De(a){a.F&&a.F(a.g,a.caller,a.i);a.G=l;a.F=l;a.g=l;a.caller=l;a.i=l};function Fe(a){this.c=a;this.rf=[]}Fe.prototype.Pa=function(){for(var a=0;a<this.rf.length;a++)this.rf[a].Pa()};Fe.prototype.Dh=function(a){this.rf.push(a);return this.rf.length-1};Fe.prototype.Uh=function(a){this.rf.splice(a,1)};function Ge(a){this.c=a;this.ka=[];this.cd=new He}Ge.prototype.Pa=function(a,b){var c=a.a[0],d=a.a[1],e=a.a[2],f=0,g=0,j=0;this.cd.Gg(b);for(var k=0;k<this.ka.length;k++){var m=this.ka[k];m.H||(this.cd.Fg(m.Wd,m.Xd,m.Yd,m.Wd+0.0010,m.Xd+0.0010,m.Yd+0.0010),f=m.Wd-c,g=m.Xd-d,j=m.Yd-e,f=f*f+g*g+j*j,g=m.yj*m.yj,m.xj*m.xj>f&&g<f&&m.ha())}};Ge.prototype.jf=function(a,b){for(var c=0;c<this.ka.length;c++)if(this.ka[c].gf(a,b))return this.ka[c];return l};function Ie(a){this.c=a;this.na=[]}Ie.prototype.Pa=function(){for(var a=0;a<this.na.length;a++){var b=this.na[a];b.H||b.ha()}};Ie.prototype.Eh=function(a){this.na.push(a)};Ie.prototype.Vh=function(a){for(var b=0;b<this.na.length;b++)if(this.na[b]==a){this.na.splice(b,1);break}};Ie.prototype.hf=function(a,b){for(var c=0;c<this.na.length;c++){var d=this.na[c].gf(a,b);if(d)return d}return l};function Je(){this.e=this.y=this.x=0}function He(){this.s=Array(6);this.s[0]=new Ke;this.s[1]=new Ke;this.s[2]=new Ke;this.s[3]=new Ke;this.s[4]=new Ke;this.s[5]=new Ke;this.B=Array(8);this.B[0]=new Je;this.B[1]=new Je;this.B[2]=new Je;this.B[3]=new Je;this.B[4]=new Je;this.B[5]=new Je;this.B[6]=new Je;this.B[7]=new Je}function Ke(){this.sc=this.rc=this.qc=this.Qc=0}
Ke.prototype.Pb=function(){var a=Math.sqrt(this.qc*this.qc+this.rc*this.rc+this.sc*this.sc);this.qc/=a;this.rc/=a;this.sc/=a;this.Qc/=a};
He.prototype.Fg=function(a,b,c,d,e,f){this.B[0].x=a;this.B[0].y=b;this.B[0].e=c;this.B[1].x=d;this.B[1].y=b;this.B[1].e=c;this.B[2].x=d;this.B[2].y=e;this.B[2].e=c;this.B[3].x=a;this.B[3].y=e;this.B[3].e=c;this.B[4].x=a;this.B[4].y=b;this.B[4].e=f;this.B[5].x=a;this.B[5].y=e;this.B[5].e=f;this.B[6].x=d;this.B[6].y=e;this.B[6].e=f;this.B[7].x=d;this.B[7].y=b;this.B[7].e=f;for(a=0;a<6;a++){b=8;for(c=0;c<8;c++)this.s[a].qc*this.B[c].x+this.s[a].rc*this.B[c].y+this.s[a].sc*this.B[c].e+this.s[a].Qc<0&&
--b;if(b==0)return!1}return!0};
He.prototype.Gg=function(a){this.xo=a;this.Oa=a.a;this.dl=this.Oa[0];this.hl=this.Oa[1];this.ll=this.Oa[2];this.De=this.Oa[3];this.el=this.Oa[4];this.il=this.Oa[5];this.ml=this.Oa[6];this.Ee=this.Oa[7];this.fl=this.Oa[8];this.jl=this.Oa[9];this.nl=this.Oa[10];this.Fe=this.Oa[11];this.gl=this.Oa[12];this.kl=this.Oa[13];this.ol=this.Oa[14];this.Ge=this.Oa[15];this.s[0].qc=this.De+this.dl;this.s[0].rc=this.Ee+this.el;this.s[0].sc=this.Fe+this.fl;this.s[0].Qc=this.Ge+this.gl;this.s[0].Pb();this.s[1].qc=
this.De-this.dl;this.s[1].rc=this.Ee-this.el;this.s[1].sc=this.Fe-this.fl;this.s[1].Qc=this.Ge-this.gl;this.s[1].Pb();this.s[2].qc=this.De-this.hl;this.s[2].rc=this.Ee-this.il;this.s[2].sc=this.Fe-this.jl;this.s[2].Qc=this.Ge-this.kl;this.s[2].Pb();this.s[3].qc=this.De+this.hl;this.s[3].rc=this.Ee+this.il;this.s[3].sc=this.Fe+this.jl;this.s[3].Qc=this.Ge+this.kl;this.s[3].Pb();this.s[4].qc=this.De+this.ll;this.s[4].rc=this.Ee+this.ml;this.s[4].sc=this.Fe+this.nl;this.s[4].Qc=this.Ge+this.ol;this.s[4].Pb();
this.s[5].qc=this.De-this.ll;this.s[5].rc=this.Ee-this.ml;this.s[5].sc=this.Fe-this.nl;this.s[5].Qc=this.Ge-this.ol;this.s[5].Pb()};x("ViewFrustum",He);He.prototype.TestBox=He.prototype.Fg;He.prototype.Update=He.prototype.Gg;function Le(){this.sf=this.tf=!1;this.version=this.md=this.Mn=this.Ul=this.ae=this.Qn=this.pl=this.nn=this.on=this.Ea=this.za=this.pn=this.An=this.Bn=l}
Le.prototype.$e=function(a){this.O=new XMLHttpRequest;this.O.open("GET",a,!0);var b=this;this.O.onreadystatechange=function(){a:if(b.O.readyState==4)if(b.O.status==200){var a=b.O.responseText,d;try{d=yc(a)}catch(e){alert(e);break a}if(d.extent)if(b.version=1,b.Co=d.name,b.Ea=d.maxlod,b.pl=256,a=d.extent,b.za=a,b.Ul=[b.Ea,a[0],a[1],a[2],a[3]],d.type=="image")d.format=="png"?(b.ae="image/png",b.md=".png"):d.format=="jpg"?(b.ae="image/jpg",b.md=".jpg"):b.ae="image/png";else{if(d.type=="elevation")b.md=
".json"}else if(b.version=0,b.Bn=d.layer,b.An=d.copyright,b.pn=d.srs,b.za=d.boundingbox,b.Ea=d.levelofdetail,b.on=d.imagewidth,b.nn=d.imageheight,b.pl=d.tilesize,b.Qn=d.tilelayout,b.ae=d.tileformat,b.Ul=d.bounds,b.Mn=d.center,b.ae=="image/png")b.md=".png";else if(b.ae=="image/jpg")b.md=".jpg";else if(b.ae=="elevation/json")b.md=".json";b.tf=!0}else I(K("owg.Datasetinfo"),"DATASET DOWNLOAD FAILED"),b.sf=!0};this.O.send()};x("DatasetInfo",Le);Le.prototype.Download=Le.prototype.$e;function X(){}X.prototype.kf=function(a,b){this.ck(a,b);b[0]=2*b[0]-1;b[1]=2*b[1]-1;b[2]=2*b[2]-1;b[3]=2*b[3]-1};X.prototype.ck=function(a,b){for(var c=a.length,d=0,e=0,f=1,g=0;g<c;g++)switch(f/=2,a[g]){case "0":e+=f;break;case "1":d+=f,e+=f;case "2":break;case "3":d+=f;break;default:alert("Wrong quadKey: "+a)}b[0]=d;b[1]=e+f;b[2]=d+f;b[3]=e};
X.prototype.bc=function(a,b){b.x=0;b.y=0;b.Eb=a.length;for(var c,d=b.Eb;d>0;d--)switch(c=1<<d-1,a[b.Eb-d]){case "1":b.x|=c;break;case "2":b.y|=c;break;case "3":b.x|=c,b.y|=c}};x("MercatorQuadtree",X);X.prototype.QuadKeyToMercatorCoord=X.prototype.kf;X.prototype.QuadKeyToNormalizedCoord=X.prototype.ck;X.prototype.QuadKeyToTileCoord=X.prototype.bc;var Me={Ph:function(a){for(var b="",c=0;c<a.length;c++)c%2==0&&c>0&&c<a.length-4&&(b=b.concat("/")),b=b.concat(a[c]);return b}};x("GlobeUtils",Me);x("GlobeUtils.MakeHierarchicalFilename",Me.Ph);function Ne(){this.ia=t(!1);this.$b=t(!1);this.yb=n();this.Sc=t(0);this.xb=t(0);this.Zb=t(!1)};function Oe(){this.o=new Le;this.i=this.Qe=l;this.$=new X;this.coords=Array(4);this.Oc=1;this.ia=function(){return this.o.tf};this.$b=function(){return this.o.sf};this.yb=function(a,b,c,d,e,f){if(this.ia()){var g=this.Qe+"/"+this.i+"/"+Me.Ph(b+this.o.md),a=new R(a);a.g=b;a.i=c;a.G=d;a.F=e;a.caller=f;a.Oc=this.Oc;S(a,g,Pe,Qe,!0)}};this.Sc=t(0);this.xb=function(){return this.o.Ea?this.o.Ea:0};this.Zb=function(a){if(a.length>this.o.Ea)return!1;this.$.kf(a,this.coords);var a=this.coords[0],b=this.coords[1],
c=this.coords[2],d=this.coords[3],e=this.o.za[0],f=this.o.za[1],g=this.o.za[2],j=this.o.za[3];if(d>f||d>f||b<j||b<j||a>g||a>g||c<e||c<e)return!1;return!0};this.Qa=function(a,b,c){this.Oc=c==l?1:c;this.Qe=a;this.i=b;this.o.$e(a+"/"+b+".json")}}Oe.prototype=new Ne;function Pe(a){a.G(a.g,a,a.i);a.G=l;a.F=l;a.g=l;a.caller=l;a.i=l}function Qe(a){a.F(a.g,a.caller,a.i);a.G=l;a.F=l;a.g=l;a.caller=l;a.i=l}x("i3dImageLayer",Oe);Oe.prototype.Failed=Oe.prototype.$b;Oe.prototype.Ready=Oe.prototype.ia;
Oe.prototype.RequestTile=Oe.prototype.yb;Oe.prototype.Setup=Oe.prototype.Qa;function Re(){this.i=this.Ga=l;this.$=new X;this.aa=0;this.ia=t(!0);this.$b=t(!1);this.yb=function(a,b,c,d,e,f){var g={};this.$.bc(b,g);g=this.Ga[this.aa]+"/"+g.Eb+"/"+g.x+"/"+g.y+".png";a=new R(a);a.g=b;a.i=c;a.G=d;a.F=e;a.caller=f;S(a,g,Se,Te,!0);this.aa++;if(this.aa>=this.Ga.length)this.aa=0};this.Sc=t(0);this.xb=t(16);this.Zb=function(a){if(a.length<17)return!0;return!1};this.Qa=p("Ga")}Re.prototype=new Ne;function Se(a){a.G(a.g,a,a.i);a.G=l;a.F=l;a.g=l;a.caller=l;a.i=l}
function Te(a){a.F(a.g,a.caller,a.i);a.G=l;a.F=l;a.g=l;a.caller=l;a.i=l};function Ue(){this.ia=t(!1);this.$b=t(!1);this.yb=n();this.Sc=t(0);this.xb=t(0);this.Zb=t(!1)};function Ve(){this.o=new Le;this.i=this.Qe=l;this.$=new X;this.coords=Array(4);this.ia=function(){return this.o.tf};this.$b=function(){return this.o.sf};this.yb=function(a,b,c,d,e,f){if(this.ia()){var g=this.Qe+"/"+this.i+"_JSON/"+(Me.Ph(b+".jso")+"n"),a=new Q(a);a.g=b;a.i=c;a.G=d;a.F=e;a.caller=f;Gc(a,g,We,Xe)}};this.Sc=t(0);this.xb=function(){return this.o.Ea?this.o.Ea:0};this.Zb=function(a){if(a.length>this.o.Ea)return!1;this.$.kf(a,this.coords);var a=this.coords[0],b=this.coords[1],c=this.coords[2],
d=this.coords[3],e=this.o.za[0],f=this.o.za[1],g=this.o.za[2],j=this.o.za[3];if(d>f||d>f||b<j||b<j||a>g||a>g||c<e||c<e)return!1;return!0};this.Qa=function(a,b){this.Qe=a;this.i=b;this.o.$e(a+"/"+b+".json")}}Ve.prototype=new Ue;function We(a){a.G(a.g,a,a.i);a.G=l;a.F=l;a.g=l;a.caller=l;a.i=l}function Xe(a){a.F(a.g,a.caller,a.i);a.G=l;a.F=l;a.g=l;a.caller=l;a.i=l};function Ye(){this.o=new Le;this.i=this.Qe=l;this.$=new X;this.coords=Array(4);this.aa=0;this.ia=function(){return this.o.tf};this.$b=function(){return this.o.sf};this.yb=function(a,b,c,d,e,f){if(this.ia()){var g={};this.$.bc(b,g);g=this.Ga[this.aa]+"/"+this.i+"/tiles/"+g.Eb+"/"+g.x+"/"+g.y+".json";a=new Q(a);a.g=b;a.i=c;a.G=d;a.F=e;a.caller=f;Gc(a,g,Ze,$e);this.aa++;if(this.aa>=this.Ga.length)this.aa=0}};this.Sc=t(0);this.xb=function(){return this.o.Ea?this.o.Ea:0};this.Zb=function(a){if(a.length>
this.o.Ea)return!1;for(var b=a,c=a,d=0;d<this.o.Ea-a.length;d++)b+="0",c+="3";d={};this.$.bc(b,d);b=d.x;a=d.y;this.$.bc(c,d);var c=d.x,d=d.y,e=this.o.za[0],f=this.o.za[1],g=this.o.za[3];return!(b>this.o.za[2]||c<e||a>g||d<f)};this.Qa=function(a,b){this.Ga=a;this.i=b;this.o.$e(a[0]+"/"+b+"/layersettings.json")}}Ye.prototype=new Ue;function Ze(a){a.G(a.g,a,a.i);a.G=l;a.F=l;a.g=l;a.caller=l;a.i=l}function $e(a){a.F(a.g,a.caller,a.i);a.G=l;a.F=l;a.g=l;a.caller=l;a.i=l};function af(){this.i=this.Ga=l;this.$=new X;this.sub=this.aa=0;this.Kn=["Galile","Galil","Gali","Gal","Ga","G"];this.ia=t(!0);this.$b=t(!1);this.yb=function(a,b,c,d,e,f){var g={};this.$.bc(b,g);g=this.Ga[this.aa]+"/kh/v=101&x="+g.x+"&y="+g.y+"&z="+g.Eb+"&s="+this.Kn[this.sub];this.sub++;if(this.sub==5)this.sub=0;a=new R(a);a.g=b;a.i=c;a.G=d;a.F=e;a.caller=f;S(a,g,Se,Te,!0);this.aa++;if(this.aa>=this.Ga.length)this.aa=0};this.Sc=t(0);this.xb=t(19);this.Zb=function(a){if(a.length<20)return!0;return!1};
this.Qa=p("Ga")}af.prototype=new Re;function bf(){this.i=this.Ga=l;this.$=new X;this.aa=0;this.ia=t(!0);this.$b=t(!1);this.yb=function(a,b,c,d,e,f){var g={};this.$.bc(b,g);var j=Math.pow(2,g.Eb),g=this.Ga[this.aa]+"/oym?f=m&ft=jpeg_sat_256&x="+(g.x-j/2)+"&y="+(j-g.y-j/2-1)+"&z="+(18-g.Eb)+"&key=[KEY]",a=new R(a);a.g=b;a.i=c;a.G=d;a.F=e;a.caller=f;S(a,g,cf,df,!0);this.aa++;if(this.aa>=this.Ga.length)this.aa=0};this.Sc=t(0);this.xb=t(16);this.Zb=function(a){if(a.length<17)return!0;return!1};this.Qa=p("Ga")}Re.prototype=new Ne;
function cf(a){a.G(a.g,a,a.i);a.G=l;a.F=l;a.g=l;a.caller=l;a.i=l}function df(a){a.F(a.g,a.caller,a.i);a.G=l;a.F=l;a.g=l;a.caller=l;a.i=l};function ef(a,b){this.Rd=a||-1;this.Xm=b||!1;this.hd={};this.oa=0;this.yl=Math.round(this.Rd*0.75);this.uc={};this.uc.hits=0;this.uc.misses=0;ff(this,"Initialized cache with size "+a)}ef.prototype.getItem=function(a){var b=this.hd[a];if(b!=l)gf(b)?(hf(this,a),b=l):b.ih=(new Date).getTime();(b=b?b.value:l)?(this.uc.hits++,ff(this,"Cache HIT for key "+a)):(this.uc.misses++,ff(this,"Cache MISS for key "+a));return b};
ef.prototype.setItem=function(a,b,c){this.hd[a]!=l&&hf(this,a);jf(this,new function(a,b,c){(a==l||a=="")&&h(Error("key cannot be null or empty"));this.key=a;this.value=b;c==l&&(c={});if(c.Zg!=l)c.Zg=c.Zg.getTime();if(c.Sf==l)c.Sf=2;this.options=c;this.ih=(new Date).getTime()}(a,b,c));ff(this,"Setting key "+a);if(this.Rd>0&&this.oa>this.Rd){var d=this;setTimeout(function(){d.zn.call(d)},0)}};ef.prototype.clear=function(){for(var a in this.hd)hf(this,a);ff(this,"Cache cleared")};
ef.prototype.zn=function(){var a=[],b;for(b in this.hd){var c=this.hd[b];gf(c)?hf(this,b):a.push(c)}if(a.length>this.yl)for(a=a.sort(function(a,b){return a.options.Sf!=b.options.Sf?b.options.Sf-a.options.Sf:b.ih-a.ih});a.length>this.yl;)hf(this,a.pop().key);ff(this,"Purged cached")};function jf(a,b){a.hd[b.key]=b;a.oa++}
function hf(a,b){var c=a.hd[b];delete a.hd[b];a.oa--;ff(a,"removed key "+b);c.options.Km!=l&&setTimeout(function(){c.options.Km.call(l,c.key,c.value)},0);c.J!=l&&setTimeout(function(){c.J()},0)}function gf(a){var b=(new Date).getTime(),c=!1;a.options.Zg&&a.options.Zg<b&&(c=!0);!c&&a.options.cn&&a.ih+a.options.cn*1E3<b&&(c=!0);return c}function ff(a,b){a.Xm&&K("owg.Cache").info(b)};function kf(a,b,c){a*=Math.PI;b*=Math.PI;b=Math.PI/2-2*Math.atan(Math.exp(-b));b=Tb(b);for(a=Tb(a/1+0);a>180;)a-=180;for(;a<-180;)a+=180;for(;b>90;)b-=180;for(;b<-90;)b+=180;c[0]=a;c[1]=b};function lf(a,b,c){this.c=a;this.g=b;this.$=c;this.f=l;this.Ab=!1;this.k=l;this.ma=[];this.ta=Array(5);this.ta[0]=new N;this.ta[1]=new N;this.ta[2]=new N;this.ta[3]=new N;this.ta[4]=new N;this.Ef=0;this.images=l;this.mi=!1;this.Xg=0;this.Ng=new N;this.Zf=new O;this.Pd=-180;this.Nd=-90;this.Ae=180;this.ze=90;var d=Array(4),e=Array(2);this.$.kf(this.g,d);var a=Array(3),b=Array(3),c=Array(3),f,g,j=new T;f=d[0];g=d[1];kf(f,g,e);f=e[0];g=e[1];this.Pd=f;this.ze=g;j.q(f,g,0);j.ja(a);f=d[2];g=d[1];kf(f,g,
e);f=e[0];g=e[1];j.q(f,g,0);j.ja(b);f=d[2];g=d[3];kf(f,g,e);f=e[0];g=e[1];this.Ae=f;this.Nd=g;j.q(f,g,0);j.ja(c);d=new N;e=new N;d.q(b[0]-a[0],b[1]-a[1],b[2]-a[2]);e.q(c[0]-a[0],c[1]-a[1],c[2]-a[2]);Yb(this.Ng,d,e);this.Ng.Pb()}
function mf(a){if(a.Ef==0&&a.Xg==0){var b=0,c=0;if(a.images!==l)for(var d=0;d<a.images.length;d++)a.images[d]!=l&&(b++,c=d);b==0?(a.f=a.c.Zi,a.k===l&&nf(a),a.k.zb(a.f),a.Ab=!0,a.images=l):b==1?(a.f=a.images[c],a.k===l&&nf(a),a.k.zb(a.f),a.Ab=!0,a.images=l):(a.mi=!0,a.k===l&&nf(a),a.Ab=!0)}}function of(a,b,c){a=b.caller;a.images[c]=b;a.Ef-=1;mf(a)}function pf(a,b,c){b.images[c]=l;b.Ef-=1;mf(b)}
function qf(a,b){var c=b.caller;c.k=b;c.k.Eb=c.g.length;c.ma=b.ca;c.ta[0].q(b.D[0],b.D[1],b.D[2]);c.ta[1].q(b.U[0],b.D[1],b.D[2]);c.ta[2].q(b.U[0],b.U[1],b.D[2]);c.ta[3].q(b.D[0],b.U[1],b.D[2]);c.ta[4].q(0.5*(b.U[0]-b.D[0]),0.5*(b.U[1]-b.D[1]),0.5*(b.U[2]-b.D[2]));c.Xg-=1;mf(c)}function rf(a,b){b.k=l;b.Xg-=1;mf(b)}lf.prototype.J=function(){this.f&&this.f.J();this.k&&this.k.J()};
function nf(a){a.k=new Q(a.c);a.k.Eb=a.g.length;for(var b=Array(81),c=0;c<81;c++)b[c]=0;for(var d=Array(162),c=0;c<9;c++)for(var e=0;e<9;e++)d[2*(c*9+e)+0]=e*0.125,d[2*(c*9+e)+1]=1-c*0.125;var f=Array(243),g,j,c=Array(4),k=Array(2),m=Array(3);a.$.kf(a.g,c);g=c[0];j=c[1];for(var q=(c[3]-j)/8,r=(c[2]-g)/8,o,s,v,y=new T,c=0;c<9;c++)for(e=0;e<9;e++){o=g+e*r;s=j+c*q;kf(o,s,k);y.q(k[0],k[1],b[c*9+e]);y.ja(m);o=m[0];s=m[1];v=m[2];if(e==0&&c==0)a.ma=[o,s,v];e==0&&c==0?a.ta[0].q(o,s,v):e==8&&c==0?a.ta[1].q(o,
s,v):e==8&&c==8?a.ta[2].q(o,s,v):e==0&&c==8?a.ta[3].q(o,s,v):e==4&&c==4&&a.ta[4].q(o,s,v);f[c*27+3*e+0]=o-a.ma[0];f[c*27+3*e+1]=s-a.ma[1];f[c*27+3*e+2]=v-a.ma[2]}b=Array(405);for(c=0;c<81;c++)b[5*c+0]=f[3*c+0],b[5*c+1]=f[3*c+1],b[5*c+2]=f[3*c+2],b[5*c+3]=d[2*c+0],b[5*c+4]=d[2*c+1];for(var d=[],J,e=g=f=0;e<=7;e+=1){for(c=0;c<=8;c+=1)j=e,J=e+1,m=g%2==0?k=8-c:k=c,J+=m*9,d[f++]=j+k*9,d[f++]=J;d[f++]=J;g+=1}Cc(a.k,b);Fc(a.k,d,"TRIANGLESTRIP");a.k.zb(a.f);a.k.ca=a.ma;Hc(a.k)}
lf.prototype.Pa=function(){if(this.mi){this.mi=!1;this.f=new R(this.c,!0,256,256);this.f.Jh();for(var a=0;a<this.images.length;a++)this.images[a]!=l&&(this.images[a].Oc<1?this.images[a].A(0,0,0,0,1,1,!0,!0,this.images[a].Oc):this.images[a].A(0,0,0,0,1,1,!0,!0,1));this.f.Ih();for(a=0;a<this.images.length;a++)this.images[a]!=l&&this.images[a].J();this.images=l;this.k.zb(this.f)}this.Zf.R(this.c.Fb);this.Zf.a[12]+=this.ma[0];this.Zf.a[13]+=this.ma[1];this.Zf.a[14]+=this.ma[2];this.c.yc();this.c.Ac(this.Zf);
if(this.c.d.K.La.fj==sf)this.k.mode="pt";else if(this.c.d.K.La.fj==tf)this.k.mode="pt_chroma";this.k.ha();this.c.xc()};function uf(a,b,c,d,e){this.c=a;this.ga=b;this.Wa=c;this.$=d;this.Rg=new ef(e,!1)}uf.prototype.J=function(){this.$=this.Wa=this.ga=this.c=l;this.Rg.clear();this.Rg=l};uf.prototype.Xj=function(){if(!this.ga)return!1;if(this.ga.length==0)return!1;for(var a=0;a<this.ga.length;a++)if(!this.ga[a].ia())return!1;if(this.Wa)for(a=0;a<this.Wa.length;a++)if(!this.Wa[a].ia())return!1;return!0};
uf.prototype.zc=function(a){var b=this.Rg.getItem(a);if(b==l){var c=b=new lf(this.c,a,this.$),d=this.ga,e=this.Wa;if(d.length>0){c.Ef=d.length;c.images=Array(c.Ef);for(var f=0;f<d.length;f++)c.images[f]=l,d[f].Zb(c.g)?d[f].yb(c.c,c.g,f,of,pf,c):pf(0,c,f)}if(e&&e.length>0&&c.g.length>8&&e[0].Zb(c.g))c.Xg=1,e[0].yb(c.c,c.g,0,qf,rf,c);this.Rg.setItem(a,b)}return b};
uf.prototype.xb=function(){var a=0,b=0;if(this.Wa.length>0)for(var c=0;c<this.Wa.length;c++)b=Math.max(b,this.Wa[c].xb());for(c=0;c<this.ga.length;c++)a=Math.max(a,this.ga[c].xb());if(b>0)return Math.min(b,a);return a};x("GlobeCache",uf);uf.prototype.IsReady=uf.prototype.Xj;uf.prototype.RequestBlock=uf.prototype.zc;function vf(){this.o=new Le;this.i=l;this.$=new X;this.coords=Array(4);this.Oc=1;this.aa=0;this.ia=function(){return this.o.tf};this.$b=function(){return this.o.sf};this.yb=function(a,b,c,d,e,f){if(this.ia()){var g={};this.$.bc(b,g);g=this.Ga[this.aa]+"/"+this.i+"/tiles/"+g.Eb+"/"+g.x+"/"+g.y+this.o.md;a=new R(a);a.g=b;a.i=c;a.G=d;a.F=e;a.caller=f;a.Oc=this.Oc;S(a,g,wf,xf,!0);this.aa++;if(this.aa>=this.Ga.length)this.aa=0}};this.Sc=t(0);this.xb=function(){return this.o.Ea?this.o.Ea:0};this.Zb=function(a){if(a.length>
this.o.Ea)return!1;for(var b=a,c=a,d=0;d<this.o.Ea-a.length;d++)b+="0",c+="3";d={};this.$.bc(b,d);b=d.x;a=d.y;this.$.bc(c,d);var c=d.x,d=d.y,e=this.o.za[0],f=this.o.za[1],g=this.o.za[3];return!(b>this.o.za[2]||c<e||a>g||d<f)};this.Qa=function(a,b,c){this.Oc=c==l?1:c;this.Ga=a;this.i=b;this.o.$e(a[0]+"/"+b+"/layersettings.json")}}vf.prototype=new Ne;function wf(a){a.G(a.g,a,a.i);a.G=l;a.F=l;a.g=l;a.caller=l;a.i=l}function xf(a){a.F(a.g,a.caller,a.i);a.G=l;a.F=l;a.g=l;a.caller=l;a.i=l}
x("owgImageLayer",vf);vf.prototype.Failed=vf.prototype.$b;vf.prototype.Ready=vf.prototype.ia;vf.prototype.RequestTile=vf.prototype.yb;vf.prototype.Setup=vf.prototype.Qa;function yf(a){this.c=a;this.ga=[];this.Wa=[];this.$=new X;this.Jm=1E3;this.Xa=l;this.r=[];this.Vk=0;this.Ff={};this.Ff.Tg=0;this.uf=l;this.Ui=0;this.zl=1;this.cd=new He;this.V=Array(3);this.Ti=new O;this.nh=new Q(this.c);this.th=new Q(this.c);this.Td=[8/255,24/255,58/255];this.be=[1,1,1];this.ej=1;this.fj=sf;this.Bl={}}u=yf.prototype;
u.Gh=function(a){var b=-1;if(a.service=="i3d"){if(a.url&&a.layer&&a.url.length>0){var b=a.layer,c=new Oe;c.Qa(a.url[0],b,a.transparency);b=this.ga.length;this.ga.push(c);zf(this)}}else if(a.service=="osm"){if(a.url&&a.url.length>0)c=new Re,c.Qa(a.url),b=this.ga.length,this.ga.push(c),zf(this)}else if(a.service=="owg"){if(a.url&&a.url.length>0)b=a.layer,c=new vf,c.Qa(a.url,b,a.transparency),b=this.ga.length,this.ga.push(c),zf(this)}else if(a.service=="goo"){if(a.url&&a.url.length>0)c=new af,c.Qa(a.url),
b=this.ga.length,this.ga.push(c),zf(this)}else if(a.service=="oym"&&a.url&&a.url.length>0)c=new bf,c.Qa(a.url),b=this.ga.length,this.ga.push(c),zf(this);return b};u.Fh=function(a){var b=-1;if(a.service=="i3d"){if(a.url&&a.layer&&a.url.length>0){var b=a.layer,c=new Ve;c.Qa(a.url[0],b);b=this.Wa.length;this.Wa.push(c);zf(this)}}else if(a.service=="owg"&&a.url&&a.layer&&a.url.length>0){var d=a.url,b=a.layer,c=new Ye;c.Qa(d,b);b=this.Wa.length;this.Wa.push(c);zf(this)}return b};
u.yg=function(a){a<0||a>=this.ga.length||(this.ga.splice(a,1),zf(this))};function zf(a){if(a.Xa)a.Xa.J(),a.Xa=l;a.Xa=new uf(a.c,a.ga,a.Wa,a.$,a.Jm)}
u.Pa=function(a,b){this.Ti.R(b);this.cd.Gg(b);this.uf=a;if(this.Xa&&this.Xa.Xj()){this.Ui=this.Xa.xb();var c=this.Xa.zc("0"),d=this.Xa.zc("1"),e=this.Xa.zc("2"),f=this.Xa.zc("3");if(c.Ab&&d.Ab&&e.Ab&&f.Ab){this.r=[];this.r.push(c);this.r.push(d);this.r.push(e);this.r.push(f);for(this.Ff.Tg=0;this.Ff.Tg!=this.r.length;)a:{c=this.Ff.Tg;if(this.r[c].g.length!=this.Ui&&this.r[c].Ab&&Af(this,c)){var g=this.r[c].g,d=this.Xa.zc(g+"0"),e=this.Xa.zc(g+"1"),f=this.Xa.zc(g+"2"),g=this.Xa.zc(g+"3");if(d.Ab&&
e.Ab&&f.Ab&&g.Ab){this.r.splice(c,1);this.r.push(d);this.r.push(e);this.r.push(f);this.r.push(g);break a}}this.Ff.Tg++}for(c=0;c<this.r.length;)e=this.r[c],d=e.ta[4].a,e=e.Ng.a,f=this.uf.a,this.V[0]=f[0]-d[0],this.V[1]=f[1]-d[1],this.V[2]=f[2]-d[2],(this.V[0]*e[0]+this.V[1]*e[1]+this.V[2]*e[2])/Math.sqrt(this.V[0]*this.V[0]+this.V[1]*this.V[1]+this.V[2]*this.V[2])>=0.4?this.r.splice(c,1):c++;for(c=0;c<this.r.length;c++)this.r[c].Pa();d=[];e=[];for(c=0;c<this.r.length;c++){var f=this.r[c].g,g=0,j=
f.charAt(0);if(j=="0"||j=="1")g=1;if(j=="2"||j=="3")g=2;for(var k=1;k<f.length;k++){j=f.charAt(k);if((j=="0"||j=="1")&&g=="2"){g=0;break}if((j=="2"||j=="3")&&g=="1"){g=0;break}}g==1&&d.push(this.r[c]);g==2&&e.push(this.r[c])}d.length>3&&Bf(this,d);e.length>3&&Cf(this,e)}}};
function Af(a,b){var c=!0,d=a.r[b],e=d.g.length;if(e>a.Ui)return!1;if(e<3)return!0;c=a.cd.Fg(d.k.D[0],d.k.D[1],d.k.D[2],d.k.U[0],d.k.U[1],d.k.U[2]);if(!c)return!1;var f=d.ta[4].a,g=d.Ng.a,e=a.uf.a;a.V[0]=e[0]-f[0];a.V[1]=e[1]-f[1];a.V[2]=e[2]-f[2];f=Math.sqrt(a.V[0]*a.V[0]+a.V[1]*a.V[1]+a.V[2]*a.V[2]);f>0&&(a.V[0]/=f,a.V[1]/=f,a.V[2]/=f);a.V[0]*g[0]+a.V[1]*g[1]+a.V[2]*g[2]>0.4&&(c=!1);if(!c)return!1;for(var c=[0,0,0],g=0,f=1.0E20,j=d.k.m.length/d.k.w,k=0;k<j;k++)c[0]=e[0]-(d.k.m[5*k]+d.ma[0]),c[1]=
e[1]-(d.k.m[5*k+1]+d.ma[1]),c[2]=e[2]-(d.k.m[5*k+2]+d.ma[2]),g=c[0]*c[0]+c[1]*c[1]+c[2]*c[2],g<f&&(f=g);e=Math.sqrt(f);c=a.zl;g=d.ta[0].We();g.$h(d.ta[1]);return c*g.Oh()/e>1}
u.wd=function(a,b,c){for(var a=this.c.sd(a,b,this.Ti,!0),b=[],d=0;d<this.r.length;d++){var e=this.r[d].k.D,f=this.r[d].k.U;this.r[d].k.Og.cf(a.x,a.y,a.e,a.Hc,a.Ic,a.Jc,e[0],e[1],e[2],f[0],f[1],f[2])&&b.push(this.r[d])}e=1.0E20;c.hit=!1;c.numhits=b.length;for(d=0;d<b.length;d++)if((f=b[d].k.Vc(a.x,a.y,a.e,a.Hc,a.Ic,a.Jc))&&f.p<e)c.hit=!0,e=f.p;c.tmin=e;if(c.hit)c.x=a.x+e*a.Hc,c.y=a.y+e*a.Ic,c.z=a.e+e*a.Jc,a=new T(0,0,0),a.ac(c.x,c.y,c.z),c.lng=a.t[0],c.lat=a.t[1],c.elv=a.t[2]};
u.xg=function(a,b,c,d){if(d)if(d={},this.wd(a,b,d),d.hit)this.ej=Math.sqrt(d.x*d.x+d.y*d.y+d.z*d.z);else return;var e=this.c.sd(a,b,this.Ti,!0);c.hit=!1;var f=e.x,b=e.y,a=e.e,g=e.Hc,d=e.Ic,e=e.Jc,j=g*g+d*d+e*e,k=f*g+b*d+a*e,m=k*k-j*(f*f+b*b+a*a-this.ej*this.ej);if(!(m<=0))j=(0-k-Math.sqrt(m))/j,f+=g*j,b+=d*j,a+=e*j,d=1/Math.sqrt(f*f+b*b+a*a),c.hit=!0,c.x=f*d,c.y=b*d,c.z=a*d,a=new T(0,0,0),a.ac(c.x,c.y,c.z),c.lng=a.t[0],c.lat=a.t[1],c.elv=a.t[2]};
u.og=function(a,b){var c={hasvalue:!1,elevation:0,lod:-1},d=[0,0,0],e=[0,0,0],f=new T(a,b,0);f.ja(e);f.q(a,b,-1);f.ja(d);var g,j,f=d[0];g=d[1];j=d[2];var k=e[0]-d[0],m=e[1]-d[1],d=e[2]-d[2],e=Math.sqrt(k*k+m*m+d*d);k/=e;m/=e;d/=e;for(var e=[],q=0;q<this.r.length;q++){var r=this.r[q].k.D,o=this.r[q].k.U;this.r[q].k.Og.cf(f,g,j,k,m,d,r[0],r[1],r[2],o[0],o[1],o[2])&&e.push(this.r[q])}r=1.0E20;for(q=0;q<e.length;q++)if((o=e[q].k.Vc(f,g,j,k,m,d))&&o.p<r)c.hasvalue=!0,c.lod=e[q].k.Eb,r=o.p;if(c.hasvalue)c.x=
f+r*k,c.y=g+r*m,c.z=j+r*d,f=new T(0,0,0),f.ac(c.x,c.y,c.z),c.lng=f.t[0],c.lat=f.t[1],c.elevation=f.t[2];return c};
function Bf(a,b){for(var c=0,d=0;d<b.length;d++)if(b[d].g.length>c)c=b[d].g.length;for(d=0;d<b.length;d++)for(b[d].rb=b[d].g;b[d].rb.length<c;)b[d].rb+="0";b.sort(function(a,b){return parseInt(a.rb,2)-parseInt(b.rb,2)});for(var d=[0,0,0.7577840175609609],c=[d[0],d[1],d[2],a.Td[0],a.Td[1],a.Td[2],1],e=[],d=0;d<b.length;d++)for(var f=2;b[d].k.m[f]==0;)c.push(b[d].ma[0]+b[d].k.m[f-2]),c.push(b[d].ma[1]+b[d].k.m[f-1]),c.push(b[d].ma[2]+b[d].k.m[f]),c.push(a.Td[0]),c.push(a.Td[1]),c.push(a.Td[2]),c.push(1),
f+=5;for(d=0;d<c.length/7-2;d++)e.push(d);e.push(1);e.push(2);e.push(3);a.nh.J();a.nh=new Q(a.c);a.nh.rd({VertexSemantic:"pc",Vertices:c,IndexSemantic:"TRIANGLEFAN",Indices:e},l,l);a.nh.ha()}
function Cf(a,b){for(var c=0,d=0;d<b.length;d++)if(b[d].g.length>c)c=b[d].g.length;for(d=0;d<b.length;d++){b[d].rb=b[d].g;b[d].rb=b[d].rb.replace(/2/g,"0");for(b[d].rb=b[d].rb.replace(/3/g,"1");b[d].rb.length<c;)b[d].rb+="0"}b.sort(function(a,b){return parseInt(b.rb,2)-parseInt(a.rb,2)});for(var d=[0,0,-0.7577840175609609],c=[d[0],d[1],d[2],a.be[0],a.be[1],a.be[2],1],e=[],d=0;d<b.length;d++){var f=b[d].k.m.length;for(f-=1;b[d].k.m[f]==0;)c.push(b[d].ma[0]+b[d].k.m[f-4]),c.push(b[d].ma[1]+b[d].k.m[f-
3]),c.push(b[d].ma[2]+b[d].k.m[f-2]),c.push(a.be[0]),c.push(a.be[1]),c.push(a.be[2]),c.push(1),f-=5}for(d=0;d<c.length/7-2;d++)e.push(d);e.push(1);a.th.J();a.th=new Q(a.c);a.th.rd({VertexSemantic:"pc",Vertices:c,IndexSemantic:"TRIANGLEFAN",Indices:e},l,l);a.th.ha()}
u.lg=function(){if(!this.uf)return NaN;var a=[],b=this.uf.a,c=new N;if(this.Wa.length==0)return c=new T,c.ac(b[0],b[1],b[2]),c.t[2];c.q(-b[0],-b[1],-b[2]);for(var c=c.a,d=0;d<this.r.length;d++){var e=this.r[d].k.D,f=this.r[d].k.U;this.r[d].k.Og.cf(b[0],b[1],b[2],c[0],c[1],c[2],e[0],e[1],e[2],f[0],f[1],f[2])&&a.push(this.r[d])}e=1.0E20;f=!1;for(d=0;d<a.length;d++){var g=a[d].k.Vc(b[0],b[1],b[2],c[0],c[1],c[2]);if(g&&g.p<e)f=!0,e=g.p}if(f)return b=e*c[0],a=e*c[1],c=e*c[2],b=Math.sqrt(b*b+a*a+c*c)*8388607,
e<0&&(b=-b),this.Vk=b;return this.Vk};u.Cg=p("fj");var sf=0,tf=1;function Df(){this.name="ogGeometry";this.type=za;this.pb=[];this.Ce=[];this.hc=-1;this.H=!1;this.ye="";this.options=this.Xc=this.ad=l;this.Gf=-1;this.kd=l}Df.prototype=new G;u=Df.prototype;u.va=function(a){this.options=a;a.url&&Ef(this,a.url);a.jsonobject&&this.rd(a.jsonobject)};u.Ra=function(){Ff(this).Wh(this.hc);if(this.kd!=l)H(this.kd);else{for(var a=0;a<this.pb.length;a++)H(this.pb[a]);this.W=l}};function Ff(a){var b=l,a=a.parent.parent.c;if(a.d&&a.d.K)b=a.d.K.dh;return b}
u.yd=function(a,b,c,d,e,f){for(var g=0;g<this.pb.length;g++)this.pb[g].yd(a,b,c,d,e,f)};u.mf=function(a,b,c,d){for(var e=0;e<this.pb.length;e++)this.pb[e].mf(a,b,c,d)};u.X=function(){if(this.kd!=l)this.kd.X();else for(var a=0;a<this.pb.length;a++)this.pb[a].X()};u.Y=function(){if(this.kd!=l)this.kd.Y();else for(var a=0;a<this.pb.length;a++)this.pb[a].Y()};
u.rd=function(a){if(a.Type=="pointcloud")this.options=a,this.kd=Y(La,this,this.options),a=Ff(this),this.hc=a.Ve(this.kd.Tb);else{for(var b=0;b<a.length;b++){this.options.jsonobject=a[b];var c=Y(Aa,this,this.options);this.pb.push(c);this.Ce.push(c.jj)}this.ad&&this.ad(this.id);a=Ff(this);this.hc=a.Ve(this.Ce)}};
function Ef(a,b){b==l?alert("invalid json-url"):(a.ye=b,a.O=new window.XMLHttpRequest,a.O.open("GET",a.ye,!0),a.O.onreadystatechange=function(){a.O.readyState==4&&(a.O.status==404?a.Xc&&a.Xc(a.id):a.rd(yc(a.O.responseText)))},a.O.send())};function Gf(a){this.c=a;this.W=[];this.cd=new He;this.Ho=1E5*L*1E5*L}
Gf.prototype.Pa=function(a,b){this.cd.Gg(b);for(var c=a.a[0],d=a.a[1],e=a.a[2],f=0;f<this.W.length;f++)if(this.W[f]instanceof Jc){var g=this.W[f];g.H||g.ha()}else for(var g=this.W[f],j=0;j<g.length;j++)for(var k=g[j],m=0;m<k.length;m++){var q=k[m];if(!q.H){var r=q.D[0]-c,o=q.D[1]-d,s=q.D[2]-e,r=r*r+o*o+s*s,o=q.Xl*q.Xl;this.cd.Fg(q.D[0],q.D[1],q.D[2],q.U[0],q.U[1],q.U[2])&&!(r>o)&&(this.c.b.enable(this.c.b.BLEND),this.c.b.depthFunc(this.c.b.LEQUAL),this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA),
q.ha(),this.c.b.disable(this.c.b.BLEND))}}};Gf.prototype.Ve=function(a){this.W.push(a);return this.W.length-1};Gf.prototype.Wh=function(a){this.W.splice(a,1)};Gf.prototype.xd=function(a,b){for(var c=this.c.sd(a,b,this.c.wa,!0),d=1E4,e=l,f=0;f<this.W.length;f++)for(var g=this.W[f],j=0;j<g.length;j++)for(var k=g[j],m=0;m<k.length;m++){var q=k[m];if(!q.H){q.rk(c.x,c.y,c.e,c.Hc,c.Ic,c.Jc);var r=q.Vc(c.x,c.y,c.e,c.Hc,c.Ic,c.Jc);if(r&&r.p<d)d=r.p,e=q}}if(e)return e.un;return-1};function Hf(){this.La=l;this.gb=new N;this.li=this.Qg=this.dh=this.qh=l;this.jb=n();this.kb=function(){this.La.Pa(this.gb,this.c.wa);this.qh.Pa(this.gb,this.c.wa);this.dh.Pa(this.gb,this.c.wa);this.Qg.Pa(this.gb,this.c.wa);this.li.Pa(this.gb,this.c.wa)};this.lb=function(a){a=a.td();this.gb.q(a.x,a.y,a.e)};this.ud=function(){this.La=new yf(this.c);this.qh=new Ge(this.c);this.dh=new Gf(this.c);this.Qg=new Ie(this.c);this.li=new Fe(this.c)};this.he=n();this.vd=n()}Hf.prototype=new je;function If(a){rd.call(this);this.an=a;this.Wk=W(this.an,Vc?"DOMMouseScroll":"mousewheel",this)}pa(If,le);var Jf="mousewheel";
If.prototype.handleEvent=function(a){var b=0,c=0,d=0,a=a.Kc;if(a.type=="mousewheel"){c=1;if(Uc||Wc&&(Zc||hd("532.0")))c=40;d=Wc&&Pc&&-a.wheelDelta%c!=0?-a.wheelDelta:-a.wheelDelta/c;a.wheelDeltaX!==i?(b=Wc&&Pc&&-a.wheelDeltaX%c!=0?-a.wheelDeltaX:-a.wheelDeltaX/c,c=Wc&&Pc&&-a.wheelDeltaY%c!=0?-a.wheelDeltaY:-a.wheelDeltaY/c):c=d}else d=a.detail,d>100?d=3:d<-100&&(d=-3),a.axis!==i&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;typeof this.$k=="number"&&(b=Math.min(Math.max(b,-this.$k),this.$k));typeof this.al==
"number"&&(c=Math.min(Math.max(c,-this.al),this.al));b=new Kf(d,a,b,c);try{this.dispatchEvent(b)}finally{b.Af()}};If.prototype.fc=function(){If.ce.fc.call(this);Yd(this.Wk);delete this.Wk};function Kf(a,b,c,d){b&&this.ic(b,i);this.type=Jf;this.detail=a;this.no=c;this.Vg=d}pa(Kf,wd);function Lf(){this.Wm=this.Ri=0;this.Na=new O;this.qf=new N;this.qf.q(1,0,0);this.T=0;this.Z=-0.03;this.Qb=0;this.P=7.616;this.M=45.9088;this.u=17E3;this.pe=this.oe=this.Cm=this.Lg=this.Mg=0;this.Yn=!1;this.Bm=this.Dm=0;this.di=this.ym=this.pf=this.vk=this.uk=this.Cc=1;this.Em=this.Fm=this.cc=this.dc=0;this.wm=!1;this.Un=0.0010;this.$n=-0.4;this.Ad=!1;this.Ja=this.Ia=this.xm=0;this.tk=!1;this.qe=new N;this.ki=this.ji=0;this.zd=!1;this.Q=Array(3);this.Vd=new T(0,0,0);this.Be=new O;this.Lf=new O;this.Jf=
new O;this.Qd=new O;this.Na=new O;this.Mc=new O;this.Kf=new O;this.Qd.mg();this.mc=100;this.Za=l;this.jb=function(){this.c.Zh(this.Na)};this.kb=n();this.lb=function(a){a.nc=0;this.Vd.q(this.P,this.M,this.u);this.Vd.ja(this.Q);this.qf.q(this.Q[0],this.Q[1],this.Q[2]);this.Lf.Bc(this.Q[0],this.Q[1],this.Q[2]);this.Jf.qd(this.P,this.M);this.Be.Hh(this.T,this.Z,this.Qb);this.Mc.S(this.Lf,this.Jf);this.Kf.S(this.Mc,this.Be);this.Mc.S(this.Kf,this.Qd);this.Na.fe(this.Mc);a.Gk=this.T;a.ea(this.Q[0],this.Q[1],
this.Q[2]);var b=this.M,c=this.u;a.Db.longitude=this.P;a.Db.latitude=b;a.Db.elevation=c;if(this.Za)this.Za.kc=this.P,this.Za.jc=this.M,this.Za.gc=this.u,this.Za.pitch=this.Z*57.29577951308232,this.Za.ua=this.T*57.29577951308232,this.Za.Kb=this.Qb*57.29577951308232};this.ud=n();this.he=n();this.vd=function(a){W(window,nd,this.Qh,!1,this);W(window,od,this.Rh,!1,this);W(a,kd,this.df,!1,this);W(a,ld,this.ff,!1,this);W(a,md,this.ef,!1,this);a=new If(a);W(a,Jf,this.Th,!1,this)};this.Th=function(a){a.Vg>
0?this.cc>0?this.dc=this.cc=0:this.dc+=0.05:this.dc>0?this.cc=this.dc=0:this.cc+=0.05};this.Qh=function(a){if(a.keyCode==81)this.pe=this.Cc*this.di;else if(a.keyCode==65)this.pe=-this.Cc*this.di;else if(a.keyCode==83)this.oe=0.5*this.pf;else if(a.keyCode==88)this.oe=-0.5*this.pf;this.Ri=a.keyCode};this.Rh=function(a){if(a.keyCode==81)this.pe=0;else if(a.keyCode==65)this.pe=0;else if(a.keyCode==83)this.oe=0;else if(a.keyCode==88)this.oe=0;this.Ri=0};this.df=function(a){if(Bd(a,xd))this.ei=0,this.qe.q(0,
0,0),this.ji=a.offsetX,this.ki=a.offsetY,this.tk=this.zd=!0;this.Ia=a.offsetX;this.Ja=a.offsetY;if(Bd(a,yd))return!1};this.ff=function(a){if(Bd(a,xd))this.zd=this.tk=!1;this.Ia=a.offsetX;this.Ja=a.offsetY;this.Mg=this.Lg=this.ei=0;if(Bd(a,yd))return!1};this.ef=function(a){this.Ia=a.offsetX;this.Ja=a.offsetY;if(this.zd){var b=(this.ji-a.offsetX)/this.c.width,c=(this.ki-a.offsetY)/this.c.height;b*=b;c*=c;this.ei=Math.sqrt(b+c);this.qe.q(a.offsetX-this.ji,this.c.height-1-a.offsetY-(this.c.height-1-this.ki),
0);this.qe.Pb();var a=this.qe.a[0],d=this.qe.a[1],e=0,f=0;a>0?e=1:a<0&&(e=-1);d>0?f=1:d<0&&(f=-1);this.Lg=this.Cc*this.uk*c*f;this.Mg=this.vk*b*e}};this.wc=function(a){var b=this.oe*a/500,c=this.Mg*a/500,d=this.pe*a,e=0,e=0,f=this.u/5E5*(this.u/5E5);f>10?f=10:f<0.0010&&(f=0.0010);var g=f*this.Lg*a/250;if(this.dc>0){var j=0.5*this.pf*a/1E3;this.Z+=j;this.dc-=j;if(this.dc<0)this.Z+=this.dc,this.dc=0;this.Ad=!0}if(this.cc>0){j=0.5*this.pf*a/1E3;this.Z-=j;this.cc-=j;if(this.cc<0)this.Z-=this.cc,this.cc=
0;this.Ad=!0}if(b)this.Z+=b,this.Ad=!0;if(c){this.T+=c;this.T>2*Math.PI&&(this.T-=2*Math.PI);if(this.T<0)this.T=2*Math.PI-this.T;this.Ad=!0}if(this.Ad&&(e=this.c.lg(),isNaN(e)))e=this.mc;if(d&&(a=1E3*d*f,this.u+=a,e+=a,this.u>7E6))this.u=7E6;if(g){a=this.M*0.017453292519943295;d=Math.sin(a);f=Math.cos(a);c=this.T;b=this.P*0.017453292519943295;d=Qb/Math.sqrt(1-Rb*d*d);f=Qb/(d/(1+Sb*f*f))*g*Math.cos(c);j=Qb/d*g*Math.sin(c)/Math.cos(a);g=Qb/d*g*Math.sin(c)*Math.tan(a)+c;this.P=57.29577951308232*(j+b);
this.M=57.29577951308232*(f+a);for(this.T=g;this.P>180;)this.P-=360;for(;this.P<-180;)this.P+=360;for(;this.M>90;)this.M=180-this.M;for(;this.M<-90;)this.M=-180-this.M;this.Ad=!0}e<this.mc&&this.Ad&&(this.u+=this.mc-e);if(this.Za)this.Za.kc=this.P,this.Za.jc=this.M,this.Za.gc=this.u,this.Za.pitch=this.Z*57.29577951308232,this.Za.ua=this.T*57.29577951308232,this.Za.Kb=this.Qb*57.29577951308232}}Lf.prototype=new je;u=Lf.prototype;u.ea=function(a,b,c){this.P=a;this.M=b;this.u=c};
u.td=function(){return{longitude:this.P,latitude:this.M,elevation:this.u}};u.ie=function(a,b,c){this.T=a;this.Z=b;this.Qb=c};u.Bg=n();u.bf=function(){return{ua:this.T,pitch:this.Z,Kb:this.Qb}};function Mf(){this.Wm=this.Ri=0;this.Na=new O;this.ne=!1;this.qf=new N;this.qf.q(1,0,0);this.T=0;this.Z=-1.5707963267948966;this.Qb=0;this.P=7.77442050946391;this.M=47.472720418012834;this.u=75E5;this.Wc=Nf;this.gi=this.fi=this.N=0;this.Zn=!0;this.Bm=this.Dm=this.pe=this.oe=this.Cm=this.Lg=this.Mg=this.hi=this.ii=0;this.di=this.ym=this.pf=this.vk=this.uk=this.Cc=1;this.Em=this.Fm=this.cc=this.dc=0;this.wm=!1;this.xm=0;this.co=new O;this.Am=this.zm=this.Ja=this.Ia=0;this.qe=new N;this.ci=this.Jg=this.zd=
!1;this.ao=this.bo=this.ei=0;this.Q=Array(3);this.Vd=new T(0,0,0);this.Be=new O;this.Lf=new O;this.Jf=new O;this.Qd=new O;this.Na=new O;this.Mc=new O;this.Kf=new O;this.Qd.mg();this.Kg=!1;this.zk=this.yk=this.xk=0;this.wk=1;this.me=!1;this.Vn=this.Wn=this.Xn=0;this.Ta={};this.Sa={};this.bi=new O;this.sk=new O;this.Ig=new O;this.eo=new O;this.fo=new O;this.mc=50;this.mh=1E7;this.Fa=qc;this.sa=0;this.te=!1;this.Rb=[0,0];this.Jd=0;this.Pg=this.ec=!1;this.jb=function(){this.c.Zh(this.Na)};this.kb=n();
this.lb=function(a){this.u<2E3?(this.c.d.oc.Yi=1.0E-7,this.c.d.oc.Ci=1.2):(this.c.d.oc.Yi=1.0E-5,this.c.d.oc.Ci=10);this.Fa=a.Fa;this.sa=a.sa;a.te=this.te;a.Rb[0]=this.Rb[0];a.Rb[1]=this.Rb[1];a.nc=1;this.ne=a.ql!=0?!0:!1;if(this.Wc==Of&&!this.ne&&!this.c.Ka.Md){if(this.Jg)this.Jg=!1,this.Im(this.Ia,this.Ja);if(this.zd&&this.ci)this.ci=!1,this.Hm(this.Ia,this.Ja)}this.Vd.q(this.P,this.M,this.u);this.Vd.ja(this.Q);this.qf.q(this.Q[0],this.Q[1],this.Q[2]);this.Lf.Bc(this.Q[0],this.Q[1],this.Q[2]);this.Jf.qd(this.P,
this.M);this.Kg?(this.Be.ng(this.xk,this.yk,this.zk,this.wk),this.Qd.Mj()):this.Be.Hh(this.T,this.Z,this.Qb);this.Mc.S(this.Lf,this.Jf);this.Kf.S(this.Mc,this.Be);this.Mc.S(this.Kf,this.Qd);this.Na.fe(this.Mc);a.Gk=this.T;a.ea(this.Q[0],this.Q[1],this.Q[2]);var b=this.M,c=this.u;a.Db.longitude=this.P;a.Db.latitude=b;a.Db.elevation=c};this.ud=n();this.he=n();this.vd=function(a){W(window,nd,this.Qh,!1,this);W(window,od,this.Rh,!1,this);W(a,kd,this.df,!1,this);W(a,md,this.ef,!1,this);W(a,ld,this.ff,
!1,this);W(a,jd,this.Sh,!1,this);a=new If(a);W(a,Jf,this.Th,!1,this)};this.of=function(){var a=Nf;(this.N&Pf)==Qf&&((this.N&Rf)==0?a=Of:(this.N&Rf)==Sf?a=Tf:(this.N&Rf)==Uf&&(a=Vf));(this.N&Pf)==Wf&&(a=Vf);if(a!=this.Wc){if(this.Wc==Vf)this.T=this.ii+45*Math.PI*this.Cc*(this.Ia-this.fi)/(180*this.c.height),this.Z=this.hi+45*Math.PI*this.Cc*(this.gi-this.Ja)/(180*this.c.height);this.Wc=a;if(this.Wc==Vf)this.fi=this.Ia,this.gi=this.Ja,this.ii=this.T,this.hi=this.Z}if(this.Wc==Vf)this.T=this.ii+45*Math.PI*
this.Cc*(this.Ia-this.fi)/(180*this.c.height),this.Z=this.hi+45*Math.PI*this.Cc*(this.gi-this.Ja)/(180*this.c.height)};this.Th=function(a){if(this.Wc==Nf)if((this.N&Rf)==0){var b={},c,d;this.Jd>0?(c=this.Rb[0],d=this.Rb[1]):(c=this.Ia,d=this.Ja);this.c.wd(c,d,b);if(b.hit){this.Rb=[c,d];this.Jd=500;this.Vd.q(this.P,this.M,this.u);this.Vd.ja(this.Q);c=this.Q[0]-b.x;d=this.Q[1]-b.y;b=this.Q[2]-b.z;a.Vg>0?(c*=0.1,d*=0.1,b*=0.1):(c*=-1/0.9+1,d*=-1/0.9+1,b*=-1/0.9+1);var e=new T(0,0,0);e.ac(this.Q[0]+c,
this.Q[1]+d,this.Q[2]+b);this.P=e.t[0];this.M=e.t[1];if(this.Pg){if(e.t[2]>this.u)this.u=e.t[2]}else this.u=e.t[2];this.ec=!0;if(this.u<this.mc)this.u=this.mc,this.ec=!0;else if(this.u>this.mh)this.u=this.mh,this.ec=!0}}else(this.N&Rf)==Sf&&(this.Z+=5*a.Vg*Math.PI*this.Cc/180);return this.Ca(a)};this.Qh=function(a){if(!this.ne&&!this.c.Ka.Md){if(a.keyCode==66)this.Kg=!1;if(a.keyCode==16)return this.N|=Sf,this.Ca(a);else if(a.keyCode==17)return this.N|=Uf,this.Ca(a);else if(a.keyCode==37||a.keyCode==
65)return this.N|=Xf,this.Ca(a);else if(a.keyCode==38||a.keyCode==87)return this.N|=Yf,this.Ca(a);else if(a.keyCode==39||a.keyCode==68)return this.N|=Zf,this.Ca(a);else if(a.keyCode==40||a.keyCode==83)return this.N|=$f,this.Ca(a);this.of();return!0}};this.Rh=function(a){if(a.keyCode==16)return this.N&=~Sf,this.Ca(a);else if(a.keyCode==17)return this.N&=~Uf,this.Ca(a);else if(a.keyCode==37||a.keyCode==65)return this.N&=~Xf,this.Ca(a);else if(a.keyCode==38||a.keyCode==87)return this.N&=~Yf,this.Ca(a);
else if(a.keyCode==39||a.keyCode==68)return this.N&=~Zf,this.Ca(a);else if(a.keyCode==40||a.keyCode==83)return this.N&=~$f,this.Ca(a);this.of();return!0};this.Sh=function(a){if(!this.ne&&!this.c.Ka.Md){var b={};this.c.wd(this.Ia,this.Ja,b);if(b.hit){this.c.Ag(2E3);var c=this.u;c>1E6?Ae(this.c.Ka,b.lng,b.lat,1E6,i,i,i):c>25E4?Ae(this.c.Ka,b.lng,b.lat,25E4,i,i,i):c>5E4?Ae(this.c.Ka,b.lng,b.lat,5E4,i,i,i):(c=b.elv+5E3,Ae(this.c.Ka,b.lng,b.lat,c,0,-90,0));this.Rb=[this.Ia,this.Ja];this.Jd=2500}return this.Ca(a)}};
this.df=function(a){if(!this.ne&&!this.c.Ka.Md){this.Ia=a.offsetX-this.c.L.offsetLeft;this.Ja=a.offsetY-this.c.L.offsetTop;if(Bd(a,xd))this.N|=Qf,document.body.style.cursor="move",this.Jg=!0;else if(Bd(a,yd))return!1;else Bd(a,zd)&&(this.N|=Wf);this.of();return this.Ca(a)}};this.ff=function(a){this.zd=!0;this.Ia=a.offsetX-this.c.L.offsetLeft;this.Ja=a.offsetY-this.c.L.offsetTop;if(Bd(a,xd))this.N&=~Qf,this.me=!1,document.body.style.cursor="default",this.Jg=!1;else if(Bd(a,yd))return!1;else Bd(a,zd)&&
(this.N&=~Wf);this.of();return this.Ca(a)};this.ef=function(a){if(!this.ne&&!this.c.Ka.Md)return this.zd=this.Wc==Of,this.ci=!0,this.zm=a.offsetX-this.c.L.offsetLeft-this.Ia,this.Am=a.offsetY-this.c.L.offsetTop-this.Ja,this.Ia=a.offsetX-this.c.L.offsetLeft,this.Ja=a.offsetY-this.c.L.offsetTop,this.of(),this.Ca(a)};this.wc=function(a){if(this.Fa==rc){var b=this.sa*this.u/5E3;this.Pg||(this.u-=a*b);if(this.u<this.mc)this.u=this.mc;this.ec=!0}else if(this.Fa==sc){b=this.sa*this.u/5E3;this.u+=a*b;if(this.u>
this.mh)this.u=this.mh;this.ec=!0}else if(this.Fa==uc)this.T=this.sa;else if(this.Fa==vc)if(b=Math.sin(this.sa),this.Z+=a/5E3*-Math.cos(this.sa),this.T+=a/5E3*b,this.Z<-Math.PI/2)this.Z=-Math.PI/2;else if(this.Z>0)this.Z=0;if(this.Jd>0&&(this.te=!0,this.Jd-=a,this.Jd<=0))this.Jd=0,this.te=!1;if((this.N&ag||this.Fa==tc)&&(this.N&Rf)==0){b=0;this.N&Yf&&(b+=1);this.N&$f&&(b-=1);var c=0;this.N&Xf&&(c-=1);this.N&Zf&&(c+=1);var d;d=this.Fa==tc?Math.PI*this.sa/180:Math.atan2(c,b);b=this.u/5E5;b>10?b=10:
b<0.0010&&(b=0.0010);var a=b*a/5E4,b=Math.PI*this.M/180,e=Math.sin(b),c=Math.cos(b),f=this.T+d;d=Math.PI*this.P/180;var g=Qb/Math.sqrt(1-Rb*e*e),e=Qb/g*a*Math.sin(f)/Math.cos(b),a=Qb/(g/(1+Sb*c*c))*a*Math.cos(f)+b;this.P=180*(e+d)/Math.PI;this.M=180*a/Math.PI}for(;this.P>180;)this.P-=180;for(;this.P<-180;)this.P+=180;for(;this.M>90;)this.M-=180;for(;this.M<-90;)this.M+=180;if(this.ec)if(this.ec=!1,a=this.c.og(this.P,this.M),a.hasvalue){if(this.u-this.mc<a.elevation)this.u=a.elevation+this.mc,this.ec=
!0;this.Pg=!1}else if(this.u<5E3)this.ec=this.Pg=!0};this.ie=function(a,b,c){this.Kg=!1;this.Qd.mg();this.T=a;this.Z=b;this.Qb=c};this.Bg=function(a,b,c,d){this.Kg=!0;this.xk=a;this.yk=b;this.zk=c;this.wk=d;var e=a,a=b,b=e,e=a*b+c*d;if(e>0.499)this.T=2*Math.atan2(a,d),this.Z=Math.PI/2,this.Qb=0;else if(e<-0.499)this.T=-2*Math.atan2(a,d),this.Z=-Math.PI/2,this.Qb=0;else{var f=c*c;this.T=Math.atan2(2*b*d-2*a*c,1-2*b*b-2*f);this.Z=Math.asin(2*e);this.Qb=Math.atan2(2*a*d-2*b*c,1-2*a*a-2*f)}};this.ho=
function(a,b,c){a.a[0]=b.a[0]*c.a[0]+b.a[1]*c.a[4]+b.a[2]*c.a[8];a.a[1]=b.a[0]*c.a[1]+b.a[1]*c.a[5]+b.a[2]*c.a[9];a.a[2]=b.a[0]*c.a[2]+b.a[1]*c.a[6]+b.a[2]*c.a[10];a.a[4]=b.a[4]*c.a[0]+b.a[5]*c.a[4]+b.a[6]*c.a[8];a.a[5]=b.a[4]*c.a[1]+b.a[5]*c.a[5]+b.a[6]*c.a[9];a.a[6]=b.a[4]*c.a[2]+b.a[5]*c.a[6]+b.a[6]*c.a[10];a.a[8]=b.a[8]*c.a[0]+b.a[9]*c.a[4]+b.a[10]*c.a[8];a.a[9]=b.a[8]*c.a[1]+b.a[9]*c.a[5]+b.a[10]*c.a[9];a.a[10]=b.a[8]*c.a[2]+b.a[9]*c.a[6]+b.a[10]*c.a[10]};this.Im=function(a,b){this.bi.R(this.Ig);
var c={};this.c.xg(a,b,c,!0);c.hit?(this.Ta.x=c.x,this.Ta.y=c.y,this.Ta.e=c.z,this.me=!0):this.me=!1};this.Hm=function(a,b){if(this.me){var c={};this.c.xg(a,b,c,!1);if(c.hit)if(this.Sa.x=c.x,this.Sa.y=c.y,this.Sa.e=c.z,this.me=!0,this.Sa.x==this.Ta.x&&this.Sa.y==this.Ta.y&&this.Sa.e==this.Ta.e)this.Ig.R(this.bi);else{var d=this.Ta.x*this.Sa.x+this.Ta.y*this.Sa.y+this.Ta.e*this.Sa.e,c=Math.sqrt((1-d)*0.5),d=Math.sqrt((1+d)*0.5),e={};e.x=this.Ta.y*this.Sa.e-this.Ta.e*this.Sa.y;e.y=this.Sa.x*this.Ta.e-
this.Ta.x*this.Sa.e;e.e=this.Ta.x*this.Sa.y-this.Ta.y*this.Sa.x;c/=Math.sqrt(e.x*e.x+e.y*e.y+e.e*e.e);e.x*=c;e.y*=c;e.e*=c;this.sk.ng(e.x,e.y,e.e,d);this.Ig.S(this.bi,this.sk);c=[];(new T(this.P,this.M,this.u)).ja(c);c=this.Ig.Ba(new N(c[0],c[1],c[2]));d=new T(0,0,0);d.ac(c.a[0],c.a[1],c.a[2]);this.P=d.t[0];this.M=d.t[1];this.ec=!0}else this.me=!1}};this.Ca=function(a){a=a?a:window.event;a.stopPropagation&&a.stopPropagation();a.preventDefault&&a.preventDefault();a.cancelBubble=!0;a.cancel=!0;return a.returnValue=
!1}}pa(Mf,Lf);var Qf=1,Wf=4,Pf=7,Xf=16,Yf=32,Zf=64,$f=128,ag=240,Sf=256,Uf=512,Rf=768,Nf=0,Of=1,Vf=2,Tf=3;function bg(){this.lc=new O;this.Yi=1.0E-5;this.Ci=10;this.gn=45;this.jb=function(){this.c.nk(this.lc)};this.kb=n();this.lb=function(a){this.lc.bk(this.gn,this.c.width/this.c.height,this.Yi,this.Ci);a.ge[a.ge.length-1].R(this.lc)};this.ud=n();this.he=n();this.vd=n()}bg.prototype=new je;function cg(){this.jb=n();this.kb=n();this.lb=n();this.ud=n();this.he=n();this.vd=n()}cg.prototype=new je;function dg(){}dg.prototype=new je;function eg(){}eg.prototype=new je;function fg(a){this.c=a;this.Xi=new Mf;this.Xi.c=a;ke(this.Xi);this.Nc=this.Xi;this.oc=new bg;this.Ie=new cg;this.K=new Hf;this.Le=new eg;this.Je=new dg;this.Ke=new me;this.oc.c=a;ke(this.oc);this.Ie.c=a;ke(this.Ie);this.K.c=a;ke(this.K);this.Le.c=a;ke(this.Le);this.Je.c=a;ke(this.Je);this.Ke.c=a;ke(this.Ke);this.wb=new Zb;this.Fb=new O;this.Na=new O;this.ln=new O}
fg.prototype.Pa=function(){this.Nc.jb();this.Nc.kb();this.oc.jb();this.oc.kb();this.Ie.jb();this.Ie.kb();this.K.jb();this.K.kb();this.Le.jb();this.Le.kb();this.Je.jb();this.Je.kb();this.Ke.jb();this.Ke.kb()};function gg(a){this.b=a;this.ic=!1;this.Li=this.Hj=this.ub=this.Ji=this.Fj=this.Ib=this.Ii=this.Ej=this.Hb=this.Di=this.zj=this.Gb=this.Gi=this.Cj=this.tb=this.Ki=this.Gj=this.Jb=this.Fi=this.Bj=this.Ub=this.Hi=this.Dj=this.$a=this.Ei=this.Aj=this.Zd=l}
function hg(a){a.ic=!0;a.Aj=Z(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n}\n");a.Ei=Z(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform vec4 uColor;\n\nvoid main()\n{\n   gl_FragColor = uColor;\n}");if(a.Aj&&a.Ei)a.Zd=a.b.createProgram(),a.b.attachShader(a.Zd,a.Aj),a.b.attachShader(a.Zd,a.Ei),a.b.bindAttribLocation(a.Zd,0,"aPosition"),a.b.linkProgram(a.Zd),a.b.getProgramParameter(a.Zd,
a.b.LINK_STATUS)||alert("Shader Link: "+a.b.getProgramInfoLog(a.Zd));a.Dj=Z(a,a.b.VERTEX_SHADER,"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 matModelView;\nuniform mat4 matProjection;\nuniform mat4 matNormal;\n\nvarying vec2 vTexCoord;\nvarying vec3 vNormal;\nvarying vec4 vPosition;\n\nvoid main(void)\n{\nvPosition = matModelView * vec4(aPosition, 1.0);\ngl_Position = matProjection * vPosition;\nvTexCoord = aTexCoord;\nvNormal = (matNormal * vec4(aNormal,1.0)).xyz;\n}\n");
a.Hi=Z(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nvarying vec3 vNormal;\nvarying vec4 vPosition;\nuniform sampler2D uTexture;\nvoid main(void)\n{\nvec3 L = normalize(-vPosition.xyz);\nfloat lamb = 2.0*max(dot(normalize(vNormal), L), 0.0);\nvec3 diff = vec3(1.0,0.0,0.0) * lamb;\ngl_FragColor = vec4(diff.xyz, 1.0);\n}\n");if(a.Dj&&a.Hi)a.$a=a.b.createProgram(),a.b.attachShader(a.$a,a.Dj),a.b.attachShader(a.$a,a.Hi),a.b.bindAttribLocation(a.$a,0,"aPosition"),
a.b.bindAttribLocation(a.$a,1,"aNormal"),a.b.bindAttribLocation(a.$a,2,"aTexCoord"),a.b.linkProgram(a.$a),a.b.getProgramParameter(a.$a,a.b.LINK_STATUS)||alert(a.b.getProgramInfoLog(a.$a));a.Bj=Z(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec4 aColor;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition, 1.0);\n   vColor = aColor;\n   gl_PointSize = 1.0;}\n");a.Fi=Z(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_FragColor = vColor;\n}\n\n");
if(a.Bj&&a.Fi)a.Ub=a.b.createProgram(),a.b.attachShader(a.Ub,a.Bj),a.b.attachShader(a.Ub,a.Fi),a.b.bindAttribLocation(a.Ub,0,"aPosition"),a.b.bindAttribLocation(a.Ub,1,"aColor"),a.b.linkProgram(a.Ub),a.b.getProgramParameter(a.Ub,a.b.LINK_STATUS)||alert(a.b.getProgramInfoLog(a.Ub));a.Gj=Z(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");
a.Ki=Z(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   gl_FragColor = texture2D(uTexture, vTexCoord);\n}\n\n");if(a.Gj&&a.Ki)a.Jb=a.b.createProgram(),a.b.attachShader(a.Jb,a.Gj),a.b.attachShader(a.Jb,a.Ki),a.b.bindAttribLocation(a.Jb,0,"aPosition"),a.b.bindAttribLocation(a.Jb,1,"aTexCoord"),a.b.linkProgram(a.Jb),a.b.getProgramParameter(a.Jb,a.b.LINK_STATUS)||alert(a.b.getProgramInfoLog(a.Jb));a.Cj=Z(a,
a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\nattribute vec4 aColor;\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n   vNormal = aNormal;\n   vColor = aColor;\n}\n");a.Gi=Z(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec4 vColor;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   gl_FragColor = vColor * texture2D(uTexture, vTexCoord);\n}\n\n");
if(a.Cj&&a.Gi)a.tb=a.b.createProgram(),a.b.attachShader(a.tb,a.Cj),a.b.attachShader(a.tb,a.Gi),a.b.bindAttribLocation(a.tb,0,"aPosition"),a.b.bindAttribLocation(a.tb,1,"aNormal"),a.b.bindAttribLocation(a.tb,2,"aTexCoord"),a.b.bindAttribLocation(a.tb,3,"aColor"),a.b.linkProgram(a.tb),a.b.getProgramParameter(a.tb,a.b.LINK_STATUS)||alert(a.b.getProgramInfoLog(a.tb));a.zj=Z(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");
a.Di=Z(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\n\nuniform vec4 uColor;\nvoid main()\n{\n   gl_FragColor = uColor*texture2D(uTexture, vTexCoord);\n}\n\n");if(a.zj&&a.Di)a.Gb=a.b.createProgram(),a.b.attachShader(a.Gb,a.zj),a.b.attachShader(a.Gb,a.Di),a.b.bindAttribLocation(a.Gb,0,"aPosition"),a.b.bindAttribLocation(a.Gb,1,"aTexCoord"),a.b.linkProgram(a.Gb),a.b.getProgramParameter(a.Gb,a.b.LINK_STATUS)||alert("font shader: "+
a.b.getProgramInfoLog(a.Gb));a.Ej=Z(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");a.Ii=Z(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\n\nuniform vec4 uColor;\nvoid main()\n{\n   if(texture2D(uTexture, vTexCoord)[3]<0.1){discard;}\n gl_FragColor = uColor*texture2D(uTexture, vTexCoord);\n}\n\n");
if(a.Ej&&a.Ii)a.Hb=a.b.createProgram(),a.b.attachShader(a.Hb,a.Ej),a.b.attachShader(a.Hb,a.Ii),a.b.bindAttribLocation(a.Hb,0,"aPosition"),a.b.bindAttribLocation(a.Hb,1,"aTexCoord"),a.b.linkProgram(a.Hb),a.b.getProgramParameter(a.Hb,a.b.LINK_STATUS)||alert("poi shader: "+a.b.getProgramInfoLog(a.Hb));a.Fj=Z(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nuniform mat4 matInvMVP;\nattribute vec3 aPosition;\nattribute vec4 aColor;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition, 1.0);\n   vColor = aColor;\n   gl_PointSize=4.0; \n}\n");
a.Ji=Z(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_FragColor = vColor;\n}\n\n");if(a.Fj&&a.Ji)a.Ib=a.b.createProgram(),a.b.attachShader(a.Ib,a.Fj),a.b.attachShader(a.Ib,a.Ji),a.b.bindAttribLocation(a.Ib,0,"aPosition"),a.b.bindAttribLocation(a.Ib,1,"aColor"),a.b.linkProgram(a.Ib),a.b.getProgramParameter(a.Ib,a.b.LINK_STATUS)||alert(a.b.getProgramInfoLog(a.Ib));a.Hj=Z(a,a.b.VERTEX_SHADER,"uniform mat4 matM;uniform mat4 matMVP;\nvarying float w_val;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{gl_Position = matMVP * vec4(aPosition,1.0);\nvec4 xyz = matM * vec4(aPosition,1.0);\nfloat x = xyz.x*8388607.0;\nfloat y = xyz.y*8388607.0;\nfloat z = xyz.z*8388607.0;\nfloat sq, lat, sinlat, coslat, sinlat2, Rn, elevation;\nsq = sqrt(x*x+y*y);\n lat = atan(z,sq);\n      for (int i=0;i<2;i++)\n{\nsinlat = sin(lat);\ncoslat = cos(lat);\nsinlat2 = sinlat*sinlat;\nRn = 6378137.0 / sqrt(1.0-0.0066943799*sinlat2);\n   elevation = sq / coslat - Rn;\nlat = atan(z/sq, 1.0-(Rn*0.0066943799)/(Rn+elevation));\n}\nw_val = 1.0-clamp(abs(elevation)/4000.0,0.0,1.0); vTexCoord = aTexCoord;\n}\n");
a.Li=Z(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying float w_val;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   float depth = w_val;\nfloat depth2 = depth*depth;\nvec4 rgb;\n if (depth < 0.5) { rgb.g = 1.6*depth2+1.2*depth; } else { rgb.g = 3.2*depth2-6.8*depth+3.6; rgb.b = depth2*-4.8+9.2*depth-3.4; }\nrgb.a=1.0;\ndepth = depth/0.9;\ndepth2 = depth2/0.81;\nrgb.r = -2.14*depth2*depth2 -1.07*depth2*depth + 0.133*depth2 +0.0667*depth +1.0;\ngl_FragColor = texture2D(uTexture, vTexCoord)*rgb;\n\n}\n\n");
if(a.Hj&&a.Li)a.ub=a.b.createProgram(),a.b.attachShader(a.ub,a.Hj),a.b.attachShader(a.ub,a.Li),a.b.bindAttribLocation(a.ub,0,"aPosition"),a.b.bindAttribLocation(a.ub,1,"aTexCoord"),a.b.linkProgram(a.ub),a.b.getProgramParameter(a.ub,a.b.LINK_STATUS)||alert(a.b.getProgramInfoLog(a.ub))}
function Z(a,b,c){var d=a.b.createShader(b);if(!d)return l;a.b.shaderSource(d,c);a.b.compileShader(d);if(!a.b.getShaderParameter(d,a.b.COMPILE_STATUS))return b==a.b.VERTEX_SHADER?alert("Vertex Shader "+a.b.getShaderInfoLog(d)):b==a.b.FRAGMENT_SHADER?alert("Fragment Shader "+a.b.getShaderInfoLog(d)):alert("Unknown Shader "+a.b.getShaderInfoLog(d)),l;return d};function ig(a){this.c=a;this.wh=[];this.Vb=[]}x("TextureManager",ig);ig.prototype.Rj=function(a,b,c,d){var e=this.wh[a];e?(this.Vb[a]+=1,b(e)):(e=new R(this.c),S(e,a,b,c,d),this.Vb[a]=1,this.wh[a]=e);return e};ig.prototype.CreateTexture=ig.prototype.Rj;ig.prototype.Tj=function(a){this.Vb[a]-=1;this.Vb[a]==0&&(this.wh[a].J(),delete this.wh[a],delete this.Vb[a])};ig.prototype.DestroyTexture=ig.prototype.Tj;var jg=[14,28,14,14,14,14,14,14,14,96,0,14,14,0,14,14,14,14,14,14,14,14,14,14,14,14,14,14,0,0,0,0,8,8,10,16,16,25,19,5,9,9,11,16,8,9,8,8,16,16,16,16,16,16,16,16,16,16,8,8,16,16,16,16,28,19,19,20,20,19,17,22,20,8,14,19,16,23,20,22,19,22,20,19,16,20,19,28,19,18,17,8,8,8,14,16,9,15,16,14,16,15,7,16,16,6,6,14,6,24,16,15,16,16,9,14,8,16,13,19,13,13,14,9,6,9,16,8,16,0,6,16,9,28,16,16,9,29,19,9,28,0,17,0,0,6,6,9,9,10,16,28,8,28,14,9,26,0,14,19,8,8,16,16,16,16,6,16,9,21,10,16,16,9,21,15,11,15,9,9,9,16,15,
9,9,9,10,16,23,23,23,17,19,19,19,19,19,19,28,20,19,19,19,19,8,8,8,8,20,20,22,22,22,22,22,16,22,20,20,20,20,19,19,17,16,16,16,16,16,16,25,14,16,16,16,16,8,8,8,8,16,16,16,16,16,16,16,15,17,16,16,16,16,14,16,14];
function kg(a){this.c=a;this.b=a.b;var b=0,c=0;this.bh=new Q(this.c);for(var a=[],d=[],e=0;e<16;e++)for(var f=0;f<16;f++){var b=e*0.0625,g=f*0.0625;a.push(0,31,0,g,b+0.001953125);a.push(0,0,0,g,b+0.0625);a.push(31,0,0,g+0.0625,b+0.0625);a.push(31,31,0,g+0.0625,b+0.001953125);b=c*4;d.push(b,b+1,b+2,b,b+2,b+3);c++}c=this.bh;if(a.length%5==0)c.m=new Float32Array(a),c.mode="font",c.w=5;Fc(this.bh,d,"TRIANGLES");a=new R(this.c);S(a,U+"font.png");this.bh.zb(a);this.wo=new O;this.Jn=0}
kg.prototype.Rc=function(a,b,c,d,e){d==l&&(d=1);this.c.yc();this.c.Yh();this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);for(var f=new O,g=0,j=0,k=0;k<a.length;k++)g=a.charCodeAt(k),j+=jg[g]/2*d,f.Tc(d,d,1),f.ak(f,b+j,c,0),this.c.Ac(f),this.bh.ha(!0,6,g*12,e),j+=jg[g]/2*d;this.c.xc();this.c.b.disable(this.c.b.BLEND);this.Jn=b-b};kg.prototype.Vj=function(a){for(var b=0,c=0;c<a.length;c++)b+=jg[a.charCodeAt(c)];return b};
kg.prototype.lm=t(32);x("Font",kg);kg.prototype.DrawText=kg.prototype.Rc;kg.prototype.GetStringHeight=kg.prototype.lm;kg.prototype.GetStringWidth=kg.prototype.Vj;function lg(a){this.c=a;this.b=a.b;this.Ud=!1;this.wj=this.sb=this.l=l;this.j=this.h=0}
lg.prototype.Ze=function(a,b){this.de=document.createElement("canvas");this.v=this.de.getContext("2d");this.pa=new R(this.c);this.pa.f=this.b.createTexture();this.text=a;this.v.save();this.v.font=b.fontString;this.v.textAlign="left";this.v.textBaseline="top";this.v.lineWidth=b.lineWidth;this.v.strokeStyle=b.strokeStyle;var c=this.v.measureText(this.text),c=Math.round(c.width);this.v.restore();this.h=c+2*parseInt(b.lineWidth,10)+Math.abs(b.shadowOffsetX)+Math.abs(b.shadowOffsetY)+b.shadowBlur;this.j=
parseInt(b.fontString,10)+2*parseInt(b.lineWidth,10)+Math.abs(b.shadowOffsetY)+b.shadowBlur;this.Nb=Ub(this.h);this.Mb=Ub(this.j);this.pa.width=this.Nb;this.pa.height=this.Mb;this.v.canvas.width=this.Nb;this.v.canvas.height=this.Mb;this.v.fillStyle=b.backgroundColor;this.v.fillRect(0,0,this.h,this.j);this.v.shadowOffsetX=b.shadowOffsetX;this.v.shadowOffsetY=b.shadowOffsetY;this.v.shadowBlur=b.shadowBlur;this.v.shadowColor=b.shadowColor;this.v.fillStyle=b.fontColor;this.v.font=b.fontString;this.v.textAlign=
"left";this.v.textBaseline="middle";this.v.lineWidth=b.lineWidth;this.v.strokeStyle=b.strokeStyle;this.v.strokeText(a,b.lineWidth,this.j/2);this.v.fillText(a,b.lineWidth,this.j/2);this.nf();this.l=new Q(this.c);this.l.zb(this.pa);c=[];c.push(-this.h/2,this.j/2,0,0,0);c.push(-this.h/2,-this.j/2,0,0,1/this.Mb*this.j);c.push(this.h/2,-this.j/2,0,1/this.Nb*this.h,1/this.Mb*this.j);c.push(this.h/2,this.j/2,0,1/this.Nb*this.h,0);Ec(this.l,c);Fc(this.l,[0,1,2,0,2,3],"TRIANGLES");this.l.h=this.h;this.l.j=
this.j;return this.l};
lg.prototype.Xe=function(a,b){this.de=document.createElement("canvas");this.v=this.de.getContext("2d");this.pa=new R(this.c);this.pa.f=this.b.createTexture();mg(this,a,b);this.l=new Q(this.c);this.l.zb(this.pa);var c=[];c.push(-this.h/2,this.j/2,0,0,0);c.push(-this.h/2,-this.j/2,0,0,1/this.Mb*this.j);c.push(this.h/2,-this.j/2,0,1/this.Nb*this.h,1/this.Mb*this.j);c.push(this.h/2,this.j/2,0,1/this.Nb*this.h,0);Ec(this.l,c);Fc(this.l,[0,1,2,0,2,3],"TRIANGLES");this.l.D=[-this.h/2,-this.j/2,0];this.l.U=
[this.h/2,this.j/2,0];this.l.h=this.h;this.l.j=this.j;return this.l};
function mg(a,b,c){a.h=c.iconWidth+2*c.border+Math.abs(c.shadowOffsetX)+Math.abs(c.shadowOffsetY)+c.shadowBlur;a.j=c.iconHeight+2*c.border+Math.abs(c.shadowOffsetX)+Math.abs(c.shadowOffsetY)+c.shadowBlur;a.Nb=Ub(a.h);a.Mb=Ub(a.j);a.pa.width=a.Nb;a.pa.height=a.Mb;a.v.canvas.width=a.Nb;a.v.canvas.height=a.Mb;a.v.fillStyle=c.backgroundColor;a.v.fillRect(0,0,a.h,a.j);a.v.shadowOffsetX=c.shadowOffsetX;a.v.shadowOffsetY=c.shadowOffsetY;a.v.shadowBlur=c.shadowBlur;a.v.shadowColor=c.shadowColor;var d=new Image;
d.crossOrigin="anonymous";d.onload=function(){a.v.drawImage(d,c.border,c.border,c.iconWidth,c.iconHeight);a.nf()};d.src=b}
lg.prototype.nf=function(){this.b.enable(this.b.TEXTURE_2D);this.b.bindTexture(this.b.TEXTURE_2D,this.pa.f);this.b.pixelStorei(this.b.UNPACK_FLIP_Y_WEBGL,0);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.c.b.RGBA,this.b.UNSIGNED_BYTE,this.de);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,
this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.bindTexture(this.b.TEXTURE_2D,l);this.pa.cb=!0};lg.prototype.J=function(){if(this.l)this.l.J(),this.l=l;if(this.sb)this.sb.J(),this.sb=l;if(this.wj)this.wj.J(),this.wj=l;if(this.pa)this.pa.J(),this.pa=l;if(this.de)document.removeChild(this.de),this.de=l};function ng(a){this.c=a;this.b=a.b;this.gc=this.kc=this.jc=0;this.Do=l;this.Ud=!1;this.la=this.fa=this.sb=l;this.scale=20;this.text=this.xe="";this.vf=new lg(a);this.Of=this.Rf=0;this.vl=this.wl=1;this.ul=0;this.tl=1;this.yj=0;this.xj=Infinity;this.cj=new P(1,1,1,1);this.gh={iconWidth:64,iconHeight:64,border:0,backgroundColor:"rgba(255, 255, 255, 0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0)"};this.Yf={id:1,fontString:"48px bold Arial",backgroundColor:"rgba(0,0,0,0)",
fontColor:"rgba(255,255,255,1.0)",lineWidth:8,strokeStyle:"rgba(0,0,0,1.0)",fontSize:48,shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 1.0)"}}u=ng.prototype;u.sm=function(a,b,c,d){this.xe=c?c:"";if(b)this.Yf=b;this.text=a;if(d)this.gh=d;if(c)this.fa=this.vf.Xe(this.xe,this.gh);this.vf=new lg(this.c);if(a)this.la=this.vf.Ze(a,this.Yf)};
u.ea=function(a,b,c,d){if(this.fa&&this.la)this.Rf=this.fa.h+this.la.h,this.Of=this.fa.j;else if(this.fa)this.Rf=this.fa.h,this.Of=this.fa.j;else if(this.la)this.Rf=this.la.h,this.Of=this.la.j;this.fa&&this.fa.lf(a,b,c,-(this.fa.h/2+(this.Rf/2-this.fa.h))*L*this.scale,this.Of/2*L*this.scale,0);this.la&&this.la.lf(a,b,c,(this.la.h/2+(this.Rf/2-this.la.h))*L*this.scale,this.Of/2*L*this.scale,0);this.Wd=a;this.Xd=b;this.Yd=c;if(d!=l){this.Ud=!0;var d=this.vf,e=this.wl,f=this.vl,g=this.ul,j=this.tl;d.sb=
new Q(d.c);var k=[];k.push(a,b,c,e,f,g,j);k.push(0,0,0,e,f,g,j);Bc(d.sb,k);Fc(d.sb,[0,1],"LINES");this.sb=d.sb}};u.ha=function(){this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);this.Ud&&this.sb.ha();this.fa&&Ic(this.fa);this.la&&Ic(this.la);this.c.yc();var a=new O;a.Tc(L*this.scale,L*this.scale,1);this.c.Ac(a);this.fa&&this.fa.ha(!1,0,0,l,this.cj);this.la&&this.la.ha(!1,0,0,l,this.cj);this.c.xc();this.c.b.disable(this.c.b.BLEND)};
u.Dg=function(a){this.scale=a;this.Ud?this.ea(this.Wd,this.Xd,this.Yd,0):this.ea(this.Wd,this.Xd,this.Yd,l)};u.gf=function(a,b){var c=!1,d=!1;if(this.fa)var e=this.c.sd(a,b,this.c.wa,!0),c=this.fa.Vc(e.x,e.y,e.e,e.Hc,e.Ic,e.Jc);this.la&&(e=this.c.sd(a,b,this.c.wa,!0),d=this.la.Vc(e.x,e.y,e.e,e.Hc,e.Ic,e.Jc));return c||d};u.J=function(){this.vf=l;this.gc=this.kc=this.jc=0;this.fa&&this.fa.J();this.la&&this.la.J();this.sb&&this.sb.J();this.Ud=!1;this.sb=l;this.scale=0};x("Poi",ng);
ng.prototype.Draw=ng.prototype.ha;ng.prototype.SetContent=ng.prototype.sm;ng.prototype.SetPosition=ng.prototype.ea;ng.prototype.SetSize=ng.prototype.Dg;ng.prototype.Destroy=ng.prototype.J;function og(a){this.c=a;this.Pf=[];this.Vb=[];this.re=l;this.Qf=[];this.Tf=[]}u=og.prototype;u.Qj=function(a,b,c,d){var e=new ng(this.c);if(b)e.Yf=b;e.text=a;if(d)e.gh=d;if(c)e.xe=c,e.fa=this.Xe(c,e.gh);if(a)e.la=this.Ze(a,e.Yf);return e};u.Sj=function(a){a.fa&&pg(this,a.xe);a.la&&qg(this,a.text,a.Yf)};u.Xe=function(a,b){var c=this.Pf[a];if(c){this.Vb[a]+=1;var d=new Q(this.c);d.R(c);d.h=c.h;d.j=c.j;this.Pf[a]=d}else this.re=new lg(this.c),d=this.re.Xe(a,b),this.Vb[a]=1,this.Pf[a]=d,this.re=l;return d};
function pg(a,b){a.Vb[b]-=1;a.Vb[b]==0&&(a.Pf[b].f.J(),delete a.Pf[b],delete a.Vb[b])}u.Ze=function(a,b){var c=this.Qf[a+b.id];if(c){this.Tf[a+b.id]+=1;var d=new Q(this.c);d.R(c);d.h=c.h;d.j=c.j;this.Qf[a+b.id]=d}else this.re=new lg(this.c),d=this.re.Ze(a,b),this.Tf[a+b.id]=1,this.Qf[a+b.id]=d,this.re=l;return d};function qg(a,b,c){a.Tf[b+c.id]-=1;a.Tf[b+c.id]==0&&(a.Qf[b+c.id].f.J(),delete a.Qf[b+c.id],delete a.Tf[b+c.id])}
u.Nj=function(a,b,c){a.fa=this.Xe(b,c);a.ea(a.Wd,a.Xd,a.Yd,l);pg(this,a.xe);a.xe=b};u.Oj=function(a,b,c){a.la=this.Ze(b,c);a.ea(a.Wd,a.Xd,a.Yd,l);qg(this,a.text,c);a.text=b};x("PoiManager",og);og.prototype.CreatePoi=og.prototype.Qj;og.prototype.DestroyPoi=og.prototype.Sj;og.prototype.ChangePoiIcon=og.prototype.Nj;og.prototype.ChangePoiText=og.prototype.Oj;var rg=new Date,sg=new Date,tg=[],ug=0,vg=l,wg=l;function xg(){for(var a=0;a<tg.length;a++){var b=tg[a];if(b.Bk)b.Ij>0&&b.Oi>0?(b.L.width=window.innerWidth-b.Ij,b.L.height=window.innerHeight-b.Oi):(b.L.width=window.innerWidth-20,b.L.height=window.innerHeight-20);yg(b,b.L.width,b.L.height)}}
function $(){this.Gc=this.Pm=this.Om=this.Fc=this.Rm=this.Sm=this.Qm=this.Zc=this.$c=this.Yc=l;this.ic=!1;this.ko="";this.height=this.width=0;this.Bk=!1;this.Yb=this.L=this.b=l;this.qi=0.670588;this.pi=0.921569;this.ni=this.oi=1;this.Yl=this.Zl=this.am=this.$l=0;this.kg=this.jg=20;this.Fb=new O;this.Na=new O;this.lc=new O;this.lh=new O;this.wa=new O;this.Si=new O;this.le=new Zb;this.Vl=[];this.Wl=[];tg[ug]=this;ug++;this.Zi=this.d=this.Re=l;this.pd=1;this.Ka=this.vh=this.Oe=l;this.Oi=this.Ij=0}
function zg(a){function b(b){var c=a.parentNode;c&&(c.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+b+"</div></div></td></tr></table>")}if(!window.WebGLRenderingContext)return b('This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>'),l;var c=Ag(a);c||b('It doesn\'t appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>');
return c}function Ag(a){for(var b=["webgl","experimental-webgl","webkit-3d","moz-webgl"],c=l,d=0;d<b.length;++d){try{c=a.getContext(b[d])}catch(e){}if(c)break}return c}u=$.prototype;
u.Wj=function(a,b){var c=document.getElementById(a);if(this.b=zg(c)){this.L=c;if(b)this.kg=this.jg=20,c.width=window.innerWidth-this.jg,c.height=window.innerHeight-this.kg,this.Bk=!0;for(var d=["webgl","experimental-webgl","moz-webgl","webkit-3d"],e=0;d.length>e;e++)try{if(this.b=c.getContext(d[e]))break}catch(f){}this.b?(yg(this,this.L.width,this.L.height),this.b.clearColor(0,0,0,1),this.b.enable(this.b.DEPTH_TEST),this.b.frontFace(this.b.CCW),this.b.cullFace(this.b.BACK),this.Yb=new gg(this.b),
hg(this.Yb),this.Re=new kg(this),this.Zi=new R(this),S(this.Zi,U+"nodata.png"),this.Oe=new og(this),this.vh=new ig(this),this.Ka=new Bg(this),this.Yc&&this.Yc(this),W(window,"resize",xg,!1,this),sg=new Date,typeof window!="undefined"&&window.Cl(Cg,this.L),this.L.oncontextmenu=function(a){a.preventDefault();a.stopPropagation();return!1}):alert("Can't find webgl context. It seems your browser is not compatible! For example, you can get the latest Firefox or Chrome")}};
u.Yj=function(){this.Yb=this.L=this.b=this.Gc=this.Pm=this.Om=this.Fc=this.Rm=this.Sm=this.Qm=this.Zc=this.$c=this.Yc=l;this.Vl=[];this.Wl=[];this.vh=this.Oe=this.d=this.Re=l;W(window,"resize",l,!1,this)};u.fk=function(a,b,c,d){if(a>=0&&a<=1&&b>=0&&b<=1&&c>=0&&c<=1&&d>=0&&d<=1)this.qi=a,this.pi=b,this.oi=c,this.ni=d};u.km=function(){return{Ao:this.qi,oo:this.pi,jo:this.oi,io:this.ni}};u.Pj=function(){this.b.clearColor(this.qi,this.pi,this.oi,this.ni);this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT)};
u.qk=function(a,b,c,d){this.$l=a;this.am=b;this.Zl=c;this.Yl=d;this.b.viewport(a,b,c,d)};u.mm=function(){return{x:this.$l,y:this.am,Io:this.Zl,po:this.Yl}};u.nk=function(a){this.lc.R(a);Dg(this)};u.Zh=function(a){this.Na.R(a);Dg(this)};u.Ac=function(a){this.Fb.R(a);Dg(this)};function Dg(a){a.lh.S(a.Na,a.Fb);a.wa.S(a.lc,a.lh);a.Si.fe(a.lh);a.Si.ke()}u.om=function(a){var b=new R(this);S(b,a);this.Wl.push(b);return b};u.nm=function(a){var b=new Q(this);Gc(b,a);this.Vl.push(b);return b};
u.yc=function(){var a=this.le,b=this.Na,c=new O;c.R(b);a.sg.push(c);a=this.le;b=this.Fb;c=new O;c.R(b);a.rg.push(c);a=this.le;b=this.lc;c=new O;c.R(b);a.ge.push(c)};u.xc=function(){this.Fb.R(this.le.rg.pop());this.Na.R(this.le.sg.pop());this.lc.R(this.le.ge.pop());Dg(this)};u.Yh=function(){var a=this.b.getParameter(this.b.VIEWPORT),b=a[2]-a[0],a=a[3]-a[1];this.Fb.qg();this.Na.qg();this.lc.$j(0,b,0,a);Dg(this)};
u.Ye=function(){this.pd==0?I(K("owg.engine3d"),"** WARNING: not implemented"):this.pd==1?this.d=new fg(this):this.pd==2?I(K("owg.engine3d"),"** WARNING: not implemented"):this.pd==3&&I(K("owg.engine3d"),"** WARNING: not implemented")};u.Rc=function(a,b,c,d,e){this.Re&&this.Re.Rc(a,b,c,d,e)};u.Lh=function(a){var b=Array(2);b[0]=0;b[1]=0;this.Re&&(b[0]=this.Re.Vj(a),b[1]=32);return b};
u.sd=function(a,b,c,d){var e=new O;e.fe(c);var f=this.height-b-1,b=(a-0)*2/this.width-1,c=(f-0)*2/this.height-1,a=(a-0)*2/this.width-1,f=(f-0)*2/this.height-1,g=new N;g.q(b,c,-1);b=e.Ba(g);c=new N;c.q(a,f,1);c=e.Ba(c);e=c.a[0]-b.a[0];a=c.a[1]-b.a[1];c=c.a[2]-b.a[2];d&&(d=Math.sqrt(e*e+a*a+c*c),e/=d,a/=d,c/=d);d=b.a;b={};b.x=d[0];b.y=d[1];b.e=d[2];b.Hc=e;b.Ic=a;b.Jc=c;return b};
if(typeof window!="undefined")window.Cl=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,30)};
function Cg(){rg=new Date;var a=rg.valueOf()-sg.valueOf();sg=rg;for(var b=0;b<tg.length;b++){var c=tg[b];if(c.d){var d=c.d,e=a;d.Nc.wc(e);d.oc.wc(e);d.Ie.wc(e);d.K.wc(e);d.Le.wc(e);d.Je.wc(e);d.Ke.wc(e)}c.$c&&c.$c(a,c);c.qk(0,0,c.width,c.height);c.Pj();if(c.d){var d=c.d,e=d.wb,f=d.Fb,g=new O;g.R(f);e.rg.push(g);e=d.wb;f=d.Na;g=new O;g.R(f);e.sg.push(g);e=d.wb;f=d.ln;g=new O;g.R(f);e.ge.push(g);d.Nc.lb(d.wb);d.oc.lb(d.wb);d.Ie.lb(d.wb);d.K.lb(d.wb);d.Le.lb(d.wb);d.Je.lb(d.wb);d.Ke.lb(d.wb);d.wb.rg.pop();
d.wb.sg.pop();d.wb.ge.pop();c.d.Pa()}c.Zc&&c.Zc(c);typeof window!="undefined"&&window.Cl(Cg,c.L)}}function yg(a,b,c){a.width=b;a.height=c;a.Gc&&a.Gc(b,c,a)}u=$.prototype;u.gk=p("Yc");u.Eg=p("$c");u.ok=p("Zc");u.jk=function(a){if(this.Fd)Yd(this.Fd),this.Fd=l;if(a)this.Fd=W(this.L,kd,function(b){a(b.button,b.clientX-this.jg/2,b.clientY-this.kg/2,this)},!1,this)};
u.lk=function(a){if(this.Hd)Yd(this.Hd),this.Hd=l;if(a)this.Hd=W(this.L,ld,function(b){a(b.button,b.clientX-this.jg/2,b.clientY-this.kg/2,this)},!1,this)};u.kk=function(a){if(this.Gd)Yd(this.Gd),this.Gd=l;if(a)this.Gd=W(this.L,md,function(b){a(b.clientX-this.jg/2,b.clientY-this.kg/2,this)},!1,this)};u.mk=function(a){if(this.Fc)Yd(this.Fc),this.Fc=l;if(a){var b=new If(this.L);this.Fc=W(b,md,function(b){b.preventDefault();a(b.Vg,this)},!1,this)}};u.pk=p("Gc");
u.hk=function(a){vg&&(Yd(vg),vg=l);a&&(vg=W(window,nd,function(b){a(b.keyCode,this)},!1,this))};u.ik=function(a){wg&&(Yd(wg),wg=l);a&&(wg=W(window,od,function(b){a(b.keyCode,this)},!1,this))};u.wd=function(a,b,c){this.d&&this.d.K.La.wd(a,b,c)};u.xg=function(a,b,c,d){this.d&&this.d.K.La.xg(a,b,c,d)};u.jf=function(a,b){if(this.d)return this.d.K.qh.jf(a,b);return l};u.xd=function(a,b){if(this.d)return this.d.K.dh.xd(a,b);return-1};u.hf=function(a,b){if(this.d)return this.d.K.Qg.hf(a,b);return-1};
u.lg=function(){if(this.d)return this.d.K.La.lg();return 0};u.dm=function(){if(this.d)return this.d.Nc.td().elevation;return 0};u.og=function(a,b){if(this.d)return this.d.K.La.og(a,b);return{hasvalue:!1,elevation:0,lod:-1}};u.Kh=function(a,b,c,d,e,f,g){this.Ka.Kh(a,b,c,d,e,f,g)};u.Ag=function(a){this.Ka.Ag(a)};x("engine3d",$);$.prototype.AltitudeAboveEllipsoid=$.prototype.dm;$.prototype.AltitudeAboveGround=$.prototype.lg;$.prototype.Clear=$.prototype.Pj;$.prototype.CreateScene=$.prototype.Ye;
$.prototype.DrawText=$.prototype.Rc;$.prototype.GetClearColor=$.prototype.km;$.prototype.GetDirectionMousePos=$.prototype.sd;$.prototype.GetViewport=$.prototype.mm;$.prototype.InitEngine=$.prototype.Wj;$.prototype.LoadMesh=$.prototype.nm;$.prototype.LoadTexture=$.prototype.om;$.prototype.PickGlobe=$.prototype.wd;$.prototype.PopMatrices=$.prototype.xc;$.prototype.PushMatrices=$.prototype.yc;$.prototype.SetClearColor=$.prototype.fk;$.prototype.SetInitCallback=$.prototype.gk;
$.prototype.SetKeyDownCallback=$.prototype.hk;$.prototype.SetKeyUpCallback=$.prototype.ik;$.prototype.SetModelMatrix=$.prototype.Ac;$.prototype.SetMouseDownCallback=$.prototype.jk;$.prototype.SetMouseMoveCallback=$.prototype.kk;$.prototype.SetMouseUpCallback=$.prototype.lk;$.prototype.SetMouseWheelCallback=$.prototype.mk;$.prototype.SetOrtho2D=$.prototype.Yh;$.prototype.SetProjectionMatrix=$.prototype.nk;$.prototype.SetRenderCallback=$.prototype.ok;$.prototype.SetResizeCallback=$.prototype.pk;
$.prototype.SetTimerCallback=$.prototype.Eg;$.prototype.SetViewMatrix=$.prototype.Zh;$.prototype.SetViewport=$.prototype.qk;$.prototype.GetElevationAt=$.prototype.og;$.prototype.OnDestroy=$.prototype.Yj;function Eg(a){a=a.hb;a.Yc&&a.Yc(a.id)}function Fg(a,b){var c=b.hb;c.$c&&c.$c(c.id,a)}function Gg(a){a=a.hb;a.Zc&&a.Zc(a.id)}function Hg(a,b,c,d){d=d.hb;d.Fd&&d.Fd(d.id,a,b,c)}function Ig(a,b,c,d){a=d.hb;a.Hd&&a.Hd(a.id)}function Jg(a,b,c){c=c.hb;c.Gd&&c.Gd(c.id,a,b)}function Kg(a,b){var c=b.hb;c.Fc&&c.Fc(c.id,a)}function Lg(a,b,c){c=c.hb;c.Gc&&c.Gc(c.id,a,b)}function Mg(a,b){var c=b.hb;c.ri&&c.ri(c.id,a)}function Ng(a,b){var c=b.hb;c.si&&c.si(c.id,a)}
function Og(a){var b=a.hb;b.Dd&&b.Dd(a.hb.id)}function Pg(a){var b=a.hb;b.Ed&&b.Ed(a.hb.id)}function Qg(){this.name="ogContext";this.type=z;this.Pk=!1;this.d=this.c=l;this.fontcolor=new P(1,1,1,1);this.sn=1;this.Ed=this.Dd=this.Nm=this.Yc=this.Mm=this.Lm=this.mo=this.$c=this.Zc=this.Gc=this.si=this.ri=this.Gd=this.Fc=this.Hd=this.Fd=l}Qg.prototype=new G;
Qg.prototype.va=function(a){this.Yc=a.cbfInit;this.Nm=a.cbfExit;this.Gc=a.cbfResize;if(a.fullscreen)this.Pk=!0;this.c=new $;this.c.hb=this;a.canvas?this.c.Wj(a.canvas,this.Pk):I(K("owg.ogContext"),"**ERROR: auto creating canvas is not supported yet!");this.c.gk(Eg);this.c.Eg(Fg);this.c.ok(Gg);this.c.jk(Hg);this.c.lk(Ig);this.c.kk(Jg);this.c.mk(Kg);this.c.pk(Lg);this.c.hk(Mg);this.c.ik(Ng);this.c.Ka.Dd=Og;this.c.Ka.Ed=Pg};Qg.prototype.Rc=function(a,b,c){this.c&&this.c.Rc(a,b,c,1,this.fontcolor)};
Qg.prototype.Lh=function(a){if(this.c)return this.c.Lh(a);return l};Qg.prototype.Ra=function(){this.c.Yj();this.c=l};function Rg(){this.name="ogWorld";this.type=B}Rg.prototype=new G;Rg.prototype.va=function(a){if(a==l)I(K("owg.ogTexture"),"** ERROR: no options for texture creation!");else if(a.scenetype){var b=this.parent.parent.c;if(a.scenetype==D){if(b.pd=1,b.Ye(),b.d)b.d.Te=this}else if(a.scenetype==Na){if(b.pd=2,b.Ye(),b.d)b.d.Te=this}else if(a.scenetype==Oa){if(b.pd=3,b.Ye(),b.d)b.d.Te=this}else if(a.scenetype==Pa&&(b.pd=0,b.Ye(),b.d))b.d.Te=this}};
Rg.prototype.Cg=function(a,b){var c=this.parent.parent.c.d.K.La;switch(a){case 0:c.Cg(sf);c.Bl=b!=l?b:{};break;case 1:c.Cg(tf),c.Bl=b!=l?b:{}}};function Sg(){this.name="ogScene";this.type=A;this.Bd=this.Te=l;this.Sg=[];this.tc=D}Sg.prototype=new G;u=Sg.prototype;u.va=function(a){if(a==l)I(K("owg.ogScene"),"** ERROR: no options for scene creation!");else if(a.type)this.tc=a.type};u.gf=function(a,b){var c={};this.parent.c.wd(a,b,c);var d=Array(4);d[0]=c.hit;d[1]=c.lng;d[2]=c.lat;d[3]=c.elv;return d};u.jf=function(a,b){var c=this.parent.c.jf(a,b);if(c)return c.vn.id;return-1};u.xd=function(a,b){return this.parent.c.xd(a,b)};
u.hf=function(a,b){return this.parent.c.hf(a,b)};function Tg(a,b){var c=F(b);if(c&&c.type==Ca){var d=Wb(c);d.ea(c.kc,c.jc,c.gc);d.ie(M(c.ua),M(c.pitch),M(c.Kb));d.Za=c}a.Bd=c};function Ug(){this.name="ogPOI";this.type=C;this.H=!1;this.i=this.da=l}Ug.prototype=new G;
Ug.prototype.va=function(a){var b="",c=40,d=l;a.text&&(b=a.text);if(a.position){var e=a.position,f=[];(new T(e[0],e[1],e[2])).ja(f)}a.size&&(c=a.size);a.icon&&(d=a.icon);if(a.textstyle)this.ee=a.textstyle;if(a.iconstyle)this.Ld=a.iconstyle;this.da=this.parent.parent.c.Oe.Qj(b,this.ee,d,this.Ld);this.da.H=!1;if(a.flagpoleColor)b=this.da,d=a.flagpoleColor,b.wl=d[0],b.vl=d[1],b.ul=d[2],b.tl=d[3];a.flagpole==!0?this.da.ea(f[0],f[1],f[2],0):this.da.ea(f[0],f[1],f[2],l);this.da.Dg(c);this.da.vn=this;(c=
Vg(this))&&c.ka.push(this.da);if(a.visibilityRange)c=this.da,a=a.visibilityRange,c.yj=a[0]*1E3*L,c.xj=a[1]*1E3*L};Ug.prototype.Ra=function(){var a=this.parent.parent,b=Vg(this);if(b)for(var c=this.da,d=0;d<b.ka.length;d++)if(b.ka[d]==c){b.ka.splice(d,1);break}a.c.Oe.Sj(this.da)};Ug.prototype.X=function(){this.H=!0;this.da.H=!0};Ug.prototype.Y=function(){this.H=!1;this.da.H=!1};function Vg(a){var b=l,a=a.parent.parent.c;if(a.d&&a.d.K)b=a.d.K.qh;return b};function Wg(){this.name="ogPOILayer";this.type=ta;this.H=!1;this.ka=[];this.Od="";this.Ld=this.ee=l;this.Zm={fontString:"48px Arial",backgroundColor:"rgba(0, 0, 0, 0)",fontColor:"rgba(255, 255, 255, 1.0)",lineWidth:3,strokeStyle:"rgba(0, 0, 0, 1.0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.0)"};this.Ym={iconWidth:64,iconHeight:64,border:0,backgroundColor:"rgba(0, 0, 0, 0.0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(255, 0, 0, 0)"}}
Wg.prototype=new G;
function Xg(a){a.font&&a.fontSize&&(a.fontString=a.fontSize+"px "+a.font);if(a.backgroundColor){var b=a.backgroundColor;a.backgroundColor="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+b[3]+")"}if(a.fontColor)b=a.fontColor,a.fontColor="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+b[3]+")";if(a.strokeColor)b=a.strokeColor,a.strokeStyle="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+b[3]+")";if(a.shadowColor)b=a.shadowColor,a.shadowColor="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+b[3]+")";a.width&&
(a.iconWidth=a.width);a.height&&(a.iconHeight=a.height)}Wg.prototype.va=function(a){if(a.name)this.Od=a.name;a.textstyle?(Xg(a.textstyle),this.ee=a.textstyle):this.ee=this.Zm;a.iconstyle?(Xg(a.iconstyle),this.Ld=a.iconstyle):this.Ld=this.Ym};Wg.prototype.Ra=function(){for(var a=0;a<this.ka.length;a++)H(this.ka[a])};Wg.prototype.X=function(){this.H=!0;for(var a=0;a<this.ka.length;a++)this.ka[a].X()};Wg.prototype.Y=function(){this.H=!1;for(var a=0;a<this.ka.length;a++)this.ka[a].Y()};function Yg(){this.name="ogElevationLayer";this.type=ra;this.Hf=-1}Yg.prototype=new G;Yg.prototype.pg=function(){var a=l,b=this.parent.parent.parent.c;if(b.d&&b.d.K)a=b.d.K.La;return a};Yg.prototype.Fh=function(a){var b=this.pg();if(b)this.Hf=b.Fh(a)};Yg.prototype.va=function(a){this.Fh(a)};function Bg(a){this.c=a;this.b=a.b;this.Sd=l;this.Uk=this.Md=!1;this.tg=[];this.ug=[];this.vg=[];this.wg=[];this.Rl=2E3;this.hn=new T;this.Ed=this.Dd=l}function Zg(a,b,c,d){var e=a.Sd.td(),f=[e.longitude,e.latitude,e.elevation],g=[b,c,d];a.Wg=Qb*Math.acos(Math.sin(M(f[1]))*Math.sin(M(g[1]))+Math.cos(M(f[1]))*Math.cos(M(g[1]))*Math.cos(M(g[0]-f[0])));if(isNaN(a.Wg))a.Wg=0;e=[e.longitude,e.latitude,e.elevation+a.Wg/4];b=[b,c,d+a.Wg/4];a.tg=f;a.ug=e;a.vg=b;a.wg=g;a.Uk=!0}
function Ae(a,b,c,d,e,f,g){a.Sd=a.c.d.Nc;var j=a.Sd.bf();a.ij=j.ua;a.gj=j.pitch;a.hj=j.Kb;e!=l&&f!=l&&g!=l?(a.Jl=M(e),a.Hl=M(f),a.Il=M(g)):(a.Jl=a.ij,a.Hl=a.gj,a.Il=a.hj);a.zf=a.Jl-a.ij;Math.abs(a.zf)>Math.PI&&(a.zf>0?a.zf-=2*Math.PI:a.zf+=2*Math.PI);a.xf=a.Hl-a.gj;Math.abs(a.xf)>Math.PI&&(a.xf>0?a.xf-=2*Math.PI:a.xf+=2*Math.PI);a.yf=a.Il-a.hj;Math.abs(a.yf)>Math.PI&&(a.yf>0?a.yf-=2*Math.PI:a.yf+=2*Math.PI);Zg(a,b,c,d);a.Dd&&a.Dd(a.c);a.c.Eg(function(b){if(a.Uk){a.bl+=b;b=a.bl/a.Rl;a.p=0.5*Math.sin(Math.PI*
b-Math.PI/2)+0.5;if(b>1)a.p=1,$g(a);var b=Math.pow(1-a.p,3)*a.tg[0]+3*a.p*Math.pow(1-a.p,2)*a.ug[0]+3*a.p*a.p*(1-a.p)*a.vg[0]+Math.pow(a.p,3)*a.wg[0],c=Math.pow(1-a.p,3)*a.tg[1]+3*a.p*Math.pow(1-a.p,2)*a.ug[1]+3*a.p*a.p*(1-a.p)*a.vg[1]+Math.pow(a.p,3)*a.wg[1],d=Math.pow(1-a.p,3)*a.tg[2]+3*a.p*Math.pow(1-a.p,2)*a.ug[2]+3*a.p*a.p*(1-a.p)*a.vg[2]+Math.pow(a.p,3)*a.wg[2];a.hn.ac(b,c,d);a.Sd.ea(b,c,d);a.Sd.ie(a.ij+a.p*a.zf,a.gj+a.p*a.xf,a.hj+a.p*a.yf);a.p==1&&$g(a)}});a.p=0;a.bl=0;a.Md=!0}
function $g(a){a.c.Eg(l);a.Md=!1;a.Ed&&a.Ed(a.c)}
Bg.prototype.Kh=function(a,b,c,d,e,f,g){this.Sd=this.c.d.Nc;d*=L;var j=new T(a,b,c),k=[];j.ja(k);var m=new O;m.qd(a,b);a=new O;a.Bc(k[0],k[1],k[2]);k=new O;k.S(a,m);m={};e!=l&&f!=l&&g!=l?(m.ua=M(e),m.pitch=M(f),m.Kb=M(g)):m=this.Sd.bf();a=m.pitch-Math.PI/2;d=new N(d*Math.sin(a)*Math.cos(m.ua),d*Math.sin(a)*Math.sin(m.ua),d*Math.cos(a));d=k.Ba(d).a;j.ac(d[0],d[1],d[2]);d=j.t[1];k=j.t[0];j=j.t[2];j>c?Ae(this,k,d,j,e,f,g):Ae(this,k,d,-j,m.ua,-Tb(m.pitch),m.Kb)};Bg.prototype.Ag=p("Rl");function ah(a){this.c=a;this.b=a.b;this.gc=this.kc=this.jc=0;this.canvas=l;this.j=this.h=0;this.v=this.l=l;this.sl=-1}u=ah.prototype;
u.nf=function(){this.b.enable(this.b.TEXTURE_2D);this.b.bindTexture(this.b.TEXTURE_2D,this.pa.f);this.b.pixelStorei(this.b.UNPACK_FLIP_Y_WEBGL,0);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.c.b.RGBA,this.b.UNSIGNED_BYTE,this.canvas);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,
this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.bindTexture(this.b.TEXTURE_2D,l);this.pa.cb=!0};u.ea=function(a,b,c){var d=[];(new T(a,b,c)).ja(d);this.l.lf(d[0],d[1],d[2],0,0,0)};u.ha=function(){this.scale=20;this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);this.l&&Ic(this.l);this.c.yc();var a=new O;a.Tc(L*this.scale,L*this.scale,1);this.c.Ac(a);this.l&&this.l.ha(!1,0,0,l,l);this.c.xc();this.c.b.disable(this.c.b.BLEND)};
u.Dg=p("scale");u.gf=function(a,b){if(this.l)var c=this.c.sd(a,b,this.c.wa,!0),d=this.l.Vc(c.x,c.y,c.e,c.Hc,c.Ic,c.Jc);if(d){var e=c=0,f=d.Ob,g=d.vc,j=1-f-g;d.Sl==0?(c=f*-this.h/2+g*this.h/2+j*-this.h/2/(f+g+j)+this.h/2,e=f*this.j/2+g*this.j/2+j*-this.j/2/(f+g+j)+this.j/2):d.Sl==1&&(c=f*this.h/2+g*this.h/2+j*-this.h/2/(f+g+j)+this.h/2,e=f*this.j/2+g*-this.j/2+j*-this.j/2/(f+g+j)+this.j/2);c/=this.h;e/=this.j;d={};d.id=this.sl;d.x=c;d.y=e;return d}return l};u.J=function(){this.l&&(this.l.J(),this.pa.J())};function bh(){this.name="ogBillboard";this.type=Ha;this.status=Ra;this.i=-1;this.H=!1}bh.prototype=new G;u=bh.prototype;
u.va=function(a){if(a==l)I(K("owg.ogBillboard"),"** ERROR: no options for billboard creation!");else if(this.parent==l)I(K("owg.ogBillboard"),"** ERROR: no parent!");else if(this.parent.type!=A)I(K("owg.ogBillboard"),"** ERROR: parent is not scene!");else if(a.canvas){this.Bb=new ah(this.parent.parent.c);this.Bb.sl=this.id;var b=this.Bb,c=a.canvas;b.canvas=c;switch(c.constructor.toString()){case "[object HTMLCanvasElement]":b.v=b.canvas.getContext("2d");b.h=b.v.canvas.width;b.j=b.v.canvas.height;
break;case "[object HTMLVideoElement]":b.h=c.videoWidth,b.j=c.videoHeight}b.pa=new R(b.c);b.pa.f=b.b.createTexture();b.l=new Q(b.c);b.l.zb(b.pa);b.Nb=b.h;b.Mb=b.j;c=[];c.push(-b.h/2,b.j/2,0,0,0);c.push(-b.h/2,-b.j/2,0,0,1/b.Mb*b.j);c.push(b.h/2,-b.j/2,0,1/b.Nb*b.h,1/b.Mb*b.j);c.push(b.h/2,b.j/2,0,1/b.Nb*b.h,0);Ec(b.l,c);Fc(b.l,[0,1,2,0,2,3],"TRIANGLES");b.l.D=[-b.h/2,-b.j/2,0];b.l.U=[b.h/2,b.j/2,0];b.l.h=b.h;b.l.j=b.j;b.nf();a=a.position;this.Bb.ea(a[0],a[1],a[2]);ch(this).Eh(this.Bb)}};
u.Ra=function(){if(this.Bb)ch(this).Vh(this.Bb),this.Bb.J(),this.status=3};u.ha=function(){this.Bb.ha()};function ch(a){var b=l,a=a.parent.parent.c;if(a.d&&a.d.K)b=a.d.K.Qg;return b}u.X=function(){this.H=!0;this.Bb.H=!0};u.Y=function(){this.H=!1;this.Bb.H=!1};function dh(){this.name="ogMeshObject";this.type=Aa;this.vb=[];this.jj=[]}dh.prototype=new G;u=dh.prototype;u.va=function(a){this.options=a;if(this.options.jsonobject)for(var a=this.options.jsonobject,b=0;b<a.length;b++){this.options.jsonobject=a[b];var c=Y(Ba,this,this.options);this.vb.push(c);this.jj.push(c.l)}};u.Ra=function(){for(var a=0;a<this.vb.length;a++)H(this.vb[a]);this.jj=this.vb=l};u.X=function(){for(var a=0;a<this.vb.length;a++)this.vb[a].X()};
u.yd=function(a,b,c,d,e,f){for(var g=0;g<this.vb.length;g++)this.vb[g].yd(a,b,c,d,e,f)};u.mf=function(a,b,c,d){for(var e=0;e<this.vb.length;e++)this.vb[e].mf(a,b,c,d)};u.Y=function(){for(var a=0;a<this.vb.length;a++)this.vb[a].Y()};function eh(){this.Al=oa()}var fh=new eh;eh.prototype.set=p("Al");eh.prototype.reset=function(){this.set(oa())};eh.prototype.get=aa("Al");function gh(a){this.dj=a||"";this.In=fh}gh.prototype.En=!0;gh.prototype.Gn=!0;gh.prototype.Fn=!0;gh.prototype.El=!1;function hh(a){if(a<10)return"0"+a;return String(a)}function ih(a,b){var c=(a.Ml-b)/1E3,d=c.toFixed(3),e=0;if(c<1)e=2;else for(;c<100;)e++,c*=10;for(;e-- >0;)d=" "+d;return d}function jh(a){gh.call(this,a)}pa(jh,gh);jh.prototype.El=!0;function kh(a){this.Rd=a||100;this.Cd=[]}u=kh.prototype;u.Mf=0;u.add=function(a){this.Cd[this.Mf]=a;this.Mf=(this.Mf+1)%this.Rd};u.get=function(a){a=lh(this,a);return this.Cd[a]};u.set=function(a,b){a=lh(this,a);this.Cd[a]=b};u.ve=function(){return this.Cd.length};u.clear=function(){this.Mf=this.Cd.length=0};u.Mi=function(){for(var a=this.ve(),b=[],c=this.ve()-this.ve();c<a;c++)b[c]=this.get(c);return b};u.eh=function(){for(var a=[],b=this.ve(),c=0;c<b;c++)a[c]=c;return a};
function lh(a,b){b>=a.Cd.length&&h(Error("Out of bounds exception"));if(a.Cd.length<a.Rd)return b;return(a.Mf+Number(b))%a.Rd};function mh(a,b){this.ed=a||"";this.dj=b||"";this.Ne=[];this.rh=new kh(nh);this.yn=na(this.Gm,this);this.fn=new jh(this.dj);this.dn={};if(!0!=this.Sk){this.Sk=!0;Ob();var c=Nb,d=this.yn;if(!c.Df)c.Df=[];c.Df.push(d)}this.Yg=oh(this.ed,"enabled")=="1";w.setInterval(na(this.Cn,this),7500)}var nh=500;u=mh.prototype;u.bm="LOGGING";u.bn=!1;u.Aa=l;u.Jj=!1;u.Sk=!1;u.Ck=l;u.Qi=oa();u.ic=function(){this.Yg&&ph(this)};function qh(a){a.Yg=!0;a.Yg&&(ph(a),a.Aa&&a.Ch());rh(a,"enabled","1")}
function sh(a){return!!a.Aa&&!a.Aa.closed}u.Tm=function(){this.rh.clear();sh(this)&&this.Ch()};
u.Gm=function(a){if(!this.dn[a.Yk]){this.bn&&a.Lc>=Eb&&qh(this);var b=this.fn,c;switch(a.Lc.value){case Db.value:c="dbg-sh";break;case Eb.value:c="dbg-sev";break;case Fb.value:c="dbg-w";break;case Gb.value:c="dbg-i";break;default:c="dbg-f"}var d=[];d.push(b.dj," ");if(b.En){var e=new Date(a.Ml);d.push("[",hh(e.getFullYear()-2E3)+hh(e.getMonth()+1)+hh(e.getDate())+" "+hh(e.getHours())+":"+hh(e.getMinutes())+":"+hh(e.getSeconds())+"."+hh(Math.floor(e.getMilliseconds()/10)),"] ")}b.Gn&&d.push("[",eb(ih(a,
b.In.get())),"s] ");b.Fn&&d.push("[",Za(a.Yk),"] ");d.push('<span class="',c,'">',Ya(eb(Za(a.cl))));b.El&&a.Bi&&d.push("<br>",Ya(eb(a.Ai||"")));d.push("</span><br>");a=d.join("");this.Yg?(ph(this),this.rh.add(a),th(this,a)):this.rh.add(a)}};function th(a,b){a.Ne.push(b);w.clearTimeout(a.Ck);oa()-a.Qi>750?a.Kj():a.Ck=w.setTimeout(na(a.Kj,a),250)}
u.Kj=function(){this.Qi=oa();if(sh(this)){var a=this.Aa.document.body,a=a&&a.scrollHeight-(a.scrollTop+a.clientHeight)<=100;this.Aa.document.write(this.Ne.join(""));this.Ne.length=0;a&&this.Aa.scrollTo(0,1E6)}};function uh(a){for(var b=a.rh.Mi(),c=0;c<b.length;c++)th(a,b[c])}
function ph(a){if(!sh(a)&&!a.Jj){var b=oh(a.ed,"dbg","0,0,800,500").split(","),c=Number(b[0]),d=Number(b[1]),e=Number(b[2]),b=Number(b[3]);a.Jj=!0;a.Aa=window.open("",Uc?a.ed.replace(/[\s\-\.\,]/g,"_"):a.ed,"width="+e+",height="+b+",toolbar=no,resizable=yes,scrollbars=yes,left="+c+",top="+d+",status=no,screenx="+c+",screeny="+d);if(!a.Aa&&!a.Hn)alert("Logger popup was blocked"),a.Hn=!0;a.Jj=!1;a.Aa&&a.Ch()}}u.fh=t("*{font:normal 14px monospace;}.dbg-sev{color:#F00}.dbg-w{color:#E92}.dbg-sh{background-color:#fd4;font-weight:bold;color:#000}.dbg-i{color:#666}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}");
u.Ch=function(){sh(this)||(this.Aa.document.open(),th(this,"<style>"+this.fh()+'</style><hr><div class="dbg-ev" style="text-align:center">'+this.bm+"<br><small>Logger: "+this.ed+"</small></div><hr>"),uh(this))};function rh(a,b,c){b+=a.ed;document.cookie=b+"="+encodeURIComponent(c)+";path=/;expires="+(new Date(oa()+2592E6)).toUTCString()}
function oh(a,b,c){var a=b+a,b=String(document.cookie),d=b.indexOf(a+"=");return d!=-1?(c=b.indexOf(";",d),decodeURIComponent(b.substring(d+a.length+1,c==-1?b.length:c))):c||""}u.Cn=function(){sh(this)&&rh(this,"dbg",(this.Aa.screenX||this.Aa.screenLeft||0)+","+(this.Aa.screenY||this.Aa.screenTop||0)+","+(this.Aa.outerWidth||800)+","+(this.Aa.outerHeight||500))};function vh(a){var b;b=(b=a.className)&&typeof b.split=="function"?b.split(/\s+/):[];var c=ob(arguments,1),d;d=b;for(var e=0,f=0;f<c.length;f++)kb(d,c[f])>=0||(d.push(c[f]),e++);d=e==c.length;a.className=b.join(" ");return d};var wh=!Uc||hd("9");!Vc&&!Uc||Uc&&hd("9")||Vc&&hd("1.9.1");Uc&&hd("9");function xh(a,b){Sa(b,function(b,d){d=="style"?a.style.cssText=b:d=="class"?a.className=b:d=="for"?a.htmlFor=b:d in yh?a.setAttribute(yh[d],b):a[d]=b})}var yh={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};
function zh(a,b,c){function d(c){c&&b.appendChild(fa(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];ea(f)&&!(ha(f)&&f.nodeType>0)?lb(Ah(f)?nb(f):f,d):d(f)}}function Ah(a){if(a&&typeof a.length=="number")if(ha(a))return typeof a.item=="function"||typeof a.item=="string";else if(ga(a))return typeof a.item=="function";return!1}function Bh(a){this.Bf=a||w.document||document}function Ch(a,b){return fa(b)?a.Bf.getElementById(b):b}
Bh.prototype.se=function(){var a=this.Bf,b=arguments,c=b[0],d=b[1];if(!wh&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',Za(d.name),'"');if(d.type){c.push(' type="',Za(d.type),'"');var e={};Va(e,d);d=e;delete d.type}c.push(">");c=c.join("")}c=a.createElement(c);if(d)fa(d)?c.className=d:da(d)=="array"?vh.apply(l,[c].concat(d)):xh(c,d);b.length>2&&zh(a,c,b);return c};Bh.prototype.createElement=function(a){return this.Bf.createElement(a)};Bh.prototype.createTextNode=function(a){return this.Bf.createTextNode(a)};
Bh.prototype.appendChild=function(a,b){a.appendChild(b)};function Dh(a,b){mh.call(this,a,b)}pa(Dh,mh);u=Dh.prototype;u.Kj=function(){this.Qi=oa();if(sh(this)){for(var a=Ch(this.Cb,"log"),b=a.scrollHeight-(a.scrollTop+a.offsetHeight)<=100,c=0;c<this.Ne.length;c++){var d=this.Cb.se("div","logmsg");d.innerHTML=this.Ne[c];a.appendChild(d)}this.Ne.length=0;this.Dl();if(b)a.scrollTop=a.scrollHeight}};
u.Ch=function(){if(sh(this)){var a=this.Aa.document;a.open();a.write('<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd"><html><head><title>Logging: '+this.ed+"</title><style>"+this.fh()+'</style></head><body><div id="log" style="overflow:auto"></div><div id="head"><p><b>Logging: '+this.ed+"</b></p><p>"+this.bm+'</p><span id="clearbutton">clear</span><span id="openbutton">options</span></div><div id="options"><big><b>Options:</b></big><div id="optionsarea"></div><span id="closebutton">save and close</span></div></body></html>');
a.close();(Uc?a.body:this.Aa).onresize=na(this.Dl,this);this.Cb=new Bh(a);Ch(this.Cb,"openbutton").onclick=na(this.wn,this);Ch(this.Cb,"closebutton").onclick=na(this.Um,this);Ch(this.Cb,"clearbutton").onclick=na(this.Tm,this);uh(this)}};
u.wn=function(){var a=Ch(this.Cb,"optionsarea");a.innerHTML="";for(var b=Eh(),c=this.Cb,d=0;d<b.length;d++){var e=K(b[d]),e=c.se("div",{},Fh(this,"sel"+b[d],e.Lc?e.Lc.name:"INHERIT"),c.se("span",{},b[d]||"(root)"));a.appendChild(e)}Ch(this.Cb,"options").style.display="block";return!1};
function Fh(a,b,c){for(var a=a.Cb,b=a.se("select",{id:b}),d=0;d<Ib.length;d++){var e=Ib[d],f=a.se("option",{},e.name);if(c==e.name)f.selected=!0;b.appendChild(f)}b.appendChild(a.se("option",{selected:c=="INHERIT"},"INHERIT"));return b}u.Um=function(){Ch(this.Cb,"options").style.display="none";for(var a=Eh(),b=this.Cb,c=0;c<a.length;c++){var d=K(a[c]),e=Ch(b,"sel"+a[c]),e=e.options[e.selectedIndex].text;e=="INHERIT"?d.sh(l):d.sh(Kb(e))}return!1};
u.Dl=function(){var a=this.Cb,b=Ch(a,"log"),c=Ch(a,"head");b.style.top=c.offsetHeight+"px";b.style.height=a.Bf.body.offsetHeight-c.offsetHeight-(Uc?4:0)+"px"};function Eh(){var a=Ta(Mb);a.sort();return a}u.fh=function(){return Dh.ce.fh.call(this)+"html,body{height:100%;width:100%;margin:0px;padding:0px;background-color:#FFF;overflow:hidden}*{}.logmsg{border-bottom:1px solid #CCC;padding:2px;font:medium monospace;}#head{position:absolute;width:100%;font:x-small arial;border-bottom:2px solid #999;background-color:#EEE;}#head p{margin:0px 5px;}#log{position:absolute;width:100%;background-color:#FFF;}#options{position:absolute;right:0px;width:50%;height:100%;border-left:1px solid #999;background-color:#DDD;display:none;padding-left: 5px;font:normal small arial;overflow:auto;}#openbutton,#closebutton{text-decoration:underline;color:#00F;cursor:pointer;position:absolute;top:0px;right:5px;font:x-small arial;}#clearbutton{text-decoration:underline;color:#00F;cursor:pointer;position:absolute;top:0px;right:50px;font:x-small arial;}select{font:x-small arial;margin-right:10px;}hr{border:0;height:5px;background-color:#8c8;color:#8c8;}"};function Gh(){this.name="ogAoeImageLayer";this.type=Ja;this.H=!1;this.Ya=[];this.Od=""}Gh.prototype=new G;u=Gh.prototype;u.va=function(a){if(a.name)this.Od=a.name};u.Ra=function(){for(var a=0;a<this.Ya.length;a++){for(var b=a;b<this.Ya.length;b++)this.Ya[a].hc-=1;H(this.Ya[a])}};u.X=function(){this.H=!0;for(var a=0;a<this.Ya.length;a++)this.Ya[a].X()};u.Y=function(){this.H=!1;for(var a=0;a<this.Ya.length;a++)this.Ya[a].Y()};u.Dh=function(a){this.Ya.push(a);a.Gf=this.id};
u.Uh=function(a){for(var b=0;b<this.Ya.length;b++)if(this.Ya[b]==a){for(var c=b+1;c<this.Ya.length;c++)this.Ya[c].hc-=1;H(this.Ya[b]);this.Ya.splice(b,1)}};function Hh(){this.name="ogImageLayer";this.type=qa;this.Hf=-1}Hh.prototype=new G;Hh.prototype.pg=function(){var a=l,b=this.parent.parent.parent.c;if(b.d&&b.d.K)a=b.d.K.La;return a};Hh.prototype.Gh=function(a){var b=this.pg();if(b)this.Hf=b.Gh(a)};Hh.prototype.yg=function(){var a=this.pg();a&&this.Hf!=-1&&a.yg(this.Hf)};Hh.prototype.va=function(a){this.Gh(a)};function Ih(){this.name="ogBillboardLayer";this.type=Ia;this.H=!1;this.na=[];this.Od=""}Ih.prototype=new G;u=Ih.prototype;u.va=function(a){if(a.name)this.Od=a.name};u.Ra=function(){for(var a=0;a<this.na.length;a++)H(this.na[a])};u.X=function(){this.H=!0;for(var a=0;a<this.na.length;a++)this.na[a].X()};u.Y=function(){this.H=!1;for(var a=0;a<this.na.length;a++)this.na[a].Y()};u.Vh=function(a){for(var b=0;b<this.na.length;b++)this.na[b]==a&&(H(this.na[b]),this.na.splice(b,1))};u.Eh=function(a){this.na.push(a)};function Jh(){this.name="ogPointSpriteObject";this.type=La;this.ld=this.options=this.Tb=l;this.oh=this.Ug=0}Jh.prototype=new G;u=Jh.prototype;u.va=function(a){this.options=a;this.Tb=new Jc(this.parent.parent.parent.c);a.Vertices&&Kc(this.Tb,a.Vertices);if(a.PointUrl)Kh(this,a.PointUrl),this.tn=a.NumberOfPoints,this.Tb.xh=this.tn;this.Tb.zg(a.Center[0],a.Center[1],a.Center[2])};u.Ra=function(){if(this.Tb)this.Tb.J(),this.Tb=l,this.status=3};u.X=function(){this.Tb.H=!0};u.yd=n();
u.Y=function(){this.Tb.H=!1};function Kh(a,b){b==l?alert("invalid xyzurl"):(a.Rn=b,a.O=new window.XMLHttpRequest,a.O.open("GET",a.Rn,!0),a.O.onreadystatechange=function(){a.O.readyState==4&&(a.O.status==404?alert("xyz-file not found..."):Lh(a))},a.O.onprogress=function(){Lh(a)},a.O.send(),a.Ug=0,a.oh=0)}
function Lh(a){var b=a.O.responseText;a.Ug=b.lastIndexOf("\n");for(var b=b.substr(a.oh,a.Ug-a.oh-1),c=[],b=b.split(","),d=0;d<b.length;d++){var e=parseFloat(b[d]);isNaN(e)||c.push(e)}Kc(a.Tb,c);a.oh=a.Ug};function Mh(){this.name="ogGeometryLayer";this.type=ua;this.H=!1;this.W=[];this.Od=""}Mh.prototype=new G;u=Mh.prototype;u.va=function(a){if(a.name)this.Od=a.name};u.Ra=function(){for(var a=0;a<this.W.length;a++){for(var b=a;b<this.W.length;b++)this.W[a].hc-=1;H(this.W[a])}};u.X=function(){this.H=!0;for(var a=0;a<this.W.length;a++)this.W[a].X()};u.Y=function(){this.H=!1;for(var a=0;a<this.W.length;a++)this.W[a].Y()};u.Ve=function(a){this.W.push(a);a.Gf=this.id};
u.Wh=function(a){for(var b=0;b<this.W.length;b++)if(this.W[b]==a){for(var c=b+1;c<this.W.length;c++)this.W[c].hc-=1;H(this.W[b]);this.W.splice(b,1)}};function Nh(){this.name="ogSurface";this.type=Ba;this.Fo=this.uo=!1;this.elevation=this.latitude=this.longitude=0;this.status=Ra;this.l=l}Nh.prototype=new G;u=Nh.prototype;u.yd=function(a,b,c,d,e,f){this.l.zg(a,b,c,d,e,f)};
u.mf=function(a,b,c,d){var e=this.l,f=new T(a,b,c),c=Array(3);f.ja(c);f=new O;f.qd(a,b);a=Array(16);b=f.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;c=new O;c.Uc(a);a=new O;a.Uc([1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1]);a.ke();b=new O;b.ng(d[0],d[1],d[2],d[3]);b.ke();f=new O;f.S(a,b);d=new O;d.S(a,f);b=new O;b.Uc([0,-1,0,0,1,0,0,0,0,0,1,0,0,0,0,1]);b.ke();a=new O;a.S(b,d);d=new O;d.S(c,
a);c=new O;c.Tc(L,L,L);a=new O;a.S(d,c);e.ba=a;Hc(e)};
u.va=function(a){if(a==l)I(K("owg.ogTexture"),"** ERROR: no options for surface creation!");else if(this.parent==l)I(K("owg.ogTexture"),"** ERROR: no parent!");else if(this.parent.type!=Aa)I(K("owg.ogTexture"),"** ERROR: parent is not scene!");else{if(a.jsonobject){this.l=new Q(this.parent.parent.parent.parent.c);this.l.H=!1;this.l.un=this.id;var b=this;this.l.rd(a.jsonobject,function(){b.longitude!=0&&b.latitude!=0&&b.yd(b.longitude,b.latitude,b.elevation);b.status=Qa;b.G&&b.G(b.id)},function(){b.status=
3;b.F&&b.F(b.id)});this.ye=a.url;this.l.Xl=a.jsonobject.VisibilityDistance?a.jsonobject.VisibilityDistance*L:5E4*L}if(a.longitude&&a.latitude&&a.elevation)this.longitude=a.longitude,this.latitude=a.latitude,this.elevation=a.elevation}};u.Ra=function(){if(this.l)this.l.J(),this.l=l,this.status=3};u.Y=function(){if(this.l)this.l.H=!1};u.X=function(){if(this.l)this.l.H=!0};var Oh=-1;function Y(a,b,c){var d=l;a==z?d=new Qg:a==A?d=new Sg:a==B?d=new Rg:a==qa?d=new Hh:a==ra?d=new Yg:a!=sa&&(a==ta?d=new Wg:a==ua?d=new Mh:a!=va&&a!=wa&&(a==xa?d=new Pb:a==C?d=new Ug:a!=ya&&(a==za?d=new Df:a==Aa?d=new dh:a==Ba?d=new Nh:a==Ca?d=new Vb:a!=Da&&a!=Ea&&a!=Fa&&a!=Ga&&(a==Ha?d=new bh:a==Ia?d=new Ih:a==Ja?d=new Gh:a==Ka?d=new Be:a==La&&(d=new Jh)))));if(d!=l)Oh++,d.id=Oh,d.parent=b,E.push(d),d.va(c);return d}x("_CreateObject",Y);
x("ogGetObjectType",function(a){return(a=F(a))?a.type:Ma});x("ogGetObjectName",function(a){return(a=F(a))?a.name:""});x("ogGetNumObjects",function(){return E.length});x("ogGetObjectAt",function(a){a=a<0||a>E.length-1?l:E[a];return a==l?-1:a.id});x("ogGetParentObject",function(a){if((a=F(a))&&a.parent)return a.parent.id;return-1});x("ogSetObjectName",function(a,b){var c=F(a);if(c)c.name=b});
x("ogGetObjectByName",function(a){a:{for(var b=0;b<E.length;b++)if(E[b].name==a){a=E[b];break a}a=l}if(a)return a.id;return-1});x("ogGetObjectStatus",function(a){if(a=F(a))return a.status;return 3});x("ogOnLoad",function(a,b){var c=F(a);if(c)c.status==Qa?b(a):c.G=b});x("ogOnFailure",function(a,b){var c=F(a);if(c)c.status==3?b(a):c.F=b});function Ph(a,b,c,d){a.cbfInit=b;a.cbfExit=c;a.cbfResize=d;a=Y(z,l,a);if(a!=l)return a.id;return-1}x("ogCreateContext",Ph);
x("ogCreateContextFromCanvas",function(a,b,c,d,e){var f={};f.fullscreen=b?!0:!1;f.canvas=a;return Ph(f,c,d,e)});x("ogDestroyContext",function(a){(a=F(a))&&a.type==z&&H(a)});x("ogGetWidth",function(a){if((a=F(a))&&a.type==z)return a=a.c?a.c.width:0,a;return 0});x("ogGetHeight",function(a){if((a=F(a))&&a.type==z)return a=a.c?a.c.height:0,a;return 0});x("ogGetScene",function(a){if((a=F(a))&&a.type==z&&a.d)return a.d.id;return-1});
x("ogSetBackgroundColor",function(a,b,c,d,e){(a=F(a))&&a.type==z&&a.c&&a.c.fk(b,c,d,e)});x("ogSetTextColor",function(a,b,c,d){(a=F(a))&&a.type==z&&a.fontcolor.q(b,c,d,1)});x("ogDrawText",function(a,b,c,d){(a=F(a))&&a.type==z&&a.Rc(b,c,d)});x("ogGetTextSize",function(a,b){var c=F(a);if(c&&c.type==z&&(c=c.Lh(b)))return c;c=Array(2);c[0]=0;c[1]=0;return c});x("ogSetMouseDownFunction",function(a,b){var c=F(a);if(c&&c.type==z)c.Fd=b});
x("ogSetMouseUpFunction",function(a,b){var c=F(a);if(c&&c.type==z)c.Hd=b});x("ogSetMouseMoveFunction",function(a,b){var c=F(a);if(c&&c.type==z)c.Gd=b});x("ogSetMouseWheelFunction",function(a,b){var c=F(a);if(c&&c.type==z)c.Fc=b});x("ogSetKeyDownFunction",function(a,b){var c=F(a);if(c&&c.type==z)c.ri=b});x("ogSetKeyUpFunction",function(a,b){var c=F(a);if(c&&c.type==z)c.si=b});x("ogSetResizeFunction",function(a,b){var c=F(a);if(c&&c.type==z)c.Gc=b});
x("ogSetRenderFunction",function(a,b){var c=F(a);if(c&&c.type==z)c.Zc=b});x("ogSetTimerFunction",function(a,b){var c=F(a);if(c&&c.type==z)c.$c=b});x("ogSetRenderGeometryFunction",function(a,b){var c=F(a);if(c&&c.type==z)c.lo=b});x("ogSetBeginRenderFunction",function(a,b){var c=F(a);if(c&&c.type==z)c.Lm=b});x("ogSetEndRenderFunction",function(a,b){var c=F(a);if(c&&c.type==z)c.Mm=b});x("ogSetFlyToStartedFunction",function(a,b){var c=F(a);if(c&&c.type==z)c.Dd=b});
x("ogSetInPositionFunction",function(a,b){var c=F(a);if(c&&c.type==z)c.Ed=b});x("ogSetNumRenderPasses",function(a,b){var c=F(a);if(c&&c.type==z)c.sn=b});x("ogExec",n());x("ogSetArtworkDirectory",function(a){U=a});function Qh(a,b){var c=F(a);if(c&&c.type==z){var d={};d.type=b;return b==D||b==Na||b==Oa||b==Pa?(d=Y(A,c,d),c.d=d,d.id):(I(K("owg.og"),"** WARNING: wrong scene type"),-1)}I(K("owg.og"),"** WARNING: context is not valid");return-1}x("ogCreateScene",Qh);
x("ogGetContext",function(a){if((a=F(a))&&a.type==A)if(a=a.parent)return a.id;return-1});x("ogGetWorld",function(a){if((a=F(a))&&a.type==A)if(a=a.Te)return a.id;return-1});x("ogPickGlobe",function(a,b,c){if((a=F(a))&&a.type==A&&a.tc==D)return a.gf(b,c);return[!1,0,0,0]});x("ogToCartesian",function(a,b,c,d){if((a=F(a))&&a.type==A&&a.tc==D){var e=[];(new T(b,c,d)).ja(e)}return e||l});
x("ogToWGS84",function(a,b,c,d){if((a=F(a))&&a.type==A&&a.tc==D){var e=new T;e.ac(b,c,d);e=[e.t[0],e.t[1],e.t[2]]}return e||l});x("ogCreateCamera",function(a){if((a=F(a))&&a.type==A){var b=Y(Ca,a,l);a.Sg.push(b);return b.id}return-1});x("ogDestroyCamera",function(a){(a=F(a))&&a.type==Ca&&H(a)});x("ogSetPosition",function(a,b,c,d){(a=F(a))&&a.type==Ca&&a.ea(b,c,d)});function Rh(a){if((a=F(a))&&a.type==A)return a=a.Bd,Xb(a),a.td();return l}x("ogGetPosition",Rh);
function Sh(a,b,c,d){if((a=F(a))&&a.type==Ca)return b>360&&(b-=360),b<0&&(b=360+b),a.ie(b,c,d);return l}x("ogSetOrientation",Sh);x("ogSetOrientationFromQuaternion",function(a,b,c,d,e){if((a=F(a))&&a.type==Ca)return a.Bg(b,c,d,e);return l});function Th(a){if((a=F(a))&&a.type==A)return a=a.Bd,Xb(a),a.bf();return l}x("ogGetOrientation",Th);function Uh(a){if((a=F(a))&&a.type==A)return a.Bd.id;return-1}x("ogGetActiveCamera",Uh);x("ogSetActiveCamera",function(a){(a=F(a))&&a.type==Ca&&Tg(a.parent,a.id)});
x("ogGetNumCameras",function(a){if((a=F(a))&&a.type==A)return a.Sg.length});x("ogGetCameraAt",function(a,b){var c=F(a);if(c&&c.type==A)return c.Sg[b].id;return-1});
x("ogLookAt",function(a,b,c,d){var e=Uh(a);Xb(F(e));var f=Rh(a),g=[];(new T(f.longitude,f.latitude,f.elevation)).ja(g);var j=new N(g[0],g[1],g[2]),k=[];(new T(b,c,d)).ja(k);b=(new N(k[0],k[1],k[2])).We();b.$h(j);j=new O;j.qd(f.longitude,f.latitude);f=new O;f.Bc(g[0],g[1],g[2]);g=new O;g.S(f,j);g.ke();g=g.Ba(b);g.Pb();g=g.a;f=g[0];j=g[1];b=g[2];g=Math.acos(f/Math.sqrt(1-b*b))*57.29577951308232;j<0&&f>0&&(g=360-g);j<0&&f<0&&(g=360-g);f=-(90-Math.acos(b)*57.29577951308232);b<-0.9&&(g=180+g,f=-f);a=Th(a);
Sh(e,g,f,a.roll)});function Vh(a){if((a=F(a))&&a.type==A){var b={};b.scenetype=a.tc;b=Y(B,a,b);a.Te=b;return b.id}return-1}x("ogCreateWorld",Vh);x("ogCreateGlobe",function(a){var b=Qh(a,D),a=Vh(b),b=F(b),c=Y(Ca,b,l);Xb(c);Tg(b,c.id);b.Sg.push(c);return a});x("ogSetNorthpoleColor",function(a,b,c,d){if((a=F(a))&&a.type==B)a.parent.parent.c.d.K.La.Td=[b,c,d]});x("ogSetSouthpoleColor",function(a,b,c,d){if((a=F(a))&&a.type==B)a.parent.parent.c.d.K.La.be=[b,c,d]});
x("ogSetRenderQuality",function(a,b){var c=F(a);if(c&&c.type==B&&(c=c.parent.parent.c.d.K.La,b>0&&b<=3))c.zl=b});x("ogSetRenderEffect",function(a,b,c){(a=F(a))&&a.type==B&&a.Cg(b,c)});x("ogLoadTextureAsync",function(a,b){var c=F(a);if(c&&c.type==A){var d={};d.url=b;return Y(xa,c,d).id}return-1});x("ogDestroyTexture",function(a){(a=F(a))&&a.type==xa&&H(a)});x("ogBlitTexture",function(a,b,c,d){(a=F(a))&&a.type==xa&&a.A(b,c,d)});
x("ogAddImageLayer",function(a,b){var c=F(a);if(c&&c.type==B)return Y(qa,c,b).id;return-1});x("ogRemoveImageLayer",function(a){if((a=F(a))&&a.type==qa)a.yg(),H(a)});x("ogAddElevationLayer",function(a,b){var c=F(a);if(c&&c.type==B)return Y(ra,c,b).id;return-1});x("ogRemoveElevationLayer",function(a){if((a=F(a))&&a.type==ra)a.yg(),H(a)});x("ogCreatePOILayer",function(a,b,c,d){var e={};e.name=b;e.textstyle=c;e.iconstyle=d;if((a=F(a))&&a.type==B)return Y(ta,a,e).id;return-1});
x("ogRemovePOILayer",function(a){(a=F(a))&&a.type==ta&&H(a)});x("ogHidePOILayer",function(a){(a=F(a))&&a.type==ta&&a.X()});x("ogShowPOILayer",function(a){(a=F(a))&&a.type==ta&&a.Y()});x("ogCreatePOI",function(a,b){var c=F(a);if(c&&c.type==ta){b.textstyle=c.ee;b.iconstyle=c.Ld;var d=Y(C,c.parent.parent,b);c.ka.push(d);d.yo=c;return d.id}return-1});
x("ogDestroyPOI",function(a){if((a=F(a))&&a.type==C)if(a.i){var b=F(a.i);if(b&&b.type==ta)for(var c=0;c<b.ka.length;c++)b.ka[c]==a&&(H(b.ka[c]),b.ka.splice(c,1))}else H(a);return-1});x("ogChangePOIText",function(a,b){var c=F(a);if(c&&c.type==C){var d=c.parent.parent;c.ee&&d.c.Oe.Oj(c.da,b,c.ee)}});x("ogChangePOIIcon",function(a,b){var c=F(a);if(c&&c.type==C){var d=c.parent.parent;c.Ld&&d.c.Oe.Nj(c.da,b,c.Ld)}});x("ogChangePOISize",function(a,b){var c=F(a);c&&c.type==C&&c.da.Dg(b)});
x("ogChangePOIPositionWGS84",function(a,b,c,d){if((a=F(a))&&a.type==C){var e=[];(new T(b,c,d)).ja(e);b=e[0];c=e[1];e=e[2];a.da.Ud?a.da.ea(b,c,e,0):a.da.ea(b,c,e,l)}});x("ogChangePOIPosition",function(a,b,c,d){(a=F(a))&&a.type==C&&(a.da.Ud?a.da.ea(b,c,d,0):a.da.ea(b,c,d,l))});x("ogHidePOI",function(a){(a=F(a))&&a.type==C&&a.X()});x("ogShowPOI",function(a){(a=F(a))&&a.type==C&&a.Y()});x("ogSetPOIActiveColor",function(a,b,c,d,e){if((a=F(a))&&a.type==C)a.da.cj=new P(b,c,d,e)});
x("ogPickPOI",function(a,b,c){if((a=F(a))&&a.type==A&&a.tc==D)return a.jf(b,c);return-1});x("ogCreateGeometryLayer",function(a,b){var c={};c.name=b;var d=F(a);if(d&&d.type==B)return Y(ua,d,c).id;return-1});x("ogCreateAoeImageLayer",function(a,b){var c={};c.name=b;var d=F(a);if(d&&d.type==B)return Y(Ja,d,c).id;return-1});x("ogCreateAoeImage",function(a,b){var c=F(a);if(c&&c.type==Ja){var d=Y(Ka,c.parent.parent,b);c.Dh(d);return d.id}return-1});
x("ogDestroyAoeImage",function(a){if((a=F(a))&&a.type==Ka){var b=F(a.Gf);b&&b.type==Ja&&b.Uh(a)}return-1});x("ogHideGeometryLayer",function(a){(a=F(a))&&a.type==ua&&a.X()});x("ogShowGeometryLayer",function(a){(a=F(a))&&a.type==ua&&a.Y()});x("ogRemoveGeometryLayer",function(a){(a=F(a))&&a.type==ua&&H(a);return-1});x("ogCreateGeometry",function(a,b){var c={};c.jsonobject=b;var d=F(a);if(d&&d.type==ua)return c=Y(za,d.parent.parent,c),d.Ve(c),c.id;return-1});
x("ogLoadGeometryAsync",function(a,b){var c={};c.url=b;var d=F(a);if(d&&d.type==ua)return c=Y(za,d.parent.parent,c),d.Ve(c),c.id;return-1});x("ogDestroyGeometry",function(a){if((a=F(a))&&a.type==za){var b=F(a.Gf);b&&b.type==ua&&b.Wh(a)}return-1});x("ogSetGeometryPositionWGS84",function(a,b,c,d,e,f,g){if((a=F(a))&&a.type==za)return a.yd(b,c,d,e,f,g);return-1});x("ogSetGeometryPositionWGS84Quat",function(a,b,c,d,e){if((a=F(a))&&a.type==za)return a.mf(b,c,d,e);return-1});
x("ogGetNumMeshes",function(a){if((a=F(a))&&a.type==za)return a.pb.length;return-1});x("ogGetMeshAt",function(a,b){var c=F(a);if(c&&c.type==za)return c.pb[b].id;return-1});x("ogHideGeometry",function(a){(a=F(a))&&a.type==za&&a.X()});x("ogShowGeometry",function(a){(a=F(a))&&a.type==za&&a.Y()});x("ogPickGeometry",function(a,b,c){if((a=F(a))&&a.type==A&&a.tc==D)if(b=a.xd(b,c),b=F(b))return b.parent.parent.id;return-1});x("ogGetSurfaceAt",function(a,b){var c=F(a);if(c&&c.type==Aa)return c.vb[b].id;return-1});
x("ogHideMesh",function(a){(a=F(a))&&a.type==Aa&&a.X()});x("ogShowMesh",function(a){(a=F(a))&&a.type==Aa&&a.Y()});x("ogPickMesh",function(a,b,c){if((a=F(a))&&a.type==A&&a.tc==D)if(b=a.xd(b,c),b=F(b))return b.parent.id;return-1});x("ogHideSurface",function(a){(a=F(a))&&a.type==Ba&&a.X()});x("ogShowSurface",function(a){(a=F(a))&&a.type==Ba&&a.Y()});x("ogPickSurface",function(a,b,c){if((a=F(a))&&a.type==A&&a.tc==D)return a.xd(b,c);return-1});
x("ogCreateBillboardLayer",function(a,b){var c={};c.name=b;var d=F(a);if(d&&d.type==B)return Y(Ia,d,c).id;return-1});x("ogRemoveBillboardLayer",function(a){(a=F(a))&&a.type==Ia&&H(a)});x("ogHideBillboardLayer",function(a){(a=F(a))&&a.type==Ia&&a.X()});x("ogShowBillboardLayer",function(a){(a=F(a))&&a.type==Ia&&a.Y()});x("ogCreateBillboardFromCanvas",function(a,b,c,d,e){if((a=F(a))&&a.type==Ia){var f={};f.canvas=b;f.position=[c,d,e];b=Y(Ha,a.parent.parent,f);a.Eh(b);b.i=a.id;return b.id}return-1});
x("ogDestroyBillboard",function(a){if((a=F(a))&&a.type==Ha)if(a.i){var b=F(a.i);b&&b.type==Ia&&b.Vh(a)}else H(a);return-1});x("ogHideBillboard",function(a){(a=F(a))&&a.type==Ha&&a.X();return-1});x("ogShowBillboard",function(a){(a=F(a))&&a.type==Ha&&a.Y();return-1});x("ogPickBillboard",function(a,b,c){if((a=F(a))&&a.type==A&&a.tc==D)return a.hf(b,c);return-1});x("ogUpdateBillboard",function(a,b){var c=F(a);if(c&&c.type==Ha)c.Bb.canvas=b,c.Bb.nf();else return-1});
x("ogFlyTo",function(a,b,c,d,e,f,g){(a=F(a).parent.c)&&Ae(a.Ka,b,c,d,e,f,g)});x("ogFlyToLookAtPosition",function(a,b,c,d,e,f,g,j){(a=F(a).parent.c)&&a.Kh(b,c,d,e,f,g,j)});x("ogSetFlightDuration",function(a,b){var c=F(a).parent.c;c&&c.Ag(b)});x("ogSetCanvasSizeOffset",function(a,b,c){a=F(a).parent.c;a.Ij=b;a.Oi=c;xg()});x("ogDebug",function(){var a=new Dh;qh(a);a.ic()});x("ogWarning",function(a){I(K("warning"),a)});x("ogError",function(a){K("error").error(a)});x("ogLog",function(a){K("message").info(a)});
